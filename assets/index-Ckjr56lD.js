(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&o(u)}).observe(document,{childList:!0,subtree:!0});function t(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(r){if(r.ep)return;r.ep=!0;const l=t(r);fetch(r.href,l)}})();function XE(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var xh={exports:{}},gl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kv;function SI(){if(Kv)return gl;Kv=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(o,r,l){var u=null;if(l!==void 0&&(u=""+l),r.key!==void 0&&(u=""+r.key),"key"in r){l={};for(var d in r)d!=="key"&&(l[d]=r[d])}else l=r;return r=l.ref,{$$typeof:n,type:o,key:u,ref:r!==void 0?r:null,props:l}}return gl.Fragment=e,gl.jsx=t,gl.jsxs=t,gl}var Qv;function AI(){return Qv||(Qv=1,xh.exports=SI()),xh.exports}var w=AI(),Mh={exports:{}},Re={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $v;function CI(){if($v)return Re;$v=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),E=Symbol.iterator;function R(q){return q===null||typeof q!="object"?null:(q=E&&q[E]||q["@@iterator"],typeof q=="function"?q:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B=Object.assign,O={};function $(q,ie,ce){this.props=q,this.context=ie,this.refs=O,this.updater=ce||P}$.prototype.isReactComponent={},$.prototype.setState=function(q,ie){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,ie,"setState")},$.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function se(){}se.prototype=$.prototype;function j(q,ie,ce){this.props=q,this.context=ie,this.refs=O,this.updater=ce||P}var re=j.prototype=new se;re.constructor=j,B(re,$.prototype),re.isPureReactComponent=!0;var W=Array.isArray;function de(){}var M={H:null,A:null,T:null,S:null},x=Object.prototype.hasOwnProperty;function N(q,ie,ce){var me=ce.ref;return{$$typeof:n,type:q,key:ie,ref:me!==void 0?me:null,props:ce}}function L(q,ie){return N(q.type,ie,q.props)}function U(q){return typeof q=="object"&&q!==null&&q.$$typeof===n}function G(q){var ie={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(ce){return ie[ce]})}var D=/\/+/g;function ae(q,ie){return typeof q=="object"&&q!==null&&q.key!=null?G(""+q.key):ie.toString(36)}function be(q){switch(q.status){case"fulfilled":return q.value;case"rejected":throw q.reason;default:switch(typeof q.status=="string"?q.then(de,de):(q.status="pending",q.then(function(ie){q.status==="pending"&&(q.status="fulfilled",q.value=ie)},function(ie){q.status==="pending"&&(q.status="rejected",q.reason=ie)})),q.status){case"fulfilled":return q.value;case"rejected":throw q.reason}}throw q}function X(q,ie,ce,me,Ae){var Me=typeof q;(Me==="undefined"||Me==="boolean")&&(q=null);var Be=!1;if(q===null)Be=!0;else switch(Me){case"bigint":case"string":case"number":Be=!0;break;case"object":switch(q.$$typeof){case n:case e:Be=!0;break;case _:return Be=q._init,X(Be(q._payload),ie,ce,me,Ae)}}if(Be)return Ae=Ae(q),Be=me===""?"."+ae(q,0):me,W(Ae)?(ce="",Be!=null&&(ce=Be.replace(D,"$&/")+"/"),X(Ae,ie,ce,"",function(ns){return ns})):Ae!=null&&(U(Ae)&&(Ae=L(Ae,ce+(Ae.key==null||q&&q.key===Ae.key?"":(""+Ae.key).replace(D,"$&/")+"/")+Be)),ie.push(Ae)),1;Be=0;var Ut=me===""?".":me+":";if(W(q))for(var ft=0;ft<q.length;ft++)me=q[ft],Me=Ut+ae(me,ft),Be+=X(me,ie,ce,Me,Ae);else if(ft=R(q),typeof ft=="function")for(q=ft.call(q),ft=0;!(me=q.next()).done;)me=me.value,Me=Ut+ae(me,ft++),Be+=X(me,ie,ce,Me,Ae);else if(Me==="object"){if(typeof q.then=="function")return X(be(q),ie,ce,me,Ae);throw ie=String(q),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.")}return Be}function le(q,ie,ce){if(q==null)return q;var me=[],Ae=0;return X(q,me,"","",function(Me){return ie.call(ce,Me,Ae++)}),me}function ye(q){if(q._status===-1){var ie=q._result;ie=ie(),ie.then(function(ce){(q._status===0||q._status===-1)&&(q._status=1,q._result=ce)},function(ce){(q._status===0||q._status===-1)&&(q._status=2,q._result=ce)}),q._status===-1&&(q._status=0,q._result=ie)}if(q._status===1)return q._result.default;throw q._result}var Ve=typeof reportError=="function"?reportError:function(q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ie=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof q=="object"&&q!==null&&typeof q.message=="string"?String(q.message):String(q),error:q});if(!window.dispatchEvent(ie))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",q);return}console.error(q)},Xe={map:le,forEach:function(q,ie,ce){le(q,function(){ie.apply(this,arguments)},ce)},count:function(q){var ie=0;return le(q,function(){ie++}),ie},toArray:function(q){return le(q,function(ie){return ie})||[]},only:function(q){if(!U(q))throw Error("React.Children.only expected to receive a single React element child.");return q}};return Re.Activity=T,Re.Children=Xe,Re.Component=$,Re.Fragment=t,Re.Profiler=r,Re.PureComponent=j,Re.StrictMode=o,Re.Suspense=g,Re.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,Re.__COMPILER_RUNTIME={__proto__:null,c:function(q){return M.H.useMemoCache(q)}},Re.cache=function(q){return function(){return q.apply(null,arguments)}},Re.cacheSignal=function(){return null},Re.cloneElement=function(q,ie,ce){if(q==null)throw Error("The argument must be a React element, but you passed "+q+".");var me=B({},q.props),Ae=q.key;if(ie!=null)for(Me in ie.key!==void 0&&(Ae=""+ie.key),ie)!x.call(ie,Me)||Me==="key"||Me==="__self"||Me==="__source"||Me==="ref"&&ie.ref===void 0||(me[Me]=ie[Me]);var Me=arguments.length-2;if(Me===1)me.children=ce;else if(1<Me){for(var Be=Array(Me),Ut=0;Ut<Me;Ut++)Be[Ut]=arguments[Ut+2];me.children=Be}return N(q.type,Ae,me)},Re.createContext=function(q){return q={$$typeof:u,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null},q.Provider=q,q.Consumer={$$typeof:l,_context:q},q},Re.createElement=function(q,ie,ce){var me,Ae={},Me=null;if(ie!=null)for(me in ie.key!==void 0&&(Me=""+ie.key),ie)x.call(ie,me)&&me!=="key"&&me!=="__self"&&me!=="__source"&&(Ae[me]=ie[me]);var Be=arguments.length-2;if(Be===1)Ae.children=ce;else if(1<Be){for(var Ut=Array(Be),ft=0;ft<Be;ft++)Ut[ft]=arguments[ft+2];Ae.children=Ut}if(q&&q.defaultProps)for(me in Be=q.defaultProps,Be)Ae[me]===void 0&&(Ae[me]=Be[me]);return N(q,Me,Ae)},Re.createRef=function(){return{current:null}},Re.forwardRef=function(q){return{$$typeof:d,render:q}},Re.isValidElement=U,Re.lazy=function(q){return{$$typeof:_,_payload:{_status:-1,_result:q},_init:ye}},Re.memo=function(q,ie){return{$$typeof:m,type:q,compare:ie===void 0?null:ie}},Re.startTransition=function(q){var ie=M.T,ce={};M.T=ce;try{var me=q(),Ae=M.S;Ae!==null&&Ae(ce,me),typeof me=="object"&&me!==null&&typeof me.then=="function"&&me.then(de,Ve)}catch(Me){Ve(Me)}finally{ie!==null&&ce.types!==null&&(ie.types=ce.types),M.T=ie}},Re.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},Re.use=function(q){return M.H.use(q)},Re.useActionState=function(q,ie,ce){return M.H.useActionState(q,ie,ce)},Re.useCallback=function(q,ie){return M.H.useCallback(q,ie)},Re.useContext=function(q){return M.H.useContext(q)},Re.useDebugValue=function(){},Re.useDeferredValue=function(q,ie){return M.H.useDeferredValue(q,ie)},Re.useEffect=function(q,ie){return M.H.useEffect(q,ie)},Re.useEffectEvent=function(q){return M.H.useEffectEvent(q)},Re.useId=function(){return M.H.useId()},Re.useImperativeHandle=function(q,ie,ce){return M.H.useImperativeHandle(q,ie,ce)},Re.useInsertionEffect=function(q,ie){return M.H.useInsertionEffect(q,ie)},Re.useLayoutEffect=function(q,ie){return M.H.useLayoutEffect(q,ie)},Re.useMemo=function(q,ie){return M.H.useMemo(q,ie)},Re.useOptimistic=function(q,ie){return M.H.useOptimistic(q,ie)},Re.useReducer=function(q,ie,ce){return M.H.useReducer(q,ie,ce)},Re.useRef=function(q){return M.H.useRef(q)},Re.useState=function(q){return M.H.useState(q)},Re.useSyncExternalStore=function(q,ie,ce){return M.H.useSyncExternalStore(q,ie,ce)},Re.useTransition=function(){return M.H.useTransition()},Re.version="19.2.4",Re}var Xv;function Vp(){return Xv||(Xv=1,Mh.exports=CI()),Mh.exports}var ut=Vp();const II=XE(ut);var Dh={exports:{}},yl={},Vh={exports:{}},Ph={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wv;function RI(){return Wv||(Wv=1,(function(n){function e(X,le){var ye=X.length;X.push(le);e:for(;0<ye;){var Ve=ye-1>>>1,Xe=X[Ve];if(0<r(Xe,le))X[Ve]=le,X[ye]=Xe,ye=Ve;else break e}}function t(X){return X.length===0?null:X[0]}function o(X){if(X.length===0)return null;var le=X[0],ye=X.pop();if(ye!==le){X[0]=ye;e:for(var Ve=0,Xe=X.length,q=Xe>>>1;Ve<q;){var ie=2*(Ve+1)-1,ce=X[ie],me=ie+1,Ae=X[me];if(0>r(ce,ye))me<Xe&&0>r(Ae,ce)?(X[Ve]=Ae,X[me]=ye,Ve=me):(X[Ve]=ce,X[ie]=ye,Ve=ie);else if(me<Xe&&0>r(Ae,ye))X[Ve]=Ae,X[me]=ye,Ve=me;else break e}}return le}function r(X,le){var ye=X.sortIndex-le.sortIndex;return ye!==0?ye:X.id-le.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var u=Date,d=u.now();n.unstable_now=function(){return u.now()-d}}var g=[],m=[],_=1,T=null,E=3,R=!1,P=!1,B=!1,O=!1,$=typeof setTimeout=="function"?setTimeout:null,se=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;function re(X){for(var le=t(m);le!==null;){if(le.callback===null)o(m);else if(le.startTime<=X)o(m),le.sortIndex=le.expirationTime,e(g,le);else break;le=t(m)}}function W(X){if(B=!1,re(X),!P)if(t(g)!==null)P=!0,de||(de=!0,G());else{var le=t(m);le!==null&&be(W,le.startTime-X)}}var de=!1,M=-1,x=5,N=-1;function L(){return O?!0:!(n.unstable_now()-N<x)}function U(){if(O=!1,de){var X=n.unstable_now();N=X;var le=!0;try{e:{P=!1,B&&(B=!1,se(M),M=-1),R=!0;var ye=E;try{t:{for(re(X),T=t(g);T!==null&&!(T.expirationTime>X&&L());){var Ve=T.callback;if(typeof Ve=="function"){T.callback=null,E=T.priorityLevel;var Xe=Ve(T.expirationTime<=X);if(X=n.unstable_now(),typeof Xe=="function"){T.callback=Xe,re(X),le=!0;break t}T===t(g)&&o(g),re(X)}else o(g);T=t(g)}if(T!==null)le=!0;else{var q=t(m);q!==null&&be(W,q.startTime-X),le=!1}}break e}finally{T=null,E=ye,R=!1}le=void 0}}finally{le?G():de=!1}}}var G;if(typeof j=="function")G=function(){j(U)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,ae=D.port2;D.port1.onmessage=U,G=function(){ae.postMessage(null)}}else G=function(){$(U,0)};function be(X,le){M=$(function(){X(n.unstable_now())},le)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(X){X.callback=null},n.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<X?Math.floor(1e3/X):5},n.unstable_getCurrentPriorityLevel=function(){return E},n.unstable_next=function(X){switch(E){case 1:case 2:case 3:var le=3;break;default:le=E}var ye=E;E=le;try{return X()}finally{E=ye}},n.unstable_requestPaint=function(){O=!0},n.unstable_runWithPriority=function(X,le){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var ye=E;E=X;try{return le()}finally{E=ye}},n.unstable_scheduleCallback=function(X,le,ye){var Ve=n.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?Ve+ye:Ve):ye=Ve,X){case 1:var Xe=-1;break;case 2:Xe=250;break;case 5:Xe=1073741823;break;case 4:Xe=1e4;break;default:Xe=5e3}return Xe=ye+Xe,X={id:_++,callback:le,priorityLevel:X,startTime:ye,expirationTime:Xe,sortIndex:-1},ye>Ve?(X.sortIndex=ye,e(m,X),t(g)===null&&X===t(m)&&(B?(se(M),M=-1):B=!0,be(W,ye-Ve))):(X.sortIndex=Xe,e(g,X),P||R||(P=!0,de||(de=!0,G()))),X},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(X){var le=E;return function(){var ye=E;E=le;try{return X.apply(this,arguments)}finally{E=ye}}}})(Ph)),Ph}var Zv;function wI(){return Zv||(Zv=1,Vh.exports=RI()),Vh.exports}var Uh={exports:{}},en={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jv;function bI(){if(jv)return en;jv=1;var n=Vp();function e(g){var m="https://react.dev/errors/"+g;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)m+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+g+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var o={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function l(g,m,_){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:T==null?null:""+T,children:g,containerInfo:m,implementation:_}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(g,m){if(g==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return en.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,en.createPortal=function(g,m){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return l(g,m,null,_)},en.flushSync=function(g){var m=u.T,_=o.p;try{if(u.T=null,o.p=2,g)return g()}finally{u.T=m,o.p=_,o.d.f()}},en.preconnect=function(g,m){typeof g=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,o.d.C(g,m))},en.prefetchDNS=function(g){typeof g=="string"&&o.d.D(g)},en.preinit=function(g,m){if(typeof g=="string"&&m&&typeof m.as=="string"){var _=m.as,T=d(_,m.crossOrigin),E=typeof m.integrity=="string"?m.integrity:void 0,R=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;_==="style"?o.d.S(g,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:T,integrity:E,fetchPriority:R}):_==="script"&&o.d.X(g,{crossOrigin:T,integrity:E,fetchPriority:R,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},en.preinitModule=function(g,m){if(typeof g=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var _=d(m.as,m.crossOrigin);o.d.M(g,{crossOrigin:_,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&o.d.M(g)},en.preload=function(g,m){if(typeof g=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var _=m.as,T=d(_,m.crossOrigin);o.d.L(g,_,{crossOrigin:T,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},en.preloadModule=function(g,m){if(typeof g=="string")if(m){var _=d(m.as,m.crossOrigin);o.d.m(g,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:_,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else o.d.m(g)},en.requestFormReset=function(g){o.d.r(g)},en.unstable_batchedUpdates=function(g,m){return g(m)},en.useFormState=function(g,m,_){return u.H.useFormState(g,m,_)},en.useFormStatus=function(){return u.H.useHostTransitionStatus()},en.version="19.2.4",en}var e_;function NI(){if(e_)return Uh.exports;e_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Uh.exports=bI(),Uh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t_;function xI(){if(t_)return yl;t_=1;var n=wI(),e=Vp(),t=NI();function o(i){var s="https://react.dev/errors/"+i;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var s=i,a=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(a=s.return),i=s.return;while(i)}return s.tag===3?a:null}function u(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function d(i){if(i.tag===31){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function g(i){if(l(i)!==i)throw Error(o(188))}function m(i){var s=i.alternate;if(!s){if(s=l(i),s===null)throw Error(o(188));return s!==i?null:i}for(var a=i,c=s;;){var y=a.return;if(y===null)break;var v=y.alternate;if(v===null){if(c=y.return,c!==null){a=c;continue}break}if(y.child===v.child){for(v=y.child;v;){if(v===a)return g(y),i;if(v===c)return g(y),s;v=v.sibling}throw Error(o(188))}if(a.return!==c.return)a=y,c=v;else{for(var A=!1,I=y.child;I;){if(I===a){A=!0,a=y,c=v;break}if(I===c){A=!0,c=y,a=v;break}I=I.sibling}if(!A){for(I=v.child;I;){if(I===a){A=!0,a=v,c=y;break}if(I===c){A=!0,c=v,a=y;break}I=I.sibling}if(!A)throw Error(o(189))}}if(a.alternate!==c)throw Error(o(190))}if(a.tag!==3)throw Error(o(188));return a.stateNode.current===a?i:s}function _(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i;for(i=i.child;i!==null;){if(s=_(i),s!==null)return s;i=i.sibling}return null}var T=Object.assign,E=Symbol.for("react.element"),R=Symbol.for("react.transitional.element"),P=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),O=Symbol.for("react.strict_mode"),$=Symbol.for("react.profiler"),se=Symbol.for("react.consumer"),j=Symbol.for("react.context"),re=Symbol.for("react.forward_ref"),W=Symbol.for("react.suspense"),de=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function G(i){return i===null||typeof i!="object"?null:(i=U&&i[U]||i["@@iterator"],typeof i=="function"?i:null)}var D=Symbol.for("react.client.reference");function ae(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===D?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case B:return"Fragment";case $:return"Profiler";case O:return"StrictMode";case W:return"Suspense";case de:return"SuspenseList";case N:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case P:return"Portal";case j:return i.displayName||"Context";case se:return(i._context.displayName||"Context")+".Consumer";case re:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case M:return s=i.displayName||null,s!==null?s:ae(i.type)||"Memo";case x:s=i._payload,i=i._init;try{return ae(i(s))}catch{}}return null}var be=Array.isArray,X=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ye={pending:!1,data:null,method:null,action:null},Ve=[],Xe=-1;function q(i){return{current:i}}function ie(i){0>Xe||(i.current=Ve[Xe],Ve[Xe]=null,Xe--)}function ce(i,s){Xe++,Ve[Xe]=i.current,i.current=s}var me=q(null),Ae=q(null),Me=q(null),Be=q(null);function Ut(i,s){switch(ce(Me,s),ce(Ae,i),ce(me,null),s.nodeType){case 9:case 11:i=(i=s.documentElement)&&(i=i.namespaceURI)?gv(i):0;break;default:if(i=s.tagName,s=s.namespaceURI)s=gv(s),i=yv(s,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}ie(me),ce(me,i)}function ft(){ie(me),ie(Ae),ie(Me)}function ns(i){i.memoizedState!==null&&ce(Be,i);var s=me.current,a=yv(s,i.type);s!==a&&(ce(Ae,i),ce(me,a))}function Qs(i){Ae.current===i&&(ie(me),ie(Ae)),Be.current===i&&(ie(Be),dl._currentValue=ye)}var $s,Xs;function ci(i){if($s===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);$s=s&&s[1]||"",Xs=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+$s+i+Xs}var da=!1;function is(i,s){if(!i||da)return"";da=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(s){var ne=function(){throw Error()};if(Object.defineProperty(ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ne,[])}catch(Q){var Y=Q}Reflect.construct(i,[],ne)}else{try{ne.call()}catch(Q){Y=Q}i.call(ne.prototype)}}else{try{throw Error()}catch(Q){Y=Q}(ne=i())&&typeof ne.catch=="function"&&ne.catch(function(){})}}catch(Q){if(Q&&Y&&typeof Q.stack=="string")return[Q.stack,Y.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=c.DetermineComponentFrameRoot(),A=v[0],I=v[1];if(A&&I){var V=A.split(`
`),J=I.split(`
`);for(y=c=0;c<V.length&&!V[c].includes("DetermineComponentFrameRoot");)c++;for(;y<J.length&&!J[y].includes("DetermineComponentFrameRoot");)y++;if(c===V.length||y===J.length)for(c=V.length-1,y=J.length-1;1<=c&&0<=y&&V[c]!==J[y];)y--;for(;1<=c&&0<=y;c--,y--)if(V[c]!==J[y]){if(c!==1||y!==1)do if(c--,y--,0>y||V[c]!==J[y]){var Z=`
`+V[c].replace(" at new "," at ");return i.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",i.displayName)),Z}while(1<=c&&0<=y);break}}}finally{da=!1,Error.prepareStackTrace=a}return(a=i?i.displayName||i.name:"")?ci(a):""}function ha(i,s){switch(i.tag){case 26:case 27:case 5:return ci(i.type);case 16:return ci("Lazy");case 13:return i.child!==s&&s!==null?ci("Suspense Fallback"):ci("Suspense");case 19:return ci("SuspenseList");case 0:case 15:return is(i.type,!1);case 11:return is(i.type.render,!1);case 1:return is(i.type,!0);case 31:return ci("Activity");default:return""}}function pa(i){try{var s="",a=null;do s+=ha(i,a),a=i,i=i.return;while(i);return s}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var St=Object.prototype.hasOwnProperty,Lt=n.unstable_scheduleCallback,co=n.unstable_cancelCallback,Df=n.unstable_shouldYield,$l=n.unstable_requestPaint,rn=n.unstable_now,os=n.unstable_getCurrentPriorityLevel,ma=n.unstable_ImmediatePriority,ga=n.unstable_UserBlockingPriority,fo=n.unstable_NormalPriority,Vf=n.unstable_LowPriority,Xl=n.unstable_IdlePriority,Wl=n.log,Zl=n.unstable_setDisableYieldValue,Yn=null,zt=null;function Nn(i){if(typeof Wl=="function"&&Zl(i),zt&&typeof zt.setStrictMode=="function")try{zt.setStrictMode(Yn,i)}catch{}}var yt=Math.clz32?Math.clz32:eu,jl=Math.log,Ws=Math.LN2;function eu(i){return i>>>=0,i===0?32:31-(jl(i)/Ws|0)|0}var fi=256,ss=262144,At=4194304;function di(i){var s=i&42;if(s!==0)return s;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function hi(i,s,a){var c=i.pendingLanes;if(c===0)return 0;var y=0,v=i.suspendedLanes,A=i.pingedLanes;i=i.warmLanes;var I=c&134217727;return I!==0?(c=I&~v,c!==0?y=di(c):(A&=I,A!==0?y=di(A):a||(a=I&~i,a!==0&&(y=di(a))))):(I=c&~v,I!==0?y=di(I):A!==0?y=di(A):a||(a=c&~i,a!==0&&(y=di(a)))),y===0?0:s!==0&&s!==y&&(s&v)===0&&(v=y&-y,a=s&-s,v>=a||v===32&&(a&4194048)!==0)?s:y}function Kn(i,s){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&s)===0}function Pf(i,s){switch(i){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tu(){var i=At;return At<<=1,(At&62914560)===0&&(At=4194304),i}function pi(i){for(var s=[],a=0;31>a;a++)s.push(i);return s}function rs(i,s){i.pendingLanes|=s,s!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Uf(i,s,a,c,y,v){var A=i.pendingLanes;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=a,i.entangledLanes&=a,i.errorRecoveryDisabledLanes&=a,i.shellSuspendCounter=0;var I=i.entanglements,V=i.expirationTimes,J=i.hiddenUpdates;for(a=A&~a;0<a;){var Z=31-yt(a),ne=1<<Z;I[Z]=0,V[Z]=-1;var Y=J[Z];if(Y!==null)for(J[Z]=null,Z=0;Z<Y.length;Z++){var Q=Y[Z];Q!==null&&(Q.lane&=-536870913)}a&=~ne}c!==0&&as(i,c,0),v!==0&&y===0&&i.tag!==0&&(i.suspendedLanes|=v&~(A&~s))}function as(i,s,a){i.pendingLanes|=s,i.suspendedLanes&=~s;var c=31-yt(s);i.entangledLanes|=s,i.entanglements[c]=i.entanglements[c]|1073741824|a&261930}function ya(i,s){var a=i.entangledLanes|=s;for(i=i.entanglements;a;){var c=31-yt(a),y=1<<c;y&s|i[c]&s&&(i[c]|=s),a&=~y}}function va(i,s){var a=s&-s;return a=(a&42)!==0?1:ls(a),(a&(i.suspendedLanes|s))!==0?0:a}function ls(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function ki(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function nu(){var i=le.p;return i!==0?i:(i=window.event,i===void 0?32:Gv(i.type))}function Qn(i,s){var a=le.p;try{return le.p=i,s()}finally{le.p=a}}var $n=Math.random().toString(36).slice(2),Ct="__reactFiber$"+$n,qt="__reactProps$"+$n,mi="__reactContainer$"+$n,Zs="__reactEvents$"+$n,Lf="__reactListeners$"+$n,iu="__reactHandles$"+$n,ou="__reactResources$"+$n,gi="__reactMarker$"+$n;function js(i){delete i[Ct],delete i[qt],delete i[Zs],delete i[Lf],delete i[iu]}function yi(i){var s=i[Ct];if(s)return s;for(var a=i.parentNode;a;){if(s=a[mi]||a[Ct]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(i=Cv(i);i!==null;){if(a=i[Ct])return a;i=Cv(i)}return s}i=a,a=i.parentNode}return null}function xn(i){if(i=i[Ct]||i[mi]){var s=i.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return i}return null}function En(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i.stateNode;throw Error(o(33))}function vi(i){var s=i[ou];return s||(s=i[ou]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function It(i){i[gi]=!0}var _a=new Set,Ea={};function _i(i,s){Ei(i,s),Ei(i+"Capture",s)}function Ei(i,s){for(Ea[i]=s,i=0;i<s.length;i++)_a.add(s[i])}var Ta=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Sa={},Aa={};function su(i){return St.call(Aa,i)?!0:St.call(Sa,i)?!1:Ta.test(i)?Aa[i]=!0:(Sa[i]=!0,!1)}function er(i,s,a){if(su(s))if(a===null)i.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":i.removeAttribute(s);return;case"boolean":var c=s.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){i.removeAttribute(s);return}}i.setAttribute(s,""+a)}}function Tn(i,s,a){if(a===null)i.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(s);return}i.setAttribute(s,""+a)}}function Rt(i,s,a,c){if(c===null)i.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttributeNS(s,a,""+c)}}function Gt(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function ho(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Ca(i,s,a){var c=Object.getOwnPropertyDescriptor(i.constructor.prototype,s);if(!i.hasOwnProperty(s)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,v=c.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return y.call(this)},set:function(A){a=""+A,v.call(this,A)}}),Object.defineProperty(i,s,{enumerable:c.enumerable}),{getValue:function(){return a},setValue:function(A){a=""+A},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function We(i){if(!i._valueTracker){var s=ho(i)?"checked":"value";i._valueTracker=Ca(i,s,""+i[s])}}function us(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var a=s.getValue(),c="";return i&&(c=ho(i)?i.checked?"true":"false":i.value),i=c,i!==a?(s.setValue(i),!0):!1}function Ti(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var cs=/[\n"\\]/g;function dn(i){return i.replace(cs,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function tr(i,s,a,c,y,v,A,I){i.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?i.type=A:i.removeAttribute("type"),s!=null?A==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+Gt(s)):i.value!==""+Gt(s)&&(i.value=""+Gt(s)):A!=="submit"&&A!=="reset"||i.removeAttribute("value"),s!=null?Ia(i,A,Gt(s)):a!=null?Ia(i,A,Gt(a)):c!=null&&i.removeAttribute("value"),y==null&&v!=null&&(i.defaultChecked=!!v),y!=null&&(i.checked=y&&typeof y!="function"&&typeof y!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?i.name=""+Gt(I):i.removeAttribute("name")}function ru(i,s,a,c,y,v,A,I){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(i.type=v),s!=null||a!=null){if(!(v!=="submit"&&v!=="reset"||s!=null)){We(i);return}a=a!=null?""+Gt(a):"",s=s!=null?""+Gt(s):a,I||s===i.value||(i.value=s),i.defaultValue=s}c=c??y,c=typeof c!="function"&&typeof c!="symbol"&&!!c,i.checked=I?i.checked:!!c,i.defaultChecked=!!c,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(i.name=A),We(i)}function Ia(i,s,a){s==="number"&&Ti(i.ownerDocument)===i||i.defaultValue===""+a||(i.defaultValue=""+a)}function po(i,s,a,c){if(i=i.options,s){s={};for(var y=0;y<a.length;y++)s["$"+a[y]]=!0;for(a=0;a<i.length;a++)y=s.hasOwnProperty("$"+i[a].value),i[a].selected!==y&&(i[a].selected=y),y&&c&&(i[a].defaultSelected=!0)}else{for(a=""+Gt(a),s=null,y=0;y<i.length;y++){if(i[y].value===a){i[y].selected=!0,c&&(i[y].defaultSelected=!0);return}s!==null||i[y].disabled||(s=i[y])}s!==null&&(s.selected=!0)}}function au(i,s,a){if(s!=null&&(s=""+Gt(s),s!==i.value&&(i.value=s),a==null)){i.defaultValue!==s&&(i.defaultValue=s);return}i.defaultValue=a!=null?""+Gt(a):""}function mo(i,s,a,c){if(s==null){if(c!=null){if(a!=null)throw Error(o(92));if(be(c)){if(1<c.length)throw Error(o(93));c=c[0]}a=c}a==null&&(a=""),s=a}a=Gt(s),i.defaultValue=a,c=i.textContent,c===a&&c!==""&&c!==null&&(i.value=c),We(i)}function hn(i,s){if(s){var a=i.firstChild;if(a&&a===i.lastChild&&a.nodeType===3){a.nodeValue=s;return}}i.textContent=s}var lu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ra(i,s,a){var c=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?c?i.setProperty(s,""):s==="float"?i.cssFloat="":i[s]="":c?i.setProperty(s,a):typeof a!="number"||a===0||lu.has(s)?s==="float"?i.cssFloat=a:i[s]=(""+a).trim():i[s]=a+"px"}function wa(i,s,a){if(s!=null&&typeof s!="object")throw Error(o(62));if(i=i.style,a!=null){for(var c in a)!a.hasOwnProperty(c)||s!=null&&s.hasOwnProperty(c)||(c.indexOf("--")===0?i.setProperty(c,""):c==="float"?i.cssFloat="":i[c]="");for(var y in s)c=s[y],s.hasOwnProperty(y)&&a[y]!==c&&Ra(i,y,c)}else for(var v in s)s.hasOwnProperty(v)&&Ra(i,v,s[v])}function nr(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var uu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),go=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ir(i){return go.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Xn(){}var ba=null;function Mn(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var yo=null,Si=null;function fs(i){var s=xn(i);if(s&&(i=s.stateNode)){var a=i[qt]||null;e:switch(i=s.stateNode,s.type){case"input":if(tr(i,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=i;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+dn(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var c=a[s];if(c!==i&&c.form===i.form){var y=c[qt]||null;if(!y)throw Error(o(90));tr(c,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(s=0;s<a.length;s++)c=a[s],c.form===i.form&&us(c)}break e;case"textarea":au(i,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&po(i,!!a.multiple,s,!1)}}}var or=!1;function vo(i,s,a){if(or)return i(s,a);or=!0;try{var c=i(s);return c}finally{if(or=!1,(yo!==null||Si!==null)&&(nc(),yo&&(s=yo,i=Si,Si=yo=null,fs(s),i)))for(s=0;s<i.length;s++)fs(i[s])}}function Wn(i,s){var a=i.stateNode;if(a===null)return null;var c=a[qt]||null;if(c===null)return null;a=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(i=i.type,c=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!c;break e;default:i=!1}if(i)return null;if(a&&typeof a!="function")throw Error(o(231,s,typeof a));return a}var Dn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ds=!1;if(Dn)try{var et={};Object.defineProperty(et,"passive",{get:function(){ds=!0}}),window.addEventListener("test",et,et),window.removeEventListener("test",et,et)}catch{ds=!1}var Ai=null,Na=null,hs=null;function xa(){if(hs)return hs;var i,s=Na,a=s.length,c,y="value"in Ai?Ai.value:Ai.textContent,v=y.length;for(i=0;i<a&&s[i]===y[i];i++);var A=a-i;for(c=1;c<=A&&s[a-c]===y[v-c];c++);return hs=y.slice(i,1<c?1-c:void 0)}function ps(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function Oi(){return!0}function Zn(){return!1}function Jt(i){function s(a,c,y,v,A){this._reactName=a,this._targetInst=y,this.type=c,this.nativeEvent=v,this.target=A,this.currentTarget=null;for(var I in i)i.hasOwnProperty(I)&&(a=i[I],this[I]=a?a(v):v[I]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Oi:Zn,this.isPropagationStopped=Zn,this}return T(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Oi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Oi)},persist:function(){},isPersistent:Oi}),s}var qi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ci=Jt(qi),_o=T({},qi,{view:0,detail:0}),Ma=Jt(_o),Eo,sr,Ii,rr=T({},_o,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:To,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Ii&&(Ii&&i.type==="mousemove"?(Eo=i.screenX-Ii.screenX,sr=i.screenY-Ii.screenY):sr=Eo=0,Ii=i),Eo)},movementY:function(i){return"movementY"in i?i.movementY:sr}}),Da=Jt(rr),ms=T({},rr,{dataTransfer:0}),cu=Jt(ms),fu=T({},_o,{relatedTarget:0}),gs=Jt(fu),Va=T({},qi,{animationName:0,elapsedTime:0,pseudoElement:0}),du=Jt(Va),ar=T({},qi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),hu=Jt(ar),pu=T({},qi,{data:0}),Ri=Jt(pu),mu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vu(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=yu[i])?!!s[i]:!1}function To(){return vu}var an=T({},_o,{key:function(i){if(i.key){var s=mu[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=ps(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?gu[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:To,charCode:function(i){return i.type==="keypress"?ps(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?ps(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),_u=Jt(an),Eu=T({},rr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gi=Jt(Eu),p=T({},_o,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:To}),S=Jt(p),C=T({},qi,{propertyName:0,elapsedTime:0,pseudoElement:0}),b=Jt(C),H=T({},rr,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),K=Jt(H),ue=T({},qi,{newState:0,oldState:0}),Ne=Jt(ue),vt=[9,13,27,32],Ke=Dn&&"CompositionEvent"in window,dt=null;Dn&&"documentMode"in document&&(dt=document.documentMode);var Vn=Dn&&"TextEvent"in window&&!dt,wi=Dn&&(!Ke||dt&&8<dt&&11>=dt),jn=" ",ei=!1;function ys(i,s){switch(i){case"keyup":return vt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function lr(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ur=!1;function YA(i,s){switch(i){case"compositionend":return lr(s);case"keypress":return s.which!==32?null:(ei=!0,jn);case"textInput":return i=s.data,i===jn&&ei?null:i;default:return null}}function KA(i,s){if(ur)return i==="compositionend"||!Ke&&ys(i,s)?(i=xa(),hs=Na=Ai=null,ur=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return wi&&s.locale!=="ko"?null:s.data;default:return null}}var QA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wm(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!QA[i.type]:s==="textarea"}function bm(i,s,a,c){yo?Si?Si.push(c):Si=[c]:yo=c,s=uc(s,"onChange"),0<s.length&&(a=new Ci("onChange","change",null,a,c),i.push({event:a,listeners:s}))}var Pa=null,Ua=null;function $A(i){cv(i,0)}function Tu(i){var s=En(i);if(us(s))return i}function Nm(i,s){if(i==="change")return s}var xm=!1;if(Dn){var kf;if(Dn){var Of="oninput"in document;if(!Of){var Mm=document.createElement("div");Mm.setAttribute("oninput","return;"),Of=typeof Mm.oninput=="function"}kf=Of}else kf=!1;xm=kf&&(!document.documentMode||9<document.documentMode)}function Dm(){Pa&&(Pa.detachEvent("onpropertychange",Vm),Ua=Pa=null)}function Vm(i){if(i.propertyName==="value"&&Tu(Ua)){var s=[];bm(s,Ua,i,Mn(i)),vo($A,s)}}function XA(i,s,a){i==="focusin"?(Dm(),Pa=s,Ua=a,Pa.attachEvent("onpropertychange",Vm)):i==="focusout"&&Dm()}function WA(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Tu(Ua)}function ZA(i,s){if(i==="click")return Tu(s)}function jA(i,s){if(i==="input"||i==="change")return Tu(s)}function eC(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var Sn=typeof Object.is=="function"?Object.is:eC;function La(i,s){if(Sn(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var a=Object.keys(i),c=Object.keys(s);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var y=a[c];if(!St.call(s,y)||!Sn(i[y],s[y]))return!1}return!0}function Pm(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Um(i,s){var a=Pm(i);i=0;for(var c;a;){if(a.nodeType===3){if(c=i+a.textContent.length,i<=s&&c>=s)return{node:a,offset:s-i};i=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Pm(a)}}function Lm(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?Lm(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function km(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var s=Ti(i.document);s instanceof i.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)i=s.contentWindow;else break;s=Ti(i.document)}return s}function qf(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}var tC=Dn&&"documentMode"in document&&11>=document.documentMode,cr=null,Gf=null,ka=null,Bf=!1;function Om(i,s,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Bf||cr==null||cr!==Ti(c)||(c=cr,"selectionStart"in c&&qf(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),ka&&La(ka,c)||(ka=c,c=uc(Gf,"onSelect"),0<c.length&&(s=new Ci("onSelect","select",null,s,a),i.push({event:s,listeners:c}),s.target=cr)))}function vs(i,s){var a={};return a[i.toLowerCase()]=s.toLowerCase(),a["Webkit"+i]="webkit"+s,a["Moz"+i]="moz"+s,a}var fr={animationend:vs("Animation","AnimationEnd"),animationiteration:vs("Animation","AnimationIteration"),animationstart:vs("Animation","AnimationStart"),transitionrun:vs("Transition","TransitionRun"),transitionstart:vs("Transition","TransitionStart"),transitioncancel:vs("Transition","TransitionCancel"),transitionend:vs("Transition","TransitionEnd")},Ff={},qm={};Dn&&(qm=document.createElement("div").style,"AnimationEvent"in window||(delete fr.animationend.animation,delete fr.animationiteration.animation,delete fr.animationstart.animation),"TransitionEvent"in window||delete fr.transitionend.transition);function _s(i){if(Ff[i])return Ff[i];if(!fr[i])return i;var s=fr[i],a;for(a in s)if(s.hasOwnProperty(a)&&a in qm)return Ff[i]=s[a];return i}var Gm=_s("animationend"),Bm=_s("animationiteration"),Fm=_s("animationstart"),nC=_s("transitionrun"),iC=_s("transitionstart"),oC=_s("transitioncancel"),Hm=_s("transitionend"),zm=new Map,Hf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Hf.push("scrollEnd");function ti(i,s){zm.set(i,s),_i(s,[i])}var Su=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},Pn=[],dr=0,zf=0;function Au(){for(var i=dr,s=zf=dr=0;s<i;){var a=Pn[s];Pn[s++]=null;var c=Pn[s];Pn[s++]=null;var y=Pn[s];Pn[s++]=null;var v=Pn[s];if(Pn[s++]=null,c!==null&&y!==null){var A=c.pending;A===null?y.next=y:(y.next=A.next,A.next=y),c.pending=y}v!==0&&Jm(a,y,v)}}function Cu(i,s,a,c){Pn[dr++]=i,Pn[dr++]=s,Pn[dr++]=a,Pn[dr++]=c,zf|=c,i.lanes|=c,i=i.alternate,i!==null&&(i.lanes|=c)}function Jf(i,s,a,c){return Cu(i,s,a,c),Iu(i)}function Es(i,s){return Cu(i,null,null,s),Iu(i)}function Jm(i,s,a){i.lanes|=a;var c=i.alternate;c!==null&&(c.lanes|=a);for(var y=!1,v=i.return;v!==null;)v.childLanes|=a,c=v.alternate,c!==null&&(c.childLanes|=a),v.tag===22&&(i=v.stateNode,i===null||i._visibility&1||(y=!0)),i=v,v=v.return;return i.tag===3?(v=i.stateNode,y&&s!==null&&(y=31-yt(a),i=v.hiddenUpdates,c=i[y],c===null?i[y]=[s]:c.push(s),s.lane=a|536870912),v):null}function Iu(i){if(50<sl)throw sl=0,eh=null,Error(o(185));for(var s=i.return;s!==null;)i=s,s=i.return;return i.tag===3?i.stateNode:null}var hr={};function sC(i,s,a,c){this.tag=i,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function An(i,s,a,c){return new sC(i,s,a,c)}function Yf(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Bi(i,s){var a=i.alternate;return a===null?(a=An(i.tag,s,i.key,i.mode),a.elementType=i.elementType,a.type=i.type,a.stateNode=i.stateNode,a.alternate=i,i.alternate=a):(a.pendingProps=s,a.type=i.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=i.flags&65011712,a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,s=i.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=i.sibling,a.index=i.index,a.ref=i.ref,a.refCleanup=i.refCleanup,a}function Ym(i,s){i.flags&=65011714;var a=i.alternate;return a===null?(i.childLanes=0,i.lanes=s,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,s=a.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),i}function Ru(i,s,a,c,y,v){var A=0;if(c=i,typeof i=="function")Yf(i)&&(A=1);else if(typeof i=="string")A=cI(i,a,me.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case N:return i=An(31,a,s,y),i.elementType=N,i.lanes=v,i;case B:return Ts(a.children,y,v,s);case O:A=8,y|=24;break;case $:return i=An(12,a,s,y|2),i.elementType=$,i.lanes=v,i;case W:return i=An(13,a,s,y),i.elementType=W,i.lanes=v,i;case de:return i=An(19,a,s,y),i.elementType=de,i.lanes=v,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case j:A=10;break e;case se:A=9;break e;case re:A=11;break e;case M:A=14;break e;case x:A=16,c=null;break e}A=29,a=Error(o(130,i===null?"null":typeof i,"")),c=null}return s=An(A,a,s,y),s.elementType=i,s.type=c,s.lanes=v,s}function Ts(i,s,a,c){return i=An(7,i,c,s),i.lanes=a,i}function Kf(i,s,a){return i=An(6,i,null,s),i.lanes=a,i}function Km(i){var s=An(18,null,null,0);return s.stateNode=i,s}function Qf(i,s,a){return s=An(4,i.children!==null?i.children:[],i.key,s),s.lanes=a,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}var Qm=new WeakMap;function Un(i,s){if(typeof i=="object"&&i!==null){var a=Qm.get(i);return a!==void 0?a:(s={value:i,source:s,stack:pa(s)},Qm.set(i,s),s)}return{value:i,source:s,stack:pa(s)}}var pr=[],mr=0,wu=null,Oa=0,Ln=[],kn=0,So=null,bi=1,Ni="";function Fi(i,s){pr[mr++]=Oa,pr[mr++]=wu,wu=i,Oa=s}function $m(i,s,a){Ln[kn++]=bi,Ln[kn++]=Ni,Ln[kn++]=So,So=i;var c=bi;i=Ni;var y=32-yt(c)-1;c&=~(1<<y),a+=1;var v=32-yt(s)+y;if(30<v){var A=y-y%5;v=(c&(1<<A)-1).toString(32),c>>=A,y-=A,bi=1<<32-yt(s)+y|a<<y|c,Ni=v+i}else bi=1<<v|a<<y|c,Ni=i}function $f(i){i.return!==null&&(Fi(i,1),$m(i,1,0))}function Xf(i){for(;i===wu;)wu=pr[--mr],pr[mr]=null,Oa=pr[--mr],pr[mr]=null;for(;i===So;)So=Ln[--kn],Ln[kn]=null,Ni=Ln[--kn],Ln[kn]=null,bi=Ln[--kn],Ln[kn]=null}function Xm(i,s){Ln[kn++]=bi,Ln[kn++]=Ni,Ln[kn++]=So,bi=s.id,Ni=s.overflow,So=i}var Yt=null,at=null,Ge=!1,Ao=null,On=!1,Wf=Error(o(519));function Co(i){var s=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw qa(Un(s,i)),Wf}function Wm(i){var s=i.stateNode,a=i.type,c=i.memoizedProps;switch(s[Ct]=i,s[qt]=c,a){case"dialog":Ue("cancel",s),Ue("close",s);break;case"iframe":case"object":case"embed":Ue("load",s);break;case"video":case"audio":for(a=0;a<al.length;a++)Ue(al[a],s);break;case"source":Ue("error",s);break;case"img":case"image":case"link":Ue("error",s),Ue("load",s);break;case"details":Ue("toggle",s);break;case"input":Ue("invalid",s),ru(s,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Ue("invalid",s);break;case"textarea":Ue("invalid",s),mo(s,c.value,c.defaultValue,c.children)}a=c.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||c.suppressHydrationWarning===!0||pv(s.textContent,a)?(c.popover!=null&&(Ue("beforetoggle",s),Ue("toggle",s)),c.onScroll!=null&&Ue("scroll",s),c.onScrollEnd!=null&&Ue("scrollend",s),c.onClick!=null&&(s.onclick=Xn),s=!0):s=!1,s||Co(i,!0)}function Zm(i){for(Yt=i.return;Yt;)switch(Yt.tag){case 5:case 31:case 13:On=!1;return;case 27:case 3:On=!0;return;default:Yt=Yt.return}}function gr(i){if(i!==Yt)return!1;if(!Ge)return Zm(i),Ge=!0,!1;var s=i.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=i.type,a=!(a!=="form"&&a!=="button")||mh(i.type,i.memoizedProps)),a=!a),a&&at&&Co(i),Zm(i),s===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(o(317));at=Av(i)}else if(s===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(o(317));at=Av(i)}else s===27?(s=at,Oo(i.type)?(i=Eh,Eh=null,at=i):at=s):at=Yt?Gn(i.stateNode.nextSibling):null;return!0}function Ss(){at=Yt=null,Ge=!1}function Zf(){var i=Ao;return i!==null&&(yn===null?yn=i:yn.push.apply(yn,i),Ao=null),i}function qa(i){Ao===null?Ao=[i]:Ao.push(i)}var jf=q(null),As=null,Hi=null;function Io(i,s,a){ce(jf,s._currentValue),s._currentValue=a}function zi(i){i._currentValue=jf.current,ie(jf)}function ed(i,s,a){for(;i!==null;){var c=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),i===a)break;i=i.return}}function td(i,s,a,c){var y=i.child;for(y!==null&&(y.return=i);y!==null;){var v=y.dependencies;if(v!==null){var A=y.child;v=v.firstContext;e:for(;v!==null;){var I=v;v=y;for(var V=0;V<s.length;V++)if(I.context===s[V]){v.lanes|=a,I=v.alternate,I!==null&&(I.lanes|=a),ed(v.return,a,i),c||(A=null);break e}v=I.next}}else if(y.tag===18){if(A=y.return,A===null)throw Error(o(341));A.lanes|=a,v=A.alternate,v!==null&&(v.lanes|=a),ed(A,a,i),A=null}else A=y.child;if(A!==null)A.return=y;else for(A=y;A!==null;){if(A===i){A=null;break}if(y=A.sibling,y!==null){y.return=A.return,A=y;break}A=A.return}y=A}}function yr(i,s,a,c){i=null;for(var y=s,v=!1;y!==null;){if(!v){if((y.flags&524288)!==0)v=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var A=y.alternate;if(A===null)throw Error(o(387));if(A=A.memoizedProps,A!==null){var I=y.type;Sn(y.pendingProps.value,A.value)||(i!==null?i.push(I):i=[I])}}else if(y===Be.current){if(A=y.alternate,A===null)throw Error(o(387));A.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(i!==null?i.push(dl):i=[dl])}y=y.return}i!==null&&td(s,i,a,c),s.flags|=262144}function bu(i){for(i=i.firstContext;i!==null;){if(!Sn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Cs(i){As=i,Hi=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Kt(i){return jm(As,i)}function Nu(i,s){return As===null&&Cs(i),jm(i,s)}function jm(i,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},Hi===null){if(i===null)throw Error(o(308));Hi=s,i.dependencies={lanes:0,firstContext:s},i.flags|=524288}else Hi=Hi.next=s;return a}var rC=typeof AbortController<"u"?AbortController:function(){var i=[],s=this.signal={aborted:!1,addEventListener:function(a,c){i.push(c)}};this.abort=function(){s.aborted=!0,i.forEach(function(a){return a()})}},aC=n.unstable_scheduleCallback,lC=n.unstable_NormalPriority,wt={$$typeof:j,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function nd(){return{controller:new rC,data:new Map,refCount:0}}function Ga(i){i.refCount--,i.refCount===0&&aC(lC,function(){i.controller.abort()})}var Ba=null,id=0,vr=0,_r=null;function uC(i,s){if(Ba===null){var a=Ba=[];id=0,vr=rh(),_r={status:"pending",value:void 0,then:function(c){a.push(c)}}}return id++,s.then(eg,eg),s}function eg(){if(--id===0&&Ba!==null){_r!==null&&(_r.status="fulfilled");var i=Ba;Ba=null,vr=0,_r=null;for(var s=0;s<i.length;s++)(0,i[s])()}}function cC(i,s){var a=[],c={status:"pending",value:null,reason:null,then:function(y){a.push(y)}};return i.then(function(){c.status="fulfilled",c.value=s;for(var y=0;y<a.length;y++)(0,a[y])(s)},function(y){for(c.status="rejected",c.reason=y,y=0;y<a.length;y++)(0,a[y])(void 0)}),c}var tg=X.S;X.S=function(i,s){Oy=rn(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&uC(i,s),tg!==null&&tg(i,s)};var Is=q(null);function od(){var i=Is.current;return i!==null?i:ot.pooledCache}function xu(i,s){s===null?ce(Is,Is.current):ce(Is,s.pool)}function ng(){var i=od();return i===null?null:{parent:wt._currentValue,pool:i}}var Er=Error(o(460)),sd=Error(o(474)),Mu=Error(o(542)),Du={then:function(){}};function ig(i){return i=i.status,i==="fulfilled"||i==="rejected"}function og(i,s,a){switch(a=i[a],a===void 0?i.push(s):a!==s&&(s.then(Xn,Xn),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,rg(i),i;default:if(typeof s.status=="string")s.then(Xn,Xn);else{if(i=ot,i!==null&&100<i.shellSuspendCounter)throw Error(o(482));i=s,i.status="pending",i.then(function(c){if(s.status==="pending"){var y=s;y.status="fulfilled",y.value=c}},function(c){if(s.status==="pending"){var y=s;y.status="rejected",y.reason=c}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,rg(i),i}throw ws=s,Er}}function Rs(i){try{var s=i._init;return s(i._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(ws=a,Er):a}}var ws=null;function sg(){if(ws===null)throw Error(o(459));var i=ws;return ws=null,i}function rg(i){if(i===Er||i===Mu)throw Error(o(483))}var Tr=null,Fa=0;function Vu(i){var s=Fa;return Fa+=1,Tr===null&&(Tr=[]),og(Tr,i,s)}function Ha(i,s){s=s.props.ref,i.ref=s!==void 0?s:null}function Pu(i,s){throw s.$$typeof===E?Error(o(525)):(i=Object.prototype.toString.call(s),Error(o(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i)))}function ag(i){function s(F,k){if(i){var z=F.deletions;z===null?(F.deletions=[k],F.flags|=16):z.push(k)}}function a(F,k){if(!i)return null;for(;k!==null;)s(F,k),k=k.sibling;return null}function c(F){for(var k=new Map;F!==null;)F.key!==null?k.set(F.key,F):k.set(F.index,F),F=F.sibling;return k}function y(F,k){return F=Bi(F,k),F.index=0,F.sibling=null,F}function v(F,k,z){return F.index=z,i?(z=F.alternate,z!==null?(z=z.index,z<k?(F.flags|=67108866,k):z):(F.flags|=67108866,k)):(F.flags|=1048576,k)}function A(F){return i&&F.alternate===null&&(F.flags|=67108866),F}function I(F,k,z,ee){return k===null||k.tag!==6?(k=Kf(z,F.mode,ee),k.return=F,k):(k=y(k,z),k.return=F,k)}function V(F,k,z,ee){var _e=z.type;return _e===B?Z(F,k,z.props.children,ee,z.key):k!==null&&(k.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===x&&Rs(_e)===k.type)?(k=y(k,z.props),Ha(k,z),k.return=F,k):(k=Ru(z.type,z.key,z.props,null,F.mode,ee),Ha(k,z),k.return=F,k)}function J(F,k,z,ee){return k===null||k.tag!==4||k.stateNode.containerInfo!==z.containerInfo||k.stateNode.implementation!==z.implementation?(k=Qf(z,F.mode,ee),k.return=F,k):(k=y(k,z.children||[]),k.return=F,k)}function Z(F,k,z,ee,_e){return k===null||k.tag!==7?(k=Ts(z,F.mode,ee,_e),k.return=F,k):(k=y(k,z),k.return=F,k)}function ne(F,k,z){if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return k=Kf(""+k,F.mode,z),k.return=F,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case R:return z=Ru(k.type,k.key,k.props,null,F.mode,z),Ha(z,k),z.return=F,z;case P:return k=Qf(k,F.mode,z),k.return=F,k;case x:return k=Rs(k),ne(F,k,z)}if(be(k)||G(k))return k=Ts(k,F.mode,z,null),k.return=F,k;if(typeof k.then=="function")return ne(F,Vu(k),z);if(k.$$typeof===j)return ne(F,Nu(F,k),z);Pu(F,k)}return null}function Y(F,k,z,ee){var _e=k!==null?k.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return _e!==null?null:I(F,k,""+z,ee);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case R:return z.key===_e?V(F,k,z,ee):null;case P:return z.key===_e?J(F,k,z,ee):null;case x:return z=Rs(z),Y(F,k,z,ee)}if(be(z)||G(z))return _e!==null?null:Z(F,k,z,ee,null);if(typeof z.then=="function")return Y(F,k,Vu(z),ee);if(z.$$typeof===j)return Y(F,k,Nu(F,z),ee);Pu(F,z)}return null}function Q(F,k,z,ee,_e){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return F=F.get(z)||null,I(k,F,""+ee,_e);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case R:return F=F.get(ee.key===null?z:ee.key)||null,V(k,F,ee,_e);case P:return F=F.get(ee.key===null?z:ee.key)||null,J(k,F,ee,_e);case x:return ee=Rs(ee),Q(F,k,z,ee,_e)}if(be(ee)||G(ee))return F=F.get(z)||null,Z(k,F,ee,_e,null);if(typeof ee.then=="function")return Q(F,k,z,Vu(ee),_e);if(ee.$$typeof===j)return Q(F,k,z,Nu(k,ee),_e);Pu(k,ee)}return null}function ge(F,k,z,ee){for(var _e=null,ze=null,ve=k,De=k=0,ke=null;ve!==null&&De<z.length;De++){ve.index>De?(ke=ve,ve=null):ke=ve.sibling;var Je=Y(F,ve,z[De],ee);if(Je===null){ve===null&&(ve=ke);break}i&&ve&&Je.alternate===null&&s(F,ve),k=v(Je,k,De),ze===null?_e=Je:ze.sibling=Je,ze=Je,ve=ke}if(De===z.length)return a(F,ve),Ge&&Fi(F,De),_e;if(ve===null){for(;De<z.length;De++)ve=ne(F,z[De],ee),ve!==null&&(k=v(ve,k,De),ze===null?_e=ve:ze.sibling=ve,ze=ve);return Ge&&Fi(F,De),_e}for(ve=c(ve);De<z.length;De++)ke=Q(ve,F,De,z[De],ee),ke!==null&&(i&&ke.alternate!==null&&ve.delete(ke.key===null?De:ke.key),k=v(ke,k,De),ze===null?_e=ke:ze.sibling=ke,ze=ke);return i&&ve.forEach(function(Ho){return s(F,Ho)}),Ge&&Fi(F,De),_e}function Te(F,k,z,ee){if(z==null)throw Error(o(151));for(var _e=null,ze=null,ve=k,De=k=0,ke=null,Je=z.next();ve!==null&&!Je.done;De++,Je=z.next()){ve.index>De?(ke=ve,ve=null):ke=ve.sibling;var Ho=Y(F,ve,Je.value,ee);if(Ho===null){ve===null&&(ve=ke);break}i&&ve&&Ho.alternate===null&&s(F,ve),k=v(Ho,k,De),ze===null?_e=Ho:ze.sibling=Ho,ze=Ho,ve=ke}if(Je.done)return a(F,ve),Ge&&Fi(F,De),_e;if(ve===null){for(;!Je.done;De++,Je=z.next())Je=ne(F,Je.value,ee),Je!==null&&(k=v(Je,k,De),ze===null?_e=Je:ze.sibling=Je,ze=Je);return Ge&&Fi(F,De),_e}for(ve=c(ve);!Je.done;De++,Je=z.next())Je=Q(ve,F,De,Je.value,ee),Je!==null&&(i&&Je.alternate!==null&&ve.delete(Je.key===null?De:Je.key),k=v(Je,k,De),ze===null?_e=Je:ze.sibling=Je,ze=Je);return i&&ve.forEach(function(TI){return s(F,TI)}),Ge&&Fi(F,De),_e}function it(F,k,z,ee){if(typeof z=="object"&&z!==null&&z.type===B&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case R:e:{for(var _e=z.key;k!==null;){if(k.key===_e){if(_e=z.type,_e===B){if(k.tag===7){a(F,k.sibling),ee=y(k,z.props.children),ee.return=F,F=ee;break e}}else if(k.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===x&&Rs(_e)===k.type){a(F,k.sibling),ee=y(k,z.props),Ha(ee,z),ee.return=F,F=ee;break e}a(F,k);break}else s(F,k);k=k.sibling}z.type===B?(ee=Ts(z.props.children,F.mode,ee,z.key),ee.return=F,F=ee):(ee=Ru(z.type,z.key,z.props,null,F.mode,ee),Ha(ee,z),ee.return=F,F=ee)}return A(F);case P:e:{for(_e=z.key;k!==null;){if(k.key===_e)if(k.tag===4&&k.stateNode.containerInfo===z.containerInfo&&k.stateNode.implementation===z.implementation){a(F,k.sibling),ee=y(k,z.children||[]),ee.return=F,F=ee;break e}else{a(F,k);break}else s(F,k);k=k.sibling}ee=Qf(z,F.mode,ee),ee.return=F,F=ee}return A(F);case x:return z=Rs(z),it(F,k,z,ee)}if(be(z))return ge(F,k,z,ee);if(G(z)){if(_e=G(z),typeof _e!="function")throw Error(o(150));return z=_e.call(z),Te(F,k,z,ee)}if(typeof z.then=="function")return it(F,k,Vu(z),ee);if(z.$$typeof===j)return it(F,k,Nu(F,z),ee);Pu(F,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,k!==null&&k.tag===6?(a(F,k.sibling),ee=y(k,z),ee.return=F,F=ee):(a(F,k),ee=Kf(z,F.mode,ee),ee.return=F,F=ee),A(F)):a(F,k)}return function(F,k,z,ee){try{Fa=0;var _e=it(F,k,z,ee);return Tr=null,_e}catch(ve){if(ve===Er||ve===Mu)throw ve;var ze=An(29,ve,null,F.mode);return ze.lanes=ee,ze.return=F,ze}finally{}}}var bs=ag(!0),lg=ag(!1),Ro=!1;function rd(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ad(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function wo(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function bo(i,s,a){var c=i.updateQueue;if(c===null)return null;if(c=c.shared,(Qe&2)!==0){var y=c.pending;return y===null?s.next=s:(s.next=y.next,y.next=s),c.pending=s,s=Iu(i),Jm(i,null,a),s}return Cu(i,c,s,a),Iu(i)}function za(i,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var c=s.lanes;c&=i.pendingLanes,a|=c,s.lanes=a,ya(i,a)}}function ld(i,s){var a=i.updateQueue,c=i.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var y=null,v=null;if(a=a.firstBaseUpdate,a!==null){do{var A={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};v===null?y=v=A:v=v.next=A,a=a.next}while(a!==null);v===null?y=v=s:v=v.next=s}else y=v=s;a={baseState:c.baseState,firstBaseUpdate:y,lastBaseUpdate:v,shared:c.shared,callbacks:c.callbacks},i.updateQueue=a;return}i=a.lastBaseUpdate,i===null?a.firstBaseUpdate=s:i.next=s,a.lastBaseUpdate=s}var ud=!1;function Ja(){if(ud){var i=_r;if(i!==null)throw i}}function Ya(i,s,a,c){ud=!1;var y=i.updateQueue;Ro=!1;var v=y.firstBaseUpdate,A=y.lastBaseUpdate,I=y.shared.pending;if(I!==null){y.shared.pending=null;var V=I,J=V.next;V.next=null,A===null?v=J:A.next=J,A=V;var Z=i.alternate;Z!==null&&(Z=Z.updateQueue,I=Z.lastBaseUpdate,I!==A&&(I===null?Z.firstBaseUpdate=J:I.next=J,Z.lastBaseUpdate=V))}if(v!==null){var ne=y.baseState;A=0,Z=J=V=null,I=v;do{var Y=I.lane&-536870913,Q=Y!==I.lane;if(Q?(Le&Y)===Y:(c&Y)===Y){Y!==0&&Y===vr&&(ud=!0),Z!==null&&(Z=Z.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});e:{var ge=i,Te=I;Y=s;var it=a;switch(Te.tag){case 1:if(ge=Te.payload,typeof ge=="function"){ne=ge.call(it,ne,Y);break e}ne=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=Te.payload,Y=typeof ge=="function"?ge.call(it,ne,Y):ge,Y==null)break e;ne=T({},ne,Y);break e;case 2:Ro=!0}}Y=I.callback,Y!==null&&(i.flags|=64,Q&&(i.flags|=8192),Q=y.callbacks,Q===null?y.callbacks=[Y]:Q.push(Y))}else Q={lane:Y,tag:I.tag,payload:I.payload,callback:I.callback,next:null},Z===null?(J=Z=Q,V=ne):Z=Z.next=Q,A|=Y;if(I=I.next,I===null){if(I=y.shared.pending,I===null)break;Q=I,I=Q.next,Q.next=null,y.lastBaseUpdate=Q,y.shared.pending=null}}while(!0);Z===null&&(V=ne),y.baseState=V,y.firstBaseUpdate=J,y.lastBaseUpdate=Z,v===null&&(y.shared.lanes=0),Vo|=A,i.lanes=A,i.memoizedState=ne}}function ug(i,s){if(typeof i!="function")throw Error(o(191,i));i.call(s)}function cg(i,s){var a=i.callbacks;if(a!==null)for(i.callbacks=null,i=0;i<a.length;i++)ug(a[i],s)}var Sr=q(null),Uu=q(0);function fg(i,s){i=ji,ce(Uu,i),ce(Sr,s),ji=i|s.baseLanes}function cd(){ce(Uu,ji),ce(Sr,Sr.current)}function fd(){ji=Uu.current,ie(Sr),ie(Uu)}var Cn=q(null),qn=null;function No(i){var s=i.alternate;ce(_t,_t.current&1),ce(Cn,i),qn===null&&(s===null||Sr.current!==null||s.memoizedState!==null)&&(qn=i)}function dd(i){ce(_t,_t.current),ce(Cn,i),qn===null&&(qn=i)}function dg(i){i.tag===22?(ce(_t,_t.current),ce(Cn,i),qn===null&&(qn=i)):xo()}function xo(){ce(_t,_t.current),ce(Cn,Cn.current)}function In(i){ie(Cn),qn===i&&(qn=null),ie(_t)}var _t=q(0);function Lu(i){for(var s=i;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||vh(a)||_h(a)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Ji=0,xe=null,tt=null,bt=null,ku=!1,Ar=!1,Ns=!1,Ou=0,Ka=0,Cr=null,fC=0;function mt(){throw Error(o(321))}function hd(i,s){if(s===null)return!1;for(var a=0;a<s.length&&a<i.length;a++)if(!Sn(i[a],s[a]))return!1;return!0}function pd(i,s,a,c,y,v){return Ji=v,xe=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,X.H=i===null||i.memoizedState===null?$g:Nd,Ns=!1,v=a(c,y),Ns=!1,Ar&&(v=pg(s,a,c,y)),hg(i),v}function hg(i){X.H=Xa;var s=tt!==null&&tt.next!==null;if(Ji=0,bt=tt=xe=null,ku=!1,Ka=0,Cr=null,s)throw Error(o(300));i===null||Nt||(i=i.dependencies,i!==null&&bu(i)&&(Nt=!0))}function pg(i,s,a,c){xe=i;var y=0;do{if(Ar&&(Cr=null),Ka=0,Ar=!1,25<=y)throw Error(o(301));if(y+=1,bt=tt=null,i.updateQueue!=null){var v=i.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}X.H=Xg,v=s(a,c)}while(Ar);return v}function dC(){var i=X.H,s=i.useState()[0];return s=typeof s.then=="function"?Qa(s):s,i=i.useState()[0],(tt!==null?tt.memoizedState:null)!==i&&(xe.flags|=1024),s}function md(){var i=Ou!==0;return Ou=0,i}function gd(i,s,a){s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~a}function yd(i){if(ku){for(i=i.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}ku=!1}Ji=0,bt=tt=xe=null,Ar=!1,Ka=Ou=0,Cr=null}function ln(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bt===null?xe.memoizedState=bt=i:bt=bt.next=i,bt}function Et(){if(tt===null){var i=xe.alternate;i=i!==null?i.memoizedState:null}else i=tt.next;var s=bt===null?xe.memoizedState:bt.next;if(s!==null)bt=s,tt=i;else{if(i===null)throw xe.alternate===null?Error(o(467)):Error(o(310));tt=i,i={memoizedState:tt.memoizedState,baseState:tt.baseState,baseQueue:tt.baseQueue,queue:tt.queue,next:null},bt===null?xe.memoizedState=bt=i:bt=bt.next=i}return bt}function qu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Qa(i){var s=Ka;return Ka+=1,Cr===null&&(Cr=[]),i=og(Cr,i,s),s=xe,(bt===null?s.memoizedState:bt.next)===null&&(s=s.alternate,X.H=s===null||s.memoizedState===null?$g:Nd),i}function Gu(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Qa(i);if(i.$$typeof===j)return Kt(i)}throw Error(o(438,String(i)))}function vd(i){var s=null,a=xe.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var c=xe.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(s={data:c.data.map(function(y){return y.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=qu(),xe.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(i),c=0;c<i;c++)a[c]=L;return s.index++,a}function Yi(i,s){return typeof s=="function"?s(i):s}function Bu(i){var s=Et();return _d(s,tt,i)}function _d(i,s,a){var c=i.queue;if(c===null)throw Error(o(311));c.lastRenderedReducer=a;var y=i.baseQueue,v=c.pending;if(v!==null){if(y!==null){var A=y.next;y.next=v.next,v.next=A}s.baseQueue=y=v,c.pending=null}if(v=i.baseState,y===null)i.memoizedState=v;else{s=y.next;var I=A=null,V=null,J=s,Z=!1;do{var ne=J.lane&-536870913;if(ne!==J.lane?(Le&ne)===ne:(Ji&ne)===ne){var Y=J.revertLane;if(Y===0)V!==null&&(V=V.next={lane:0,revertLane:0,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),ne===vr&&(Z=!0);else if((Ji&Y)===Y){J=J.next,Y===vr&&(Z=!0);continue}else ne={lane:0,revertLane:J.revertLane,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},V===null?(I=V=ne,A=v):V=V.next=ne,xe.lanes|=Y,Vo|=Y;ne=J.action,Ns&&a(v,ne),v=J.hasEagerState?J.eagerState:a(v,ne)}else Y={lane:ne,revertLane:J.revertLane,gesture:J.gesture,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},V===null?(I=V=Y,A=v):V=V.next=Y,xe.lanes|=ne,Vo|=ne;J=J.next}while(J!==null&&J!==s);if(V===null?A=v:V.next=I,!Sn(v,i.memoizedState)&&(Nt=!0,Z&&(a=_r,a!==null)))throw a;i.memoizedState=v,i.baseState=A,i.baseQueue=V,c.lastRenderedState=v}return y===null&&(c.lanes=0),[i.memoizedState,c.dispatch]}function Ed(i){var s=Et(),a=s.queue;if(a===null)throw Error(o(311));a.lastRenderedReducer=i;var c=a.dispatch,y=a.pending,v=s.memoizedState;if(y!==null){a.pending=null;var A=y=y.next;do v=i(v,A.action),A=A.next;while(A!==y);Sn(v,s.memoizedState)||(Nt=!0),s.memoizedState=v,s.baseQueue===null&&(s.baseState=v),a.lastRenderedState=v}return[v,c]}function mg(i,s,a){var c=xe,y=Et(),v=Ge;if(v){if(a===void 0)throw Error(o(407));a=a()}else a=s();var A=!Sn((tt||y).memoizedState,a);if(A&&(y.memoizedState=a,Nt=!0),y=y.queue,Ad(vg.bind(null,c,y,i),[i]),y.getSnapshot!==s||A||bt!==null&&bt.memoizedState.tag&1){if(c.flags|=2048,Ir(9,{destroy:void 0},yg.bind(null,c,y,a,s),null),ot===null)throw Error(o(349));v||(Ji&127)!==0||gg(c,s,a)}return a}function gg(i,s,a){i.flags|=16384,i={getSnapshot:s,value:a},s=xe.updateQueue,s===null?(s=qu(),xe.updateQueue=s,s.stores=[i]):(a=s.stores,a===null?s.stores=[i]:a.push(i))}function yg(i,s,a,c){s.value=a,s.getSnapshot=c,_g(s)&&Eg(i)}function vg(i,s,a){return a(function(){_g(s)&&Eg(i)})}function _g(i){var s=i.getSnapshot;i=i.value;try{var a=s();return!Sn(i,a)}catch{return!0}}function Eg(i){var s=Es(i,2);s!==null&&vn(s,i,2)}function Td(i){var s=ln();if(typeof i=="function"){var a=i;if(i=a(),Ns){Nn(!0);try{a()}finally{Nn(!1)}}}return s.memoizedState=s.baseState=i,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yi,lastRenderedState:i},s}function Tg(i,s,a,c){return i.baseState=a,_d(i,tt,typeof c=="function"?c:Yi)}function hC(i,s,a,c,y){if(zu(i))throw Error(o(485));if(i=s.action,i!==null){var v={payload:y,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){v.listeners.push(A)}};X.T!==null?a(!0):v.isTransition=!1,c(v),a=s.pending,a===null?(v.next=s.pending=v,Sg(s,v)):(v.next=a.next,s.pending=a.next=v)}}function Sg(i,s){var a=s.action,c=s.payload,y=i.state;if(s.isTransition){var v=X.T,A={};X.T=A;try{var I=a(y,c),V=X.S;V!==null&&V(A,I),Ag(i,s,I)}catch(J){Sd(i,s,J)}finally{v!==null&&A.types!==null&&(v.types=A.types),X.T=v}}else try{v=a(y,c),Ag(i,s,v)}catch(J){Sd(i,s,J)}}function Ag(i,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(c){Cg(i,s,c)},function(c){return Sd(i,s,c)}):Cg(i,s,a)}function Cg(i,s,a){s.status="fulfilled",s.value=a,Ig(s),i.state=a,s=i.pending,s!==null&&(a=s.next,a===s?i.pending=null:(a=a.next,s.next=a,Sg(i,a)))}function Sd(i,s,a){var c=i.pending;if(i.pending=null,c!==null){c=c.next;do s.status="rejected",s.reason=a,Ig(s),s=s.next;while(s!==c)}i.action=null}function Ig(i){i=i.listeners;for(var s=0;s<i.length;s++)(0,i[s])()}function Rg(i,s){return s}function wg(i,s){if(Ge){var a=ot.formState;if(a!==null){e:{var c=xe;if(Ge){if(at){t:{for(var y=at,v=On;y.nodeType!==8;){if(!v){y=null;break t}if(y=Gn(y.nextSibling),y===null){y=null;break t}}v=y.data,y=v==="F!"||v==="F"?y:null}if(y){at=Gn(y.nextSibling),c=y.data==="F!";break e}}Co(c)}c=!1}c&&(s=a[0])}}return a=ln(),a.memoizedState=a.baseState=s,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rg,lastRenderedState:s},a.queue=c,a=Yg.bind(null,xe,c),c.dispatch=a,c=Td(!1),v=bd.bind(null,xe,!1,c.queue),c=ln(),y={state:s,dispatch:null,action:i,pending:null},c.queue=y,a=hC.bind(null,xe,y,v,a),y.dispatch=a,c.memoizedState=i,[s,a,!1]}function bg(i){var s=Et();return Ng(s,tt,i)}function Ng(i,s,a){if(s=_d(i,s,Rg)[0],i=Bu(Yi)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var c=Qa(s)}catch(A){throw A===Er?Mu:A}else c=s;s=Et();var y=s.queue,v=y.dispatch;return a!==s.memoizedState&&(xe.flags|=2048,Ir(9,{destroy:void 0},pC.bind(null,y,a),null)),[c,v,i]}function pC(i,s){i.action=s}function xg(i){var s=Et(),a=tt;if(a!==null)return Ng(s,a,i);Et(),s=s.memoizedState,a=Et();var c=a.queue.dispatch;return a.memoizedState=i,[s,c,!1]}function Ir(i,s,a,c){return i={tag:i,create:a,deps:c,inst:s,next:null},s=xe.updateQueue,s===null&&(s=qu(),xe.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=i.next=i:(c=a.next,a.next=i,i.next=c,s.lastEffect=i),i}function Mg(){return Et().memoizedState}function Fu(i,s,a,c){var y=ln();xe.flags|=i,y.memoizedState=Ir(1|s,{destroy:void 0},a,c===void 0?null:c)}function Hu(i,s,a,c){var y=Et();c=c===void 0?null:c;var v=y.memoizedState.inst;tt!==null&&c!==null&&hd(c,tt.memoizedState.deps)?y.memoizedState=Ir(s,v,a,c):(xe.flags|=i,y.memoizedState=Ir(1|s,v,a,c))}function Dg(i,s){Fu(8390656,8,i,s)}function Ad(i,s){Hu(2048,8,i,s)}function mC(i){xe.flags|=4;var s=xe.updateQueue;if(s===null)s=qu(),xe.updateQueue=s,s.events=[i];else{var a=s.events;a===null?s.events=[i]:a.push(i)}}function Vg(i){var s=Et().memoizedState;return mC({ref:s,nextImpl:i}),function(){if((Qe&2)!==0)throw Error(o(440));return s.impl.apply(void 0,arguments)}}function Pg(i,s){return Hu(4,2,i,s)}function Ug(i,s){return Hu(4,4,i,s)}function Lg(i,s){if(typeof s=="function"){i=i();var a=s(i);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function kg(i,s,a){a=a!=null?a.concat([i]):null,Hu(4,4,Lg.bind(null,s,i),a)}function Cd(){}function Og(i,s){var a=Et();s=s===void 0?null:s;var c=a.memoizedState;return s!==null&&hd(s,c[1])?c[0]:(a.memoizedState=[i,s],i)}function qg(i,s){var a=Et();s=s===void 0?null:s;var c=a.memoizedState;if(s!==null&&hd(s,c[1]))return c[0];if(c=i(),Ns){Nn(!0);try{i()}finally{Nn(!1)}}return a.memoizedState=[c,s],c}function Id(i,s,a){return a===void 0||(Ji&1073741824)!==0&&(Le&261930)===0?i.memoizedState=s:(i.memoizedState=a,i=Gy(),xe.lanes|=i,Vo|=i,a)}function Gg(i,s,a,c){return Sn(a,s)?a:Sr.current!==null?(i=Id(i,a,c),Sn(i,s)||(Nt=!0),i):(Ji&42)===0||(Ji&1073741824)!==0&&(Le&261930)===0?(Nt=!0,i.memoizedState=a):(i=Gy(),xe.lanes|=i,Vo|=i,s)}function Bg(i,s,a,c,y){var v=le.p;le.p=v!==0&&8>v?v:8;var A=X.T,I={};X.T=I,bd(i,!1,s,a);try{var V=y(),J=X.S;if(J!==null&&J(I,V),V!==null&&typeof V=="object"&&typeof V.then=="function"){var Z=cC(V,c);$a(i,s,Z,bn(i))}else $a(i,s,c,bn(i))}catch(ne){$a(i,s,{then:function(){},status:"rejected",reason:ne},bn())}finally{le.p=v,A!==null&&I.types!==null&&(A.types=I.types),X.T=A}}function gC(){}function Rd(i,s,a,c){if(i.tag!==5)throw Error(o(476));var y=Fg(i).queue;Bg(i,y,s,ye,a===null?gC:function(){return Hg(i),a(c)})}function Fg(i){var s=i.memoizedState;if(s!==null)return s;s={memoizedState:ye,baseState:ye,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yi,lastRenderedState:ye},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yi,lastRenderedState:a},next:null},i.memoizedState=s,i=i.alternate,i!==null&&(i.memoizedState=s),s}function Hg(i){var s=Fg(i);s.next===null&&(s=i.alternate.memoizedState),$a(i,s.next.queue,{},bn())}function wd(){return Kt(dl)}function zg(){return Et().memoizedState}function Jg(){return Et().memoizedState}function yC(i){for(var s=i.return;s!==null;){switch(s.tag){case 24:case 3:var a=bn();i=wo(a);var c=bo(s,i,a);c!==null&&(vn(c,s,a),za(c,s,a)),s={cache:nd()},i.payload=s;return}s=s.return}}function vC(i,s,a){var c=bn();a={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},zu(i)?Kg(s,a):(a=Jf(i,s,a,c),a!==null&&(vn(a,i,c),Qg(a,s,c)))}function Yg(i,s,a){var c=bn();$a(i,s,a,c)}function $a(i,s,a,c){var y={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(zu(i))Kg(s,y);else{var v=i.alternate;if(i.lanes===0&&(v===null||v.lanes===0)&&(v=s.lastRenderedReducer,v!==null))try{var A=s.lastRenderedState,I=v(A,a);if(y.hasEagerState=!0,y.eagerState=I,Sn(I,A))return Cu(i,s,y,0),ot===null&&Au(),!1}catch{}finally{}if(a=Jf(i,s,y,c),a!==null)return vn(a,i,c),Qg(a,s,c),!0}return!1}function bd(i,s,a,c){if(c={lane:2,revertLane:rh(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},zu(i)){if(s)throw Error(o(479))}else s=Jf(i,a,c,2),s!==null&&vn(s,i,2)}function zu(i){var s=i.alternate;return i===xe||s!==null&&s===xe}function Kg(i,s){Ar=ku=!0;var a=i.pending;a===null?s.next=s:(s.next=a.next,a.next=s),i.pending=s}function Qg(i,s,a){if((a&4194048)!==0){var c=s.lanes;c&=i.pendingLanes,a|=c,s.lanes=a,ya(i,a)}}var Xa={readContext:Kt,use:Gu,useCallback:mt,useContext:mt,useEffect:mt,useImperativeHandle:mt,useLayoutEffect:mt,useInsertionEffect:mt,useMemo:mt,useReducer:mt,useRef:mt,useState:mt,useDebugValue:mt,useDeferredValue:mt,useTransition:mt,useSyncExternalStore:mt,useId:mt,useHostTransitionStatus:mt,useFormState:mt,useActionState:mt,useOptimistic:mt,useMemoCache:mt,useCacheRefresh:mt};Xa.useEffectEvent=mt;var $g={readContext:Kt,use:Gu,useCallback:function(i,s){return ln().memoizedState=[i,s===void 0?null:s],i},useContext:Kt,useEffect:Dg,useImperativeHandle:function(i,s,a){a=a!=null?a.concat([i]):null,Fu(4194308,4,Lg.bind(null,s,i),a)},useLayoutEffect:function(i,s){return Fu(4194308,4,i,s)},useInsertionEffect:function(i,s){Fu(4,2,i,s)},useMemo:function(i,s){var a=ln();s=s===void 0?null:s;var c=i();if(Ns){Nn(!0);try{i()}finally{Nn(!1)}}return a.memoizedState=[c,s],c},useReducer:function(i,s,a){var c=ln();if(a!==void 0){var y=a(s);if(Ns){Nn(!0);try{a(s)}finally{Nn(!1)}}}else y=s;return c.memoizedState=c.baseState=y,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:y},c.queue=i,i=i.dispatch=vC.bind(null,xe,i),[c.memoizedState,i]},useRef:function(i){var s=ln();return i={current:i},s.memoizedState=i},useState:function(i){i=Td(i);var s=i.queue,a=Yg.bind(null,xe,s);return s.dispatch=a,[i.memoizedState,a]},useDebugValue:Cd,useDeferredValue:function(i,s){var a=ln();return Id(a,i,s)},useTransition:function(){var i=Td(!1);return i=Bg.bind(null,xe,i.queue,!0,!1),ln().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,s,a){var c=xe,y=ln();if(Ge){if(a===void 0)throw Error(o(407));a=a()}else{if(a=s(),ot===null)throw Error(o(349));(Le&127)!==0||gg(c,s,a)}y.memoizedState=a;var v={value:a,getSnapshot:s};return y.queue=v,Dg(vg.bind(null,c,v,i),[i]),c.flags|=2048,Ir(9,{destroy:void 0},yg.bind(null,c,v,a,s),null),a},useId:function(){var i=ln(),s=ot.identifierPrefix;if(Ge){var a=Ni,c=bi;a=(c&~(1<<32-yt(c)-1)).toString(32)+a,s="_"+s+"R_"+a,a=Ou++,0<a&&(s+="H"+a.toString(32)),s+="_"}else a=fC++,s="_"+s+"r_"+a.toString(32)+"_";return i.memoizedState=s},useHostTransitionStatus:wd,useFormState:wg,useActionState:wg,useOptimistic:function(i){var s=ln();s.memoizedState=s.baseState=i;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=bd.bind(null,xe,!0,a),a.dispatch=s,[i,s]},useMemoCache:vd,useCacheRefresh:function(){return ln().memoizedState=yC.bind(null,xe)},useEffectEvent:function(i){var s=ln(),a={impl:i};return s.memoizedState=a,function(){if((Qe&2)!==0)throw Error(o(440));return a.impl.apply(void 0,arguments)}}},Nd={readContext:Kt,use:Gu,useCallback:Og,useContext:Kt,useEffect:Ad,useImperativeHandle:kg,useInsertionEffect:Pg,useLayoutEffect:Ug,useMemo:qg,useReducer:Bu,useRef:Mg,useState:function(){return Bu(Yi)},useDebugValue:Cd,useDeferredValue:function(i,s){var a=Et();return Gg(a,tt.memoizedState,i,s)},useTransition:function(){var i=Bu(Yi)[0],s=Et().memoizedState;return[typeof i=="boolean"?i:Qa(i),s]},useSyncExternalStore:mg,useId:zg,useHostTransitionStatus:wd,useFormState:bg,useActionState:bg,useOptimistic:function(i,s){var a=Et();return Tg(a,tt,i,s)},useMemoCache:vd,useCacheRefresh:Jg};Nd.useEffectEvent=Vg;var Xg={readContext:Kt,use:Gu,useCallback:Og,useContext:Kt,useEffect:Ad,useImperativeHandle:kg,useInsertionEffect:Pg,useLayoutEffect:Ug,useMemo:qg,useReducer:Ed,useRef:Mg,useState:function(){return Ed(Yi)},useDebugValue:Cd,useDeferredValue:function(i,s){var a=Et();return tt===null?Id(a,i,s):Gg(a,tt.memoizedState,i,s)},useTransition:function(){var i=Ed(Yi)[0],s=Et().memoizedState;return[typeof i=="boolean"?i:Qa(i),s]},useSyncExternalStore:mg,useId:zg,useHostTransitionStatus:wd,useFormState:xg,useActionState:xg,useOptimistic:function(i,s){var a=Et();return tt!==null?Tg(a,tt,i,s):(a.baseState=i,[i,a.queue.dispatch])},useMemoCache:vd,useCacheRefresh:Jg};Xg.useEffectEvent=Vg;function xd(i,s,a,c){s=i.memoizedState,a=a(c,s),a=a==null?s:T({},s,a),i.memoizedState=a,i.lanes===0&&(i.updateQueue.baseState=a)}var Md={enqueueSetState:function(i,s,a){i=i._reactInternals;var c=bn(),y=wo(c);y.payload=s,a!=null&&(y.callback=a),s=bo(i,y,c),s!==null&&(vn(s,i,c),za(s,i,c))},enqueueReplaceState:function(i,s,a){i=i._reactInternals;var c=bn(),y=wo(c);y.tag=1,y.payload=s,a!=null&&(y.callback=a),s=bo(i,y,c),s!==null&&(vn(s,i,c),za(s,i,c))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var a=bn(),c=wo(a);c.tag=2,s!=null&&(c.callback=s),s=bo(i,c,a),s!==null&&(vn(s,i,a),za(s,i,a))}};function Wg(i,s,a,c,y,v,A){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(c,v,A):s.prototype&&s.prototype.isPureReactComponent?!La(a,c)||!La(y,v):!0}function Zg(i,s,a,c){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,c),s.state!==i&&Md.enqueueReplaceState(s,s.state,null)}function xs(i,s){var a=s;if("ref"in s){a={};for(var c in s)c!=="ref"&&(a[c]=s[c])}if(i=i.defaultProps){a===s&&(a=T({},a));for(var y in i)a[y]===void 0&&(a[y]=i[y])}return a}function jg(i){Su(i)}function ey(i){console.error(i)}function ty(i){Su(i)}function Ju(i,s){try{var a=i.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(c){setTimeout(function(){throw c})}}function ny(i,s,a){try{var c=i.onCaughtError;c(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Dd(i,s,a){return a=wo(a),a.tag=3,a.payload={element:null},a.callback=function(){Ju(i,s)},a}function iy(i){return i=wo(i),i.tag=3,i}function oy(i,s,a,c){var y=a.type.getDerivedStateFromError;if(typeof y=="function"){var v=c.value;i.payload=function(){return y(v)},i.callback=function(){ny(s,a,c)}}var A=a.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(i.callback=function(){ny(s,a,c),typeof y!="function"&&(Po===null?Po=new Set([this]):Po.add(this));var I=c.stack;this.componentDidCatch(c.value,{componentStack:I!==null?I:""})})}function _C(i,s,a,c,y){if(a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(s=a.alternate,s!==null&&yr(s,a,y,!0),a=Cn.current,a!==null){switch(a.tag){case 31:case 13:return qn===null?ic():a.alternate===null&&gt===0&&(gt=3),a.flags&=-257,a.flags|=65536,a.lanes=y,c===Du?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([c]):s.add(c),ih(i,c,y)),!1;case 22:return a.flags|=65536,c===Du?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([c])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([c]):a.add(c)),ih(i,c,y)),!1}throw Error(o(435,a.tag))}return ih(i,c,y),ic(),!1}if(Ge)return s=Cn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=y,c!==Wf&&(i=Error(o(422),{cause:c}),qa(Un(i,a)))):(c!==Wf&&(s=Error(o(423),{cause:c}),qa(Un(s,a))),i=i.current.alternate,i.flags|=65536,y&=-y,i.lanes|=y,c=Un(c,a),y=Dd(i.stateNode,c,y),ld(i,y),gt!==4&&(gt=2)),!1;var v=Error(o(520),{cause:c});if(v=Un(v,a),ol===null?ol=[v]:ol.push(v),gt!==4&&(gt=2),s===null)return!0;c=Un(c,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,i=y&-y,a.lanes|=i,i=Dd(a.stateNode,c,i),ld(a,i),!1;case 1:if(s=a.type,v=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Po===null||!Po.has(v))))return a.flags|=65536,y&=-y,a.lanes|=y,y=iy(y),oy(y,i,a,c),ld(a,y),!1}a=a.return}while(a!==null);return!1}var Vd=Error(o(461)),Nt=!1;function Qt(i,s,a,c){s.child=i===null?lg(s,null,a,c):bs(s,i.child,a,c)}function sy(i,s,a,c,y){a=a.render;var v=s.ref;if("ref"in c){var A={};for(var I in c)I!=="ref"&&(A[I]=c[I])}else A=c;return Cs(s),c=pd(i,s,a,A,v,y),I=md(),i!==null&&!Nt?(gd(i,s,y),Ki(i,s,y)):(Ge&&I&&$f(s),s.flags|=1,Qt(i,s,c,y),s.child)}function ry(i,s,a,c,y){if(i===null){var v=a.type;return typeof v=="function"&&!Yf(v)&&v.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=v,ay(i,s,v,c,y)):(i=Ru(a.type,null,c,s,s.mode,y),i.ref=s.ref,i.return=s,s.child=i)}if(v=i.child,!Bd(i,y)){var A=v.memoizedProps;if(a=a.compare,a=a!==null?a:La,a(A,c)&&i.ref===s.ref)return Ki(i,s,y)}return s.flags|=1,i=Bi(v,c),i.ref=s.ref,i.return=s,s.child=i}function ay(i,s,a,c,y){if(i!==null){var v=i.memoizedProps;if(La(v,c)&&i.ref===s.ref)if(Nt=!1,s.pendingProps=c=v,Bd(i,y))(i.flags&131072)!==0&&(Nt=!0);else return s.lanes=i.lanes,Ki(i,s,y)}return Pd(i,s,a,c,y)}function ly(i,s,a,c){var y=c.children,v=i!==null?i.memoizedState:null;if(i===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((s.flags&128)!==0){if(v=v!==null?v.baseLanes|a:a,i!==null){for(c=s.child=i.child,y=0;c!==null;)y=y|c.lanes|c.childLanes,c=c.sibling;c=y&~v}else c=0,s.child=null;return uy(i,s,v,a,c)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},i!==null&&xu(s,v!==null?v.cachePool:null),v!==null?fg(s,v):cd(),dg(s);else return c=s.lanes=536870912,uy(i,s,v!==null?v.baseLanes|a:a,a,c)}else v!==null?(xu(s,v.cachePool),fg(s,v),xo(),s.memoizedState=null):(i!==null&&xu(s,null),cd(),xo());return Qt(i,s,y,a),s.child}function Wa(i,s){return i!==null&&i.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function uy(i,s,a,c,y){var v=od();return v=v===null?null:{parent:wt._currentValue,pool:v},s.memoizedState={baseLanes:a,cachePool:v},i!==null&&xu(s,null),cd(),dg(s),i!==null&&yr(i,s,c,!0),s.childLanes=y,null}function Yu(i,s){return s=Qu({mode:s.mode,children:s.children},i.mode),s.ref=i.ref,i.child=s,s.return=i,s}function cy(i,s,a){return bs(s,i.child,null,a),i=Yu(s,s.pendingProps),i.flags|=2,In(s),s.memoizedState=null,i}function EC(i,s,a){var c=s.pendingProps,y=(s.flags&128)!==0;if(s.flags&=-129,i===null){if(Ge){if(c.mode==="hidden")return i=Yu(s,c),s.lanes=536870912,Wa(null,i);if(dd(s),(i=at)?(i=Sv(i,On),i=i!==null&&i.data==="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:So!==null?{id:bi,overflow:Ni}:null,retryLane:536870912,hydrationErrors:null},a=Km(i),a.return=s,s.child=a,Yt=s,at=null)):i=null,i===null)throw Co(s);return s.lanes=536870912,null}return Yu(s,c)}var v=i.memoizedState;if(v!==null){var A=v.dehydrated;if(dd(s),y)if(s.flags&256)s.flags&=-257,s=cy(i,s,a);else if(s.memoizedState!==null)s.child=i.child,s.flags|=128,s=null;else throw Error(o(558));else if(Nt||yr(i,s,a,!1),y=(a&i.childLanes)!==0,Nt||y){if(c=ot,c!==null&&(A=va(c,a),A!==0&&A!==v.retryLane))throw v.retryLane=A,Es(i,A),vn(c,i,A),Vd;ic(),s=cy(i,s,a)}else i=v.treeContext,at=Gn(A.nextSibling),Yt=s,Ge=!0,Ao=null,On=!1,i!==null&&Xm(s,i),s=Yu(s,c),s.flags|=4096;return s}return i=Bi(i.child,{mode:c.mode,children:c.children}),i.ref=s.ref,s.child=i,i.return=s,i}function Ku(i,s){var a=s.ref;if(a===null)i!==null&&i.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(o(284));(i===null||i.ref!==a)&&(s.flags|=4194816)}}function Pd(i,s,a,c,y){return Cs(s),a=pd(i,s,a,c,void 0,y),c=md(),i!==null&&!Nt?(gd(i,s,y),Ki(i,s,y)):(Ge&&c&&$f(s),s.flags|=1,Qt(i,s,a,y),s.child)}function fy(i,s,a,c,y,v){return Cs(s),s.updateQueue=null,a=pg(s,c,a,y),hg(i),c=md(),i!==null&&!Nt?(gd(i,s,v),Ki(i,s,v)):(Ge&&c&&$f(s),s.flags|=1,Qt(i,s,a,v),s.child)}function dy(i,s,a,c,y){if(Cs(s),s.stateNode===null){var v=hr,A=a.contextType;typeof A=="object"&&A!==null&&(v=Kt(A)),v=new a(c,v),s.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=Md,s.stateNode=v,v._reactInternals=s,v=s.stateNode,v.props=c,v.state=s.memoizedState,v.refs={},rd(s),A=a.contextType,v.context=typeof A=="object"&&A!==null?Kt(A):hr,v.state=s.memoizedState,A=a.getDerivedStateFromProps,typeof A=="function"&&(xd(s,a,A,c),v.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(A=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),A!==v.state&&Md.enqueueReplaceState(v,v.state,null),Ya(s,c,v,y),Ja(),v.state=s.memoizedState),typeof v.componentDidMount=="function"&&(s.flags|=4194308),c=!0}else if(i===null){v=s.stateNode;var I=s.memoizedProps,V=xs(a,I);v.props=V;var J=v.context,Z=a.contextType;A=hr,typeof Z=="object"&&Z!==null&&(A=Kt(Z));var ne=a.getDerivedStateFromProps;Z=typeof ne=="function"||typeof v.getSnapshotBeforeUpdate=="function",I=s.pendingProps!==I,Z||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(I||J!==A)&&Zg(s,v,c,A),Ro=!1;var Y=s.memoizedState;v.state=Y,Ya(s,c,v,y),Ja(),J=s.memoizedState,I||Y!==J||Ro?(typeof ne=="function"&&(xd(s,a,ne,c),J=s.memoizedState),(V=Ro||Wg(s,a,V,c,Y,J,A))?(Z||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(s.flags|=4194308)):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=J),v.props=c,v.state=J,v.context=A,c=V):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{v=s.stateNode,ad(i,s),A=s.memoizedProps,Z=xs(a,A),v.props=Z,ne=s.pendingProps,Y=v.context,J=a.contextType,V=hr,typeof J=="object"&&J!==null&&(V=Kt(J)),I=a.getDerivedStateFromProps,(J=typeof I=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(A!==ne||Y!==V)&&Zg(s,v,c,V),Ro=!1,Y=s.memoizedState,v.state=Y,Ya(s,c,v,y),Ja();var Q=s.memoizedState;A!==ne||Y!==Q||Ro||i!==null&&i.dependencies!==null&&bu(i.dependencies)?(typeof I=="function"&&(xd(s,a,I,c),Q=s.memoizedState),(Z=Ro||Wg(s,a,Z,c,Y,Q,V)||i!==null&&i.dependencies!==null&&bu(i.dependencies))?(J||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(c,Q,V),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(c,Q,V)),typeof v.componentDidUpdate=="function"&&(s.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof v.componentDidUpdate!="function"||A===i.memoizedProps&&Y===i.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&Y===i.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=Q),v.props=c,v.state=Q,v.context=V,c=Z):(typeof v.componentDidUpdate!="function"||A===i.memoizedProps&&Y===i.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&Y===i.memoizedState||(s.flags|=1024),c=!1)}return v=c,Ku(i,s),c=(s.flags&128)!==0,v||c?(v=s.stateNode,a=c&&typeof a.getDerivedStateFromError!="function"?null:v.render(),s.flags|=1,i!==null&&c?(s.child=bs(s,i.child,null,y),s.child=bs(s,null,a,y)):Qt(i,s,a,y),s.memoizedState=v.state,i=s.child):i=Ki(i,s,y),i}function hy(i,s,a,c){return Ss(),s.flags|=256,Qt(i,s,a,c),s.child}var Ud={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ld(i){return{baseLanes:i,cachePool:ng()}}function kd(i,s,a){return i=i!==null?i.childLanes&~a:0,s&&(i|=wn),i}function py(i,s,a){var c=s.pendingProps,y=!1,v=(s.flags&128)!==0,A;if((A=v)||(A=i!==null&&i.memoizedState===null?!1:(_t.current&2)!==0),A&&(y=!0,s.flags&=-129),A=(s.flags&32)!==0,s.flags&=-33,i===null){if(Ge){if(y?No(s):xo(),(i=at)?(i=Sv(i,On),i=i!==null&&i.data!=="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:So!==null?{id:bi,overflow:Ni}:null,retryLane:536870912,hydrationErrors:null},a=Km(i),a.return=s,s.child=a,Yt=s,at=null)):i=null,i===null)throw Co(s);return _h(i)?s.lanes=32:s.lanes=536870912,null}var I=c.children;return c=c.fallback,y?(xo(),y=s.mode,I=Qu({mode:"hidden",children:I},y),c=Ts(c,y,a,null),I.return=s,c.return=s,I.sibling=c,s.child=I,c=s.child,c.memoizedState=Ld(a),c.childLanes=kd(i,A,a),s.memoizedState=Ud,Wa(null,c)):(No(s),Od(s,I))}var V=i.memoizedState;if(V!==null&&(I=V.dehydrated,I!==null)){if(v)s.flags&256?(No(s),s.flags&=-257,s=qd(i,s,a)):s.memoizedState!==null?(xo(),s.child=i.child,s.flags|=128,s=null):(xo(),I=c.fallback,y=s.mode,c=Qu({mode:"visible",children:c.children},y),I=Ts(I,y,a,null),I.flags|=2,c.return=s,I.return=s,c.sibling=I,s.child=c,bs(s,i.child,null,a),c=s.child,c.memoizedState=Ld(a),c.childLanes=kd(i,A,a),s.memoizedState=Ud,s=Wa(null,c));else if(No(s),_h(I)){if(A=I.nextSibling&&I.nextSibling.dataset,A)var J=A.dgst;A=J,c=Error(o(419)),c.stack="",c.digest=A,qa({value:c,source:null,stack:null}),s=qd(i,s,a)}else if(Nt||yr(i,s,a,!1),A=(a&i.childLanes)!==0,Nt||A){if(A=ot,A!==null&&(c=va(A,a),c!==0&&c!==V.retryLane))throw V.retryLane=c,Es(i,c),vn(A,i,c),Vd;vh(I)||ic(),s=qd(i,s,a)}else vh(I)?(s.flags|=192,s.child=i.child,s=null):(i=V.treeContext,at=Gn(I.nextSibling),Yt=s,Ge=!0,Ao=null,On=!1,i!==null&&Xm(s,i),s=Od(s,c.children),s.flags|=4096);return s}return y?(xo(),I=c.fallback,y=s.mode,V=i.child,J=V.sibling,c=Bi(V,{mode:"hidden",children:c.children}),c.subtreeFlags=V.subtreeFlags&65011712,J!==null?I=Bi(J,I):(I=Ts(I,y,a,null),I.flags|=2),I.return=s,c.return=s,c.sibling=I,s.child=c,Wa(null,c),c=s.child,I=i.child.memoizedState,I===null?I=Ld(a):(y=I.cachePool,y!==null?(V=wt._currentValue,y=y.parent!==V?{parent:V,pool:V}:y):y=ng(),I={baseLanes:I.baseLanes|a,cachePool:y}),c.memoizedState=I,c.childLanes=kd(i,A,a),s.memoizedState=Ud,Wa(i.child,c)):(No(s),a=i.child,i=a.sibling,a=Bi(a,{mode:"visible",children:c.children}),a.return=s,a.sibling=null,i!==null&&(A=s.deletions,A===null?(s.deletions=[i],s.flags|=16):A.push(i)),s.child=a,s.memoizedState=null,a)}function Od(i,s){return s=Qu({mode:"visible",children:s},i.mode),s.return=i,i.child=s}function Qu(i,s){return i=An(22,i,null,s),i.lanes=0,i}function qd(i,s,a){return bs(s,i.child,null,a),i=Od(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function my(i,s,a){i.lanes|=s;var c=i.alternate;c!==null&&(c.lanes|=s),ed(i.return,s,a)}function Gd(i,s,a,c,y,v){var A=i.memoizedState;A===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:y,treeForkCount:v}:(A.isBackwards=s,A.rendering=null,A.renderingStartTime=0,A.last=c,A.tail=a,A.tailMode=y,A.treeForkCount=v)}function gy(i,s,a){var c=s.pendingProps,y=c.revealOrder,v=c.tail;c=c.children;var A=_t.current,I=(A&2)!==0;if(I?(A=A&1|2,s.flags|=128):A&=1,ce(_t,A),Qt(i,s,c,a),c=Ge?Oa:0,!I&&i!==null&&(i.flags&128)!==0)e:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&my(i,a,s);else if(i.tag===19)my(i,a,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(y){case"forwards":for(a=s.child,y=null;a!==null;)i=a.alternate,i!==null&&Lu(i)===null&&(y=a),a=a.sibling;a=y,a===null?(y=s.child,s.child=null):(y=a.sibling,a.sibling=null),Gd(s,!1,y,a,v,c);break;case"backwards":case"unstable_legacy-backwards":for(a=null,y=s.child,s.child=null;y!==null;){if(i=y.alternate,i!==null&&Lu(i)===null){s.child=y;break}i=y.sibling,y.sibling=a,a=y,y=i}Gd(s,!0,a,null,v,c);break;case"together":Gd(s,!1,null,null,void 0,c);break;default:s.memoizedState=null}return s.child}function Ki(i,s,a){if(i!==null&&(s.dependencies=i.dependencies),Vo|=s.lanes,(a&s.childLanes)===0)if(i!==null){if(yr(i,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(i!==null&&s.child!==i.child)throw Error(o(153));if(s.child!==null){for(i=s.child,a=Bi(i,i.pendingProps),s.child=a,a.return=s;i.sibling!==null;)i=i.sibling,a=a.sibling=Bi(i,i.pendingProps),a.return=s;a.sibling=null}return s.child}function Bd(i,s){return(i.lanes&s)!==0?!0:(i=i.dependencies,!!(i!==null&&bu(i)))}function TC(i,s,a){switch(s.tag){case 3:Ut(s,s.stateNode.containerInfo),Io(s,wt,i.memoizedState.cache),Ss();break;case 27:case 5:ns(s);break;case 4:Ut(s,s.stateNode.containerInfo);break;case 10:Io(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,dd(s),null;break;case 13:var c=s.memoizedState;if(c!==null)return c.dehydrated!==null?(No(s),s.flags|=128,null):(a&s.child.childLanes)!==0?py(i,s,a):(No(s),i=Ki(i,s,a),i!==null?i.sibling:null);No(s);break;case 19:var y=(i.flags&128)!==0;if(c=(a&s.childLanes)!==0,c||(yr(i,s,a,!1),c=(a&s.childLanes)!==0),y){if(c)return gy(i,s,a);s.flags|=128}if(y=s.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),ce(_t,_t.current),c)break;return null;case 22:return s.lanes=0,ly(i,s,a,s.pendingProps);case 24:Io(s,wt,i.memoizedState.cache)}return Ki(i,s,a)}function yy(i,s,a){if(i!==null)if(i.memoizedProps!==s.pendingProps)Nt=!0;else{if(!Bd(i,a)&&(s.flags&128)===0)return Nt=!1,TC(i,s,a);Nt=(i.flags&131072)!==0}else Nt=!1,Ge&&(s.flags&1048576)!==0&&$m(s,Oa,s.index);switch(s.lanes=0,s.tag){case 16:e:{var c=s.pendingProps;if(i=Rs(s.elementType),s.type=i,typeof i=="function")Yf(i)?(c=xs(i,c),s.tag=1,s=dy(null,s,i,c,a)):(s.tag=0,s=Pd(null,s,i,c,a));else{if(i!=null){var y=i.$$typeof;if(y===re){s.tag=11,s=sy(null,s,i,c,a);break e}else if(y===M){s.tag=14,s=ry(null,s,i,c,a);break e}}throw s=ae(i)||i,Error(o(306,s,""))}}return s;case 0:return Pd(i,s,s.type,s.pendingProps,a);case 1:return c=s.type,y=xs(c,s.pendingProps),dy(i,s,c,y,a);case 3:e:{if(Ut(s,s.stateNode.containerInfo),i===null)throw Error(o(387));c=s.pendingProps;var v=s.memoizedState;y=v.element,ad(i,s),Ya(s,c,null,a);var A=s.memoizedState;if(c=A.cache,Io(s,wt,c),c!==v.cache&&td(s,[wt],a,!0),Ja(),c=A.element,v.isDehydrated)if(v={element:c,isDehydrated:!1,cache:A.cache},s.updateQueue.baseState=v,s.memoizedState=v,s.flags&256){s=hy(i,s,c,a);break e}else if(c!==y){y=Un(Error(o(424)),s),qa(y),s=hy(i,s,c,a);break e}else{switch(i=s.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(at=Gn(i.firstChild),Yt=s,Ge=!0,Ao=null,On=!0,a=lg(s,null,c,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Ss(),c===y){s=Ki(i,s,a);break e}Qt(i,s,c,a)}s=s.child}return s;case 26:return Ku(i,s),i===null?(a=bv(s.type,null,s.pendingProps,null))?s.memoizedState=a:Ge||(a=s.type,i=s.pendingProps,c=cc(Me.current).createElement(a),c[Ct]=s,c[qt]=i,$t(c,a,i),It(c),s.stateNode=c):s.memoizedState=bv(s.type,i.memoizedProps,s.pendingProps,i.memoizedState),null;case 27:return ns(s),i===null&&Ge&&(c=s.stateNode=Iv(s.type,s.pendingProps,Me.current),Yt=s,On=!0,y=at,Oo(s.type)?(Eh=y,at=Gn(c.firstChild)):at=y),Qt(i,s,s.pendingProps.children,a),Ku(i,s),i===null&&(s.flags|=4194304),s.child;case 5:return i===null&&Ge&&((y=c=at)&&(c=WC(c,s.type,s.pendingProps,On),c!==null?(s.stateNode=c,Yt=s,at=Gn(c.firstChild),On=!1,y=!0):y=!1),y||Co(s)),ns(s),y=s.type,v=s.pendingProps,A=i!==null?i.memoizedProps:null,c=v.children,mh(y,v)?c=null:A!==null&&mh(y,A)&&(s.flags|=32),s.memoizedState!==null&&(y=pd(i,s,dC,null,null,a),dl._currentValue=y),Ku(i,s),Qt(i,s,c,a),s.child;case 6:return i===null&&Ge&&((i=a=at)&&(a=ZC(a,s.pendingProps,On),a!==null?(s.stateNode=a,Yt=s,at=null,i=!0):i=!1),i||Co(s)),null;case 13:return py(i,s,a);case 4:return Ut(s,s.stateNode.containerInfo),c=s.pendingProps,i===null?s.child=bs(s,null,c,a):Qt(i,s,c,a),s.child;case 11:return sy(i,s,s.type,s.pendingProps,a);case 7:return Qt(i,s,s.pendingProps,a),s.child;case 8:return Qt(i,s,s.pendingProps.children,a),s.child;case 12:return Qt(i,s,s.pendingProps.children,a),s.child;case 10:return c=s.pendingProps,Io(s,s.type,c.value),Qt(i,s,c.children,a),s.child;case 9:return y=s.type._context,c=s.pendingProps.children,Cs(s),y=Kt(y),c=c(y),s.flags|=1,Qt(i,s,c,a),s.child;case 14:return ry(i,s,s.type,s.pendingProps,a);case 15:return ay(i,s,s.type,s.pendingProps,a);case 19:return gy(i,s,a);case 31:return EC(i,s,a);case 22:return ly(i,s,a,s.pendingProps);case 24:return Cs(s),c=Kt(wt),i===null?(y=od(),y===null&&(y=ot,v=nd(),y.pooledCache=v,v.refCount++,v!==null&&(y.pooledCacheLanes|=a),y=v),s.memoizedState={parent:c,cache:y},rd(s),Io(s,wt,y)):((i.lanes&a)!==0&&(ad(i,s),Ya(s,null,null,a),Ja()),y=i.memoizedState,v=s.memoizedState,y.parent!==c?(y={parent:c,cache:c},s.memoizedState=y,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=y),Io(s,wt,c)):(c=v.cache,Io(s,wt,c),c!==y.cache&&td(s,[wt],a,!0))),Qt(i,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(o(156,s.tag))}function Qi(i){i.flags|=4}function Fd(i,s,a,c,y){if((s=(i.mode&32)!==0)&&(s=!1),s){if(i.flags|=16777216,(y&335544128)===y)if(i.stateNode.complete)i.flags|=8192;else if(zy())i.flags|=8192;else throw ws=Du,sd}else i.flags&=-16777217}function vy(i,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!Vv(s))if(zy())i.flags|=8192;else throw ws=Du,sd}function $u(i,s){s!==null&&(i.flags|=4),i.flags&16384&&(s=i.tag!==22?tu():536870912,i.lanes|=s,Nr|=s)}function Za(i,s){if(!Ge)switch(i.tailMode){case"hidden":s=i.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?i.tail=null:a.sibling=null;break;case"collapsed":a=i.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:c.sibling=null}}function lt(i){var s=i.alternate!==null&&i.alternate.child===i.child,a=0,c=0;if(s)for(var y=i.child;y!==null;)a|=y.lanes|y.childLanes,c|=y.subtreeFlags&65011712,c|=y.flags&65011712,y.return=i,y=y.sibling;else for(y=i.child;y!==null;)a|=y.lanes|y.childLanes,c|=y.subtreeFlags,c|=y.flags,y.return=i,y=y.sibling;return i.subtreeFlags|=c,i.childLanes=a,s}function SC(i,s,a){var c=s.pendingProps;switch(Xf(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lt(s),null;case 1:return lt(s),null;case 3:return a=s.stateNode,c=null,i!==null&&(c=i.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),zi(wt),ft(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(i===null||i.child===null)&&(gr(s)?Qi(s):i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Zf())),lt(s),null;case 26:var y=s.type,v=s.memoizedState;return i===null?(Qi(s),v!==null?(lt(s),vy(s,v)):(lt(s),Fd(s,y,null,c,a))):v?v!==i.memoizedState?(Qi(s),lt(s),vy(s,v)):(lt(s),s.flags&=-16777217):(i=i.memoizedProps,i!==c&&Qi(s),lt(s),Fd(s,y,i,c,a)),null;case 27:if(Qs(s),a=Me.current,y=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==c&&Qi(s);else{if(!c){if(s.stateNode===null)throw Error(o(166));return lt(s),null}i=me.current,gr(s)?Wm(s):(i=Iv(y,c,a),s.stateNode=i,Qi(s))}return lt(s),null;case 5:if(Qs(s),y=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==c&&Qi(s);else{if(!c){if(s.stateNode===null)throw Error(o(166));return lt(s),null}if(v=me.current,gr(s))Wm(s);else{var A=cc(Me.current);switch(v){case 1:v=A.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:v=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":v=A.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":v=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":v=A.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild);break;case"select":v=typeof c.is=="string"?A.createElement("select",{is:c.is}):A.createElement("select"),c.multiple?v.multiple=!0:c.size&&(v.size=c.size);break;default:v=typeof c.is=="string"?A.createElement(y,{is:c.is}):A.createElement(y)}}v[Ct]=s,v[qt]=c;e:for(A=s.child;A!==null;){if(A.tag===5||A.tag===6)v.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===s)break e;for(;A.sibling===null;){if(A.return===null||A.return===s)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}s.stateNode=v;e:switch($t(v,y,c),y){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&Qi(s)}}return lt(s),Fd(s,s.type,i===null?null:i.memoizedProps,s.pendingProps,a),null;case 6:if(i&&s.stateNode!=null)i.memoizedProps!==c&&Qi(s);else{if(typeof c!="string"&&s.stateNode===null)throw Error(o(166));if(i=Me.current,gr(s)){if(i=s.stateNode,a=s.memoizedProps,c=null,y=Yt,y!==null)switch(y.tag){case 27:case 5:c=y.memoizedProps}i[Ct]=s,i=!!(i.nodeValue===a||c!==null&&c.suppressHydrationWarning===!0||pv(i.nodeValue,a)),i||Co(s,!0)}else i=cc(i).createTextNode(c),i[Ct]=s,s.stateNode=i}return lt(s),null;case 31:if(a=s.memoizedState,i===null||i.memoizedState!==null){if(c=gr(s),a!==null){if(i===null){if(!c)throw Error(o(318));if(i=s.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(o(557));i[Ct]=s}else Ss(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;lt(s),i=!1}else a=Zf(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=a),i=!0;if(!i)return s.flags&256?(In(s),s):(In(s),null);if((s.flags&128)!==0)throw Error(o(558))}return lt(s),null;case 13:if(c=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(y=gr(s),c!==null&&c.dehydrated!==null){if(i===null){if(!y)throw Error(o(318));if(y=s.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(o(317));y[Ct]=s}else Ss(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;lt(s),y=!1}else y=Zf(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=y),y=!0;if(!y)return s.flags&256?(In(s),s):(In(s),null)}return In(s),(s.flags&128)!==0?(s.lanes=a,s):(a=c!==null,i=i!==null&&i.memoizedState!==null,a&&(c=s.child,y=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(y=c.alternate.memoizedState.cachePool.pool),v=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(v=c.memoizedState.cachePool.pool),v!==y&&(c.flags|=2048)),a!==i&&a&&(s.child.flags|=8192),$u(s,s.updateQueue),lt(s),null);case 4:return ft(),i===null&&ch(s.stateNode.containerInfo),lt(s),null;case 10:return zi(s.type),lt(s),null;case 19:if(ie(_t),c=s.memoizedState,c===null)return lt(s),null;if(y=(s.flags&128)!==0,v=c.rendering,v===null)if(y)Za(c,!1);else{if(gt!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(v=Lu(i),v!==null){for(s.flags|=128,Za(c,!1),i=v.updateQueue,s.updateQueue=i,$u(s,i),s.subtreeFlags=0,i=a,a=s.child;a!==null;)Ym(a,i),a=a.sibling;return ce(_t,_t.current&1|2),Ge&&Fi(s,c.treeForkCount),s.child}i=i.sibling}c.tail!==null&&rn()>ec&&(s.flags|=128,y=!0,Za(c,!1),s.lanes=4194304)}else{if(!y)if(i=Lu(v),i!==null){if(s.flags|=128,y=!0,i=i.updateQueue,s.updateQueue=i,$u(s,i),Za(c,!0),c.tail===null&&c.tailMode==="hidden"&&!v.alternate&&!Ge)return lt(s),null}else 2*rn()-c.renderingStartTime>ec&&a!==536870912&&(s.flags|=128,y=!0,Za(c,!1),s.lanes=4194304);c.isBackwards?(v.sibling=s.child,s.child=v):(i=c.last,i!==null?i.sibling=v:s.child=v,c.last=v)}return c.tail!==null?(i=c.tail,c.rendering=i,c.tail=i.sibling,c.renderingStartTime=rn(),i.sibling=null,a=_t.current,ce(_t,y?a&1|2:a&1),Ge&&Fi(s,c.treeForkCount),i):(lt(s),null);case 22:case 23:return In(s),fd(),c=s.memoizedState!==null,i!==null?i.memoizedState!==null!==c&&(s.flags|=8192):c&&(s.flags|=8192),c?(a&536870912)!==0&&(s.flags&128)===0&&(lt(s),s.subtreeFlags&6&&(s.flags|=8192)):lt(s),a=s.updateQueue,a!==null&&$u(s,a.retryQueue),a=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),c=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),c!==a&&(s.flags|=2048),i!==null&&ie(Is),null;case 24:return a=null,i!==null&&(a=i.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),zi(wt),lt(s),null;case 25:return null;case 30:return null}throw Error(o(156,s.tag))}function AC(i,s){switch(Xf(s),s.tag){case 1:return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return zi(wt),ft(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 26:case 27:case 5:return Qs(s),null;case 31:if(s.memoizedState!==null){if(In(s),s.alternate===null)throw Error(o(340));Ss()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 13:if(In(s),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(o(340));Ss()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return ie(_t),null;case 4:return ft(),null;case 10:return zi(s.type),null;case 22:case 23:return In(s),fd(),i!==null&&ie(Is),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 24:return zi(wt),null;case 25:return null;default:return null}}function _y(i,s){switch(Xf(s),s.tag){case 3:zi(wt),ft();break;case 26:case 27:case 5:Qs(s);break;case 4:ft();break;case 31:s.memoizedState!==null&&In(s);break;case 13:In(s);break;case 19:ie(_t);break;case 10:zi(s.type);break;case 22:case 23:In(s),fd(),i!==null&&ie(Is);break;case 24:zi(wt)}}function ja(i,s){try{var a=s.updateQueue,c=a!==null?a.lastEffect:null;if(c!==null){var y=c.next;a=y;do{if((a.tag&i)===i){c=void 0;var v=a.create,A=a.inst;c=v(),A.destroy=c}a=a.next}while(a!==y)}}catch(I){je(s,s.return,I)}}function Mo(i,s,a){try{var c=s.updateQueue,y=c!==null?c.lastEffect:null;if(y!==null){var v=y.next;c=v;do{if((c.tag&i)===i){var A=c.inst,I=A.destroy;if(I!==void 0){A.destroy=void 0,y=s;var V=a,J=I;try{J()}catch(Z){je(y,V,Z)}}}c=c.next}while(c!==v)}}catch(Z){je(s,s.return,Z)}}function Ey(i){var s=i.updateQueue;if(s!==null){var a=i.stateNode;try{cg(s,a)}catch(c){je(i,i.return,c)}}}function Ty(i,s,a){a.props=xs(i.type,i.memoizedProps),a.state=i.memoizedState;try{a.componentWillUnmount()}catch(c){je(i,s,c)}}function el(i,s){try{var a=i.ref;if(a!==null){switch(i.tag){case 26:case 27:case 5:var c=i.stateNode;break;case 30:c=i.stateNode;break;default:c=i.stateNode}typeof a=="function"?i.refCleanup=a(c):a.current=c}}catch(y){je(i,s,y)}}function xi(i,s){var a=i.ref,c=i.refCleanup;if(a!==null)if(typeof c=="function")try{c()}catch(y){je(i,s,y)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(y){je(i,s,y)}else a.current=null}function Sy(i){var s=i.type,a=i.memoizedProps,c=i.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&c.focus();break e;case"img":a.src?c.src=a.src:a.srcSet&&(c.srcset=a.srcSet)}}catch(y){je(i,i.return,y)}}function Hd(i,s,a){try{var c=i.stateNode;JC(c,i.type,a,s),c[qt]=s}catch(y){je(i,i.return,y)}}function Ay(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Oo(i.type)||i.tag===4}function zd(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Ay(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Oo(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Jd(i,s,a){var c=i.tag;if(c===5||c===6)i=i.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(i,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(i),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Xn));else if(c!==4&&(c===27&&Oo(i.type)&&(a=i.stateNode,s=null),i=i.child,i!==null))for(Jd(i,s,a),i=i.sibling;i!==null;)Jd(i,s,a),i=i.sibling}function Xu(i,s,a){var c=i.tag;if(c===5||c===6)i=i.stateNode,s?a.insertBefore(i,s):a.appendChild(i);else if(c!==4&&(c===27&&Oo(i.type)&&(a=i.stateNode),i=i.child,i!==null))for(Xu(i,s,a),i=i.sibling;i!==null;)Xu(i,s,a),i=i.sibling}function Cy(i){var s=i.stateNode,a=i.memoizedProps;try{for(var c=i.type,y=s.attributes;y.length;)s.removeAttributeNode(y[0]);$t(s,c,a),s[Ct]=i,s[qt]=a}catch(v){je(i,i.return,v)}}var $i=!1,xt=!1,Yd=!1,Iy=typeof WeakSet=="function"?WeakSet:Set,Bt=null;function CC(i,s){if(i=i.containerInfo,hh=yc,i=km(i),qf(i)){if("selectionStart"in i)var a={start:i.selectionStart,end:i.selectionEnd};else e:{a=(a=i.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var y=c.anchorOffset,v=c.focusNode;c=c.focusOffset;try{a.nodeType,v.nodeType}catch{a=null;break e}var A=0,I=-1,V=-1,J=0,Z=0,ne=i,Y=null;t:for(;;){for(var Q;ne!==a||y!==0&&ne.nodeType!==3||(I=A+y),ne!==v||c!==0&&ne.nodeType!==3||(V=A+c),ne.nodeType===3&&(A+=ne.nodeValue.length),(Q=ne.firstChild)!==null;)Y=ne,ne=Q;for(;;){if(ne===i)break t;if(Y===a&&++J===y&&(I=A),Y===v&&++Z===c&&(V=A),(Q=ne.nextSibling)!==null)break;ne=Y,Y=ne.parentNode}ne=Q}a=I===-1||V===-1?null:{start:I,end:V}}else a=null}a=a||{start:0,end:0}}else a=null;for(ph={focusedElem:i,selectionRange:a},yc=!1,Bt=s;Bt!==null;)if(s=Bt,i=s.child,(s.subtreeFlags&1028)!==0&&i!==null)i.return=s,Bt=i;else for(;Bt!==null;){switch(s=Bt,v=s.alternate,i=s.flags,s.tag){case 0:if((i&4)!==0&&(i=s.updateQueue,i=i!==null?i.events:null,i!==null))for(a=0;a<i.length;a++)y=i[a],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&v!==null){i=void 0,a=s,y=v.memoizedProps,v=v.memoizedState,c=a.stateNode;try{var ge=xs(a.type,y);i=c.getSnapshotBeforeUpdate(ge,v),c.__reactInternalSnapshotBeforeUpdate=i}catch(Te){je(a,a.return,Te)}}break;case 3:if((i&1024)!==0){if(i=s.stateNode.containerInfo,a=i.nodeType,a===9)yh(i);else if(a===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":yh(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(o(163))}if(i=s.sibling,i!==null){i.return=s.return,Bt=i;break}Bt=s.return}}function Ry(i,s,a){var c=a.flags;switch(a.tag){case 0:case 11:case 15:Wi(i,a),c&4&&ja(5,a);break;case 1:if(Wi(i,a),c&4)if(i=a.stateNode,s===null)try{i.componentDidMount()}catch(A){je(a,a.return,A)}else{var y=xs(a.type,s.memoizedProps);s=s.memoizedState;try{i.componentDidUpdate(y,s,i.__reactInternalSnapshotBeforeUpdate)}catch(A){je(a,a.return,A)}}c&64&&Ey(a),c&512&&el(a,a.return);break;case 3:if(Wi(i,a),c&64&&(i=a.updateQueue,i!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{cg(i,s)}catch(A){je(a,a.return,A)}}break;case 27:s===null&&c&4&&Cy(a);case 26:case 5:Wi(i,a),s===null&&c&4&&Sy(a),c&512&&el(a,a.return);break;case 12:Wi(i,a);break;case 31:Wi(i,a),c&4&&Ny(i,a);break;case 13:Wi(i,a),c&4&&xy(i,a),c&64&&(i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(a=VC.bind(null,a),jC(i,a))));break;case 22:if(c=a.memoizedState!==null||$i,!c){s=s!==null&&s.memoizedState!==null||xt,y=$i;var v=xt;$i=c,(xt=s)&&!v?Zi(i,a,(a.subtreeFlags&8772)!==0):Wi(i,a),$i=y,xt=v}break;case 30:break;default:Wi(i,a)}}function wy(i){var s=i.alternate;s!==null&&(i.alternate=null,wy(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&js(s)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var ht=null,pn=!1;function Xi(i,s,a){for(a=a.child;a!==null;)by(i,s,a),a=a.sibling}function by(i,s,a){if(zt&&typeof zt.onCommitFiberUnmount=="function")try{zt.onCommitFiberUnmount(Yn,a)}catch{}switch(a.tag){case 26:xt||xi(a,s),Xi(i,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:xt||xi(a,s);var c=ht,y=pn;Oo(a.type)&&(ht=a.stateNode,pn=!1),Xi(i,s,a),ul(a.stateNode),ht=c,pn=y;break;case 5:xt||xi(a,s);case 6:if(c=ht,y=pn,ht=null,Xi(i,s,a),ht=c,pn=y,ht!==null)if(pn)try{(ht.nodeType===9?ht.body:ht.nodeName==="HTML"?ht.ownerDocument.body:ht).removeChild(a.stateNode)}catch(v){je(a,s,v)}else try{ht.removeChild(a.stateNode)}catch(v){je(a,s,v)}break;case 18:ht!==null&&(pn?(i=ht,Ev(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,a.stateNode),kr(i)):Ev(ht,a.stateNode));break;case 4:c=ht,y=pn,ht=a.stateNode.containerInfo,pn=!0,Xi(i,s,a),ht=c,pn=y;break;case 0:case 11:case 14:case 15:Mo(2,a,s),xt||Mo(4,a,s),Xi(i,s,a);break;case 1:xt||(xi(a,s),c=a.stateNode,typeof c.componentWillUnmount=="function"&&Ty(a,s,c)),Xi(i,s,a);break;case 21:Xi(i,s,a);break;case 22:xt=(c=xt)||a.memoizedState!==null,Xi(i,s,a),xt=c;break;default:Xi(i,s,a)}}function Ny(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{kr(i)}catch(a){je(s,s.return,a)}}}function xy(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{kr(i)}catch(a){je(s,s.return,a)}}function IC(i){switch(i.tag){case 31:case 13:case 19:var s=i.stateNode;return s===null&&(s=i.stateNode=new Iy),s;case 22:return i=i.stateNode,s=i._retryCache,s===null&&(s=i._retryCache=new Iy),s;default:throw Error(o(435,i.tag))}}function Wu(i,s){var a=IC(i);s.forEach(function(c){if(!a.has(c)){a.add(c);var y=PC.bind(null,i,c);c.then(y,y)}})}function mn(i,s){var a=s.deletions;if(a!==null)for(var c=0;c<a.length;c++){var y=a[c],v=i,A=s,I=A;e:for(;I!==null;){switch(I.tag){case 27:if(Oo(I.type)){ht=I.stateNode,pn=!1;break e}break;case 5:ht=I.stateNode,pn=!1;break e;case 3:case 4:ht=I.stateNode.containerInfo,pn=!0;break e}I=I.return}if(ht===null)throw Error(o(160));by(v,A,y),ht=null,pn=!1,v=y.alternate,v!==null&&(v.return=null),y.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)My(s,i),s=s.sibling}var ni=null;function My(i,s){var a=i.alternate,c=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:mn(s,i),gn(i),c&4&&(Mo(3,i,i.return),ja(3,i),Mo(5,i,i.return));break;case 1:mn(s,i),gn(i),c&512&&(xt||a===null||xi(a,a.return)),c&64&&$i&&(i=i.updateQueue,i!==null&&(c=i.callbacks,c!==null&&(a=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=a===null?c:a.concat(c))));break;case 26:var y=ni;if(mn(s,i),gn(i),c&512&&(xt||a===null||xi(a,a.return)),c&4){var v=a!==null?a.memoizedState:null;if(c=i.memoizedState,a===null)if(c===null)if(i.stateNode===null){e:{c=i.type,a=i.memoizedProps,y=y.ownerDocument||y;t:switch(c){case"title":v=y.getElementsByTagName("title")[0],(!v||v[gi]||v[Ct]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=y.createElement(c),y.head.insertBefore(v,y.querySelector("head > title"))),$t(v,c,a),v[Ct]=i,It(v),c=v;break e;case"link":var A=Mv("link","href",y).get(c+(a.href||""));if(A){for(var I=0;I<A.length;I++)if(v=A[I],v.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&v.getAttribute("rel")===(a.rel==null?null:a.rel)&&v.getAttribute("title")===(a.title==null?null:a.title)&&v.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){A.splice(I,1);break t}}v=y.createElement(c),$t(v,c,a),y.head.appendChild(v);break;case"meta":if(A=Mv("meta","content",y).get(c+(a.content||""))){for(I=0;I<A.length;I++)if(v=A[I],v.getAttribute("content")===(a.content==null?null:""+a.content)&&v.getAttribute("name")===(a.name==null?null:a.name)&&v.getAttribute("property")===(a.property==null?null:a.property)&&v.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&v.getAttribute("charset")===(a.charSet==null?null:a.charSet)){A.splice(I,1);break t}}v=y.createElement(c),$t(v,c,a),y.head.appendChild(v);break;default:throw Error(o(468,c))}v[Ct]=i,It(v),c=v}i.stateNode=c}else Dv(y,i.type,i.stateNode);else i.stateNode=xv(y,c,i.memoizedProps);else v!==c?(v===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):v.count--,c===null?Dv(y,i.type,i.stateNode):xv(y,c,i.memoizedProps)):c===null&&i.stateNode!==null&&Hd(i,i.memoizedProps,a.memoizedProps)}break;case 27:mn(s,i),gn(i),c&512&&(xt||a===null||xi(a,a.return)),a!==null&&c&4&&Hd(i,i.memoizedProps,a.memoizedProps);break;case 5:if(mn(s,i),gn(i),c&512&&(xt||a===null||xi(a,a.return)),i.flags&32){y=i.stateNode;try{hn(y,"")}catch(ge){je(i,i.return,ge)}}c&4&&i.stateNode!=null&&(y=i.memoizedProps,Hd(i,y,a!==null?a.memoizedProps:y)),c&1024&&(Yd=!0);break;case 6:if(mn(s,i),gn(i),c&4){if(i.stateNode===null)throw Error(o(162));c=i.memoizedProps,a=i.stateNode;try{a.nodeValue=c}catch(ge){je(i,i.return,ge)}}break;case 3:if(hc=null,y=ni,ni=fc(s.containerInfo),mn(s,i),ni=y,gn(i),c&4&&a!==null&&a.memoizedState.isDehydrated)try{kr(s.containerInfo)}catch(ge){je(i,i.return,ge)}Yd&&(Yd=!1,Dy(i));break;case 4:c=ni,ni=fc(i.stateNode.containerInfo),mn(s,i),gn(i),ni=c;break;case 12:mn(s,i),gn(i);break;case 31:mn(s,i),gn(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,Wu(i,c)));break;case 13:mn(s,i),gn(i),i.child.flags&8192&&i.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(ju=rn()),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,Wu(i,c)));break;case 22:y=i.memoizedState!==null;var V=a!==null&&a.memoizedState!==null,J=$i,Z=xt;if($i=J||y,xt=Z||V,mn(s,i),xt=Z,$i=J,gn(i),c&8192)e:for(s=i.stateNode,s._visibility=y?s._visibility&-2:s._visibility|1,y&&(a===null||V||$i||xt||Ms(i)),a=null,s=i;;){if(s.tag===5||s.tag===26){if(a===null){V=a=s;try{if(v=V.stateNode,y)A=v.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{I=V.stateNode;var ne=V.memoizedProps.style,Y=ne!=null&&ne.hasOwnProperty("display")?ne.display:null;I.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(ge){je(V,V.return,ge)}}}else if(s.tag===6){if(a===null){V=s;try{V.stateNode.nodeValue=y?"":V.memoizedProps}catch(ge){je(V,V.return,ge)}}}else if(s.tag===18){if(a===null){V=s;try{var Q=V.stateNode;y?Tv(Q,!0):Tv(V.stateNode,!1)}catch(ge){je(V,V.return,ge)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===i)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}c&4&&(c=i.updateQueue,c!==null&&(a=c.retryQueue,a!==null&&(c.retryQueue=null,Wu(i,a))));break;case 19:mn(s,i),gn(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,Wu(i,c)));break;case 30:break;case 21:break;default:mn(s,i),gn(i)}}function gn(i){var s=i.flags;if(s&2){try{for(var a,c=i.return;c!==null;){if(Ay(c)){a=c;break}c=c.return}if(a==null)throw Error(o(160));switch(a.tag){case 27:var y=a.stateNode,v=zd(i);Xu(i,v,y);break;case 5:var A=a.stateNode;a.flags&32&&(hn(A,""),a.flags&=-33);var I=zd(i);Xu(i,I,A);break;case 3:case 4:var V=a.stateNode.containerInfo,J=zd(i);Jd(i,J,V);break;default:throw Error(o(161))}}catch(Z){je(i,i.return,Z)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function Dy(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var s=i;Dy(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),i=i.sibling}}function Wi(i,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Ry(i,s.alternate,s),s=s.sibling}function Ms(i){for(i=i.child;i!==null;){var s=i;switch(s.tag){case 0:case 11:case 14:case 15:Mo(4,s,s.return),Ms(s);break;case 1:xi(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&Ty(s,s.return,a),Ms(s);break;case 27:ul(s.stateNode);case 26:case 5:xi(s,s.return),Ms(s);break;case 22:s.memoizedState===null&&Ms(s);break;case 30:Ms(s);break;default:Ms(s)}i=i.sibling}}function Zi(i,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var c=s.alternate,y=i,v=s,A=v.flags;switch(v.tag){case 0:case 11:case 15:Zi(y,v,a),ja(4,v);break;case 1:if(Zi(y,v,a),c=v,y=c.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(J){je(c,c.return,J)}if(c=v,y=c.updateQueue,y!==null){var I=c.stateNode;try{var V=y.shared.hiddenCallbacks;if(V!==null)for(y.shared.hiddenCallbacks=null,y=0;y<V.length;y++)ug(V[y],I)}catch(J){je(c,c.return,J)}}a&&A&64&&Ey(v),el(v,v.return);break;case 27:Cy(v);case 26:case 5:Zi(y,v,a),a&&c===null&&A&4&&Sy(v),el(v,v.return);break;case 12:Zi(y,v,a);break;case 31:Zi(y,v,a),a&&A&4&&Ny(y,v);break;case 13:Zi(y,v,a),a&&A&4&&xy(y,v);break;case 22:v.memoizedState===null&&Zi(y,v,a),el(v,v.return);break;case 30:break;default:Zi(y,v,a)}s=s.sibling}}function Kd(i,s){var a=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==a&&(i!=null&&i.refCount++,a!=null&&Ga(a))}function Qd(i,s){i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&Ga(i))}function ii(i,s,a,c){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Vy(i,s,a,c),s=s.sibling}function Vy(i,s,a,c){var y=s.flags;switch(s.tag){case 0:case 11:case 15:ii(i,s,a,c),y&2048&&ja(9,s);break;case 1:ii(i,s,a,c);break;case 3:ii(i,s,a,c),y&2048&&(i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&Ga(i)));break;case 12:if(y&2048){ii(i,s,a,c),i=s.stateNode;try{var v=s.memoizedProps,A=v.id,I=v.onPostCommit;typeof I=="function"&&I(A,s.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(V){je(s,s.return,V)}}else ii(i,s,a,c);break;case 31:ii(i,s,a,c);break;case 13:ii(i,s,a,c);break;case 23:break;case 22:v=s.stateNode,A=s.alternate,s.memoizedState!==null?v._visibility&2?ii(i,s,a,c):tl(i,s):v._visibility&2?ii(i,s,a,c):(v._visibility|=2,Rr(i,s,a,c,(s.subtreeFlags&10256)!==0||!1)),y&2048&&Kd(A,s);break;case 24:ii(i,s,a,c),y&2048&&Qd(s.alternate,s);break;default:ii(i,s,a,c)}}function Rr(i,s,a,c,y){for(y=y&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var v=i,A=s,I=a,V=c,J=A.flags;switch(A.tag){case 0:case 11:case 15:Rr(v,A,I,V,y),ja(8,A);break;case 23:break;case 22:var Z=A.stateNode;A.memoizedState!==null?Z._visibility&2?Rr(v,A,I,V,y):tl(v,A):(Z._visibility|=2,Rr(v,A,I,V,y)),y&&J&2048&&Kd(A.alternate,A);break;case 24:Rr(v,A,I,V,y),y&&J&2048&&Qd(A.alternate,A);break;default:Rr(v,A,I,V,y)}s=s.sibling}}function tl(i,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=i,c=s,y=c.flags;switch(c.tag){case 22:tl(a,c),y&2048&&Kd(c.alternate,c);break;case 24:tl(a,c),y&2048&&Qd(c.alternate,c);break;default:tl(a,c)}s=s.sibling}}var nl=8192;function wr(i,s,a){if(i.subtreeFlags&nl)for(i=i.child;i!==null;)Py(i,s,a),i=i.sibling}function Py(i,s,a){switch(i.tag){case 26:wr(i,s,a),i.flags&nl&&i.memoizedState!==null&&fI(a,ni,i.memoizedState,i.memoizedProps);break;case 5:wr(i,s,a);break;case 3:case 4:var c=ni;ni=fc(i.stateNode.containerInfo),wr(i,s,a),ni=c;break;case 22:i.memoizedState===null&&(c=i.alternate,c!==null&&c.memoizedState!==null?(c=nl,nl=16777216,wr(i,s,a),nl=c):wr(i,s,a));break;default:wr(i,s,a)}}function Uy(i){var s=i.alternate;if(s!==null&&(i=s.child,i!==null)){s.child=null;do s=i.sibling,i.sibling=null,i=s;while(i!==null)}}function il(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var c=s[a];Bt=c,ky(c,i)}Uy(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Ly(i),i=i.sibling}function Ly(i){switch(i.tag){case 0:case 11:case 15:il(i),i.flags&2048&&Mo(9,i,i.return);break;case 3:il(i);break;case 12:il(i);break;case 22:var s=i.stateNode;i.memoizedState!==null&&s._visibility&2&&(i.return===null||i.return.tag!==13)?(s._visibility&=-3,Zu(i)):il(i);break;default:il(i)}}function Zu(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var c=s[a];Bt=c,ky(c,i)}Uy(i)}for(i=i.child;i!==null;){switch(s=i,s.tag){case 0:case 11:case 15:Mo(8,s,s.return),Zu(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,Zu(s));break;default:Zu(s)}i=i.sibling}}function ky(i,s){for(;Bt!==null;){var a=Bt;switch(a.tag){case 0:case 11:case 15:Mo(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var c=a.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Ga(a.memoizedState.cache)}if(c=a.child,c!==null)c.return=a,Bt=c;else e:for(a=i;Bt!==null;){c=Bt;var y=c.sibling,v=c.return;if(wy(c),c===a){Bt=null;break e}if(y!==null){y.return=v,Bt=y;break e}Bt=v}}}var RC={getCacheForType:function(i){var s=Kt(wt),a=s.data.get(i);return a===void 0&&(a=i(),s.data.set(i,a)),a},cacheSignal:function(){return Kt(wt).controller.signal}},wC=typeof WeakMap=="function"?WeakMap:Map,Qe=0,ot=null,Pe=null,Le=0,Ze=0,Rn=null,Do=!1,br=!1,$d=!1,ji=0,gt=0,Vo=0,Ds=0,Xd=0,wn=0,Nr=0,ol=null,yn=null,Wd=!1,ju=0,Oy=0,ec=1/0,tc=null,Po=null,kt=0,Uo=null,xr=null,eo=0,Zd=0,jd=null,qy=null,sl=0,eh=null;function bn(){return(Qe&2)!==0&&Le!==0?Le&-Le:X.T!==null?rh():nu()}function Gy(){if(wn===0)if((Le&536870912)===0||Ge){var i=ss;ss<<=1,(ss&3932160)===0&&(ss=262144),wn=i}else wn=536870912;return i=Cn.current,i!==null&&(i.flags|=32),wn}function vn(i,s,a){(i===ot&&(Ze===2||Ze===9)||i.cancelPendingCommit!==null)&&(Mr(i,0),Lo(i,Le,wn,!1)),rs(i,a),((Qe&2)===0||i!==ot)&&(i===ot&&((Qe&2)===0&&(Ds|=a),gt===4&&Lo(i,Le,wn,!1)),Mi(i))}function By(i,s,a){if((Qe&6)!==0)throw Error(o(327));var c=!a&&(s&127)===0&&(s&i.expiredLanes)===0||Kn(i,s),y=c?xC(i,s):nh(i,s,!0),v=c;do{if(y===0){br&&!c&&Lo(i,s,0,!1);break}else{if(a=i.current.alternate,v&&!bC(a)){y=nh(i,s,!1),v=!1;continue}if(y===2){if(v=s,i.errorRecoveryDisabledLanes&v)var A=0;else A=i.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){s=A;e:{var I=i;y=ol;var V=I.current.memoizedState.isDehydrated;if(V&&(Mr(I,A).flags|=256),A=nh(I,A,!1),A!==2){if($d&&!V){I.errorRecoveryDisabledLanes|=v,Ds|=v,y=4;break e}v=yn,yn=y,v!==null&&(yn===null?yn=v:yn.push.apply(yn,v))}y=A}if(v=!1,y!==2)continue}}if(y===1){Mr(i,0),Lo(i,s,0,!0);break}e:{switch(c=i,v=y,v){case 0:case 1:throw Error(o(345));case 4:if((s&4194048)!==s)break;case 6:Lo(c,s,wn,!Do);break e;case 2:yn=null;break;case 3:case 5:break;default:throw Error(o(329))}if((s&62914560)===s&&(y=ju+300-rn(),10<y)){if(Lo(c,s,wn,!Do),hi(c,0,!0)!==0)break e;eo=s,c.timeoutHandle=vv(Fy.bind(null,c,a,yn,tc,Wd,s,wn,Ds,Nr,Do,v,"Throttled",-0,0),y);break e}Fy(c,a,yn,tc,Wd,s,wn,Ds,Nr,Do,v,null,-0,0)}}break}while(!0);Mi(i)}function Fy(i,s,a,c,y,v,A,I,V,J,Z,ne,Y,Q){if(i.timeoutHandle=-1,ne=s.subtreeFlags,ne&8192||(ne&16785408)===16785408){ne={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Xn},Py(s,v,ne);var ge=(v&62914560)===v?ju-rn():(v&4194048)===v?Oy-rn():0;if(ge=dI(ne,ge),ge!==null){eo=v,i.cancelPendingCommit=ge(Xy.bind(null,i,s,v,a,c,y,A,I,V,Z,ne,null,Y,Q)),Lo(i,v,A,!J);return}}Xy(i,s,v,a,c,y,A,I,V)}function bC(i){for(var s=i;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var c=0;c<a.length;c++){var y=a[c],v=y.getSnapshot;y=y.value;try{if(!Sn(v(),y))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Lo(i,s,a,c){s&=~Xd,s&=~Ds,i.suspendedLanes|=s,i.pingedLanes&=~s,c&&(i.warmLanes|=s),c=i.expirationTimes;for(var y=s;0<y;){var v=31-yt(y),A=1<<v;c[v]=-1,y&=~A}a!==0&&as(i,a,s)}function nc(){return(Qe&6)===0?(rl(0),!1):!0}function th(){if(Pe!==null){if(Ze===0)var i=Pe.return;else i=Pe,Hi=As=null,yd(i),Tr=null,Fa=0,i=Pe;for(;i!==null;)_y(i.alternate,i),i=i.return;Pe=null}}function Mr(i,s){var a=i.timeoutHandle;a!==-1&&(i.timeoutHandle=-1,QC(a)),a=i.cancelPendingCommit,a!==null&&(i.cancelPendingCommit=null,a()),eo=0,th(),ot=i,Pe=a=Bi(i.current,null),Le=s,Ze=0,Rn=null,Do=!1,br=Kn(i,s),$d=!1,Nr=wn=Xd=Ds=Vo=gt=0,yn=ol=null,Wd=!1,(s&8)!==0&&(s|=s&32);var c=i.entangledLanes;if(c!==0)for(i=i.entanglements,c&=s;0<c;){var y=31-yt(c),v=1<<y;s|=i[y],c&=~v}return ji=s,Au(),a}function Hy(i,s){xe=null,X.H=Xa,s===Er||s===Mu?(s=sg(),Ze=3):s===sd?(s=sg(),Ze=4):Ze=s===Vd?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Rn=s,Pe===null&&(gt=1,Ju(i,Un(s,i.current)))}function zy(){var i=Cn.current;return i===null?!0:(Le&4194048)===Le?qn===null:(Le&62914560)===Le||(Le&536870912)!==0?i===qn:!1}function Jy(){var i=X.H;return X.H=Xa,i===null?Xa:i}function Yy(){var i=X.A;return X.A=RC,i}function ic(){gt=4,Do||(Le&4194048)!==Le&&Cn.current!==null||(br=!0),(Vo&134217727)===0&&(Ds&134217727)===0||ot===null||Lo(ot,Le,wn,!1)}function nh(i,s,a){var c=Qe;Qe|=2;var y=Jy(),v=Yy();(ot!==i||Le!==s)&&(tc=null,Mr(i,s)),s=!1;var A=gt;e:do try{if(Ze!==0&&Pe!==null){var I=Pe,V=Rn;switch(Ze){case 8:th(),A=6;break e;case 3:case 2:case 9:case 6:Cn.current===null&&(s=!0);var J=Ze;if(Ze=0,Rn=null,Dr(i,I,V,J),a&&br){A=0;break e}break;default:J=Ze,Ze=0,Rn=null,Dr(i,I,V,J)}}NC(),A=gt;break}catch(Z){Hy(i,Z)}while(!0);return s&&i.shellSuspendCounter++,Hi=As=null,Qe=c,X.H=y,X.A=v,Pe===null&&(ot=null,Le=0,Au()),A}function NC(){for(;Pe!==null;)Ky(Pe)}function xC(i,s){var a=Qe;Qe|=2;var c=Jy(),y=Yy();ot!==i||Le!==s?(tc=null,ec=rn()+500,Mr(i,s)):br=Kn(i,s);e:do try{if(Ze!==0&&Pe!==null){s=Pe;var v=Rn;t:switch(Ze){case 1:Ze=0,Rn=null,Dr(i,s,v,1);break;case 2:case 9:if(ig(v)){Ze=0,Rn=null,Qy(s);break}s=function(){Ze!==2&&Ze!==9||ot!==i||(Ze=7),Mi(i)},v.then(s,s);break e;case 3:Ze=7;break e;case 4:Ze=5;break e;case 7:ig(v)?(Ze=0,Rn=null,Qy(s)):(Ze=0,Rn=null,Dr(i,s,v,7));break;case 5:var A=null;switch(Pe.tag){case 26:A=Pe.memoizedState;case 5:case 27:var I=Pe;if(A?Vv(A):I.stateNode.complete){Ze=0,Rn=null;var V=I.sibling;if(V!==null)Pe=V;else{var J=I.return;J!==null?(Pe=J,oc(J)):Pe=null}break t}}Ze=0,Rn=null,Dr(i,s,v,5);break;case 6:Ze=0,Rn=null,Dr(i,s,v,6);break;case 8:th(),gt=6;break e;default:throw Error(o(462))}}MC();break}catch(Z){Hy(i,Z)}while(!0);return Hi=As=null,X.H=c,X.A=y,Qe=a,Pe!==null?0:(ot=null,Le=0,Au(),gt)}function MC(){for(;Pe!==null&&!Df();)Ky(Pe)}function Ky(i){var s=yy(i.alternate,i,ji);i.memoizedProps=i.pendingProps,s===null?oc(i):Pe=s}function Qy(i){var s=i,a=s.alternate;switch(s.tag){case 15:case 0:s=fy(a,s,s.pendingProps,s.type,void 0,Le);break;case 11:s=fy(a,s,s.pendingProps,s.type.render,s.ref,Le);break;case 5:yd(s);default:_y(a,s),s=Pe=Ym(s,ji),s=yy(a,s,ji)}i.memoizedProps=i.pendingProps,s===null?oc(i):Pe=s}function Dr(i,s,a,c){Hi=As=null,yd(s),Tr=null,Fa=0;var y=s.return;try{if(_C(i,y,s,a,Le)){gt=1,Ju(i,Un(a,i.current)),Pe=null;return}}catch(v){if(y!==null)throw Pe=y,v;gt=1,Ju(i,Un(a,i.current)),Pe=null;return}s.flags&32768?(Ge||c===1?i=!0:br||(Le&536870912)!==0?i=!1:(Do=i=!0,(c===2||c===9||c===3||c===6)&&(c=Cn.current,c!==null&&c.tag===13&&(c.flags|=16384))),$y(s,i)):oc(s)}function oc(i){var s=i;do{if((s.flags&32768)!==0){$y(s,Do);return}i=s.return;var a=SC(s.alternate,s,ji);if(a!==null){Pe=a;return}if(s=s.sibling,s!==null){Pe=s;return}Pe=s=i}while(s!==null);gt===0&&(gt=5)}function $y(i,s){do{var a=AC(i.alternate,i);if(a!==null){a.flags&=32767,Pe=a;return}if(a=i.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(i=i.sibling,i!==null)){Pe=i;return}Pe=i=a}while(i!==null);gt=6,Pe=null}function Xy(i,s,a,c,y,v,A,I,V){i.cancelPendingCommit=null;do sc();while(kt!==0);if((Qe&6)!==0)throw Error(o(327));if(s!==null){if(s===i.current)throw Error(o(177));if(v=s.lanes|s.childLanes,v|=zf,Uf(i,a,v,A,I,V),i===ot&&(Pe=ot=null,Le=0),xr=s,Uo=i,eo=a,Zd=v,jd=y,qy=c,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,UC(fo,function(){return tv(),null})):(i.callbackNode=null,i.callbackPriority=0),c=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||c){c=X.T,X.T=null,y=le.p,le.p=2,A=Qe,Qe|=4;try{CC(i,s,a)}finally{Qe=A,le.p=y,X.T=c}}kt=1,Wy(),Zy(),jy()}}function Wy(){if(kt===1){kt=0;var i=Uo,s=xr,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=X.T,X.T=null;var c=le.p;le.p=2;var y=Qe;Qe|=4;try{My(s,i);var v=ph,A=km(i.containerInfo),I=v.focusedElem,V=v.selectionRange;if(A!==I&&I&&I.ownerDocument&&Lm(I.ownerDocument.documentElement,I)){if(V!==null&&qf(I)){var J=V.start,Z=V.end;if(Z===void 0&&(Z=J),"selectionStart"in I)I.selectionStart=J,I.selectionEnd=Math.min(Z,I.value.length);else{var ne=I.ownerDocument||document,Y=ne&&ne.defaultView||window;if(Y.getSelection){var Q=Y.getSelection(),ge=I.textContent.length,Te=Math.min(V.start,ge),it=V.end===void 0?Te:Math.min(V.end,ge);!Q.extend&&Te>it&&(A=it,it=Te,Te=A);var F=Um(I,Te),k=Um(I,it);if(F&&k&&(Q.rangeCount!==1||Q.anchorNode!==F.node||Q.anchorOffset!==F.offset||Q.focusNode!==k.node||Q.focusOffset!==k.offset)){var z=ne.createRange();z.setStart(F.node,F.offset),Q.removeAllRanges(),Te>it?(Q.addRange(z),Q.extend(k.node,k.offset)):(z.setEnd(k.node,k.offset),Q.addRange(z))}}}}for(ne=[],Q=I;Q=Q.parentNode;)Q.nodeType===1&&ne.push({element:Q,left:Q.scrollLeft,top:Q.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<ne.length;I++){var ee=ne[I];ee.element.scrollLeft=ee.left,ee.element.scrollTop=ee.top}}yc=!!hh,ph=hh=null}finally{Qe=y,le.p=c,X.T=a}}i.current=s,kt=2}}function Zy(){if(kt===2){kt=0;var i=Uo,s=xr,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=X.T,X.T=null;var c=le.p;le.p=2;var y=Qe;Qe|=4;try{Ry(i,s.alternate,s)}finally{Qe=y,le.p=c,X.T=a}}kt=3}}function jy(){if(kt===4||kt===3){kt=0,$l();var i=Uo,s=xr,a=eo,c=qy;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?kt=5:(kt=0,xr=Uo=null,ev(i,i.pendingLanes));var y=i.pendingLanes;if(y===0&&(Po=null),ki(a),s=s.stateNode,zt&&typeof zt.onCommitFiberRoot=="function")try{zt.onCommitFiberRoot(Yn,s,void 0,(s.current.flags&128)===128)}catch{}if(c!==null){s=X.T,y=le.p,le.p=2,X.T=null;try{for(var v=i.onRecoverableError,A=0;A<c.length;A++){var I=c[A];v(I.value,{componentStack:I.stack})}}finally{X.T=s,le.p=y}}(eo&3)!==0&&sc(),Mi(i),y=i.pendingLanes,(a&261930)!==0&&(y&42)!==0?i===eh?sl++:(sl=0,eh=i):sl=0,rl(0)}}function ev(i,s){(i.pooledCacheLanes&=s)===0&&(s=i.pooledCache,s!=null&&(i.pooledCache=null,Ga(s)))}function sc(){return Wy(),Zy(),jy(),tv()}function tv(){if(kt!==5)return!1;var i=Uo,s=Zd;Zd=0;var a=ki(eo),c=X.T,y=le.p;try{le.p=32>a?32:a,X.T=null,a=jd,jd=null;var v=Uo,A=eo;if(kt=0,xr=Uo=null,eo=0,(Qe&6)!==0)throw Error(o(331));var I=Qe;if(Qe|=4,Ly(v.current),Vy(v,v.current,A,a),Qe=I,rl(0,!1),zt&&typeof zt.onPostCommitFiberRoot=="function")try{zt.onPostCommitFiberRoot(Yn,v)}catch{}return!0}finally{le.p=y,X.T=c,ev(i,s)}}function nv(i,s,a){s=Un(a,s),s=Dd(i.stateNode,s,2),i=bo(i,s,2),i!==null&&(rs(i,2),Mi(i))}function je(i,s,a){if(i.tag===3)nv(i,i,a);else for(;s!==null;){if(s.tag===3){nv(s,i,a);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Po===null||!Po.has(c))){i=Un(a,i),a=iy(2),c=bo(s,a,2),c!==null&&(oy(a,c,s,i),rs(c,2),Mi(c));break}}s=s.return}}function ih(i,s,a){var c=i.pingCache;if(c===null){c=i.pingCache=new wC;var y=new Set;c.set(s,y)}else y=c.get(s),y===void 0&&(y=new Set,c.set(s,y));y.has(a)||($d=!0,y.add(a),i=DC.bind(null,i,s,a),s.then(i,i))}function DC(i,s,a){var c=i.pingCache;c!==null&&c.delete(s),i.pingedLanes|=i.suspendedLanes&a,i.warmLanes&=~a,ot===i&&(Le&a)===a&&(gt===4||gt===3&&(Le&62914560)===Le&&300>rn()-ju?(Qe&2)===0&&Mr(i,0):Xd|=a,Nr===Le&&(Nr=0)),Mi(i)}function iv(i,s){s===0&&(s=tu()),i=Es(i,s),i!==null&&(rs(i,s),Mi(i))}function VC(i){var s=i.memoizedState,a=0;s!==null&&(a=s.retryLane),iv(i,a)}function PC(i,s){var a=0;switch(i.tag){case 31:case 13:var c=i.stateNode,y=i.memoizedState;y!==null&&(a=y.retryLane);break;case 19:c=i.stateNode;break;case 22:c=i.stateNode._retryCache;break;default:throw Error(o(314))}c!==null&&c.delete(s),iv(i,a)}function UC(i,s){return Lt(i,s)}var rc=null,Vr=null,oh=!1,ac=!1,sh=!1,ko=0;function Mi(i){i!==Vr&&i.next===null&&(Vr===null?rc=Vr=i:Vr=Vr.next=i),ac=!0,oh||(oh=!0,kC())}function rl(i,s){if(!sh&&ac){sh=!0;do for(var a=!1,c=rc;c!==null;){if(i!==0){var y=c.pendingLanes;if(y===0)var v=0;else{var A=c.suspendedLanes,I=c.pingedLanes;v=(1<<31-yt(42|i)+1)-1,v&=y&~(A&~I),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(a=!0,av(c,v))}else v=Le,v=hi(c,c===ot?v:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(v&3)===0||Kn(c,v)||(a=!0,av(c,v));c=c.next}while(a);sh=!1}}function LC(){ov()}function ov(){ac=oh=!1;var i=0;ko!==0&&KC()&&(i=ko);for(var s=rn(),a=null,c=rc;c!==null;){var y=c.next,v=sv(c,s);v===0?(c.next=null,a===null?rc=y:a.next=y,y===null&&(Vr=a)):(a=c,(i!==0||(v&3)!==0)&&(ac=!0)),c=y}kt!==0&&kt!==5||rl(i),ko!==0&&(ko=0)}function sv(i,s){for(var a=i.suspendedLanes,c=i.pingedLanes,y=i.expirationTimes,v=i.pendingLanes&-62914561;0<v;){var A=31-yt(v),I=1<<A,V=y[A];V===-1?((I&a)===0||(I&c)!==0)&&(y[A]=Pf(I,s)):V<=s&&(i.expiredLanes|=I),v&=~I}if(s=ot,a=Le,a=hi(i,i===s?a:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c=i.callbackNode,a===0||i===s&&(Ze===2||Ze===9)||i.cancelPendingCommit!==null)return c!==null&&c!==null&&co(c),i.callbackNode=null,i.callbackPriority=0;if((a&3)===0||Kn(i,a)){if(s=a&-a,s===i.callbackPriority)return s;switch(c!==null&&co(c),ki(a)){case 2:case 8:a=ga;break;case 32:a=fo;break;case 268435456:a=Xl;break;default:a=fo}return c=rv.bind(null,i),a=Lt(a,c),i.callbackPriority=s,i.callbackNode=a,s}return c!==null&&c!==null&&co(c),i.callbackPriority=2,i.callbackNode=null,2}function rv(i,s){if(kt!==0&&kt!==5)return i.callbackNode=null,i.callbackPriority=0,null;var a=i.callbackNode;if(sc()&&i.callbackNode!==a)return null;var c=Le;return c=hi(i,i===ot?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c===0?null:(By(i,c,s),sv(i,rn()),i.callbackNode!=null&&i.callbackNode===a?rv.bind(null,i):null)}function av(i,s){if(sc())return null;By(i,s,!0)}function kC(){$C(function(){(Qe&6)!==0?Lt(ma,LC):ov()})}function rh(){if(ko===0){var i=vr;i===0&&(i=fi,fi<<=1,(fi&261888)===0&&(fi=256)),ko=i}return ko}function lv(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:ir(""+i)}function uv(i,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,i.id&&a.setAttribute("form",i.id),s.parentNode.insertBefore(a,s),i=new FormData(i),a.parentNode.removeChild(a),i}function OC(i,s,a,c,y){if(s==="submit"&&a&&a.stateNode===y){var v=lv((y[qt]||null).action),A=c.submitter;A&&(s=(s=A[qt]||null)?lv(s.formAction):A.getAttribute("formAction"),s!==null&&(v=s,A=null));var I=new Ci("action","action",null,c,y);i.push({event:I,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(ko!==0){var V=A?uv(y,A):new FormData(y);Rd(a,{pending:!0,data:V,method:y.method,action:v},null,V)}}else typeof v=="function"&&(I.preventDefault(),V=A?uv(y,A):new FormData(y),Rd(a,{pending:!0,data:V,method:y.method,action:v},v,V))},currentTarget:y}]})}}for(var ah=0;ah<Hf.length;ah++){var lh=Hf[ah],qC=lh.toLowerCase(),GC=lh[0].toUpperCase()+lh.slice(1);ti(qC,"on"+GC)}ti(Gm,"onAnimationEnd"),ti(Bm,"onAnimationIteration"),ti(Fm,"onAnimationStart"),ti("dblclick","onDoubleClick"),ti("focusin","onFocus"),ti("focusout","onBlur"),ti(nC,"onTransitionRun"),ti(iC,"onTransitionStart"),ti(oC,"onTransitionCancel"),ti(Hm,"onTransitionEnd"),Ei("onMouseEnter",["mouseout","mouseover"]),Ei("onMouseLeave",["mouseout","mouseover"]),Ei("onPointerEnter",["pointerout","pointerover"]),Ei("onPointerLeave",["pointerout","pointerover"]),_i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),_i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),_i("onBeforeInput",["compositionend","keypress","textInput","paste"]),_i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),_i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),_i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var al="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),BC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(al));function cv(i,s){s=(s&4)!==0;for(var a=0;a<i.length;a++){var c=i[a],y=c.event;c=c.listeners;e:{var v=void 0;if(s)for(var A=c.length-1;0<=A;A--){var I=c[A],V=I.instance,J=I.currentTarget;if(I=I.listener,V!==v&&y.isPropagationStopped())break e;v=I,y.currentTarget=J;try{v(y)}catch(Z){Su(Z)}y.currentTarget=null,v=V}else for(A=0;A<c.length;A++){if(I=c[A],V=I.instance,J=I.currentTarget,I=I.listener,V!==v&&y.isPropagationStopped())break e;v=I,y.currentTarget=J;try{v(y)}catch(Z){Su(Z)}y.currentTarget=null,v=V}}}}function Ue(i,s){var a=s[Zs];a===void 0&&(a=s[Zs]=new Set);var c=i+"__bubble";a.has(c)||(fv(s,i,2,!1),a.add(c))}function uh(i,s,a){var c=0;s&&(c|=4),fv(a,i,c,s)}var lc="_reactListening"+Math.random().toString(36).slice(2);function ch(i){if(!i[lc]){i[lc]=!0,_a.forEach(function(a){a!=="selectionchange"&&(BC.has(a)||uh(a,!1,i),uh(a,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[lc]||(s[lc]=!0,uh("selectionchange",!1,s))}}function fv(i,s,a,c){switch(Gv(s)){case 2:var y=mI;break;case 8:y=gI;break;default:y=Ih}a=y.bind(null,s,a,i),y=void 0,!ds||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(y=!0),c?y!==void 0?i.addEventListener(s,a,{capture:!0,passive:y}):i.addEventListener(s,a,!0):y!==void 0?i.addEventListener(s,a,{passive:y}):i.addEventListener(s,a,!1)}function fh(i,s,a,c,y){var v=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var A=c.tag;if(A===3||A===4){var I=c.stateNode.containerInfo;if(I===y)break;if(A===4)for(A=c.return;A!==null;){var V=A.tag;if((V===3||V===4)&&A.stateNode.containerInfo===y)return;A=A.return}for(;I!==null;){if(A=yi(I),A===null)return;if(V=A.tag,V===5||V===6||V===26||V===27){c=v=A;continue e}I=I.parentNode}}c=c.return}vo(function(){var J=v,Z=Mn(a),ne=[];e:{var Y=zm.get(i);if(Y!==void 0){var Q=Ci,ge=i;switch(i){case"keypress":if(ps(a)===0)break e;case"keydown":case"keyup":Q=_u;break;case"focusin":ge="focus",Q=gs;break;case"focusout":ge="blur",Q=gs;break;case"beforeblur":case"afterblur":Q=gs;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=Da;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=cu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=S;break;case Gm:case Bm:case Fm:Q=du;break;case Hm:Q=b;break;case"scroll":case"scrollend":Q=Ma;break;case"wheel":Q=K;break;case"copy":case"cut":case"paste":Q=hu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=Gi;break;case"toggle":case"beforetoggle":Q=Ne}var Te=(s&4)!==0,it=!Te&&(i==="scroll"||i==="scrollend"),F=Te?Y!==null?Y+"Capture":null:Y;Te=[];for(var k=J,z;k!==null;){var ee=k;if(z=ee.stateNode,ee=ee.tag,ee!==5&&ee!==26&&ee!==27||z===null||F===null||(ee=Wn(k,F),ee!=null&&Te.push(ll(k,ee,z))),it)break;k=k.return}0<Te.length&&(Y=new Q(Y,ge,null,a,Z),ne.push({event:Y,listeners:Te}))}}if((s&7)===0){e:{if(Y=i==="mouseover"||i==="pointerover",Q=i==="mouseout"||i==="pointerout",Y&&a!==ba&&(ge=a.relatedTarget||a.fromElement)&&(yi(ge)||ge[mi]))break e;if((Q||Y)&&(Y=Z.window===Z?Z:(Y=Z.ownerDocument)?Y.defaultView||Y.parentWindow:window,Q?(ge=a.relatedTarget||a.toElement,Q=J,ge=ge?yi(ge):null,ge!==null&&(it=l(ge),Te=ge.tag,ge!==it||Te!==5&&Te!==27&&Te!==6)&&(ge=null)):(Q=null,ge=J),Q!==ge)){if(Te=Da,ee="onMouseLeave",F="onMouseEnter",k="mouse",(i==="pointerout"||i==="pointerover")&&(Te=Gi,ee="onPointerLeave",F="onPointerEnter",k="pointer"),it=Q==null?Y:En(Q),z=ge==null?Y:En(ge),Y=new Te(ee,k+"leave",Q,a,Z),Y.target=it,Y.relatedTarget=z,ee=null,yi(Z)===J&&(Te=new Te(F,k+"enter",ge,a,Z),Te.target=z,Te.relatedTarget=it,ee=Te),it=ee,Q&&ge)t:{for(Te=FC,F=Q,k=ge,z=0,ee=F;ee;ee=Te(ee))z++;ee=0;for(var _e=k;_e;_e=Te(_e))ee++;for(;0<z-ee;)F=Te(F),z--;for(;0<ee-z;)k=Te(k),ee--;for(;z--;){if(F===k||k!==null&&F===k.alternate){Te=F;break t}F=Te(F),k=Te(k)}Te=null}else Te=null;Q!==null&&dv(ne,Y,Q,Te,!1),ge!==null&&it!==null&&dv(ne,it,ge,Te,!0)}}e:{if(Y=J?En(J):window,Q=Y.nodeName&&Y.nodeName.toLowerCase(),Q==="select"||Q==="input"&&Y.type==="file")var ze=Nm;else if(wm(Y))if(xm)ze=jA;else{ze=WA;var ve=XA}else Q=Y.nodeName,!Q||Q.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?J&&nr(J.elementType)&&(ze=Nm):ze=ZA;if(ze&&(ze=ze(i,J))){bm(ne,ze,a,Z);break e}ve&&ve(i,Y,J),i==="focusout"&&J&&Y.type==="number"&&J.memoizedProps.value!=null&&Ia(Y,"number",Y.value)}switch(ve=J?En(J):window,i){case"focusin":(wm(ve)||ve.contentEditable==="true")&&(cr=ve,Gf=J,ka=null);break;case"focusout":ka=Gf=cr=null;break;case"mousedown":Bf=!0;break;case"contextmenu":case"mouseup":case"dragend":Bf=!1,Om(ne,a,Z);break;case"selectionchange":if(tC)break;case"keydown":case"keyup":Om(ne,a,Z)}var De;if(Ke)e:{switch(i){case"compositionstart":var ke="onCompositionStart";break e;case"compositionend":ke="onCompositionEnd";break e;case"compositionupdate":ke="onCompositionUpdate";break e}ke=void 0}else ur?ys(i,a)&&(ke="onCompositionEnd"):i==="keydown"&&a.keyCode===229&&(ke="onCompositionStart");ke&&(wi&&a.locale!=="ko"&&(ur||ke!=="onCompositionStart"?ke==="onCompositionEnd"&&ur&&(De=xa()):(Ai=Z,Na="value"in Ai?Ai.value:Ai.textContent,ur=!0)),ve=uc(J,ke),0<ve.length&&(ke=new Ri(ke,i,null,a,Z),ne.push({event:ke,listeners:ve}),De?ke.data=De:(De=lr(a),De!==null&&(ke.data=De)))),(De=Vn?YA(i,a):KA(i,a))&&(ke=uc(J,"onBeforeInput"),0<ke.length&&(ve=new Ri("onBeforeInput","beforeinput",null,a,Z),ne.push({event:ve,listeners:ke}),ve.data=De)),OC(ne,i,J,a,Z)}cv(ne,s)})}function ll(i,s,a){return{instance:i,listener:s,currentTarget:a}}function uc(i,s){for(var a=s+"Capture",c=[];i!==null;){var y=i,v=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||v===null||(y=Wn(i,a),y!=null&&c.unshift(ll(i,y,v)),y=Wn(i,s),y!=null&&c.push(ll(i,y,v))),i.tag===3)return c;i=i.return}return[]}function FC(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function dv(i,s,a,c,y){for(var v=s._reactName,A=[];a!==null&&a!==c;){var I=a,V=I.alternate,J=I.stateNode;if(I=I.tag,V!==null&&V===c)break;I!==5&&I!==26&&I!==27||J===null||(V=J,y?(J=Wn(a,v),J!=null&&A.unshift(ll(a,J,V))):y||(J=Wn(a,v),J!=null&&A.push(ll(a,J,V)))),a=a.return}A.length!==0&&i.push({event:s,listeners:A})}var HC=/\r\n?/g,zC=/\u0000|\uFFFD/g;function hv(i){return(typeof i=="string"?i:""+i).replace(HC,`
`).replace(zC,"")}function pv(i,s){return s=hv(s),hv(i)===s}function nt(i,s,a,c,y,v){switch(a){case"children":typeof c=="string"?s==="body"||s==="textarea"&&c===""||hn(i,c):(typeof c=="number"||typeof c=="bigint")&&s!=="body"&&hn(i,""+c);break;case"className":Tn(i,"class",c);break;case"tabIndex":Tn(i,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Tn(i,a,c);break;case"style":wa(i,c,v);break;case"data":if(s!=="object"){Tn(i,"data",c);break}case"src":case"href":if(c===""&&(s!=="a"||a!=="href")){i.removeAttribute(a);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(a);break}c=ir(""+c),i.setAttribute(a,c);break;case"action":case"formAction":if(typeof c=="function"){i.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(a==="formAction"?(s!=="input"&&nt(i,s,"name",y.name,y,null),nt(i,s,"formEncType",y.formEncType,y,null),nt(i,s,"formMethod",y.formMethod,y,null),nt(i,s,"formTarget",y.formTarget,y,null)):(nt(i,s,"encType",y.encType,y,null),nt(i,s,"method",y.method,y,null),nt(i,s,"target",y.target,y,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(a);break}c=ir(""+c),i.setAttribute(a,c);break;case"onClick":c!=null&&(i.onclick=Xn);break;case"onScroll":c!=null&&Ue("scroll",i);break;case"onScrollEnd":c!=null&&Ue("scrollend",i);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(o(61));if(a=c.__html,a!=null){if(y.children!=null)throw Error(o(60));i.innerHTML=a}}break;case"multiple":i.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":i.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){i.removeAttribute("xlink:href");break}a=ir(""+c),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,""+c):i.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,""):i.removeAttribute(a);break;case"capture":case"download":c===!0?i.setAttribute(a,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,c):i.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?i.setAttribute(a,c):i.removeAttribute(a);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?i.removeAttribute(a):i.setAttribute(a,c);break;case"popover":Ue("beforetoggle",i),Ue("toggle",i),er(i,"popover",c);break;case"xlinkActuate":Rt(i,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Rt(i,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Rt(i,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Rt(i,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Rt(i,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Rt(i,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Rt(i,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Rt(i,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Rt(i,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":er(i,"is",c);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=uu.get(a)||a,er(i,a,c))}}function dh(i,s,a,c,y,v){switch(a){case"style":wa(i,c,v);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(o(61));if(a=c.__html,a!=null){if(y.children!=null)throw Error(o(60));i.innerHTML=a}}break;case"children":typeof c=="string"?hn(i,c):(typeof c=="number"||typeof c=="bigint")&&hn(i,""+c);break;case"onScroll":c!=null&&Ue("scroll",i);break;case"onScrollEnd":c!=null&&Ue("scrollend",i);break;case"onClick":c!=null&&(i.onclick=Xn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ea.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(y=a.endsWith("Capture"),s=a.slice(2,y?a.length-7:void 0),v=i[qt]||null,v=v!=null?v[a]:null,typeof v=="function"&&i.removeEventListener(s,v,y),typeof c=="function")){typeof v!="function"&&v!==null&&(a in i?i[a]=null:i.hasAttribute(a)&&i.removeAttribute(a)),i.addEventListener(s,c,y);break e}a in i?i[a]=c:c===!0?i.setAttribute(a,""):er(i,a,c)}}}function $t(i,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ue("error",i),Ue("load",i);var c=!1,y=!1,v;for(v in a)if(a.hasOwnProperty(v)){var A=a[v];if(A!=null)switch(v){case"src":c=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:nt(i,s,v,A,a,null)}}y&&nt(i,s,"srcSet",a.srcSet,a,null),c&&nt(i,s,"src",a.src,a,null);return;case"input":Ue("invalid",i);var I=v=A=y=null,V=null,J=null;for(c in a)if(a.hasOwnProperty(c)){var Z=a[c];if(Z!=null)switch(c){case"name":y=Z;break;case"type":A=Z;break;case"checked":V=Z;break;case"defaultChecked":J=Z;break;case"value":v=Z;break;case"defaultValue":I=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(o(137,s));break;default:nt(i,s,c,Z,a,null)}}ru(i,v,I,V,J,A,y,!1);return;case"select":Ue("invalid",i),c=A=v=null;for(y in a)if(a.hasOwnProperty(y)&&(I=a[y],I!=null))switch(y){case"value":v=I;break;case"defaultValue":A=I;break;case"multiple":c=I;default:nt(i,s,y,I,a,null)}s=v,a=A,i.multiple=!!c,s!=null?po(i,!!c,s,!1):a!=null&&po(i,!!c,a,!0);return;case"textarea":Ue("invalid",i),v=y=c=null;for(A in a)if(a.hasOwnProperty(A)&&(I=a[A],I!=null))switch(A){case"value":c=I;break;case"defaultValue":y=I;break;case"children":v=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(o(91));break;default:nt(i,s,A,I,a,null)}mo(i,c,y,v);return;case"option":for(V in a)if(a.hasOwnProperty(V)&&(c=a[V],c!=null))switch(V){case"selected":i.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:nt(i,s,V,c,a,null)}return;case"dialog":Ue("beforetoggle",i),Ue("toggle",i),Ue("cancel",i),Ue("close",i);break;case"iframe":case"object":Ue("load",i);break;case"video":case"audio":for(c=0;c<al.length;c++)Ue(al[c],i);break;case"image":Ue("error",i),Ue("load",i);break;case"details":Ue("toggle",i);break;case"embed":case"source":case"link":Ue("error",i),Ue("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in a)if(a.hasOwnProperty(J)&&(c=a[J],c!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:nt(i,s,J,c,a,null)}return;default:if(nr(s)){for(Z in a)a.hasOwnProperty(Z)&&(c=a[Z],c!==void 0&&dh(i,s,Z,c,a,void 0));return}}for(I in a)a.hasOwnProperty(I)&&(c=a[I],c!=null&&nt(i,s,I,c,a,null))}function JC(i,s,a,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,v=null,A=null,I=null,V=null,J=null,Z=null;for(Q in a){var ne=a[Q];if(a.hasOwnProperty(Q)&&ne!=null)switch(Q){case"checked":break;case"value":break;case"defaultValue":V=ne;default:c.hasOwnProperty(Q)||nt(i,s,Q,null,c,ne)}}for(var Y in c){var Q=c[Y];if(ne=a[Y],c.hasOwnProperty(Y)&&(Q!=null||ne!=null))switch(Y){case"type":v=Q;break;case"name":y=Q;break;case"checked":J=Q;break;case"defaultChecked":Z=Q;break;case"value":A=Q;break;case"defaultValue":I=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(o(137,s));break;default:Q!==ne&&nt(i,s,Y,Q,c,ne)}}tr(i,A,I,V,J,Z,v,y);return;case"select":Q=A=I=Y=null;for(v in a)if(V=a[v],a.hasOwnProperty(v)&&V!=null)switch(v){case"value":break;case"multiple":Q=V;default:c.hasOwnProperty(v)||nt(i,s,v,null,c,V)}for(y in c)if(v=c[y],V=a[y],c.hasOwnProperty(y)&&(v!=null||V!=null))switch(y){case"value":Y=v;break;case"defaultValue":I=v;break;case"multiple":A=v;default:v!==V&&nt(i,s,y,v,c,V)}s=I,a=A,c=Q,Y!=null?po(i,!!a,Y,!1):!!c!=!!a&&(s!=null?po(i,!!a,s,!0):po(i,!!a,a?[]:"",!1));return;case"textarea":Q=Y=null;for(I in a)if(y=a[I],a.hasOwnProperty(I)&&y!=null&&!c.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:nt(i,s,I,null,c,y)}for(A in c)if(y=c[A],v=a[A],c.hasOwnProperty(A)&&(y!=null||v!=null))switch(A){case"value":Y=y;break;case"defaultValue":Q=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(o(91));break;default:y!==v&&nt(i,s,A,y,c,v)}au(i,Y,Q);return;case"option":for(var ge in a)if(Y=a[ge],a.hasOwnProperty(ge)&&Y!=null&&!c.hasOwnProperty(ge))switch(ge){case"selected":i.selected=!1;break;default:nt(i,s,ge,null,c,Y)}for(V in c)if(Y=c[V],Q=a[V],c.hasOwnProperty(V)&&Y!==Q&&(Y!=null||Q!=null))switch(V){case"selected":i.selected=Y&&typeof Y!="function"&&typeof Y!="symbol";break;default:nt(i,s,V,Y,c,Q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Te in a)Y=a[Te],a.hasOwnProperty(Te)&&Y!=null&&!c.hasOwnProperty(Te)&&nt(i,s,Te,null,c,Y);for(J in c)if(Y=c[J],Q=a[J],c.hasOwnProperty(J)&&Y!==Q&&(Y!=null||Q!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(o(137,s));break;default:nt(i,s,J,Y,c,Q)}return;default:if(nr(s)){for(var it in a)Y=a[it],a.hasOwnProperty(it)&&Y!==void 0&&!c.hasOwnProperty(it)&&dh(i,s,it,void 0,c,Y);for(Z in c)Y=c[Z],Q=a[Z],!c.hasOwnProperty(Z)||Y===Q||Y===void 0&&Q===void 0||dh(i,s,Z,Y,c,Q);return}}for(var F in a)Y=a[F],a.hasOwnProperty(F)&&Y!=null&&!c.hasOwnProperty(F)&&nt(i,s,F,null,c,Y);for(ne in c)Y=c[ne],Q=a[ne],!c.hasOwnProperty(ne)||Y===Q||Y==null&&Q==null||nt(i,s,ne,Y,c,Q)}function mv(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function YC(){if(typeof performance.getEntriesByType=="function"){for(var i=0,s=0,a=performance.getEntriesByType("resource"),c=0;c<a.length;c++){var y=a[c],v=y.transferSize,A=y.initiatorType,I=y.duration;if(v&&I&&mv(A)){for(A=0,I=y.responseEnd,c+=1;c<a.length;c++){var V=a[c],J=V.startTime;if(J>I)break;var Z=V.transferSize,ne=V.initiatorType;Z&&mv(ne)&&(V=V.responseEnd,A+=Z*(V<I?1:(I-J)/(V-J)))}if(--c,s+=8*(v+A)/(y.duration/1e3),i++,10<i)break}}if(0<i)return s/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var hh=null,ph=null;function cc(i){return i.nodeType===9?i:i.ownerDocument}function gv(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function yv(i,s){if(i===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&s==="foreignObject"?0:i}function mh(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var gh=null;function KC(){var i=window.event;return i&&i.type==="popstate"?i===gh?!1:(gh=i,!0):(gh=null,!1)}var vv=typeof setTimeout=="function"?setTimeout:void 0,QC=typeof clearTimeout=="function"?clearTimeout:void 0,_v=typeof Promise=="function"?Promise:void 0,$C=typeof queueMicrotask=="function"?queueMicrotask:typeof _v<"u"?function(i){return _v.resolve(null).then(i).catch(XC)}:vv;function XC(i){setTimeout(function(){throw i})}function Oo(i){return i==="head"}function Ev(i,s){var a=s,c=0;do{var y=a.nextSibling;if(i.removeChild(a),y&&y.nodeType===8)if(a=y.data,a==="/$"||a==="/&"){if(c===0){i.removeChild(y),kr(s);return}c--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")c++;else if(a==="html")ul(i.ownerDocument.documentElement);else if(a==="head"){a=i.ownerDocument.head,ul(a);for(var v=a.firstChild;v;){var A=v.nextSibling,I=v.nodeName;v[gi]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&v.rel.toLowerCase()==="stylesheet"||a.removeChild(v),v=A}}else a==="body"&&ul(i.ownerDocument.body);a=y}while(a);kr(s)}function Tv(i,s){var a=i;i=0;do{var c=a.nextSibling;if(a.nodeType===1?s?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(s?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),c&&c.nodeType===8)if(a=c.data,a==="/$"){if(i===0)break;i--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||i++;a=c}while(a)}function yh(i){var s=i.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":yh(a),js(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}i.removeChild(a)}}function WC(i,s,a,c){for(;i.nodeType===1;){var y=a;if(i.nodeName.toLowerCase()!==s.toLowerCase()){if(!c&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(c){if(!i[gi])switch(s){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(v=i.getAttribute("rel"),v==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(v!==y.rel||i.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||i.getAttribute("title")!==(y.title==null?null:y.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(v=i.getAttribute("src"),(v!==(y.src==null?null:y.src)||i.getAttribute("type")!==(y.type==null?null:y.type)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&v&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(s==="input"&&i.type==="hidden"){var v=y.name==null?null:""+y.name;if(y.type==="hidden"&&i.getAttribute("name")===v)return i}else return i;if(i=Gn(i.nextSibling),i===null)break}return null}function ZC(i,s,a){if(s==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=Gn(i.nextSibling),i===null))return null;return i}function Sv(i,s){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!s||(i=Gn(i.nextSibling),i===null))return null;return i}function vh(i){return i.data==="$?"||i.data==="$~"}function _h(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function jC(i,s){var a=i.ownerDocument;if(i.data==="$~")i._reactRetry=s;else if(i.data!=="$?"||a.readyState!=="loading")s();else{var c=function(){s(),a.removeEventListener("DOMContentLoaded",c)};a.addEventListener("DOMContentLoaded",c),i._reactRetry=c}}function Gn(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return i}var Eh=null;function Av(i){i=i.nextSibling;for(var s=0;i;){if(i.nodeType===8){var a=i.data;if(a==="/$"||a==="/&"){if(s===0)return Gn(i.nextSibling);s--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||s++}i=i.nextSibling}return null}function Cv(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var a=i.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(s===0)return i;s--}else a!=="/$"&&a!=="/&"||s++}i=i.previousSibling}return null}function Iv(i,s,a){switch(s=cc(a),i){case"html":if(i=s.documentElement,!i)throw Error(o(452));return i;case"head":if(i=s.head,!i)throw Error(o(453));return i;case"body":if(i=s.body,!i)throw Error(o(454));return i;default:throw Error(o(451))}}function ul(i){for(var s=i.attributes;s.length;)i.removeAttributeNode(s[0]);js(i)}var Bn=new Map,Rv=new Set;function fc(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var to=le.d;le.d={f:eI,r:tI,D:nI,C:iI,L:oI,m:sI,X:aI,S:rI,M:lI};function eI(){var i=to.f(),s=nc();return i||s}function tI(i){var s=xn(i);s!==null&&s.tag===5&&s.type==="form"?Hg(s):to.r(i)}var Pr=typeof document>"u"?null:document;function wv(i,s,a){var c=Pr;if(c&&typeof s=="string"&&s){var y=dn(s);y='link[rel="'+i+'"][href="'+y+'"]',typeof a=="string"&&(y+='[crossorigin="'+a+'"]'),Rv.has(y)||(Rv.add(y),i={rel:i,crossOrigin:a,href:s},c.querySelector(y)===null&&(s=c.createElement("link"),$t(s,"link",i),It(s),c.head.appendChild(s)))}}function nI(i){to.D(i),wv("dns-prefetch",i,null)}function iI(i,s){to.C(i,s),wv("preconnect",i,s)}function oI(i,s,a){to.L(i,s,a);var c=Pr;if(c&&i&&s){var y='link[rel="preload"][as="'+dn(s)+'"]';s==="image"&&a&&a.imageSrcSet?(y+='[imagesrcset="'+dn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(y+='[imagesizes="'+dn(a.imageSizes)+'"]')):y+='[href="'+dn(i)+'"]';var v=y;switch(s){case"style":v=Ur(i);break;case"script":v=Lr(i)}Bn.has(v)||(i=T({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:i,as:s},a),Bn.set(v,i),c.querySelector(y)!==null||s==="style"&&c.querySelector(cl(v))||s==="script"&&c.querySelector(fl(v))||(s=c.createElement("link"),$t(s,"link",i),It(s),c.head.appendChild(s)))}}function sI(i,s){to.m(i,s);var a=Pr;if(a&&i){var c=s&&typeof s.as=="string"?s.as:"script",y='link[rel="modulepreload"][as="'+dn(c)+'"][href="'+dn(i)+'"]',v=y;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=Lr(i)}if(!Bn.has(v)&&(i=T({rel:"modulepreload",href:i},s),Bn.set(v,i),a.querySelector(y)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(fl(v)))return}c=a.createElement("link"),$t(c,"link",i),It(c),a.head.appendChild(c)}}}function rI(i,s,a){to.S(i,s,a);var c=Pr;if(c&&i){var y=vi(c).hoistableStyles,v=Ur(i);s=s||"default";var A=y.get(v);if(!A){var I={loading:0,preload:null};if(A=c.querySelector(cl(v)))I.loading=5;else{i=T({rel:"stylesheet",href:i,"data-precedence":s},a),(a=Bn.get(v))&&Th(i,a);var V=A=c.createElement("link");It(V),$t(V,"link",i),V._p=new Promise(function(J,Z){V.onload=J,V.onerror=Z}),V.addEventListener("load",function(){I.loading|=1}),V.addEventListener("error",function(){I.loading|=2}),I.loading|=4,dc(A,s,c)}A={type:"stylesheet",instance:A,count:1,state:I},y.set(v,A)}}}function aI(i,s){to.X(i,s);var a=Pr;if(a&&i){var c=vi(a).hoistableScripts,y=Lr(i),v=c.get(y);v||(v=a.querySelector(fl(y)),v||(i=T({src:i,async:!0},s),(s=Bn.get(y))&&Sh(i,s),v=a.createElement("script"),It(v),$t(v,"link",i),a.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(y,v))}}function lI(i,s){to.M(i,s);var a=Pr;if(a&&i){var c=vi(a).hoistableScripts,y=Lr(i),v=c.get(y);v||(v=a.querySelector(fl(y)),v||(i=T({src:i,async:!0,type:"module"},s),(s=Bn.get(y))&&Sh(i,s),v=a.createElement("script"),It(v),$t(v,"link",i),a.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(y,v))}}function bv(i,s,a,c){var y=(y=Me.current)?fc(y):null;if(!y)throw Error(o(446));switch(i){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=Ur(a.href),a=vi(y).hoistableStyles,c=a.get(s),c||(c={type:"style",instance:null,count:0,state:null},a.set(s,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){i=Ur(a.href);var v=vi(y).hoistableStyles,A=v.get(i);if(A||(y=y.ownerDocument||y,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(i,A),(v=y.querySelector(cl(i)))&&!v._p&&(A.instance=v,A.state.loading=5),Bn.has(i)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Bn.set(i,a),v||uI(y,i,a,A.state))),s&&c===null)throw Error(o(528,""));return A}if(s&&c!==null)throw Error(o(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Lr(a),a=vi(y).hoistableScripts,c=a.get(s),c||(c={type:"script",instance:null,count:0,state:null},a.set(s,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,i))}}function Ur(i){return'href="'+dn(i)+'"'}function cl(i){return'link[rel="stylesheet"]['+i+"]"}function Nv(i){return T({},i,{"data-precedence":i.precedence,precedence:null})}function uI(i,s,a,c){i.querySelector('link[rel="preload"][as="style"]['+s+"]")?c.loading=1:(s=i.createElement("link"),c.preload=s,s.addEventListener("load",function(){return c.loading|=1}),s.addEventListener("error",function(){return c.loading|=2}),$t(s,"link",a),It(s),i.head.appendChild(s))}function Lr(i){return'[src="'+dn(i)+'"]'}function fl(i){return"script[async]"+i}function xv(i,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var c=i.querySelector('style[data-href~="'+dn(a.href)+'"]');if(c)return s.instance=c,It(c),c;var y=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return c=(i.ownerDocument||i).createElement("style"),It(c),$t(c,"style",y),dc(c,a.precedence,i),s.instance=c;case"stylesheet":y=Ur(a.href);var v=i.querySelector(cl(y));if(v)return s.state.loading|=4,s.instance=v,It(v),v;c=Nv(a),(y=Bn.get(y))&&Th(c,y),v=(i.ownerDocument||i).createElement("link"),It(v);var A=v;return A._p=new Promise(function(I,V){A.onload=I,A.onerror=V}),$t(v,"link",c),s.state.loading|=4,dc(v,a.precedence,i),s.instance=v;case"script":return v=Lr(a.src),(y=i.querySelector(fl(v)))?(s.instance=y,It(y),y):(c=a,(y=Bn.get(v))&&(c=T({},a),Sh(c,y)),i=i.ownerDocument||i,y=i.createElement("script"),It(y),$t(y,"link",c),i.head.appendChild(y),s.instance=y);case"void":return null;default:throw Error(o(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(c=s.instance,s.state.loading|=4,dc(c,a.precedence,i));return s.instance}function dc(i,s,a){for(var c=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=c.length?c[c.length-1]:null,v=y,A=0;A<c.length;A++){var I=c[A];if(I.dataset.precedence===s)v=I;else if(v!==y)break}v?v.parentNode.insertBefore(i,v.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(i,s.firstChild))}function Th(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.title==null&&(i.title=s.title)}function Sh(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.integrity==null&&(i.integrity=s.integrity)}var hc=null;function Mv(i,s,a){if(hc===null){var c=new Map,y=hc=new Map;y.set(a,c)}else y=hc,c=y.get(a),c||(c=new Map,y.set(a,c));if(c.has(i))return c;for(c.set(i,null),a=a.getElementsByTagName(i),y=0;y<a.length;y++){var v=a[y];if(!(v[gi]||v[Ct]||i==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var A=v.getAttribute(s)||"";A=i+A;var I=c.get(A);I?I.push(v):c.set(A,[v])}}return c}function Dv(i,s,a){i=i.ownerDocument||i,i.head.insertBefore(a,s==="title"?i.querySelector("head > title"):null)}function cI(i,s,a){if(a===1||s.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return i=s.disabled,typeof s.precedence=="string"&&i==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Vv(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function fI(i,s,a,c){if(a.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var y=Ur(c.href),v=s.querySelector(cl(y));if(v){s=v._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(i.count++,i=pc.bind(i),s.then(i,i)),a.state.loading|=4,a.instance=v,It(v);return}v=s.ownerDocument||s,c=Nv(c),(y=Bn.get(y))&&Th(c,y),v=v.createElement("link"),It(v);var A=v;A._p=new Promise(function(I,V){A.onload=I,A.onerror=V}),$t(v,"link",c),a.instance=v}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(i.count++,a=pc.bind(i),s.addEventListener("load",a),s.addEventListener("error",a))}}var Ah=0;function dI(i,s){return i.stylesheets&&i.count===0&&gc(i,i.stylesheets),0<i.count||0<i.imgCount?function(a){var c=setTimeout(function(){if(i.stylesheets&&gc(i,i.stylesheets),i.unsuspend){var v=i.unsuspend;i.unsuspend=null,v()}},6e4+s);0<i.imgBytes&&Ah===0&&(Ah=62500*YC());var y=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&gc(i,i.stylesheets),i.unsuspend)){var v=i.unsuspend;i.unsuspend=null,v()}},(i.imgBytes>Ah?50:800)+s);return i.unsuspend=a,function(){i.unsuspend=null,clearTimeout(c),clearTimeout(y)}}:null}function pc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)gc(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var mc=null;function gc(i,s){i.stylesheets=null,i.unsuspend!==null&&(i.count++,mc=new Map,s.forEach(hI,i),mc=null,pc.call(i))}function hI(i,s){if(!(s.state.loading&4)){var a=mc.get(i);if(a)var c=a.get(null);else{a=new Map,mc.set(i,a);for(var y=i.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<y.length;v++){var A=y[v];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(a.set(A.dataset.precedence,A),c=A)}c&&a.set(null,c)}y=s.instance,A=y.getAttribute("data-precedence"),v=a.get(A)||c,v===c&&a.set(null,y),a.set(A,y),this.count++,c=pc.bind(this),y.addEventListener("load",c),y.addEventListener("error",c),v?v.parentNode.insertBefore(y,v.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(y,i.firstChild)),s.state.loading|=4}}var dl={$$typeof:j,Provider:null,Consumer:null,_currentValue:ye,_currentValue2:ye,_threadCount:0};function pI(i,s,a,c,y,v,A,I,V){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=pi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pi(0),this.hiddenUpdates=pi(null),this.identifierPrefix=c,this.onUncaughtError=y,this.onCaughtError=v,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=V,this.incompleteTransitions=new Map}function Pv(i,s,a,c,y,v,A,I,V,J,Z,ne){return i=new pI(i,s,a,A,V,J,Z,ne,I),s=1,v===!0&&(s|=24),v=An(3,null,null,s),i.current=v,v.stateNode=i,s=nd(),s.refCount++,i.pooledCache=s,s.refCount++,v.memoizedState={element:c,isDehydrated:a,cache:s},rd(v),i}function Uv(i){return i?(i=hr,i):hr}function Lv(i,s,a,c,y,v){y=Uv(y),c.context===null?c.context=y:c.pendingContext=y,c=wo(s),c.payload={element:a},v=v===void 0?null:v,v!==null&&(c.callback=v),a=bo(i,c,s),a!==null&&(vn(a,i,s),za(a,i,s))}function kv(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var a=i.retryLane;i.retryLane=a!==0&&a<s?a:s}}function Ch(i,s){kv(i,s),(i=i.alternate)&&kv(i,s)}function Ov(i){if(i.tag===13||i.tag===31){var s=Es(i,67108864);s!==null&&vn(s,i,67108864),Ch(i,67108864)}}function qv(i){if(i.tag===13||i.tag===31){var s=bn();s=ls(s);var a=Es(i,s);a!==null&&vn(a,i,s),Ch(i,s)}}var yc=!0;function mI(i,s,a,c){var y=X.T;X.T=null;var v=le.p;try{le.p=2,Ih(i,s,a,c)}finally{le.p=v,X.T=y}}function gI(i,s,a,c){var y=X.T;X.T=null;var v=le.p;try{le.p=8,Ih(i,s,a,c)}finally{le.p=v,X.T=y}}function Ih(i,s,a,c){if(yc){var y=Rh(c);if(y===null)fh(i,s,c,vc,a),Bv(i,c);else if(vI(y,i,s,a,c))c.stopPropagation();else if(Bv(i,c),s&4&&-1<yI.indexOf(i)){for(;y!==null;){var v=xn(y);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var A=di(v.pendingLanes);if(A!==0){var I=v;for(I.pendingLanes|=2,I.entangledLanes|=2;A;){var V=1<<31-yt(A);I.entanglements[1]|=V,A&=~V}Mi(v),(Qe&6)===0&&(ec=rn()+500,rl(0))}}break;case 31:case 13:I=Es(v,2),I!==null&&vn(I,v,2),nc(),Ch(v,2)}if(v=Rh(c),v===null&&fh(i,s,c,vc,a),v===y)break;y=v}y!==null&&c.stopPropagation()}else fh(i,s,c,null,a)}}function Rh(i){return i=Mn(i),wh(i)}var vc=null;function wh(i){if(vc=null,i=yi(i),i!==null){var s=l(i);if(s===null)i=null;else{var a=s.tag;if(a===13){if(i=u(s),i!==null)return i;i=null}else if(a===31){if(i=d(s),i!==null)return i;i=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return vc=i,null}function Gv(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(os()){case ma:return 2;case ga:return 8;case fo:case Vf:return 32;case Xl:return 268435456;default:return 32}default:return 32}}var bh=!1,qo=null,Go=null,Bo=null,hl=new Map,pl=new Map,Fo=[],yI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Bv(i,s){switch(i){case"focusin":case"focusout":qo=null;break;case"dragenter":case"dragleave":Go=null;break;case"mouseover":case"mouseout":Bo=null;break;case"pointerover":case"pointerout":hl.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":pl.delete(s.pointerId)}}function ml(i,s,a,c,y,v){return i===null||i.nativeEvent!==v?(i={blockedOn:s,domEventName:a,eventSystemFlags:c,nativeEvent:v,targetContainers:[y]},s!==null&&(s=xn(s),s!==null&&Ov(s)),i):(i.eventSystemFlags|=c,s=i.targetContainers,y!==null&&s.indexOf(y)===-1&&s.push(y),i)}function vI(i,s,a,c,y){switch(s){case"focusin":return qo=ml(qo,i,s,a,c,y),!0;case"dragenter":return Go=ml(Go,i,s,a,c,y),!0;case"mouseover":return Bo=ml(Bo,i,s,a,c,y),!0;case"pointerover":var v=y.pointerId;return hl.set(v,ml(hl.get(v)||null,i,s,a,c,y)),!0;case"gotpointercapture":return v=y.pointerId,pl.set(v,ml(pl.get(v)||null,i,s,a,c,y)),!0}return!1}function Fv(i){var s=yi(i.target);if(s!==null){var a=l(s);if(a!==null){if(s=a.tag,s===13){if(s=u(a),s!==null){i.blockedOn=s,Qn(i.priority,function(){qv(a)});return}}else if(s===31){if(s=d(a),s!==null){i.blockedOn=s,Qn(i.priority,function(){qv(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){i.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}i.blockedOn=null}function _c(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var a=Rh(i.nativeEvent);if(a===null){a=i.nativeEvent;var c=new a.constructor(a.type,a);ba=c,a.target.dispatchEvent(c),ba=null}else return s=xn(a),s!==null&&Ov(s),i.blockedOn=a,!1;s.shift()}return!0}function Hv(i,s,a){_c(i)&&a.delete(s)}function _I(){bh=!1,qo!==null&&_c(qo)&&(qo=null),Go!==null&&_c(Go)&&(Go=null),Bo!==null&&_c(Bo)&&(Bo=null),hl.forEach(Hv),pl.forEach(Hv)}function Ec(i,s){i.blockedOn===s&&(i.blockedOn=null,bh||(bh=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,_I)))}var Tc=null;function zv(i){Tc!==i&&(Tc=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Tc===i&&(Tc=null);for(var s=0;s<i.length;s+=3){var a=i[s],c=i[s+1],y=i[s+2];if(typeof c!="function"){if(wh(c||a)===null)continue;break}var v=xn(a);v!==null&&(i.splice(s,3),s-=3,Rd(v,{pending:!0,data:y,method:a.method,action:c},c,y))}}))}function kr(i){function s(V){return Ec(V,i)}qo!==null&&Ec(qo,i),Go!==null&&Ec(Go,i),Bo!==null&&Ec(Bo,i),hl.forEach(s),pl.forEach(s);for(var a=0;a<Fo.length;a++){var c=Fo[a];c.blockedOn===i&&(c.blockedOn=null)}for(;0<Fo.length&&(a=Fo[0],a.blockedOn===null);)Fv(a),a.blockedOn===null&&Fo.shift();if(a=(i.ownerDocument||i).$$reactFormReplay,a!=null)for(c=0;c<a.length;c+=3){var y=a[c],v=a[c+1],A=y[qt]||null;if(typeof v=="function")A||zv(a);else if(A){var I=null;if(v&&v.hasAttribute("formAction")){if(y=v,A=v[qt]||null)I=A.formAction;else if(wh(y)!==null)continue}else I=A.action;typeof I=="function"?a[c+1]=I:(a.splice(c,3),c-=3),zv(a)}}}function Jv(){function i(v){v.canIntercept&&v.info==="react-transition"&&v.intercept({handler:function(){return new Promise(function(A){return y=A})},focusReset:"manual",scroll:"manual"})}function s(){y!==null&&(y(),y=null),c||setTimeout(a,20)}function a(){if(!c&&!navigation.transition){var v=navigation.currentEntry;v&&v.url!=null&&navigation.navigate(v.url,{state:v.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,y=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(a,100),function(){c=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),y!==null&&(y(),y=null)}}}function Nh(i){this._internalRoot=i}Sc.prototype.render=Nh.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(o(409));var a=s.current,c=bn();Lv(a,c,i,s,null,null)},Sc.prototype.unmount=Nh.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;Lv(i.current,2,null,i,null,null),nc(),s[mi]=null}};function Sc(i){this._internalRoot=i}Sc.prototype.unstable_scheduleHydration=function(i){if(i){var s=nu();i={blockedOn:null,target:i,priority:s};for(var a=0;a<Fo.length&&s!==0&&s<Fo[a].priority;a++);Fo.splice(a,0,i),a===0&&Fv(i)}};var Yv=e.version;if(Yv!=="19.2.4")throw Error(o(527,Yv,"19.2.4"));le.findDOMNode=function(i){var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(o(188)):(i=Object.keys(i).join(","),Error(o(268,i)));return i=m(s),i=i!==null?_(i):null,i=i===null?null:i.stateNode,i};var EI={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ac=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ac.isDisabled&&Ac.supportsFiber)try{Yn=Ac.inject(EI),zt=Ac}catch{}}return yl.createRoot=function(i,s){if(!r(i))throw Error(o(299));var a=!1,c="",y=jg,v=ey,A=ty;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(y=s.onUncaughtError),s.onCaughtError!==void 0&&(v=s.onCaughtError),s.onRecoverableError!==void 0&&(A=s.onRecoverableError)),s=Pv(i,1,!1,null,null,a,c,null,y,v,A,Jv),i[mi]=s.current,ch(i),new Nh(s)},yl.hydrateRoot=function(i,s,a){if(!r(i))throw Error(o(299));var c=!1,y="",v=jg,A=ey,I=ty,V=null;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(y=a.identifierPrefix),a.onUncaughtError!==void 0&&(v=a.onUncaughtError),a.onCaughtError!==void 0&&(A=a.onCaughtError),a.onRecoverableError!==void 0&&(I=a.onRecoverableError),a.formState!==void 0&&(V=a.formState)),s=Pv(i,1,!0,s,a??null,c,y,V,v,A,I,Jv),s.context=Uv(null),a=s.current,c=bn(),c=ls(c),y=wo(c),y.callback=null,bo(a,y,c),a=c,s.current.lanes=a,rs(s,a),Mi(s),i[mi]=s.current,ch(i),new Sc(s)},yl.version="19.2.4",yl}var n_;function MI(){if(n_)return Dh.exports;n_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Dh.exports=xI(),Dh.exports}var DI=MI();const VI=XE(DI);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WE=(...n)=>n.filter((e,t,o)=>!!e&&e.trim()!==""&&o.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PI=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UI=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,o)=>o?o.toUpperCase():t.toLowerCase());/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i_=n=>{const e=UI(n);return e.charAt(0).toUpperCase()+e.slice(1)};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var LI={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kI=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OI=ut.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:o,className:r="",children:l,iconNode:u,...d},g)=>ut.createElement("svg",{ref:g,...LI,width:e,height:e,stroke:n,strokeWidth:o?Number(t)*24/Number(e):t,className:WE("lucide",r),...!l&&!kI(d)&&{"aria-hidden":"true"},...d},[...u.map(([m,_])=>ut.createElement(m,_)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=(n,e)=>{const t=ut.forwardRef(({className:o,...r},l)=>ut.createElement(OI,{ref:l,iconNode:e,className:WE(`lucide-${PI(i_(n))}`,`lucide-${n}`,o),...r}));return t.displayName=i_(n),t};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qI=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],GI=st("camera",qI);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BI=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],FI=st("chevron-left",BI);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Pp=st("circle-alert",HI);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zI=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],wl=st("circle-check-big",zI);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],YI=st("circle-plus",JI);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],QI=st("circle-question-mark",KI);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $I=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],XI=st("clock",$I);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WI=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],ZI=st("cloud",WI);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jI=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],o_=st("external-link",jI);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eR=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],tR=st("eye-off",eR);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nR=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],s_=st("file-text",nR);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iR=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],oR=st("globe",iR);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sR=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],rR=st("info",sR);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aR=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],lR=st("key",aR);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uR=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],cR=st("layout-dashboard",uR);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fR=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],dR=st("loader-circle",fR);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hR=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],pR=st("lock",hR);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mR=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],gR=st("log-out",mR);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yR=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],vR=st("printer",yR);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _R=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],r_=st("refresh-cw",_R);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ER=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],TR=st("search",ER);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SR=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],AR=st("settings",SR);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CR=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],IR=st("shield-alert",CR);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RR=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],wR=st("trash-2",RR);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bR=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],NR=st("triangle-alert",bR);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xR=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],MR=st("user-check",xR);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DR=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],VR=st("x",DR);class Hl{constructor(e=0,t="Network Error"){this.status=e,this.text=t}}const PR=()=>{if(!(typeof localStorage>"u"))return{get:n=>Promise.resolve(localStorage.getItem(n)),set:(n,e)=>Promise.resolve(localStorage.setItem(n,e)),remove:n=>Promise.resolve(localStorage.removeItem(n))}},Wt={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:PR()},Up=n=>n?typeof n=="string"?{publicKey:n}:n.toString()==="[object Object]"?n:{}:{},UR=(n,e="https://api.emailjs.com")=>{if(!n)return;const t=Up(n);Wt.publicKey=t.publicKey,Wt.blockHeadless=t.blockHeadless,Wt.storageProvider=t.storageProvider,Wt.blockList=t.blockList,Wt.limitRate=t.limitRate,Wt.origin=t.origin||e},ZE=async(n,e,t={})=>{const o=await fetch(Wt.origin+n,{method:"POST",headers:t,body:e}),r=await o.text(),l=new Hl(o.status,r);if(o.ok)return l;throw l},jE=(n,e,t)=>{if(!n||typeof n!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e||typeof e!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!t||typeof t!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},LR=n=>{if(n&&n.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},eT=n=>n.webdriver||!n.languages||n.languages.length===0,tT=()=>new Hl(451,"Unavailable For Headless Browser"),kR=(n,e)=>{if(!Array.isArray(n))throw"The BlockList list has to be an array";if(typeof e!="string")throw"The BlockList watchVariable has to be a string"},OR=n=>{var e;return!((e=n.list)!=null&&e.length)||!n.watchVariable},qR=(n,e)=>n instanceof FormData?n.get(e):n[e],nT=(n,e)=>{if(OR(n))return!1;kR(n.list,n.watchVariable);const t=qR(e,n.watchVariable);return typeof t!="string"?!1:n.list.includes(t)},iT=()=>new Hl(403,"Forbidden"),GR=(n,e)=>{if(typeof n!="number"||n<0)throw"The LimitRate throttle has to be a positive number";if(e&&typeof e!="string")throw"The LimitRate ID has to be a non-empty string"},BR=async(n,e,t)=>{const o=Number(await t.get(n)||0);return e-Date.now()+o},oT=async(n,e,t)=>{if(!e.throttle||!t)return!1;GR(e.throttle,e.id);const o=e.id||n;return await BR(o,e.throttle,t)>0?!0:(await t.set(o,Date.now().toString()),!1)},sT=()=>new Hl(429,"Too Many Requests"),FR=async(n,e,t,o)=>{const r=Up(o),l=r.publicKey||Wt.publicKey,u=r.blockHeadless||Wt.blockHeadless,d=r.storageProvider||Wt.storageProvider,g={...Wt.blockList,...r.blockList},m={...Wt.limitRate,...r.limitRate};return u&&eT(navigator)?Promise.reject(tT()):(jE(l,n,e),LR(t),t&&nT(g,t)?Promise.reject(iT()):await oT(location.pathname,m,d)?Promise.reject(sT()):ZE("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:l,service_id:n,template_id:e,template_params:t}),{"Content-type":"application/json"}))},HR=n=>{if(!n||n.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},zR=n=>typeof n=="string"?document.querySelector(n):n,JR=async(n,e,t,o)=>{const r=Up(o),l=r.publicKey||Wt.publicKey,u=r.blockHeadless||Wt.blockHeadless,d=Wt.storageProvider||r.storageProvider,g={...Wt.blockList,...r.blockList},m={...Wt.limitRate,...r.limitRate};if(u&&eT(navigator))return Promise.reject(tT());const _=zR(t);jE(l,n,e),HR(_);const T=new FormData(_);return nT(g,T)?Promise.reject(iT()):await oT(location.pathname,m,d)?Promise.reject(sT()):(T.append("lib_version","4.4.1"),T.append("service_id",n),T.append("template_id",e),T.append("user_id",l),ZE("/api/v1.0/email/send-form",T))},YR={init:UR,send:FR,sendForm:JR,EmailJSResponseStatus:Hl};var rT=(n=>(n.FISICA="Violncia Fsica",n.PSICOLOGICA="Violncia Psicolgica/Emocional",n.SEXUAL="Violncia Sexual",n.ASSETJAMENT="Assetjament (Bullying)",n.CIBER="Ciberassetjament",n.NEGLIGENCIA="Negligncia/Abandonament",n.AUTORITAT="Abs d'Autoritat",n.DISCRIMINACIO="Discriminaci/LGTBIfbia",n.ALTRES="Altres",n))(rT||{}),$h=(n=>(n.VICTIMA="La mateixa vctima (Menor)",n.PROGENITOR="Pare / Mare / Tutor",n.ENTRENADOR="Staff Tcnic / Entrenador",n.JUGADOR="Company / Altre jugador",n.DIRECTIU="Directiu / Coordinador",n.TESTIMONI="Testimoni extern",n.ALTRE="Altre",n))($h||{});const KR=["Escoleta","Benjam","Alev","Infantil","Cadet","Juvenil","Snior","Mster","Altre"],QR=["Entrenador/a","Delegat/da","Jugador/a","Familiar","Pblic","Staff","rbitre","Altre"],$R=["Home","Dona","Altre","No especificat"],XR=["Poliesportiu Municipal de Molins","Pavell Municipal (La Granja)","Pista Escola Estel","Pista Escola Madorell","Bus / Desplaament oficial","Pavell rival (partit fora)","Gimns / Vestidors","Zones comunes (bar, passadissos)","Altre"],WR=({onCancel:n,onSubmit:e})=>{const[t,o]=ut.useState(1),[r,l]=ut.useState(!1),[u,d]=ut.useState(!1),[g,m]=ut.useState({informant:{name:"",dni:"",email:"",phone:"",type:$h.VICTIMA},involved:{victimName:"",victimAge:"",victimGender:"No especificat",victimCategory:"",accusedName:"",accusedRelation:""},facts:{date:new Date().toISOString().split("T")[0],time:"",location:"",violenceTypes:[],description:"",witnesses:"",isRecurring:!1}}),_=E=>{const R=[...g.facts.violenceTypes],P=R.indexOf(E);P>-1?R.splice(P,1):R.push(E),m({...g,facts:{...g.facts,violenceTypes:R}})},T=()=>t===1?r?!0:g.informant.name.length>2&&g.informant.email.includes("@")&&g.informant.phone.length>=9:t===2?g.involved.victimName.length>2&&g.involved.victimCategory!==""&&g.involved.victimAge!=="":t===3?g.facts.description.trim().length>5&&g.facts.location!==""&&g.facts.violenceTypes.length>0:t===5?u:!0;return w.jsxs("div",{className:"max-w-4xl mx-auto bg-white rounded-[2.5rem] shadow-2xl overflow-hidden border border-slate-100",children:[w.jsxs("div",{className:"bg-slate-900 p-8 text-white flex items-center gap-4",children:[w.jsx("div",{className:"h-16 w-16 flex items-center justify-center overflow-hidden",children:w.jsx("img",{src:"https://github.com/handbolmolins/URLimagenes/blob/main/MOLINS%20COLOR.png?raw=true",alt:"Escut Handbol Molins",className:"h-full w-full object-contain"})}),w.jsxs("div",{children:[w.jsx("h3",{className:"text-2xl font-black",children:"Comunicaci d'Incidents"}),w.jsx("p",{className:"text-slate-400 text-xs font-bold uppercase tracking-widest mt-1",children:"Protocol LOPIVI  Club Handbol Molins"})]})]}),w.jsxs("div",{className:"p-8 md:p-12",children:[w.jsx("div",{className:"flex items-center justify-between mb-12 max-w-md mx-auto",children:[1,2,3,4,5].map(E=>w.jsx("div",{className:"flex flex-col items-center gap-2",children:w.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold text-sm transition-all ${t===E?"bg-amber-500 text-white ring-4 ring-amber-100":t>E?"bg-green-500 text-white":"bg-slate-100 text-slate-400"}`,children:t>E?w.jsx(wl,{className:"w-6 h-6"}):E})},E))}),t===1&&w.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4",children:[w.jsx("h4",{className:"text-2xl font-black text-slate-900",children:"1. Identificaci de l'informant"}),w.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[w.jsxs("button",{onClick:()=>l(!1),className:`p-6 rounded-3xl border-2 transition-all text-left flex items-start gap-4 ${r?"border-slate-100 hover:border-slate-200":"border-amber-500 bg-amber-50"}`,children:[w.jsx(MR,{className:"w-6 h-6 text-amber-500"}),w.jsxs("div",{children:[w.jsx("p",{className:"font-bold",children:"Identificada"}),w.jsx("p",{className:"text-xs text-slate-500",children:"Permet un seguiment directe i protecci jurdica."})]})]}),w.jsxs("button",{onClick:()=>l(!0),className:`p-6 rounded-3xl border-2 transition-all text-left flex items-start gap-4 ${r?"border-slate-900 bg-slate-50":"border-slate-100 hover:border-slate-200"}`,children:[w.jsx(tR,{className:"w-6 h-6 text-slate-900"}),w.jsxs("div",{children:[w.jsx("p",{className:"font-bold",children:"Annima"}),w.jsx("p",{className:"text-xs text-slate-500",children:"No es requeriran dades de contacte personals."})]})]})]}),!r&&w.jsxs("div",{className:"space-y-4 p-8 bg-slate-50 rounded-[2rem] border border-slate-100",children:[w.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[w.jsxs("div",{className:"space-y-1",children:[w.jsx("label",{className:"text-[10px] font-black uppercase text-slate-400 ml-2",children:"Nom i Cognoms"}),w.jsx("input",{type:"text",className:"w-full p-4 rounded-2xl border outline-none focus:ring-2 focus:ring-amber-500",value:g.informant.name,onChange:E=>m({...g,informant:{...g.informant,name:E.target.value}})})]}),w.jsxs("div",{className:"space-y-1",children:[w.jsx("label",{className:"text-[10px] font-black uppercase text-slate-400 ml-2",children:"DNI / NIE"}),w.jsx("input",{type:"text",className:"w-full p-4 rounded-2xl border outline-none focus:ring-2 focus:ring-amber-500",value:g.informant.dni,onChange:E=>m({...g,informant:{...g.informant,dni:E.target.value}})})]}),w.jsxs("div",{className:"space-y-1",children:[w.jsx("label",{className:"text-[10px] font-black uppercase text-slate-400 ml-2",children:"Correu Electrnic"}),w.jsx("input",{type:"email",className:"w-full p-4 rounded-2xl border outline-none focus:ring-2 focus:ring-amber-500",value:g.informant.email,onChange:E=>m({...g,informant:{...g.informant,email:E.target.value}})})]}),w.jsxs("div",{className:"space-y-1",children:[w.jsx("label",{className:"text-[10px] font-black uppercase text-slate-400 ml-2",children:"Telfon de contacte"}),w.jsx("input",{type:"tel",className:"w-full p-4 rounded-2xl border outline-none focus:ring-2 focus:ring-amber-500",value:g.informant.phone,onChange:E=>m({...g,informant:{...g.informant,phone:E.target.value}})})]})]}),w.jsxs("div",{className:"space-y-1",children:[w.jsx("label",{className:"text-[10px] font-black uppercase text-slate-400 ml-2",children:"Relaci amb el club / vctima"}),w.jsx("select",{className:"w-full p-4 rounded-2xl border bg-white outline-none focus:ring-2 focus:ring-amber-500",value:g.informant.type,onChange:E=>m({...g,informant:{...g.informant,type:E.target.value}}),children:Object.values($h).map(E=>w.jsx("option",{value:E,children:E},E))})]})]})]}),t===2&&w.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-4",children:[w.jsx("h4",{className:"text-2xl font-black text-slate-900",children:"2. Persones Implicades"}),w.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[w.jsxs("div",{className:"space-y-4 p-8 bg-blue-50/50 rounded-[2rem] border border-blue-100",children:[w.jsx("p",{className:"text-xs font-black uppercase text-blue-600 tracking-widest mb-4",children:"Dades de la Vctima (Menor)"}),w.jsxs("div",{className:"space-y-4",children:[w.jsx("input",{type:"text",placeholder:"Nom complet del menor",className:"w-full p-4 rounded-2xl border bg-white",value:g.involved.victimName,onChange:E=>m({...g,involved:{...g.involved,victimName:E.target.value}})}),w.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[w.jsx("input",{type:"number",placeholder:"Edat",className:"w-full p-4 rounded-2xl border bg-white",value:g.involved.victimAge,onChange:E=>m({...g,involved:{...g.involved,victimAge:E.target.value}})}),w.jsxs("select",{className:"w-full p-4 rounded-2xl border bg-white",value:g.involved.victimGender,onChange:E=>m({...g,involved:{...g.involved,victimGender:E.target.value}}),children:[w.jsx("option",{value:"",children:"Gnere..."}),$R.map(E=>w.jsx("option",{value:E,children:E},E))]})]}),w.jsxs("select",{className:"w-full p-4 rounded-2xl border bg-white",value:g.involved.victimCategory,onChange:E=>m({...g,involved:{...g.involved,victimCategory:E.target.value}}),children:[w.jsx("option",{value:"",children:"Equip / Categoria..."}),KR.map(E=>w.jsx("option",{value:E,children:E},E))]})]})]}),w.jsxs("div",{className:"space-y-4 p-8 bg-red-50/50 rounded-[2rem] border border-red-100",children:[w.jsx("p",{className:"text-xs font-black uppercase text-red-600 tracking-widest mb-4",children:"Persona Denunciada"}),w.jsxs("div",{className:"space-y-4",children:[w.jsx("input",{type:"text",placeholder:"Nom (o descripci fsica)",className:"w-full p-4 rounded-2xl border bg-white",value:g.involved.accusedName,onChange:E=>m({...g,involved:{...g.involved,accusedName:E.target.value}})}),w.jsxs("select",{className:"w-full p-4 rounded-2xl border bg-white",value:g.involved.accusedRelation,onChange:E=>m({...g,involved:{...g.involved,accusedRelation:E.target.value}}),children:[w.jsx("option",{value:"",children:"Rol al club / Relaci..."}),QR.map(E=>w.jsx("option",{value:E,children:E},E))]})]})]})]})]}),t===3&&w.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-4",children:[w.jsx("h4",{className:"text-2xl font-black text-slate-900",children:"3. Detalls de l'Incident"}),w.jsxs("div",{className:"space-y-4",children:[w.jsx("label",{className:"text-sm font-bold text-slate-700 block mb-2",children:"Tipus de violncia detectada (marcar totes les que corresponguin):"}),w.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:Object.values(rT).map(E=>w.jsx("button",{type:"button",onClick:()=>_(E),className:`p-3 rounded-xl text-[10px] font-bold text-center border-2 transition-all ${g.facts.violenceTypes.includes(E)?"border-amber-500 bg-amber-50 text-amber-700":"border-slate-100 text-slate-500 hover:border-slate-200"}`,children:E},E))})]}),w.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[w.jsxs("div",{className:"space-y-1",children:[w.jsx("label",{className:"text-[10px] font-black uppercase text-slate-400 ml-2",children:"Data"}),w.jsx("input",{type:"date",className:"w-full p-4 rounded-2xl border bg-white",value:g.facts.date,onChange:E=>m({...g,facts:{...g.facts,date:E.target.value}})})]}),w.jsxs("div",{className:"space-y-1",children:[w.jsx("label",{className:"text-[10px] font-black uppercase text-slate-400 ml-2",children:"Hora aproximada"}),w.jsx("input",{type:"time",className:"w-full p-4 rounded-2xl border bg-white",value:g.facts.time,onChange:E=>m({...g,facts:{...g.facts,time:E.target.value}})})]}),w.jsxs("div",{className:"space-y-1",children:[w.jsx("label",{className:"text-[10px] font-black uppercase text-slate-400 ml-2",children:"Ubicaci"}),w.jsxs("select",{className:"w-full p-4 rounded-2xl border bg-white",value:g.facts.location,onChange:E=>m({...g,facts:{...g.facts,location:E.target.value}}),children:[w.jsx("option",{value:"",children:"Selecciona lloc..."}),XR.map(E=>w.jsx("option",{value:E,children:E},E))]})]})]}),w.jsxs("div",{className:"space-y-4",children:[w.jsx("textarea",{placeholder:"Descriu els fets amb el mxim detall possible (qu ha passat, com ha passat...)",className:"w-full p-6 rounded-[2rem] border h-44 outline-none focus:ring-2 focus:ring-amber-500 leading-relaxed",value:g.facts.description,onChange:E=>m({...g,facts:{...g.facts,description:E.target.value}})}),w.jsxs("label",{className:"flex items-center gap-3 p-4 bg-slate-50 rounded-2xl cursor-pointer border border-slate-200",children:[w.jsx("input",{type:"checkbox",checked:g.facts.isRecurring,onChange:E=>m({...g,facts:{...g.facts,isRecurring:E.target.checked}}),className:"w-5 h-5 rounded border-slate-300 text-amber-500 focus:ring-amber-500"}),w.jsx("span",{className:"text-sm font-bold text-slate-700 italic",children:"s un fet que es repeteix en el temps (recurrent)?"})]})]})]}),t===4&&w.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-4",children:[w.jsx("h4",{className:"text-2xl font-black text-slate-900",children:"4. Proves i Testimonis"}),w.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[w.jsxs("div",{className:"space-y-4",children:[w.jsx("p",{className:"text-sm font-bold text-slate-700",children:"Evidncies Digitals o Documentals"}),w.jsxs("div",{className:"p-12 border-4 border-dashed border-slate-100 rounded-[2.5rem] flex flex-col items-center justify-center text-center gap-4 hover:border-amber-200 transition-colors group cursor-pointer",children:[w.jsx("div",{className:"p-4 bg-slate-50 rounded-full text-slate-400 group-hover:text-amber-500 group-hover:bg-amber-50 transition-colors",children:w.jsx(GI,{className:"w-10 h-10"})}),w.jsx("p",{className:"text-xs font-bold text-slate-400 group-hover:text-slate-600",children:"Fes una foto o adjunta fitxers (udios, captures, etc.)"})]})]}),w.jsxs("div",{className:"space-y-4",children:[w.jsx("p",{className:"text-sm font-bold text-slate-700",children:"Testimonis"}),w.jsx("textarea",{placeholder:"Si alg ms ha vist els fets, indica el seu nom o com el podem identificar...",className:"w-full p-6 rounded-[2rem] border h-44 outline-none focus:ring-2 focus:ring-amber-500",value:g.facts.witnesses,onChange:E=>m({...g,facts:{...g.facts,witnesses:E.target.value}})})]})]})]}),t===5&&w.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-4",children:[w.jsx("h4",{className:"text-2xl font-black text-slate-900",children:"5. Consentiment i Enviament"}),w.jsxs("div",{className:"bg-slate-50 p-8 rounded-[2.5rem] border-2 border-slate-100 space-y-6",children:[w.jsxs("div",{className:"flex items-start gap-4",children:[w.jsx("div",{className:"mt-1",children:w.jsx(Pp,{className:"w-6 h-6 text-amber-500"})}),w.jsx("p",{className:"text-sm text-slate-600 leading-relaxed",children:'En prmer "Enviar", la teva comunicaci ser enviada al **Delegat de Protecci de Menors del CH Molins**. Tota la informaci ser tractada amb la mxima confidencialitat segons la **Llei Orgnica 8/2021 (LOPIVI)**.'})]}),w.jsxs("label",{className:"flex items-center gap-4 p-6 bg-white rounded-3xl cursor-pointer shadow-sm hover:shadow-md transition-shadow",children:[w.jsx("input",{type:"checkbox",checked:u,onChange:E=>d(E.target.checked),className:"w-6 h-6 rounded border-slate-300 text-amber-500 focus:ring-amber-500"}),w.jsx("span",{className:"text-sm font-black text-slate-800 uppercase tracking-tight",children:"Accepto el tractament de dades personals per a la gesti d'aquest expedient."})]})]})]}),w.jsxs("div",{className:"flex items-center justify-between mt-12 pt-8 border-t border-slate-100",children:[w.jsxs("button",{onClick:()=>t===1?n():o(t-1),className:"px-6 py-4 text-slate-400 font-black uppercase text-[10px] tracking-widest flex items-center gap-2 hover:text-slate-900 transition-colors",children:[w.jsx(FI,{className:"w-4 h-4"})," ",t===1?"Cancellar":"Tornar enrere"]}),w.jsx("button",{onClick:()=>t===5?e({id:Math.random().toString(36).substr(2,6).toUpperCase(),createdAt:new Date().toISOString(),informant:{...g.informant,isAnonymous:r},victim:{name:g.involved.victimName,age:g.involved.victimAge,gender:g.involved.victimGender,category:g.involved.victimCategory,entity:"CH Molins"},involved:{accusedName:g.involved.accusedName,accusedRelation:g.involved.accusedRelation},facts:{...g.facts,violenceType:g.facts.violenceTypes},status:"Pendent",gdprAccepted:!0}):o(t+1),disabled:!T(),className:`px-12 py-5 rounded-[2rem] font-black text-xs uppercase tracking-widest transition-all ${T()?"bg-amber-500 text-white shadow-xl shadow-amber-100 hover:-translate-y-1 hover:bg-amber-600":"bg-slate-200 text-slate-400 cursor-not-allowed"}`,children:t===5?"Enviar ara":"Segent pas"})]})]})]})},ZR=({reports:n,onDeleteReport:e,onUpdateStatus:t})=>{const[o,r]=ut.useState(null),[l,u]=ut.useState(!1),d=n.find(E=>E.id===o)||null,g=[{label:"Total Expedients",val:n.length,icon:s_,color:"text-blue-600",bg:"bg-blue-50"},{label:"Urgncia",val:n.filter(E=>E.status==="Urgncia").length,icon:NR,color:"text-red-600",bg:"bg-red-50"},{label:"Pendents",val:n.filter(E=>E.status==="Pendent").length,icon:XI,color:"text-amber-600",bg:"bg-amber-50"},{label:"Resolts",val:n.filter(E=>E.status==="Resolt").length,icon:wl,color:"text-green-600",bg:"bg-green-50"}],m=()=>{d&&window.print()},_=()=>{d&&window.confirm(`Ests segur que vols eliminar definitivament l'expedient #${d.id}? Aquesta acci no es pot desfer.`)&&(e(d.id),r(null))},T=E=>{d&&(t(d.id,E),u(!1))};return w.jsxs("div",{className:"space-y-8",children:[w.jsxs("div",{className:"flex justify-between items-center no-print",children:[w.jsxs("div",{children:[w.jsx("h2",{className:"text-3xl font-extrabold text-slate-900",children:"Gesti de Denncies"}),w.jsx("p",{className:"text-slate-500",children:"Accs exclusiu per al Delegat de Protecci."})]}),w.jsx("div",{className:"flex gap-4",children:w.jsxs("div",{className:"bg-white border p-2 rounded-xl flex items-center gap-2",children:[w.jsx(TR,{className:"w-4 h-4"}),w.jsx("input",{type:"text",placeholder:"Cercar...",className:"outline-none text-sm"})]})})]}),w.jsx("div",{className:"grid grid-cols-4 gap-4 no-print",children:g.map((E,R)=>w.jsxs("div",{className:"bg-white p-6 rounded-2xl border shadow-sm flex items-center gap-4",children:[w.jsx("div",{className:`${E.bg} p-3 rounded-xl`,children:w.jsx(E.icon,{className:`w-6 h-6 ${E.color}`})}),w.jsxs("div",{children:[w.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase",children:E.label}),w.jsx("p",{className:"text-2xl font-black",children:E.val})]})]},R))}),w.jsx("div",{className:"bg-white rounded-3xl border shadow-sm overflow-hidden no-print",children:w.jsxs("table",{className:"w-full text-left",children:[w.jsx("thead",{className:"bg-slate-50 border-b",children:w.jsxs("tr",{children:[w.jsx("th",{className:"p-6 text-[10px] font-black uppercase",children:"Expedient"}),w.jsx("th",{className:"p-6 text-[10px] font-black uppercase",children:"Vctima"}),w.jsx("th",{className:"p-6 text-[10px] font-black uppercase",children:"Data"}),w.jsx("th",{className:"p-6 text-[10px] font-black uppercase",children:"Estat"})]})}),w.jsxs("tbody",{className:"divide-y",children:[n.map(E=>w.jsxs("tr",{onClick:()=>r(E.id),className:"hover:bg-slate-50 cursor-pointer transition-colors",children:[w.jsxs("td",{className:"p-6 font-bold text-sm",children:["#",E.id]}),w.jsxs("td",{className:"p-6",children:[w.jsx("p",{className:"text-sm font-bold",children:E.victim.name}),w.jsx("p",{className:"text-[10px] text-slate-400 uppercase",children:E.victim.category})]}),w.jsx("td",{className:"p-6 text-sm text-slate-500",children:new Date(E.createdAt).toLocaleDateString()}),w.jsx("td",{className:"p-6",children:w.jsx("span",{className:`px-3 py-1 rounded-full text-[10px] font-black uppercase ${E.status==="Urgncia"?"bg-red-600 text-white":"bg-slate-100"}`,children:E.status})})]},E.id)),n.length===0&&w.jsx("tr",{children:w.jsx("td",{colSpan:4,className:"p-12 text-center text-slate-400 italic font-medium",children:"No hi ha expedients registrats."})})]})]})}),d&&w.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm no-print",children:w.jsxs("div",{id:"print-area",className:"bg-white w-full max-w-4xl max-h-[90vh] rounded-[2.5rem] shadow-2xl overflow-hidden flex flex-col",children:[w.jsxs("div",{className:"p-8 bg-slate-50 border-b flex justify-between items-center no-print",children:[w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx("div",{className:"p-2 bg-blue-100 text-blue-600 rounded-xl",children:w.jsx(s_,{className:"w-6 h-6"})}),w.jsxs("div",{children:[w.jsxs("h3",{className:"text-xl font-bold",children:["Detall Expedient #",d.id]}),w.jsx("p",{className:"text-xs text-slate-500",children:new Date(d.createdAt).toLocaleString()})]})]}),w.jsx("button",{onClick:()=>r(null),className:"p-2 hover:bg-slate-200 rounded-full",children:w.jsx(VR,{className:"w-6 h-6 text-slate-400"})})]}),w.jsx("div",{className:"flex-1 overflow-y-auto p-12 space-y-12",children:w.jsxs("div",{className:"grid grid-cols-2 gap-12",children:[w.jsxs("div",{className:"space-y-6",children:[w.jsx("h4",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest border-l-2 border-amber-500 pl-2",children:"Informaci de la Vctima"}),w.jsxs("div",{className:"bg-slate-50 p-6 rounded-3xl space-y-3 border border-slate-100",children:[w.jsx("p",{className:"text-lg font-bold text-slate-900",children:d.victim.name}),w.jsxs("p",{className:"text-sm text-slate-600",children:["Edat: ",d.victim.age,"  Gnere: ",d.victim.gender]}),w.jsx("p",{className:"text-sm font-bold text-blue-600 uppercase tracking-tight",children:d.victim.category})]}),w.jsx("h4",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest border-l-2 border-amber-500 pl-2",children:"Informant"}),w.jsxs("div",{className:"bg-slate-50 p-6 rounded-3xl space-y-2 border border-slate-100",children:[w.jsx("p",{className:"text-sm font-bold text-slate-900",children:d.informant.isAnonymous?"USUARI ANNIM":d.informant.name}),w.jsx("p",{className:"text-xs text-slate-500",children:d.informant.type})]})]}),w.jsxs("div",{className:"space-y-6",children:[w.jsx("h4",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest border-l-2 border-amber-500 pl-2",children:"Detalls dels Fets"}),w.jsxs("div",{className:"bg-slate-50 p-6 rounded-3xl space-y-4 border border-slate-100",children:[w.jsx("p",{className:"text-sm font-medium leading-relaxed text-slate-700",children:d.facts.description}),w.jsxs("div",{className:"pt-4 border-t border-slate-200 grid grid-cols-2 gap-4 text-[10px] font-bold text-slate-400 uppercase",children:[w.jsxs("div",{children:[w.jsx("p",{className:"mb-1 opacity-60",children:"Lloc de l'incident"}),w.jsx("p",{className:"text-slate-800",children:d.facts.location})]}),w.jsxs("div",{children:[w.jsx("p",{className:"mb-1 opacity-60",children:"Data i Hora"}),w.jsxs("p",{className:"text-slate-800",children:[d.facts.date," - ",d.facts.time]})]})]})]})]})]})}),w.jsxs("div",{className:"p-8 bg-slate-50 border-t flex justify-between gap-4 no-print",children:[w.jsxs("div",{className:"flex gap-2",children:[w.jsx("button",{onClick:m,title:"Imprimir Expedient",className:"bg-white border p-3 rounded-xl hover:bg-slate-100 transition-all shadow-sm active:scale-95",children:w.jsx(vR,{className:"w-5 h-5 text-slate-600"})}),w.jsx("button",{onClick:_,title:"Eliminar Expedient",className:"bg-white border p-3 rounded-xl hover:bg-red-50 text-red-500 shadow-sm active:scale-95",children:w.jsx(wR,{className:"w-5 h-5"})})]}),w.jsx("div",{className:"flex gap-2 relative",children:w.jsxs("div",{className:"relative group",children:[w.jsx("button",{className:"bg-blue-600 text-white px-8 py-3 rounded-2xl text-sm font-bold shadow-lg shadow-blue-100 hover:bg-blue-700 transition-all active:scale-95",children:"Canviar Estat"}),w.jsx("div",{className:"absolute bottom-full right-0 mb-2 w-48 bg-white border rounded-2xl shadow-2xl p-2 hidden group-hover:block animate-in slide-in-from-bottom-2",children:["Pendent","En Procs","Resolt","Urgncia"].map(E=>w.jsx("button",{onClick:()=>T(E),className:`w-full text-left px-4 py-2 hover:bg-slate-50 rounded-xl text-xs font-bold transition-colors ${d.status===E?"text-blue-600 bg-blue-50":"text-slate-600"}`,children:E},E))})]})})]})]})})]})},jR=[{category:"Senyals Fsics Especfics",items:["Molsties evidents en genitals","Dificultats per a caminar o asseures","Senyals fsics de cops o empentes"]},{category:"Comportaments Associats",items:["s dinformaci inusual per a ledat sobre temes sexuals","Sensibilitat extrema al contacte fsic","Atacs dira injustificats","Por de quedar-se sol amb una persona concreta","Descens brusc del rendiment esportiu"]},{category:"Indicadors Inespecfics",items:["Canvis notoris en hbits alimentaris","Incontinncia urinria o fecal sobtada","Desinters general per lactivitat","Tendncia a allar-se del grup"]}],ew=()=>w.jsxs("div",{className:"space-y-12 animate-in slide-in-from-bottom duration-500",children:[w.jsxs("section",{className:"bg-slate-900 rounded-3xl p-8 md:p-12 text-white overflow-hidden relative",children:[w.jsxs("div",{className:"relative z-10 space-y-4 max-w-3xl",children:[w.jsx("h2",{className:"text-4xl font-black",children:"Com funciona el Protocol?"}),w.jsx("p",{className:"text-slate-400 text-lg leading-relaxed",children:"El Protocol d'Actuaci per a la Protecci Integral a la Infncia i Adolescncia defineix els passos a seguir davant de sospites o evidncies de violncia."}),w.jsxs("div",{className:"flex flex-wrap gap-4 pt-4",children:[w.jsxs("div",{className:"flex items-center gap-2 bg-slate-800 px-4 py-2 rounded-xl",children:[w.jsx(wl,{className:"w-5 h-5 text-green-500"}),w.jsx("span",{className:"text-sm font-bold",children:"Confidencialitat"})]}),w.jsxs("div",{className:"flex items-center gap-2 bg-slate-800 px-4 py-2 rounded-xl",children:[w.jsx(wl,{className:"w-5 h-5 text-green-500"}),w.jsx("span",{className:"text-sm font-bold",children:"Rapidesa"})]}),w.jsxs("div",{className:"flex items-center gap-2 bg-slate-800 px-4 py-2 rounded-xl",children:[w.jsx(wl,{className:"w-5 h-5 text-green-500"}),w.jsx("span",{className:"text-sm font-bold",children:"No-Victimitzaci"})]})]})]}),w.jsx("div",{className:"absolute top-0 right-0 p-12 opacity-10 hidden lg:block h-64 w-64",children:w.jsx("img",{src:"https://github.com/handbolmolins/URLimagenes/blob/main/MOLINS%20COLOR.png?raw=true",alt:"Watermark Escut",className:"h-full w-full object-contain"})})]}),w.jsxs("section",{className:"grid md:grid-cols-2 gap-8",children:[w.jsxs("div",{className:"space-y-6",children:[w.jsxs("h3",{className:"text-2xl font-bold text-slate-900 flex items-center gap-3",children:[w.jsx(Pp,{className:"w-6 h-6 text-amber-500"}),"Indicadors de Detecci"]}),w.jsx("div",{className:"space-y-4",children:jR.map((n,e)=>w.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[w.jsx("h4",{className:"text-lg font-bold text-slate-800 mb-3",children:n.category}),w.jsx("ul",{className:"space-y-2",children:n.items.map((t,o)=>w.jsxs("li",{className:"flex items-start gap-2 text-sm text-slate-600",children:[w.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-amber-400 mt-1.5 flex-shrink-0"}),t]},o))})]},e))})]}),w.jsxs("div",{className:"space-y-6",children:[w.jsxs("h3",{className:"text-2xl font-bold text-slate-900 flex items-center gap-3",children:[w.jsx(QI,{className:"w-6 h-6 text-blue-500"}),"Preguntes Freqents"]}),w.jsx("div",{className:"space-y-4",children:[{q:"Qui s el Delegat de Protecci?",a:"s la persona responsable dins de l'entitat encarregada de canalitzar les denncies i assegurar el compliment del protocol."},{q:"Puc denunciar de forma annima?",a:"S, el canal permet l'anonimat, tot i que proporcionar contacte ajuda a fer una investigaci ms profunda si calen ms dades."},{q:"Qu passa desprs d'enviar?",a:"El Delegat obre un expedient informatiu immediat (mxim 10 dies) per avaluar la gravetat i decidir si cal informar les autoritats (Policia/Fiscalia)."},{q:"Com es protegeix la vctima?",a:"S'apliquen mesures cautelars immediates per allunyar el presumpte agressor i s'ofereix suport psicolgic i emocional."}].map((n,e)=>w.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm group hover:border-blue-300 transition-colors",children:[w.jsx("p",{className:"font-bold text-slate-900 mb-2 group-hover:text-blue-600 transition-colors",children:n.q}),w.jsx("p",{className:"text-sm text-slate-600 leading-relaxed",children:n.a})]},e))})]})]}),w.jsxs("section",{className:"bg-white rounded-3xl p-8 border border-slate-200 shadow-sm space-y-8",children:[w.jsxs("h3",{className:"text-2xl font-bold text-slate-900 flex items-center gap-3",children:[w.jsx(oR,{className:"w-6 h-6 text-green-600"}),"Canals i Recursos Externs"]}),w.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[w.jsxs("div",{className:"border border-slate-100 bg-slate-50 p-6 rounded-2xl flex flex-col justify-between hover:border-blue-200 transition-all",children:[w.jsxs("div",{className:"space-y-3",children:[w.jsx("h4",{className:"font-bold text-slate-900",children:"Generalitat de Catalunya"}),w.jsx("p",{className:"text-sm text-slate-600",children:"Infncia i Adolescncia - Telfon d'atenci a la infncia i l'adolescncia."})]}),w.jsxs("a",{href:"https://dretssocials.gencat.cat/ca/ambits_tematics/infancia_i_adolescencia/",target:"_blank",rel:"noopener noreferrer",className:"mt-6 inline-flex items-center gap-2 text-blue-600 font-bold hover:text-blue-700 transition-colors text-sm",children:["Web d'Infncia Gencat",w.jsx(o_,{className:"w-4 h-4"})]})]}),w.jsxs("div",{className:"border border-slate-100 bg-slate-50 p-6 rounded-2xl flex flex-col justify-between hover:border-slate-200 transition-all",children:[w.jsxs("div",{className:"space-y-3",children:[w.jsx("h4",{className:"font-bold text-slate-900",children:"Mossos d'Esquadra"}),w.jsx("p",{className:"text-sm text-slate-600",children:"Unitat de Protecci de Menors i Atenci a la Vctima."})]}),w.jsxs("a",{href:"https://mossos.gencat.cat/ca/consells_de_seguretat/menors/",target:"_blank",rel:"noopener noreferrer",className:"mt-6 inline-flex items-center gap-2 text-slate-600 font-bold hover:text-slate-900 transition-colors text-sm",children:["Consells de Seguretat",w.jsx(o_,{className:"w-4 h-4"})]})]})]})]}),w.jsxs("section",{className:"bg-blue-600 rounded-3xl p-10 text-white text-center space-y-4",children:[w.jsx("h3",{className:"text-2xl font-black",children:"Necessites ajuda urgent?"}),w.jsx("p",{className:"max-w-2xl mx-auto font-medium",children:"Si creus que la situaci requereix una intervenci policial o mdica immediata, truca ara mateix als telfons d'emergncies."}),w.jsxs("div",{className:"flex flex-wrap justify-center gap-4 pt-4",children:[w.jsxs("div",{className:"bg-white/20 backdrop-blur px-6 py-4 rounded-2xl border border-white/30",children:[w.jsx("span",{className:"block text-xs font-bold uppercase tracking-widest opacity-70",children:"Emergncies"}),w.jsx("span",{className:"text-3xl font-black",children:"112"})]}),w.jsxs("div",{className:"bg-white/20 backdrop-blur px-6 py-4 rounded-2xl border border-white/30",children:[w.jsx("span",{className:"block text-xs font-bold uppercase tracking-widest opacity-70",children:"Policia Local"}),w.jsx("span",{className:"text-3xl font-black",children:"092"})]}),w.jsxs("div",{className:"bg-white/20 backdrop-blur px-6 py-4 rounded-2xl border border-white/30",children:[w.jsx("span",{className:"block text-xs font-bold uppercase tracking-widest opacity-70",children:"Atenci Menors"}),w.jsx("span",{className:"text-3xl font-black",children:"116 111"})]})]})]})]}),tw=()=>{};var a_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aT=function(n){const e=[];let t=0;for(let o=0;o<n.length;o++){let r=n.charCodeAt(o);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&o+1<n.length&&(n.charCodeAt(o+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++o)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},nw=function(n){const e=[];let t=0,o=0;for(;t<n.length;){const r=n[t++];if(r<128)e[o++]=String.fromCharCode(r);else if(r>191&&r<224){const l=n[t++];e[o++]=String.fromCharCode((r&31)<<6|l&63)}else if(r>239&&r<365){const l=n[t++],u=n[t++],d=n[t++],g=((r&7)<<18|(l&63)<<12|(u&63)<<6|d&63)-65536;e[o++]=String.fromCharCode(55296+(g>>10)),e[o++]=String.fromCharCode(56320+(g&1023))}else{const l=n[t++],u=n[t++];e[o++]=String.fromCharCode((r&15)<<12|(l&63)<<6|u&63)}}return e.join("")},lT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,o=[];for(let r=0;r<n.length;r+=3){const l=n[r],u=r+1<n.length,d=u?n[r+1]:0,g=r+2<n.length,m=g?n[r+2]:0,_=l>>2,T=(l&3)<<4|d>>4;let E=(d&15)<<2|m>>6,R=m&63;g||(R=64,u||(E=64)),o.push(t[_],t[T],t[E],t[R])}return o.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(aT(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):nw(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,o=[];for(let r=0;r<n.length;){const l=t[n.charAt(r++)],d=r<n.length?t[n.charAt(r)]:0;++r;const m=r<n.length?t[n.charAt(r)]:64;++r;const T=r<n.length?t[n.charAt(r)]:64;if(++r,l==null||d==null||m==null||T==null)throw new iw;const E=l<<2|d>>4;if(o.push(E),m!==64){const R=d<<4&240|m>>2;if(o.push(R),T!==64){const P=m<<6&192|T;o.push(P)}}}return o},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class iw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ow=function(n){const e=aT(n);return lT.encodeByteArray(e,!0)},Hc=function(n){return ow(n).replace(/\./g,"")},sw=function(n){try{return lT.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aw=()=>rw().__FIREBASE_DEFAULTS__,lw=()=>{if(typeof process>"u"||typeof a_>"u")return;const n=a_.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},uw=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&sw(n[1]);return e&&JSON.parse(e)},Lp=()=>{try{return tw()||aw()||lw()||uw()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},cw=n=>{var e,t;return(t=(e=Lp())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},fw=n=>{const e=cw(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const o=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),o]:[e.substring(0,t),o]},uT=()=>{var n;return(n=Lp())==null?void 0:n.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,o)=>{t?this.reject(t):this.resolve(o),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,o))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kp(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function hw(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pw(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},o=e||"demo-project",r=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${o}`,aud:o,iat:r,exp:r+3600,auth_time:r,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Hc(JSON.stringify(t)),Hc(JSON.stringify(u)),""].join(".")}const bl={};function mw(){const n={prod:[],emulator:[]};for(const e of Object.keys(bl))bl[e]?n.emulator.push(e):n.prod.push(e);return n}function gw(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let l_=!1;function yw(n,e){if(typeof window>"u"||typeof document>"u"||!kp(window.location.host)||bl[n]===e||bl[n]||l_)return;bl[n]=e;function t(E){return`__firebase__banner__${E}`}const o="__firebase__banner",l=mw().prod.length>0;function u(){const E=document.getElementById(o);E&&E.remove()}function d(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function g(E,R){E.setAttribute("width","24"),E.setAttribute("id",R),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function m(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{l_=!0,u()},E}function _(E,R){E.setAttribute("id",R),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function T(){const E=gw(o),R=t("text"),P=document.getElementById(R)||document.createElement("span"),B=t("learnmore"),O=document.getElementById(B)||document.createElement("a"),$=t("preprendIcon"),se=document.getElementById($)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const j=E.element;d(j),_(O,B);const re=m();g(se,$),j.append(se,P,O,re),document.body.appendChild(j)}l?(P.innerText="Preview backend disconnected.",se.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(se.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,P.innerText="Preview backend running in this workspace."),P.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vw(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function _w(){var e;const n=(e=Lp())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Ew(){return!_w()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Tw(){try{return typeof indexedDB=="object"}catch{return!1}}function Sw(){return new Promise((n,e)=>{try{let t=!0;const o="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(o);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(o),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var l;e(((l=r.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aw="FirebaseError";class ia extends Error{constructor(e,t,o){super(t),this.code=e,this.customData=o,this.name=Aw,Object.setPrototypeOf(this,ia.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,cT.prototype.create)}}class cT{constructor(e,t,o){this.service=e,this.serviceName=t,this.errors=o}create(e,...t){const o=t[0]||{},r=`${this.service}/${e}`,l=this.errors[e],u=l?Cw(l,o):"Error",d=`${this.serviceName}: ${u} (${r}).`;return new ia(r,d,o)}}function Cw(n,e){return n.replace(Iw,(t,o)=>{const r=e[o];return r!=null?String(r):`<${o}?>`})}const Iw=/\{\$([^}]+)}/g;function zc(n,e){if(n===e)return!0;const t=Object.keys(n),o=Object.keys(e);for(const r of t){if(!o.includes(r))return!1;const l=n[r],u=e[r];if(u_(l)&&u_(u)){if(!zc(l,u))return!1}else if(l!==u)return!1}for(const r of o)if(!t.includes(r))return!1;return!0}function u_(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wr(n){return n&&n._delegate?n._delegate:n}class Vl{constructor(e,t,o){this.name=e,this.instanceFactory=t,this.type=o,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ps="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const o=new dw;if(this.instancesDeferred.set(t,o),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&o.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(r){if(o)return null;throw r}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(bw(e))try{this.getOrInitializeService({instanceIdentifier:Ps})}catch{}for(const[t,o]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:r});o.resolve(l)}catch{}}}}clearInstance(e=Ps){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ps){return this.instances.has(e)}getOptions(e=Ps){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,o=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(o))throw Error(`${this.name}(${o}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:o,options:t});for(const[l,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);o===d&&u.resolve(r)}return r}onInit(e,t){const o=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(o)??new Set;r.add(e),this.onInitCallbacks.set(o,r);const l=this.instances.get(o);return l&&e(l,o),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const o=this.onInitCallbacks.get(t);if(o)for(const r of o)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let o=this.instances.get(e);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:ww(e),options:t}),this.instances.set(e,o),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(o,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,o)}catch{}return o||null}normalizeInstanceIdentifier(e=Ps){return this.component?this.component.multipleInstances?e:Ps:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ww(n){return n===Ps?void 0:n}function bw(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Rw(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var He;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(He||(He={}));const xw={debug:He.DEBUG,verbose:He.VERBOSE,info:He.INFO,warn:He.WARN,error:He.ERROR,silent:He.SILENT},Mw=He.INFO,Dw={[He.DEBUG]:"log",[He.VERBOSE]:"log",[He.INFO]:"info",[He.WARN]:"warn",[He.ERROR]:"error"},Vw=(n,e,...t)=>{if(e<n.logLevel)return;const o=new Date().toISOString(),r=Dw[e];if(r)console[r](`[${o}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class fT{constructor(e){this.name=e,this._logLevel=Mw,this._logHandler=Vw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in He))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?xw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,He.DEBUG,...e),this._logHandler(this,He.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,He.VERBOSE,...e),this._logHandler(this,He.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,He.INFO,...e),this._logHandler(this,He.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,He.WARN,...e),this._logHandler(this,He.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,He.ERROR,...e),this._logHandler(this,He.ERROR,...e)}}const Pw=(n,e)=>e.some(t=>n instanceof t);let c_,f_;function Uw(){return c_||(c_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Lw(){return f_||(f_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const dT=new WeakMap,Xh=new WeakMap,hT=new WeakMap,Lh=new WeakMap,Op=new WeakMap;function kw(n){const e=new Promise((t,o)=>{const r=()=>{n.removeEventListener("success",l),n.removeEventListener("error",u)},l=()=>{t(Jo(n.result)),r()},u=()=>{o(n.error),r()};n.addEventListener("success",l),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&dT.set(t,n)}).catch(()=>{}),Op.set(e,n),e}function Ow(n){if(Xh.has(n))return;const e=new Promise((t,o)=>{const r=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",u),n.removeEventListener("abort",u)},l=()=>{t(),r()},u=()=>{o(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",l),n.addEventListener("error",u),n.addEventListener("abort",u)});Xh.set(n,e)}let Wh={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Xh.get(n);if(e==="objectStoreNames")return n.objectStoreNames||hT.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Jo(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function qw(n){Wh=n(Wh)}function Gw(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const o=n.call(kh(this),e,...t);return hT.set(o,e.sort?e.sort():[e]),Jo(o)}:Lw().includes(n)?function(...e){return n.apply(kh(this),e),Jo(dT.get(this))}:function(...e){return Jo(n.apply(kh(this),e))}}function Bw(n){return typeof n=="function"?Gw(n):(n instanceof IDBTransaction&&Ow(n),Pw(n,Uw())?new Proxy(n,Wh):n)}function Jo(n){if(n instanceof IDBRequest)return kw(n);if(Lh.has(n))return Lh.get(n);const e=Bw(n);return e!==n&&(Lh.set(n,e),Op.set(e,n)),e}const kh=n=>Op.get(n);function Fw(n,e,{blocked:t,upgrade:o,blocking:r,terminated:l}={}){const u=indexedDB.open(n,e),d=Jo(u);return o&&u.addEventListener("upgradeneeded",g=>{o(Jo(u.result),g.oldVersion,g.newVersion,Jo(u.transaction),g)}),t&&u.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),d.then(g=>{l&&g.addEventListener("close",()=>l()),r&&g.addEventListener("versionchange",m=>r(m.oldVersion,m.newVersion,m))}).catch(()=>{}),d}const Hw=["get","getKey","getAll","getAllKeys","count"],zw=["put","add","delete","clear"],Oh=new Map;function d_(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Oh.get(e))return Oh.get(e);const t=e.replace(/FromIndex$/,""),o=e!==t,r=zw.includes(t);if(!(t in(o?IDBIndex:IDBObjectStore).prototype)||!(r||Hw.includes(t)))return;const l=async function(u,...d){const g=this.transaction(u,r?"readwrite":"readonly");let m=g.store;return o&&(m=m.index(d.shift())),(await Promise.all([m[t](...d),r&&g.done]))[0]};return Oh.set(e,l),l}qw(n=>({...n,get:(e,t,o)=>d_(e,t)||n.get(e,t,o),has:(e,t)=>!!d_(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Yw(t)){const o=t.getImmediate();return`${o.library}/${o.version}`}else return null}).filter(t=>t).join(" ")}}function Yw(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Zh="@firebase/app",h_="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oo=new fT("@firebase/app"),Kw="@firebase/app-compat",Qw="@firebase/analytics-compat",$w="@firebase/analytics",Xw="@firebase/app-check-compat",Ww="@firebase/app-check",Zw="@firebase/auth",jw="@firebase/auth-compat",e1="@firebase/database",t1="@firebase/data-connect",n1="@firebase/database-compat",i1="@firebase/functions",o1="@firebase/functions-compat",s1="@firebase/installations",r1="@firebase/installations-compat",a1="@firebase/messaging",l1="@firebase/messaging-compat",u1="@firebase/performance",c1="@firebase/performance-compat",f1="@firebase/remote-config",d1="@firebase/remote-config-compat",h1="@firebase/storage",p1="@firebase/storage-compat",m1="@firebase/firestore",g1="@firebase/ai",y1="@firebase/firestore-compat",v1="firebase",_1="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jh="[DEFAULT]",E1={[Zh]:"fire-core",[Kw]:"fire-core-compat",[$w]:"fire-analytics",[Qw]:"fire-analytics-compat",[Ww]:"fire-app-check",[Xw]:"fire-app-check-compat",[Zw]:"fire-auth",[jw]:"fire-auth-compat",[e1]:"fire-rtdb",[t1]:"fire-data-connect",[n1]:"fire-rtdb-compat",[i1]:"fire-fn",[o1]:"fire-fn-compat",[s1]:"fire-iid",[r1]:"fire-iid-compat",[a1]:"fire-fcm",[l1]:"fire-fcm-compat",[u1]:"fire-perf",[c1]:"fire-perf-compat",[f1]:"fire-rc",[d1]:"fire-rc-compat",[h1]:"fire-gcs",[p1]:"fire-gcs-compat",[m1]:"fire-fst",[y1]:"fire-fst-compat",[g1]:"fire-vertex","fire-js":"fire-js",[v1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jc=new Map,T1=new Map,ep=new Map;function p_(n,e){try{n.container.addComponent(e)}catch(t){oo.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Yc(n){const e=n.name;if(ep.has(e))return oo.debug(`There were multiple attempts to register component ${e}.`),!1;ep.set(e,n);for(const t of Jc.values())p_(t,n);for(const t of T1.values())p_(t,n);return!0}function S1(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function A1(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Yo=new cT("app","Firebase",C1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(e,t,o){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=o,this.container.addComponent(new Vl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Yo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R1=_1;function pT(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const o={name:jh,automaticDataCollectionEnabled:!0,...e},r=o.name;if(typeof r!="string"||!r)throw Yo.create("bad-app-name",{appName:String(r)});if(t||(t=uT()),!t)throw Yo.create("no-options");const l=Jc.get(r);if(l){if(zc(t,l.options)&&zc(o,l.config))return l;throw Yo.create("duplicate-app",{appName:r})}const u=new Nw(r);for(const g of ep.values())u.addComponent(g);const d=new I1(t,o,u);return Jc.set(r,d),d}function w1(n=jh){const e=Jc.get(n);if(!e&&n===jh&&uT())return pT();if(!e)throw Yo.create("no-app",{appName:n});return e}function Jr(n,e,t){let o=E1[n]??n;t&&(o+=`-${t}`);const r=o.match(/\s|\//),l=e.match(/\s|\//);if(r||l){const u=[`Unable to register library "${o}" with version "${e}":`];r&&u.push(`library name "${o}" contains illegal characters (whitespace or "/")`),r&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),oo.warn(u.join(" "));return}Yc(new Vl(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b1="firebase-heartbeat-database",N1=1,Pl="firebase-heartbeat-store";let qh=null;function mT(){return qh||(qh=Fw(b1,N1,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Pl)}catch(t){console.warn(t)}}}}).catch(n=>{throw Yo.create("idb-open",{originalErrorMessage:n.message})})),qh}async function x1(n){try{const t=(await mT()).transaction(Pl),o=await t.objectStore(Pl).get(gT(n));return await t.done,o}catch(e){if(e instanceof ia)oo.warn(e.message);else{const t=Yo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});oo.warn(t.message)}}}async function m_(n,e){try{const o=(await mT()).transaction(Pl,"readwrite");await o.objectStore(Pl).put(e,gT(n)),await o.done}catch(t){if(t instanceof ia)oo.warn(t.message);else{const o=Yo.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});oo.warn(o.message)}}}function gT(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M1=1024,D1=30;class V1{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new U1(t),this._heartbeatsCachePromise=this._storage.read().then(o=>(this._heartbeatsCache=o,o))}async triggerHeartbeat(){var e,t;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=g_();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(u=>u.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:r}),this._heartbeatsCache.heartbeats.length>D1){const u=L1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(o){oo.warn(o)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=g_(),{heartbeatsToSend:o,unsentEntries:r}=P1(this._heartbeatsCache.heartbeats),l=Hc(JSON.stringify({version:2,heartbeats:o}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return oo.warn(t),""}}}function g_(){return new Date().toISOString().substring(0,10)}function P1(n,e=M1){const t=[];let o=n.slice();for(const r of n){const l=t.find(u=>u.agent===r.agent);if(l){if(l.dates.push(r.date),y_(t)>e){l.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),y_(t)>e){t.pop();break}o=o.slice(1)}return{heartbeatsToSend:t,unsentEntries:o}}class U1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Tw()?Sw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await x1(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const o=await this.read();return m_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const o=await this.read();return m_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function y_(n){return Hc(JSON.stringify({version:2,heartbeats:n})).length}function L1(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let o=1;o<n.length;o++)n[o].date<t&&(t=n[o].date,e=o);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k1(n){Yc(new Vl("platform-logger",e=>new Jw(e),"PRIVATE")),Yc(new Vl("heartbeat",e=>new V1(e),"PRIVATE")),Jr(Zh,h_,n),Jr(Zh,h_,"esm2020"),Jr("fire-js","")}k1("");var O1="firebase",q1="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Jr(O1,q1,"app");var v_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ko,yT;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(M,x){function N(){}N.prototype=x.prototype,M.F=x.prototype,M.prototype=new N,M.prototype.constructor=M,M.D=function(L,U,G){for(var D=Array(arguments.length-2),ae=2;ae<arguments.length;ae++)D[ae-2]=arguments[ae];return x.prototype[U].apply(L,D)}}function t(){this.blockSize=-1}function o(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(o,t),o.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(M,x,N){N||(N=0);const L=Array(16);if(typeof x=="string")for(var U=0;U<16;++U)L[U]=x.charCodeAt(N++)|x.charCodeAt(N++)<<8|x.charCodeAt(N++)<<16|x.charCodeAt(N++)<<24;else for(U=0;U<16;++U)L[U]=x[N++]|x[N++]<<8|x[N++]<<16|x[N++]<<24;x=M.g[0],N=M.g[1],U=M.g[2];let G=M.g[3],D;D=x+(G^N&(U^G))+L[0]+3614090360&4294967295,x=N+(D<<7&4294967295|D>>>25),D=G+(U^x&(N^U))+L[1]+3905402710&4294967295,G=x+(D<<12&4294967295|D>>>20),D=U+(N^G&(x^N))+L[2]+606105819&4294967295,U=G+(D<<17&4294967295|D>>>15),D=N+(x^U&(G^x))+L[3]+3250441966&4294967295,N=U+(D<<22&4294967295|D>>>10),D=x+(G^N&(U^G))+L[4]+4118548399&4294967295,x=N+(D<<7&4294967295|D>>>25),D=G+(U^x&(N^U))+L[5]+1200080426&4294967295,G=x+(D<<12&4294967295|D>>>20),D=U+(N^G&(x^N))+L[6]+2821735955&4294967295,U=G+(D<<17&4294967295|D>>>15),D=N+(x^U&(G^x))+L[7]+4249261313&4294967295,N=U+(D<<22&4294967295|D>>>10),D=x+(G^N&(U^G))+L[8]+1770035416&4294967295,x=N+(D<<7&4294967295|D>>>25),D=G+(U^x&(N^U))+L[9]+2336552879&4294967295,G=x+(D<<12&4294967295|D>>>20),D=U+(N^G&(x^N))+L[10]+4294925233&4294967295,U=G+(D<<17&4294967295|D>>>15),D=N+(x^U&(G^x))+L[11]+2304563134&4294967295,N=U+(D<<22&4294967295|D>>>10),D=x+(G^N&(U^G))+L[12]+1804603682&4294967295,x=N+(D<<7&4294967295|D>>>25),D=G+(U^x&(N^U))+L[13]+4254626195&4294967295,G=x+(D<<12&4294967295|D>>>20),D=U+(N^G&(x^N))+L[14]+2792965006&4294967295,U=G+(D<<17&4294967295|D>>>15),D=N+(x^U&(G^x))+L[15]+1236535329&4294967295,N=U+(D<<22&4294967295|D>>>10),D=x+(U^G&(N^U))+L[1]+4129170786&4294967295,x=N+(D<<5&4294967295|D>>>27),D=G+(N^U&(x^N))+L[6]+3225465664&4294967295,G=x+(D<<9&4294967295|D>>>23),D=U+(x^N&(G^x))+L[11]+643717713&4294967295,U=G+(D<<14&4294967295|D>>>18),D=N+(G^x&(U^G))+L[0]+3921069994&4294967295,N=U+(D<<20&4294967295|D>>>12),D=x+(U^G&(N^U))+L[5]+3593408605&4294967295,x=N+(D<<5&4294967295|D>>>27),D=G+(N^U&(x^N))+L[10]+38016083&4294967295,G=x+(D<<9&4294967295|D>>>23),D=U+(x^N&(G^x))+L[15]+3634488961&4294967295,U=G+(D<<14&4294967295|D>>>18),D=N+(G^x&(U^G))+L[4]+3889429448&4294967295,N=U+(D<<20&4294967295|D>>>12),D=x+(U^G&(N^U))+L[9]+568446438&4294967295,x=N+(D<<5&4294967295|D>>>27),D=G+(N^U&(x^N))+L[14]+3275163606&4294967295,G=x+(D<<9&4294967295|D>>>23),D=U+(x^N&(G^x))+L[3]+4107603335&4294967295,U=G+(D<<14&4294967295|D>>>18),D=N+(G^x&(U^G))+L[8]+1163531501&4294967295,N=U+(D<<20&4294967295|D>>>12),D=x+(U^G&(N^U))+L[13]+2850285829&4294967295,x=N+(D<<5&4294967295|D>>>27),D=G+(N^U&(x^N))+L[2]+4243563512&4294967295,G=x+(D<<9&4294967295|D>>>23),D=U+(x^N&(G^x))+L[7]+1735328473&4294967295,U=G+(D<<14&4294967295|D>>>18),D=N+(G^x&(U^G))+L[12]+2368359562&4294967295,N=U+(D<<20&4294967295|D>>>12),D=x+(N^U^G)+L[5]+4294588738&4294967295,x=N+(D<<4&4294967295|D>>>28),D=G+(x^N^U)+L[8]+2272392833&4294967295,G=x+(D<<11&4294967295|D>>>21),D=U+(G^x^N)+L[11]+1839030562&4294967295,U=G+(D<<16&4294967295|D>>>16),D=N+(U^G^x)+L[14]+4259657740&4294967295,N=U+(D<<23&4294967295|D>>>9),D=x+(N^U^G)+L[1]+2763975236&4294967295,x=N+(D<<4&4294967295|D>>>28),D=G+(x^N^U)+L[4]+1272893353&4294967295,G=x+(D<<11&4294967295|D>>>21),D=U+(G^x^N)+L[7]+4139469664&4294967295,U=G+(D<<16&4294967295|D>>>16),D=N+(U^G^x)+L[10]+3200236656&4294967295,N=U+(D<<23&4294967295|D>>>9),D=x+(N^U^G)+L[13]+681279174&4294967295,x=N+(D<<4&4294967295|D>>>28),D=G+(x^N^U)+L[0]+3936430074&4294967295,G=x+(D<<11&4294967295|D>>>21),D=U+(G^x^N)+L[3]+3572445317&4294967295,U=G+(D<<16&4294967295|D>>>16),D=N+(U^G^x)+L[6]+76029189&4294967295,N=U+(D<<23&4294967295|D>>>9),D=x+(N^U^G)+L[9]+3654602809&4294967295,x=N+(D<<4&4294967295|D>>>28),D=G+(x^N^U)+L[12]+3873151461&4294967295,G=x+(D<<11&4294967295|D>>>21),D=U+(G^x^N)+L[15]+530742520&4294967295,U=G+(D<<16&4294967295|D>>>16),D=N+(U^G^x)+L[2]+3299628645&4294967295,N=U+(D<<23&4294967295|D>>>9),D=x+(U^(N|~G))+L[0]+4096336452&4294967295,x=N+(D<<6&4294967295|D>>>26),D=G+(N^(x|~U))+L[7]+1126891415&4294967295,G=x+(D<<10&4294967295|D>>>22),D=U+(x^(G|~N))+L[14]+2878612391&4294967295,U=G+(D<<15&4294967295|D>>>17),D=N+(G^(U|~x))+L[5]+4237533241&4294967295,N=U+(D<<21&4294967295|D>>>11),D=x+(U^(N|~G))+L[12]+1700485571&4294967295,x=N+(D<<6&4294967295|D>>>26),D=G+(N^(x|~U))+L[3]+2399980690&4294967295,G=x+(D<<10&4294967295|D>>>22),D=U+(x^(G|~N))+L[10]+4293915773&4294967295,U=G+(D<<15&4294967295|D>>>17),D=N+(G^(U|~x))+L[1]+2240044497&4294967295,N=U+(D<<21&4294967295|D>>>11),D=x+(U^(N|~G))+L[8]+1873313359&4294967295,x=N+(D<<6&4294967295|D>>>26),D=G+(N^(x|~U))+L[15]+4264355552&4294967295,G=x+(D<<10&4294967295|D>>>22),D=U+(x^(G|~N))+L[6]+2734768916&4294967295,U=G+(D<<15&4294967295|D>>>17),D=N+(G^(U|~x))+L[13]+1309151649&4294967295,N=U+(D<<21&4294967295|D>>>11),D=x+(U^(N|~G))+L[4]+4149444226&4294967295,x=N+(D<<6&4294967295|D>>>26),D=G+(N^(x|~U))+L[11]+3174756917&4294967295,G=x+(D<<10&4294967295|D>>>22),D=U+(x^(G|~N))+L[2]+718787259&4294967295,U=G+(D<<15&4294967295|D>>>17),D=N+(G^(U|~x))+L[9]+3951481745&4294967295,M.g[0]=M.g[0]+x&4294967295,M.g[1]=M.g[1]+(U+(D<<21&4294967295|D>>>11))&4294967295,M.g[2]=M.g[2]+U&4294967295,M.g[3]=M.g[3]+G&4294967295}o.prototype.v=function(M,x){x===void 0&&(x=M.length);const N=x-this.blockSize,L=this.C;let U=this.h,G=0;for(;G<x;){if(U==0)for(;G<=N;)r(this,M,G),G+=this.blockSize;if(typeof M=="string"){for(;G<x;)if(L[U++]=M.charCodeAt(G++),U==this.blockSize){r(this,L),U=0;break}}else for(;G<x;)if(L[U++]=M[G++],U==this.blockSize){r(this,L),U=0;break}}this.h=U,this.o+=x},o.prototype.A=function(){var M=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);M[0]=128;for(var x=1;x<M.length-8;++x)M[x]=0;x=this.o*8;for(var N=M.length-8;N<M.length;++N)M[N]=x&255,x/=256;for(this.v(M),M=Array(16),x=0,N=0;N<4;++N)for(let L=0;L<32;L+=8)M[x++]=this.g[N]>>>L&255;return M};function l(M,x){var N=d;return Object.prototype.hasOwnProperty.call(N,M)?N[M]:N[M]=x(M)}function u(M,x){this.h=x;const N=[];let L=!0;for(let U=M.length-1;U>=0;U--){const G=M[U]|0;L&&G==x||(N[U]=G,L=!1)}this.g=N}var d={};function g(M){return-128<=M&&M<128?l(M,function(x){return new u([x|0],x<0?-1:0)}):new u([M|0],M<0?-1:0)}function m(M){if(isNaN(M)||!isFinite(M))return T;if(M<0)return O(m(-M));const x=[];let N=1;for(let L=0;M>=N;L++)x[L]=M/N|0,N*=4294967296;return new u(x,0)}function _(M,x){if(M.length==0)throw Error("number format error: empty string");if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(M.charAt(0)=="-")return O(_(M.substring(1),x));if(M.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=m(Math.pow(x,8));let L=T;for(let G=0;G<M.length;G+=8){var U=Math.min(8,M.length-G);const D=parseInt(M.substring(G,G+U),x);U<8?(U=m(Math.pow(x,U)),L=L.j(U).add(m(D))):(L=L.j(N),L=L.add(m(D)))}return L}var T=g(0),E=g(1),R=g(16777216);n=u.prototype,n.m=function(){if(B(this))return-O(this).m();let M=0,x=1;for(let N=0;N<this.g.length;N++){const L=this.i(N);M+=(L>=0?L:4294967296+L)*x,x*=4294967296}return M},n.toString=function(M){if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(P(this))return"0";if(B(this))return"-"+O(this).toString(M);const x=m(Math.pow(M,6));var N=this;let L="";for(;;){const U=re(N,x).g;N=$(N,U.j(x));let G=((N.g.length>0?N.g[0]:N.h)>>>0).toString(M);if(N=U,P(N))return G+L;for(;G.length<6;)G="0"+G;L=G+L}},n.i=function(M){return M<0?0:M<this.g.length?this.g[M]:this.h};function P(M){if(M.h!=0)return!1;for(let x=0;x<M.g.length;x++)if(M.g[x]!=0)return!1;return!0}function B(M){return M.h==-1}n.l=function(M){return M=$(this,M),B(M)?-1:P(M)?0:1};function O(M){const x=M.g.length,N=[];for(let L=0;L<x;L++)N[L]=~M.g[L];return new u(N,~M.h).add(E)}n.abs=function(){return B(this)?O(this):this},n.add=function(M){const x=Math.max(this.g.length,M.g.length),N=[];let L=0;for(let U=0;U<=x;U++){let G=L+(this.i(U)&65535)+(M.i(U)&65535),D=(G>>>16)+(this.i(U)>>>16)+(M.i(U)>>>16);L=D>>>16,G&=65535,D&=65535,N[U]=D<<16|G}return new u(N,N[N.length-1]&-2147483648?-1:0)};function $(M,x){return M.add(O(x))}n.j=function(M){if(P(this)||P(M))return T;if(B(this))return B(M)?O(this).j(O(M)):O(O(this).j(M));if(B(M))return O(this.j(O(M)));if(this.l(R)<0&&M.l(R)<0)return m(this.m()*M.m());const x=this.g.length+M.g.length,N=[];for(var L=0;L<2*x;L++)N[L]=0;for(L=0;L<this.g.length;L++)for(let U=0;U<M.g.length;U++){const G=this.i(L)>>>16,D=this.i(L)&65535,ae=M.i(U)>>>16,be=M.i(U)&65535;N[2*L+2*U]+=D*be,se(N,2*L+2*U),N[2*L+2*U+1]+=G*be,se(N,2*L+2*U+1),N[2*L+2*U+1]+=D*ae,se(N,2*L+2*U+1),N[2*L+2*U+2]+=G*ae,se(N,2*L+2*U+2)}for(M=0;M<x;M++)N[M]=N[2*M+1]<<16|N[2*M];for(M=x;M<2*x;M++)N[M]=0;return new u(N,0)};function se(M,x){for(;(M[x]&65535)!=M[x];)M[x+1]+=M[x]>>>16,M[x]&=65535,x++}function j(M,x){this.g=M,this.h=x}function re(M,x){if(P(x))throw Error("division by zero");if(P(M))return new j(T,T);if(B(M))return x=re(O(M),x),new j(O(x.g),O(x.h));if(B(x))return x=re(M,O(x)),new j(O(x.g),x.h);if(M.g.length>30){if(B(M)||B(x))throw Error("slowDivide_ only works with positive integers.");for(var N=E,L=x;L.l(M)<=0;)N=W(N),L=W(L);var U=de(N,1),G=de(L,1);for(L=de(L,2),N=de(N,2);!P(L);){var D=G.add(L);D.l(M)<=0&&(U=U.add(N),G=D),L=de(L,1),N=de(N,1)}return x=$(M,U.j(x)),new j(U,x)}for(U=T;M.l(x)>=0;){for(N=Math.max(1,Math.floor(M.m()/x.m())),L=Math.ceil(Math.log(N)/Math.LN2),L=L<=48?1:Math.pow(2,L-48),G=m(N),D=G.j(x);B(D)||D.l(M)>0;)N-=L,G=m(N),D=G.j(x);P(G)&&(G=E),U=U.add(G),M=$(M,D)}return new j(U,M)}n.B=function(M){return re(this,M).h},n.and=function(M){const x=Math.max(this.g.length,M.g.length),N=[];for(let L=0;L<x;L++)N[L]=this.i(L)&M.i(L);return new u(N,this.h&M.h)},n.or=function(M){const x=Math.max(this.g.length,M.g.length),N=[];for(let L=0;L<x;L++)N[L]=this.i(L)|M.i(L);return new u(N,this.h|M.h)},n.xor=function(M){const x=Math.max(this.g.length,M.g.length),N=[];for(let L=0;L<x;L++)N[L]=this.i(L)^M.i(L);return new u(N,this.h^M.h)};function W(M){const x=M.g.length+1,N=[];for(let L=0;L<x;L++)N[L]=M.i(L)<<1|M.i(L-1)>>>31;return new u(N,M.h)}function de(M,x){const N=x>>5;x%=32;const L=M.g.length-N,U=[];for(let G=0;G<L;G++)U[G]=x>0?M.i(G+N)>>>x|M.i(G+N+1)<<32-x:M.i(G+N);return new u(U,M.h)}o.prototype.digest=o.prototype.A,o.prototype.reset=o.prototype.u,o.prototype.update=o.prototype.v,yT=o,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=m,u.fromString=_,Ko=u}).apply(typeof v_<"u"?v_:typeof self<"u"?self:typeof window<"u"?window:{});var Cc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vT,Sl,_T,Uc,tp,ET,TT,ST;(function(){var n,e=Object.defineProperty;function t(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof Cc=="object"&&Cc];for(var S=0;S<p.length;++S){var C=p[S];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var o=t(this);function r(p,S){if(S)e:{var C=o;p=p.split(".");for(var b=0;b<p.length-1;b++){var H=p[b];if(!(H in C))break e;C=C[H]}p=p[p.length-1],b=C[p],S=S(b),S!=b&&S!=null&&e(C,p,{configurable:!0,writable:!0,value:S})}}r("Symbol.dispose",function(p){return p||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(p){return p||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(p){return p||function(S){var C=[],b;for(b in S)Object.prototype.hasOwnProperty.call(S,b)&&C.push([b,S[b]]);return C}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},u=this||self;function d(p){var S=typeof p;return S=="object"&&p!=null||S=="function"}function g(p,S,C){return p.call.apply(p.bind,arguments)}function m(p,S,C){return m=g,m.apply(null,arguments)}function _(p,S){var C=Array.prototype.slice.call(arguments,1);return function(){var b=C.slice();return b.push.apply(b,arguments),p.apply(this,b)}}function T(p,S){function C(){}C.prototype=S.prototype,p.Z=S.prototype,p.prototype=new C,p.prototype.constructor=p,p.Ob=function(b,H,K){for(var ue=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)ue[Ne-2]=arguments[Ne];return S.prototype[H].apply(b,ue)}}var E=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?p=>p&&AsyncContext.Snapshot.wrap(p):p=>p;function R(p){const S=p.length;if(S>0){const C=Array(S);for(let b=0;b<S;b++)C[b]=p[b];return C}return[]}function P(p,S){for(let b=1;b<arguments.length;b++){const H=arguments[b];var C=typeof H;if(C=C!="object"?C:H?Array.isArray(H)?"array":C:"null",C=="array"||C=="object"&&typeof H.length=="number"){C=p.length||0;const K=H.length||0;p.length=C+K;for(let ue=0;ue<K;ue++)p[C+ue]=H[ue]}else p.push(H)}}class B{constructor(S,C){this.i=S,this.j=C,this.h=0,this.g=null}get(){let S;return this.h>0?(this.h--,S=this.g,this.g=S.next,S.next=null):S=this.i(),S}}function O(p){u.setTimeout(()=>{throw p},0)}function $(){var p=M;let S=null;return p.g&&(S=p.g,p.g=p.g.next,p.g||(p.h=null),S.next=null),S}class se{constructor(){this.h=this.g=null}add(S,C){const b=j.get();b.set(S,C),this.h?this.h.next=b:this.g=b,this.h=b}}var j=new B(()=>new re,p=>p.reset());class re{constructor(){this.next=this.g=this.h=null}set(S,C){this.h=S,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let W,de=!1,M=new se,x=()=>{const p=Promise.resolve(void 0);W=()=>{p.then(N)}};function N(){for(var p;p=$();){try{p.h.call(p.g)}catch(C){O(C)}var S=j;S.j(p),S.h<100&&(S.h++,p.next=S.g,S.g=p)}de=!1}function L(){this.u=this.u,this.C=this.C}L.prototype.u=!1,L.prototype.dispose=function(){this.u||(this.u=!0,this.N())},L.prototype[Symbol.dispose]=function(){this.dispose()},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function U(p,S){this.type=p,this.g=this.target=S,this.defaultPrevented=!1}U.prototype.h=function(){this.defaultPrevented=!0};var G=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var p=!1,S=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const C=()=>{};u.addEventListener("test",C,S),u.removeEventListener("test",C,S)}catch{}return p})();function D(p){return/^[\s\xa0]*$/.test(p)}function ae(p,S){U.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p&&this.init(p,S)}T(ae,U),ae.prototype.init=function(p,S){const C=this.type=p.type,b=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;this.target=p.target||p.srcElement,this.g=S,S=p.relatedTarget,S||(C=="mouseover"?S=p.fromElement:C=="mouseout"&&(S=p.toElement)),this.relatedTarget=S,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=p.pointerType,this.state=p.state,this.i=p,p.defaultPrevented&&ae.Z.h.call(this)},ae.prototype.h=function(){ae.Z.h.call(this);const p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var be="closure_listenable_"+(Math.random()*1e6|0),X=0;function le(p,S,C,b,H){this.listener=p,this.proxy=null,this.src=S,this.type=C,this.capture=!!b,this.ha=H,this.key=++X,this.da=this.fa=!1}function ye(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function Ve(p,S,C){for(const b in p)S.call(C,p[b],b,p)}function Xe(p,S){for(const C in p)S.call(void 0,p[C],C,p)}function q(p){const S={};for(const C in p)S[C]=p[C];return S}const ie="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ce(p,S){let C,b;for(let H=1;H<arguments.length;H++){b=arguments[H];for(C in b)p[C]=b[C];for(let K=0;K<ie.length;K++)C=ie[K],Object.prototype.hasOwnProperty.call(b,C)&&(p[C]=b[C])}}function me(p){this.src=p,this.g={},this.h=0}me.prototype.add=function(p,S,C,b,H){const K=p.toString();p=this.g[K],p||(p=this.g[K]=[],this.h++);const ue=Me(p,S,b,H);return ue>-1?(S=p[ue],C||(S.fa=!1)):(S=new le(S,this.src,K,!!b,H),S.fa=C,p.push(S)),S};function Ae(p,S){const C=S.type;if(C in p.g){var b=p.g[C],H=Array.prototype.indexOf.call(b,S,void 0),K;(K=H>=0)&&Array.prototype.splice.call(b,H,1),K&&(ye(S),p.g[C].length==0&&(delete p.g[C],p.h--))}}function Me(p,S,C,b){for(let H=0;H<p.length;++H){const K=p[H];if(!K.da&&K.listener==S&&K.capture==!!C&&K.ha==b)return H}return-1}var Be="closure_lm_"+(Math.random()*1e6|0),Ut={};function ft(p,S,C,b,H){if(Array.isArray(S)){for(let K=0;K<S.length;K++)ft(p,S[K],C,b,H);return null}return C=pa(C),p&&p[be]?p.J(S,C,d(b)?!!b.capture:!1,H):ns(p,S,C,!1,b,H)}function ns(p,S,C,b,H,K){if(!S)throw Error("Invalid event type");const ue=d(H)?!!H.capture:!!H;let Ne=is(p);if(Ne||(p[Be]=Ne=new me(p)),C=Ne.add(S,C,b,ue,K),C.proxy)return C;if(b=Qs(),C.proxy=b,b.src=p,b.listener=C,p.addEventListener)G||(H=ue),H===void 0&&(H=!1),p.addEventListener(S.toString(),b,H);else if(p.attachEvent)p.attachEvent(ci(S.toString()),b);else if(p.addListener&&p.removeListener)p.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return C}function Qs(){function p(C){return S.call(p.src,p.listener,C)}const S=da;return p}function $s(p,S,C,b,H){if(Array.isArray(S))for(var K=0;K<S.length;K++)$s(p,S[K],C,b,H);else b=d(b)?!!b.capture:!!b,C=pa(C),p&&p[be]?(p=p.i,K=String(S).toString(),K in p.g&&(S=p.g[K],C=Me(S,C,b,H),C>-1&&(ye(S[C]),Array.prototype.splice.call(S,C,1),S.length==0&&(delete p.g[K],p.h--)))):p&&(p=is(p))&&(S=p.g[S.toString()],p=-1,S&&(p=Me(S,C,b,H)),(C=p>-1?S[p]:null)&&Xs(C))}function Xs(p){if(typeof p!="number"&&p&&!p.da){var S=p.src;if(S&&S[be])Ae(S.i,p);else{var C=p.type,b=p.proxy;S.removeEventListener?S.removeEventListener(C,b,p.capture):S.detachEvent?S.detachEvent(ci(C),b):S.addListener&&S.removeListener&&S.removeListener(b),(C=is(S))?(Ae(C,p),C.h==0&&(C.src=null,S[Be]=null)):ye(p)}}}function ci(p){return p in Ut?Ut[p]:Ut[p]="on"+p}function da(p,S){if(p.da)p=!0;else{S=new ae(S,this);const C=p.listener,b=p.ha||p.src;p.fa&&Xs(p),p=C.call(b,S)}return p}function is(p){return p=p[Be],p instanceof me?p:null}var ha="__closure_events_fn_"+(Math.random()*1e9>>>0);function pa(p){return typeof p=="function"?p:(p[ha]||(p[ha]=function(S){return p.handleEvent(S)}),p[ha])}function St(){L.call(this),this.i=new me(this),this.M=this,this.G=null}T(St,L),St.prototype[be]=!0,St.prototype.removeEventListener=function(p,S,C,b){$s(this,p,S,C,b)};function Lt(p,S){var C,b=p.G;if(b)for(C=[];b;b=b.G)C.push(b);if(p=p.M,b=S.type||S,typeof S=="string")S=new U(S,p);else if(S instanceof U)S.target=S.target||p;else{var H=S;S=new U(b,p),ce(S,H)}H=!0;let K,ue;if(C)for(ue=C.length-1;ue>=0;ue--)K=S.g=C[ue],H=co(K,b,!0,S)&&H;if(K=S.g=p,H=co(K,b,!0,S)&&H,H=co(K,b,!1,S)&&H,C)for(ue=0;ue<C.length;ue++)K=S.g=C[ue],H=co(K,b,!1,S)&&H}St.prototype.N=function(){if(St.Z.N.call(this),this.i){var p=this.i;for(const S in p.g){const C=p.g[S];for(let b=0;b<C.length;b++)ye(C[b]);delete p.g[S],p.h--}}this.G=null},St.prototype.J=function(p,S,C,b){return this.i.add(String(p),S,!1,C,b)},St.prototype.K=function(p,S,C,b){return this.i.add(String(p),S,!0,C,b)};function co(p,S,C,b){if(S=p.i.g[String(S)],!S)return!0;S=S.concat();let H=!0;for(let K=0;K<S.length;++K){const ue=S[K];if(ue&&!ue.da&&ue.capture==C){const Ne=ue.listener,vt=ue.ha||ue.src;ue.fa&&Ae(p.i,ue),H=Ne.call(vt,b)!==!1&&H}}return H&&!b.defaultPrevented}function Df(p,S){if(typeof p!="function")if(p&&typeof p.handleEvent=="function")p=m(p.handleEvent,p);else throw Error("Invalid listener argument");return Number(S)>2147483647?-1:u.setTimeout(p,S||0)}function $l(p){p.g=Df(()=>{p.g=null,p.i&&(p.i=!1,$l(p))},p.l);const S=p.h;p.h=null,p.m.apply(null,S)}class rn extends L{constructor(S,C){super(),this.m=S,this.l=C,this.h=null,this.i=!1,this.g=null}j(S){this.h=arguments,this.g?this.i=!0:$l(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function os(p){L.call(this),this.h=p,this.g={}}T(os,L);var ma=[];function ga(p){Ve(p.g,function(S,C){this.g.hasOwnProperty(C)&&Xs(S)},p),p.g={}}os.prototype.N=function(){os.Z.N.call(this),ga(this)},os.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var fo=u.JSON.stringify,Vf=u.JSON.parse,Xl=class{stringify(p){return u.JSON.stringify(p,void 0)}parse(p){return u.JSON.parse(p,void 0)}};function Wl(){}function Zl(){}var Yn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function zt(){U.call(this,"d")}T(zt,U);function Nn(){U.call(this,"c")}T(Nn,U);var yt={},jl=null;function Ws(){return jl=jl||new St}yt.Ia="serverreachability";function eu(p){U.call(this,yt.Ia,p)}T(eu,U);function fi(p){const S=Ws();Lt(S,new eu(S))}yt.STAT_EVENT="statevent";function ss(p,S){U.call(this,yt.STAT_EVENT,p),this.stat=S}T(ss,U);function At(p){const S=Ws();Lt(S,new ss(S,p))}yt.Ja="timingevent";function di(p,S){U.call(this,yt.Ja,p),this.size=S}T(di,U);function hi(p,S){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){p()},S)}function Kn(){this.g=!0}Kn.prototype.ua=function(){this.g=!1};function Pf(p,S,C,b,H,K){p.info(function(){if(p.g)if(K){var ue="",Ne=K.split("&");for(let Ke=0;Ke<Ne.length;Ke++){var vt=Ne[Ke].split("=");if(vt.length>1){const dt=vt[0];vt=vt[1];const Vn=dt.split("_");ue=Vn.length>=2&&Vn[1]=="type"?ue+(dt+"="+vt+"&"):ue+(dt+"=redacted&")}}}else ue=null;else ue=K;return"XMLHTTP REQ ("+b+") [attempt "+H+"]: "+S+`
`+C+`
`+ue})}function tu(p,S,C,b,H,K,ue){p.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+H+"]: "+S+`
`+C+`
`+K+" "+ue})}function pi(p,S,C,b){p.info(function(){return"XMLHTTP TEXT ("+S+"): "+Uf(p,C)+(b?" "+b:"")})}function rs(p,S){p.info(function(){return"TIMEOUT: "+S})}Kn.prototype.info=function(){};function Uf(p,S){if(!p.g)return S;if(!S)return null;try{const K=JSON.parse(S);if(K){for(p=0;p<K.length;p++)if(Array.isArray(K[p])){var C=K[p];if(!(C.length<2)){var b=C[1];if(Array.isArray(b)&&!(b.length<1)){var H=b[0];if(H!="noop"&&H!="stop"&&H!="close")for(let ue=1;ue<b.length;ue++)b[ue]=""}}}}return fo(K)}catch{return S}}var as={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ya={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},va;function ls(){}T(ls,Wl),ls.prototype.g=function(){return new XMLHttpRequest},va=new ls;function ki(p){return encodeURIComponent(String(p))}function nu(p){var S=1;p=p.split(":");const C=[];for(;S>0&&p.length;)C.push(p.shift()),S--;return p.length&&C.push(p.join(":")),C}function Qn(p,S,C,b){this.j=p,this.i=S,this.l=C,this.S=b||1,this.V=new os(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new $n}function $n(){this.i=null,this.g="",this.h=!1}var Ct={},qt={};function mi(p,S,C){p.M=1,p.A=us(Rt(S)),p.u=C,p.R=!0,Zs(p,null)}function Zs(p,S){p.F=Date.now(),gi(p),p.B=Rt(p.A);var C=p.B,b=p.S;Array.isArray(b)||(b=[String(b)]),nr(C.i,"t",b),p.C=0,C=p.j.L,p.h=new $n,p.g=yu(p.j,C?S:null,!p.u),p.P>0&&(p.O=new rn(m(p.Y,p,p.g),p.P)),S=p.V,C=p.g,b=p.ba;var H="readystatechange";Array.isArray(H)||(H&&(ma[0]=H.toString()),H=ma);for(let K=0;K<H.length;K++){const ue=ft(C,H[K],b||S.handleEvent,!1,S.h||S);if(!ue)break;S.g[ue.key]=ue}S=p.J?q(p.J):{},p.u?(p.v||(p.v="POST"),S["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.B,p.v,p.u,S)):(p.v="GET",p.g.ea(p.B,p.v,null,S)),fi(),Pf(p.i,p.v,p.B,p.l,p.S,p.u)}Qn.prototype.ba=function(p){p=p.target;const S=this.O;S&&Zn(p)==3?S.j():this.Y(p)},Qn.prototype.Y=function(p){try{if(p==this.g)e:{const Ne=Zn(this.g),vt=this.g.ya(),Ke=this.g.ca();if(!(Ne<3)&&(Ne!=3||this.g&&(this.h.h||this.g.la()||Jt(this.g)))){this.K||Ne!=4||vt==7||(vt==8||Ke<=0?fi(3):fi(2)),yi(this);var S=this.g.ca();this.X=S;var C=Lf(this);if(this.o=S==200,tu(this.i,this.v,this.B,this.l,this.S,Ne,S),this.o){if(this.U&&!this.L){t:{if(this.g){var b,H=this.g;if((b=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(b)){var K=b;break t}}K=null}if(p=K)pi(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,vi(this,p);else{this.o=!1,this.m=3,At(12),En(this),xn(this);break e}}if(this.R){p=!0;let dt;for(;!this.K&&this.C<C.length;)if(dt=ou(this,C),dt==qt){Ne==4&&(this.m=4,At(14),p=!1),pi(this.i,this.l,null,"[Incomplete Response]");break}else if(dt==Ct){this.m=4,At(15),pi(this.i,this.l,C,"[Invalid Chunk]"),p=!1;break}else pi(this.i,this.l,dt,null),vi(this,dt);if(iu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ne!=4||C.length!=0||this.h.h||(this.m=1,At(16),p=!1),this.o=this.o&&p,!p)pi(this.i,this.l,C,"[Invalid Chunked Response]"),En(this),xn(this);else if(C.length>0&&!this.W){this.W=!0;var ue=this.j;ue.g==this&&ue.aa&&!ue.P&&(ue.j.info("Great, no buffering proxy detected. Bytes received: "+C.length),Va(ue),ue.P=!0,At(11))}}else pi(this.i,this.l,C,null),vi(this,C);Ne==4&&En(this),this.o&&!this.K&&(Ne==4?hu(this.j,this):(this.o=!1,gi(this)))}else qi(this.g),S==400&&C.indexOf("Unknown SID")>0?(this.m=3,At(12)):(this.m=0,At(13)),En(this),xn(this)}}}catch{}finally{}};function Lf(p){if(!iu(p))return p.g.la();const S=Jt(p.g);if(S==="")return"";let C="";const b=S.length,H=Zn(p.g)==4;if(!p.h.i){if(typeof TextDecoder>"u")return En(p),xn(p),"";p.h.i=new u.TextDecoder}for(let K=0;K<b;K++)p.h.h=!0,C+=p.h.i.decode(S[K],{stream:!(H&&K==b-1)});return S.length=0,p.h.g+=C,p.C=0,p.h.g}function iu(p){return p.g?p.v=="GET"&&p.M!=2&&p.j.Aa:!1}function ou(p,S){var C=p.C,b=S.indexOf(`
`,C);return b==-1?qt:(C=Number(S.substring(C,b)),isNaN(C)?Ct:(b+=1,b+C>S.length?qt:(S=S.slice(b,b+C),p.C=b+C,S)))}Qn.prototype.cancel=function(){this.K=!0,En(this)};function gi(p){p.T=Date.now()+p.H,js(p,p.H)}function js(p,S){if(p.D!=null)throw Error("WatchDog timer not null");p.D=hi(m(p.aa,p),S)}function yi(p){p.D&&(u.clearTimeout(p.D),p.D=null)}Qn.prototype.aa=function(){this.D=null;const p=Date.now();p-this.T>=0?(rs(this.i,this.B),this.M!=2&&(fi(),At(17)),En(this),this.m=2,xn(this)):js(this,this.T-p)};function xn(p){p.j.I==0||p.K||hu(p.j,p)}function En(p){yi(p);var S=p.O;S&&typeof S.dispose=="function"&&S.dispose(),p.O=null,ga(p.V),p.g&&(S=p.g,p.g=null,S.abort(),S.dispose())}function vi(p,S){try{var C=p.j;if(C.I!=0&&(C.g==p||Ei(C.h,p))){if(!p.L&&Ei(C.h,p)&&C.I==3){try{var b=C.Ba.g.parse(S)}catch{b=null}if(Array.isArray(b)&&b.length==3){var H=b;if(H[0]==0){e:if(!C.v){if(C.g)if(C.g.F+3e3<p.F)ar(C),Eo(C);else break e;gs(C),At(18)}}else C.xa=H[1],0<C.xa-C.K&&H[2]<37500&&C.F&&C.A==0&&!C.C&&(C.C=hi(m(C.Va,C),6e3));_i(C.h)<=1&&C.ta&&(C.ta=void 0)}else Ri(C,11)}else if((p.L||C.g==p)&&ar(C),!D(S))for(H=C.Ba.g.parse(S),S=0;S<H.length;S++){let Ke=H[S];const dt=Ke[0];if(!(dt<=C.K))if(C.K=dt,Ke=Ke[1],C.I==2)if(Ke[0]=="c"){C.M=Ke[1],C.ba=Ke[2];const Vn=Ke[3];Vn!=null&&(C.ka=Vn,C.j.info("VER="+C.ka));const wi=Ke[4];wi!=null&&(C.za=wi,C.j.info("SVER="+C.za));const jn=Ke[5];jn!=null&&typeof jn=="number"&&jn>0&&(b=1.5*jn,C.O=b,C.j.info("backChannelRequestTimeoutMs_="+b)),b=C;const ei=p.g;if(ei){const ys=ei.g?ei.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ys){var K=b.h;K.g||ys.indexOf("spdy")==-1&&ys.indexOf("quic")==-1&&ys.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(Ta(K,K.h),K.h=null))}if(b.G){const lr=ei.g?ei.g.getResponseHeader("X-HTTP-Session-Id"):null;lr&&(b.wa=lr,We(b.J,b.G,lr))}}C.I=3,C.l&&C.l.ra(),C.aa&&(C.T=Date.now()-p.F,C.j.info("Handshake RTT: "+C.T+"ms")),b=C;var ue=p;if(b.na=gu(b,b.L?b.ba:null,b.W),ue.L){Sa(b.h,ue);var Ne=ue,vt=b.O;vt&&(Ne.H=vt),Ne.D&&(yi(Ne),gi(Ne)),b.g=ue}else fu(b);C.i.length>0&&Ii(C)}else Ke[0]!="stop"&&Ke[0]!="close"||Ri(C,7);else C.I==3&&(Ke[0]=="stop"||Ke[0]=="close"?Ke[0]=="stop"?Ri(C,7):Ma(C):Ke[0]!="noop"&&C.l&&C.l.qa(Ke),C.A=0)}}fi(4)}catch{}}var It=class{constructor(p,S){this.g=p,this.map=S}};function _a(p){this.l=p||10,u.PerformanceNavigationTiming?(p=u.performance.getEntriesByType("navigation"),p=p.length>0&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ea(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function _i(p){return p.h?1:p.g?p.g.size:0}function Ei(p,S){return p.h?p.h==S:p.g?p.g.has(S):!1}function Ta(p,S){p.g?p.g.add(S):p.h=S}function Sa(p,S){p.h&&p.h==S?p.h=null:p.g&&p.g.has(S)&&p.g.delete(S)}_a.prototype.cancel=function(){if(this.i=Aa(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function Aa(p){if(p.h!=null)return p.i.concat(p.h.G);if(p.g!=null&&p.g.size!==0){let S=p.i;for(const C of p.g.values())S=S.concat(C.G);return S}return R(p.i)}var su=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function er(p,S){if(p){p=p.split("&");for(let C=0;C<p.length;C++){const b=p[C].indexOf("=");let H,K=null;b>=0?(H=p[C].substring(0,b),K=p[C].substring(b+1)):H=p[C],S(H,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}function Tn(p){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let S;p instanceof Tn?(this.l=p.l,Gt(this,p.j),this.o=p.o,this.g=p.g,ho(this,p.u),this.h=p.h,Ca(this,uu(p.i)),this.m=p.m):p&&(S=String(p).match(su))?(this.l=!1,Gt(this,S[1]||"",!0),this.o=Ti(S[2]||""),this.g=Ti(S[3]||"",!0),ho(this,S[4]),this.h=Ti(S[5]||"",!0),Ca(this,S[6]||"",!0),this.m=Ti(S[7]||"")):(this.l=!1,this.i=new mo(null,this.l))}Tn.prototype.toString=function(){const p=[];var S=this.j;S&&p.push(cs(S,tr,!0),":");var C=this.g;return(C||S=="file")&&(p.push("//"),(S=this.o)&&p.push(cs(S,tr,!0),"@"),p.push(ki(C).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.u,C!=null&&p.push(":",String(C))),(C=this.h)&&(this.g&&C.charAt(0)!="/"&&p.push("/"),p.push(cs(C,C.charAt(0)=="/"?Ia:ru,!0))),(C=this.i.toString())&&p.push("?",C),(C=this.m)&&p.push("#",cs(C,au)),p.join("")},Tn.prototype.resolve=function(p){const S=Rt(this);let C=!!p.j;C?Gt(S,p.j):C=!!p.o,C?S.o=p.o:C=!!p.g,C?S.g=p.g:C=p.u!=null;var b=p.h;if(C)ho(S,p.u);else if(C=!!p.h){if(b.charAt(0)!="/")if(this.g&&!this.h)b="/"+b;else{var H=S.h.lastIndexOf("/");H!=-1&&(b=S.h.slice(0,H+1)+b)}if(H=b,H==".."||H==".")b="";else if(H.indexOf("./")!=-1||H.indexOf("/.")!=-1){b=H.lastIndexOf("/",0)==0,H=H.split("/");const K=[];for(let ue=0;ue<H.length;){const Ne=H[ue++];Ne=="."?b&&ue==H.length&&K.push(""):Ne==".."?((K.length>1||K.length==1&&K[0]!="")&&K.pop(),b&&ue==H.length&&K.push("")):(K.push(Ne),b=!0)}b=K.join("/")}else b=H}return C?S.h=b:C=p.i.toString()!=="",C?Ca(S,uu(p.i)):C=!!p.m,C&&(S.m=p.m),S};function Rt(p){return new Tn(p)}function Gt(p,S,C){p.j=C?Ti(S,!0):S,p.j&&(p.j=p.j.replace(/:$/,""))}function ho(p,S){if(S){if(S=Number(S),isNaN(S)||S<0)throw Error("Bad port number "+S);p.u=S}else p.u=null}function Ca(p,S,C){S instanceof mo?(p.i=S,ir(p.i,p.l)):(C||(S=cs(S,po)),p.i=new mo(S,p.l))}function We(p,S,C){p.i.set(S,C)}function us(p){return We(p,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),p}function Ti(p,S){return p?S?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function cs(p,S,C){return typeof p=="string"?(p=encodeURI(p).replace(S,dn),C&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function dn(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var tr=/[#\/\?@]/g,ru=/[#\?:]/g,Ia=/[#\?]/g,po=/[#\?@]/g,au=/#/g;function mo(p,S){this.h=this.g=null,this.i=p||null,this.j=!!S}function hn(p){p.g||(p.g=new Map,p.h=0,p.i&&er(p.i,function(S,C){p.add(decodeURIComponent(S.replace(/\+/g," ")),C)}))}n=mo.prototype,n.add=function(p,S){hn(this),this.i=null,p=go(this,p);let C=this.g.get(p);return C||this.g.set(p,C=[]),C.push(S),this.h+=1,this};function lu(p,S){hn(p),S=go(p,S),p.g.has(S)&&(p.i=null,p.h-=p.g.get(S).length,p.g.delete(S))}function Ra(p,S){return hn(p),S=go(p,S),p.g.has(S)}n.forEach=function(p,S){hn(this),this.g.forEach(function(C,b){C.forEach(function(H){p.call(S,H,b,this)},this)},this)};function wa(p,S){hn(p);let C=[];if(typeof S=="string")Ra(p,S)&&(C=C.concat(p.g.get(go(p,S))));else for(p=Array.from(p.g.values()),S=0;S<p.length;S++)C=C.concat(p[S]);return C}n.set=function(p,S){return hn(this),this.i=null,p=go(this,p),Ra(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[S]),this.h+=1,this},n.get=function(p,S){return p?(p=wa(this,p),p.length>0?String(p[0]):S):S};function nr(p,S,C){lu(p,S),C.length>0&&(p.i=null,p.g.set(go(p,S),R(C)),p.h+=C.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],S=Array.from(this.g.keys());for(let b=0;b<S.length;b++){var C=S[b];const H=ki(C);C=wa(this,C);for(let K=0;K<C.length;K++){let ue=H;C[K]!==""&&(ue+="="+ki(C[K])),p.push(ue)}}return this.i=p.join("&")};function uu(p){const S=new mo;return S.i=p.i,p.g&&(S.g=new Map(p.g),S.h=p.h),S}function go(p,S){return S=String(S),p.j&&(S=S.toLowerCase()),S}function ir(p,S){S&&!p.j&&(hn(p),p.i=null,p.g.forEach(function(C,b){const H=b.toLowerCase();b!=H&&(lu(this,b),nr(this,H,C))},p)),p.j=S}function Xn(p,S){const C=new Kn;if(u.Image){const b=new Image;b.onload=_(Mn,C,"TestLoadImage: loaded",!0,S,b),b.onerror=_(Mn,C,"TestLoadImage: error",!1,S,b),b.onabort=_(Mn,C,"TestLoadImage: abort",!1,S,b),b.ontimeout=_(Mn,C,"TestLoadImage: timeout",!1,S,b),u.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=p}else S(!1)}function ba(p,S){const C=new Kn,b=new AbortController,H=setTimeout(()=>{b.abort(),Mn(C,"TestPingServer: timeout",!1,S)},1e4);fetch(p,{signal:b.signal}).then(K=>{clearTimeout(H),K.ok?Mn(C,"TestPingServer: ok",!0,S):Mn(C,"TestPingServer: server error",!1,S)}).catch(()=>{clearTimeout(H),Mn(C,"TestPingServer: error",!1,S)})}function Mn(p,S,C,b,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),b(C)}catch{}}function yo(){this.g=new Xl}function Si(p){this.i=p.Sb||null,this.h=p.ab||!1}T(Si,Wl),Si.prototype.g=function(){return new fs(this.i,this.h)};function fs(p,S){St.call(this),this.H=p,this.o=S,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(fs,St),n=fs.prototype,n.open=function(p,S){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=p,this.D=S,this.readyState=1,Wn(this)},n.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const S={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};p&&(S.body=p),(this.H||u).fetch(new Request(this.D,S)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,vo(this)),this.readyState=0},n.Pa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,Wn(this)),this.g&&(this.readyState=3,Wn(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;or(this)}else p.text().then(this.Oa.bind(this),this.ga.bind(this))};function or(p){p.j.read().then(p.Ma.bind(p)).catch(p.ga.bind(p))}n.Ma=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var S=p.value?p.value:new Uint8Array(0);(S=this.B.decode(S,{stream:!p.done}))&&(this.response=this.responseText+=S)}p.done?vo(this):Wn(this),this.readyState==3&&or(this)}},n.Oa=function(p){this.g&&(this.response=this.responseText=p,vo(this))},n.Na=function(p){this.g&&(this.response=p,vo(this))},n.ga=function(){this.g&&vo(this)};function vo(p){p.readyState=4,p.l=null,p.j=null,p.B=null,Wn(p)}n.setRequestHeader=function(p,S){this.A.append(p,S)},n.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],S=this.h.entries();for(var C=S.next();!C.done;)C=C.value,p.push(C[0]+": "+C[1]),C=S.next();return p.join(`\r
`)};function Wn(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(fs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function Dn(p){let S="";return Ve(p,function(C,b){S+=b,S+=":",S+=C,S+=`\r
`}),S}function ds(p,S,C){e:{for(b in C){var b=!1;break e}b=!0}b||(C=Dn(C),typeof p=="string"?C!=null&&ki(C):We(p,S,C))}function et(p){St.call(this),this.headers=new Map,this.L=p||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(et,St);var Ai=/^https?$/i,Na=["POST","PUT"];n=et.prototype,n.Fa=function(p){this.H=p},n.ea=function(p,S,C,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);S=S?S.toUpperCase():"GET",this.D=p,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():va.g(),this.g.onreadystatechange=E(m(this.Ca,this));try{this.B=!0,this.g.open(S,String(p),!0),this.B=!1}catch(K){hs(this,K);return}if(p=C||"",C=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var H in b)C.set(H,b[H]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const K of b.keys())C.set(K,b.get(K));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(C.keys()).find(K=>K.toLowerCase()=="content-type"),H=u.FormData&&p instanceof u.FormData,!(Array.prototype.indexOf.call(Na,S,void 0)>=0)||b||H||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,ue]of C)this.g.setRequestHeader(K,ue);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(p),this.v=!1}catch(K){hs(this,K)}};function hs(p,S){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=S,p.o=5,xa(p),Oi(p)}function xa(p){p.A||(p.A=!0,Lt(p,"complete"),Lt(p,"error"))}n.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=p||7,Lt(this,"complete"),Lt(this,"abort"),Oi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Oi(this,!0)),et.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?ps(this):this.Xa())},n.Xa=function(){ps(this)};function ps(p){if(p.h&&typeof l<"u"){if(p.v&&Zn(p)==4)setTimeout(p.Ca.bind(p),0);else if(Lt(p,"readystatechange"),Zn(p)==4){p.h=!1;try{const K=p.ca();e:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var S=!0;break e;default:S=!1}var C;if(!(C=S)){var b;if(b=K===0){let ue=String(p.D).match(su)[1]||null;!ue&&u.self&&u.self.location&&(ue=u.self.location.protocol.slice(0,-1)),b=!Ai.test(ue?ue.toLowerCase():"")}C=b}if(C)Lt(p,"complete"),Lt(p,"success");else{p.o=6;try{var H=Zn(p)>2?p.g.statusText:""}catch{H=""}p.l=H+" ["+p.ca()+"]",xa(p)}}finally{Oi(p)}}}}function Oi(p,S){if(p.g){p.m&&(clearTimeout(p.m),p.m=null);const C=p.g;p.g=null,S||Lt(p,"ready");try{C.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Zn(p){return p.g?p.g.readyState:0}n.ca=function(){try{return Zn(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(p){if(this.g){var S=this.g.responseText;return p&&S.indexOf(p)==0&&(S=S.substring(p.length)),Vf(S)}};function Jt(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.F){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function qi(p){const S={};p=(p.g&&Zn(p)>=2&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<p.length;b++){if(D(p[b]))continue;var C=nu(p[b]);const H=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const K=S[H]||[];S[H]=K,K.push(C)}Xe(S,function(b){return b.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ci(p,S,C){return C&&C.internalChannelParams&&C.internalChannelParams[p]||S}function _o(p){this.za=0,this.i=[],this.j=new Kn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ci("failFast",!1,p),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ci("baseRetryDelayMs",5e3,p),this.Za=Ci("retryDelaySeedMs",1e4,p),this.Ta=Ci("forwardChannelMaxRetries",2,p),this.va=Ci("forwardChannelRequestTimeoutMs",2e4,p),this.ma=p&&p.xmlHttpFactory||void 0,this.Ua=p&&p.Rb||void 0,this.Aa=p&&p.useFetchStreams||!1,this.O=void 0,this.L=p&&p.supportsCrossDomainXhr||!1,this.M="",this.h=new _a(p&&p.concurrentRequestLimit),this.Ba=new yo,this.S=p&&p.fastHandshake||!1,this.R=p&&p.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=p&&p.Pb||!1,p&&p.ua&&this.j.ua(),p&&p.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&p&&p.detectBufferingProxy||!1,this.ia=void 0,p&&p.longPollingTimeout&&p.longPollingTimeout>0&&(this.ia=p.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=_o.prototype,n.ka=8,n.I=1,n.connect=function(p,S,C,b){At(0),this.W=p,this.H=S||{},C&&b!==void 0&&(this.H.OSID=C,this.H.OAID=b),this.F=this.X,this.J=gu(this,null,this.W),Ii(this)};function Ma(p){if(sr(p),p.I==3){var S=p.V++,C=Rt(p.J);if(We(C,"SID",p.M),We(C,"RID",S),We(C,"TYPE","terminate"),ms(p,C),S=new Qn(p,p.j,S),S.M=2,S.A=us(Rt(C)),C=!1,u.navigator&&u.navigator.sendBeacon)try{C=u.navigator.sendBeacon(S.A.toString(),"")}catch{}!C&&u.Image&&(new Image().src=S.A,C=!0),C||(S.g=yu(S.j,null),S.g.ea(S.A)),S.F=Date.now(),gi(S)}mu(p)}function Eo(p){p.g&&(Va(p),p.g.cancel(),p.g=null)}function sr(p){Eo(p),p.v&&(u.clearTimeout(p.v),p.v=null),ar(p),p.h.cancel(),p.m&&(typeof p.m=="number"&&u.clearTimeout(p.m),p.m=null)}function Ii(p){if(!Ea(p.h)&&!p.m){p.m=!0;var S=p.Ea;W||x(),de||(W(),de=!0),M.add(S,p),p.D=0}}function rr(p,S){return _i(p.h)>=p.h.j-(p.m?1:0)?!1:p.m?(p.i=S.G.concat(p.i),!0):p.I==1||p.I==2||p.D>=(p.Sa?0:p.Ta)?!1:(p.m=hi(m(p.Ea,p,S),pu(p,p.D)),p.D++,!0)}n.Ea=function(p){if(this.m)if(this.m=null,this.I==1){if(!p){this.V=Math.floor(Math.random()*1e5),p=this.V++;const H=new Qn(this,this.j,p);let K=this.o;if(this.U&&(K?(K=q(K),ce(K,this.U)):K=this.U),this.u!==null||this.R||(H.J=K,K=null),this.S)e:{for(var S=0,C=0;C<this.i.length;C++){t:{var b=this.i[C];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(S+=b,S>4096){S=C;break e}if(S===4096||C===this.i.length-1){S=C+1;break e}}S=1e3}else S=1e3;S=cu(this,H,S),C=Rt(this.J),We(C,"RID",p),We(C,"CVER",22),this.G&&We(C,"X-HTTP-Session-Id",this.G),ms(this,C),K&&(this.R?S="headers="+ki(Dn(K))+"&"+S:this.u&&ds(C,this.u,K)),Ta(this.h,H),this.Ra&&We(C,"TYPE","init"),this.S?(We(C,"$req",S),We(C,"SID","null"),H.U=!0,mi(H,C,null)):mi(H,C,S),this.I=2}}else this.I==3&&(p?Da(this,p):this.i.length==0||Ea(this.h)||Da(this))};function Da(p,S){var C;S?C=S.l:C=p.V++;const b=Rt(p.J);We(b,"SID",p.M),We(b,"RID",C),We(b,"AID",p.K),ms(p,b),p.u&&p.o&&ds(b,p.u,p.o),C=new Qn(p,p.j,C,p.D+1),p.u===null&&(C.J=p.o),S&&(p.i=S.G.concat(p.i)),S=cu(p,C,1e3),C.H=Math.round(p.va*.5)+Math.round(p.va*.5*Math.random()),Ta(p.h,C),mi(C,b,S)}function ms(p,S){p.H&&Ve(p.H,function(C,b){We(S,b,C)}),p.l&&Ve({},function(C,b){We(S,b,C)})}function cu(p,S,C){C=Math.min(p.i.length,C);const b=p.l?m(p.l.Ka,p.l,p):null;e:{var H=p.i;let Ne=-1;for(;;){const vt=["count="+C];Ne==-1?C>0?(Ne=H[0].g,vt.push("ofs="+Ne)):Ne=0:vt.push("ofs="+Ne);let Ke=!0;for(let dt=0;dt<C;dt++){var K=H[dt].g;const Vn=H[dt].map;if(K-=Ne,K<0)Ne=Math.max(0,H[dt].g-100),Ke=!1;else try{K="req"+K+"_"||"";try{var ue=Vn instanceof Map?Vn:Object.entries(Vn);for(const[wi,jn]of ue){let ei=jn;d(jn)&&(ei=fo(jn)),vt.push(K+wi+"="+encodeURIComponent(ei))}}catch(wi){throw vt.push(K+"type="+encodeURIComponent("_badmap")),wi}}catch{b&&b(Vn)}}if(Ke){ue=vt.join("&");break e}}ue=void 0}return p=p.i.splice(0,C),S.G=p,ue}function fu(p){if(!p.g&&!p.v){p.Y=1;var S=p.Da;W||x(),de||(W(),de=!0),M.add(S,p),p.A=0}}function gs(p){return p.g||p.v||p.A>=3?!1:(p.Y++,p.v=hi(m(p.Da,p),pu(p,p.A)),p.A++,!0)}n.Da=function(){if(this.v=null,du(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var p=4*this.T;this.j.info("BP detection timer enabled: "+p),this.B=hi(m(this.Wa,this),p)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,At(10),Eo(this),du(this))};function Va(p){p.B!=null&&(u.clearTimeout(p.B),p.B=null)}function du(p){p.g=new Qn(p,p.j,"rpc",p.Y),p.u===null&&(p.g.J=p.o),p.g.P=0;var S=Rt(p.na);We(S,"RID","rpc"),We(S,"SID",p.M),We(S,"AID",p.K),We(S,"CI",p.F?"0":"1"),!p.F&&p.ia&&We(S,"TO",p.ia),We(S,"TYPE","xmlhttp"),ms(p,S),p.u&&p.o&&ds(S,p.u,p.o),p.O&&(p.g.H=p.O);var C=p.g;p=p.ba,C.M=1,C.A=us(Rt(S)),C.u=null,C.R=!0,Zs(C,p)}n.Va=function(){this.C!=null&&(this.C=null,Eo(this),gs(this),At(19))};function ar(p){p.C!=null&&(u.clearTimeout(p.C),p.C=null)}function hu(p,S){var C=null;if(p.g==S){ar(p),Va(p),p.g=null;var b=2}else if(Ei(p.h,S))C=S.G,Sa(p.h,S),b=1;else return;if(p.I!=0){if(S.o)if(b==1){C=S.u?S.u.length:0,S=Date.now()-S.F;var H=p.D;b=Ws(),Lt(b,new di(b,C)),Ii(p)}else fu(p);else if(H=S.m,H==3||H==0&&S.X>0||!(b==1&&rr(p,S)||b==2&&gs(p)))switch(C&&C.length>0&&(S=p.h,S.i=S.i.concat(C)),H){case 1:Ri(p,5);break;case 4:Ri(p,10);break;case 3:Ri(p,6);break;default:Ri(p,2)}}}function pu(p,S){let C=p.Qa+Math.floor(Math.random()*p.Za);return p.isActive()||(C*=2),C*S}function Ri(p,S){if(p.j.info("Error code "+S),S==2){var C=m(p.bb,p),b=p.Ua;const H=!b;b=new Tn(b||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Gt(b,"https"),us(b),H?Xn(b.toString(),C):ba(b.toString(),C)}else At(2);p.I=0,p.l&&p.l.pa(S),mu(p),sr(p)}n.bb=function(p){p?(this.j.info("Successfully pinged google.com"),At(2)):(this.j.info("Failed to ping google.com"),At(1))};function mu(p){if(p.I=0,p.ja=[],p.l){const S=Aa(p.h);(S.length!=0||p.i.length!=0)&&(P(p.ja,S),P(p.ja,p.i),p.h.i.length=0,R(p.i),p.i.length=0),p.l.oa()}}function gu(p,S,C){var b=C instanceof Tn?Rt(C):new Tn(C);if(b.g!="")S&&(b.g=S+"."+b.g),ho(b,b.u);else{var H=u.location;b=H.protocol,S=S?S+"."+H.hostname:H.hostname,H=+H.port;const K=new Tn(null);b&&Gt(K,b),S&&(K.g=S),H&&ho(K,H),C&&(K.h=C),b=K}return C=p.G,S=p.wa,C&&S&&We(b,C,S),We(b,"VER",p.ka),ms(p,b),b}function yu(p,S,C){if(S&&!p.L)throw Error("Can't create secondary domain capable XhrIo object.");return S=p.Aa&&!p.ma?new et(new Si({ab:C})):new et(p.ma),S.Fa(p.L),S}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function vu(){}n=vu.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function To(){}To.prototype.g=function(p,S){return new an(p,S)};function an(p,S){St.call(this),this.g=new _o(S),this.l=p,this.h=S&&S.messageUrlParams||null,p=S&&S.messageHeaders||null,S&&S.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=S&&S.initMessageHeaders||null,S&&S.messageContentType&&(p?p["X-WebChannel-Content-Type"]=S.messageContentType:p={"X-WebChannel-Content-Type":S.messageContentType}),S&&S.sa&&(p?p["X-WebChannel-Client-Profile"]=S.sa:p={"X-WebChannel-Client-Profile":S.sa}),this.g.U=p,(p=S&&S.Qb)&&!D(p)&&(this.g.u=p),this.A=S&&S.supportsCrossDomainXhr||!1,this.v=S&&S.sendRawJson||!1,(S=S&&S.httpSessionIdParam)&&!D(S)&&(this.g.G=S,p=this.h,p!==null&&S in p&&(p=this.h,S in p&&delete p[S])),this.j=new Gi(this)}T(an,St),an.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},an.prototype.close=function(){Ma(this.g)},an.prototype.o=function(p){var S=this.g;if(typeof p=="string"){var C={};C.__data__=p,p=C}else this.v&&(C={},C.__data__=fo(p),p=C);S.i.push(new It(S.Ya++,p)),S.I==3&&Ii(S)},an.prototype.N=function(){this.g.l=null,delete this.j,Ma(this.g),delete this.g,an.Z.N.call(this)};function _u(p){zt.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var S=p.__sm__;if(S){e:{for(const C in S){p=C;break e}p=void 0}(this.i=p)&&(p=this.i,S=S!==null&&p in S?S[p]:void 0),this.data=S}else this.data=p}T(_u,zt);function Eu(){Nn.call(this),this.status=1}T(Eu,Nn);function Gi(p){this.g=p}T(Gi,vu),Gi.prototype.ra=function(){Lt(this.g,"a")},Gi.prototype.qa=function(p){Lt(this.g,new _u(p))},Gi.prototype.pa=function(p){Lt(this.g,new Eu)},Gi.prototype.oa=function(){Lt(this.g,"b")},To.prototype.createWebChannel=To.prototype.g,an.prototype.send=an.prototype.o,an.prototype.open=an.prototype.m,an.prototype.close=an.prototype.close,ST=function(){return new To},TT=function(){return Ws()},ET=yt,tp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},as.NO_ERROR=0,as.TIMEOUT=8,as.HTTP_ERROR=6,Uc=as,ya.COMPLETE="complete",_T=ya,Zl.EventType=Yn,Yn.OPEN="a",Yn.CLOSE="b",Yn.ERROR="c",Yn.MESSAGE="d",St.prototype.listen=St.prototype.J,Sl=Zl,et.prototype.listenOnce=et.prototype.K,et.prototype.getLastError=et.prototype.Ha,et.prototype.getLastErrorCode=et.prototype.ya,et.prototype.getStatus=et.prototype.ca,et.prototype.getResponseJson=et.prototype.La,et.prototype.getResponseText=et.prototype.la,et.prototype.send=et.prototype.ea,et.prototype.setWithCredentials=et.prototype.Fa,vT=et}).apply(typeof Cc<"u"?Cc:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}nn.UNAUTHENTICATED=new nn(null),nn.GOOGLE_CREDENTIALS=new nn("google-credentials-uid"),nn.FIRST_PARTY=new nn("first-party-uid"),nn.MOCK_USER=new nn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oa="12.9.0";function G1(n){oa=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Os=new fT("@firebase/firestore");function Or(){return Os.logLevel}function pe(n,...e){if(Os.logLevel<=He.DEBUG){const t=e.map(qp);Os.debug(`Firestore (${oa}): ${n}`,...t)}}function so(n,...e){if(Os.logLevel<=He.ERROR){const t=e.map(qp);Os.error(`Firestore (${oa}): ${n}`,...t)}}function qs(n,...e){if(Os.logLevel<=He.WARN){const t=e.map(qp);Os.warn(`Firestore (${oa}): ${n}`,...t)}}function qp(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Se(n,e,t){let o="Unexpected state";typeof e=="string"?o=e:t=e,AT(n,o,t)}function AT(n,e,t){let o=`FIRESTORE (${oa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{o+=" CONTEXT: "+JSON.stringify(t)}catch{o+=" CONTEXT: "+t}throw so(o),new Error(o)}function $e(n,e,t,o){let r="Unexpected state";typeof t=="string"?r=t:o=t,n||AT(e,r,o)}function we(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends ia{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class B1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(nn.UNAUTHENTICATED)))}shutdown(){}}class F1{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class H1{constructor(e){this.t=e,this.currentUser=nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){$e(this.o===void 0,42304);let o=this.i;const r=g=>this.i!==o?(o=this.i,t(g)):Promise.resolve();let l=new no;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new no,e.enqueueRetryable((()=>r(this.currentUser)))};const u=()=>{const g=l;e.enqueueRetryable((async()=>{await g.promise,await r(this.currentUser)}))},d=g=>{pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((g=>d(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?d(g):(pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new no)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((o=>this.i!==e?(pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?($e(typeof o.accessToken=="string",31837,{l:o}),new CT(o.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return $e(e===null||typeof e=="string",2055,{h:e}),new nn(e)}}class z1{constructor(e,t,o){this.P=e,this.T=t,this.I=o,this.type="FirstParty",this.user=nn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class J1{constructor(e,t,o){this.P=e,this.T=t,this.I=o}getToken(){return Promise.resolve(new z1(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(nn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class __{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Y1{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,A1(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){$e(this.o===void 0,3512);const o=l=>{l.error!=null&&pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.m;return this.m=l.token,pe("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>o(l)))};const r=l=>{pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>r(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?r(l):pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new __(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?($e(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new __(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K1(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let o=0;o<n;o++)t[o]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let o="";for(;o.length<20;){const r=K1(40);for(let l=0;l<r.length;++l)o.length<20&&r[l]<t&&(o+=e.charAt(r[l]%62))}return o}}function Oe(n,e){return n<e?-1:n>e?1:0}function np(n,e){const t=Math.min(n.length,e.length);for(let o=0;o<t;o++){const r=n.charAt(o),l=e.charAt(o);if(r!==l)return Gh(r)===Gh(l)?Oe(r,l):Gh(r)?1:-1}return Oe(n.length,e.length)}const Q1=55296,$1=57343;function Gh(n){const e=n.charCodeAt(0);return e>=Q1&&e<=$1}function Zr(n,e,t){return n.length===e.length&&n.every(((o,r)=>t(o,e[r])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E_="__name__";class Di{constructor(e,t,o){t===void 0?t=0:t>e.length&&Se(637,{offset:t,range:e.length}),o===void 0?o=e.length-t:o>e.length-t&&Se(1746,{length:o,range:e.length-t}),this.segments=e,this.offset=t,this.len=o}get length(){return this.len}isEqual(e){return Di.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Di?e.forEach((o=>{t.push(o)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,o=this.limit();t<o;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const o=Math.min(e.length,t.length);for(let r=0;r<o;r++){const l=Di.compareSegments(e.get(r),t.get(r));if(l!==0)return l}return Oe(e.length,t.length)}static compareSegments(e,t){const o=Di.isNumericId(e),r=Di.isNumericId(t);return o&&!r?-1:!o&&r?1:o&&r?Di.extractNumericId(e).compare(Di.extractNumericId(t)):np(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ko.fromString(e.substring(4,e.length-2))}}class rt extends Di{construct(e,t,o){return new rt(e,t,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const o of e){if(o.indexOf("//")>=0)throw new he(te.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);t.push(...o.split("/").filter((r=>r.length>0)))}return new rt(t)}static emptyPath(){return new rt([])}}const X1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Zt extends Di{construct(e,t,o){return new Zt(e,t,o)}static isValidIdentifier(e){return X1.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Zt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===E_}static keyField(){return new Zt([E_])}static fromServerFormat(e){const t=[];let o="",r=0;const l=()=>{if(o.length===0)throw new he(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(o),o=""};let u=!1;for(;r<e.length;){const d=e[r];if(d==="\\"){if(r+1===e.length)throw new he(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[r+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new he(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=g,r+=2}else d==="`"?(u=!u,r++):d!=="."||u?(o+=d,r++):(l(),r++)}if(l(),u)throw new he(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Zt(t)}static emptyPath(){return new Zt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(rt.fromString(e))}static fromName(e){return new Ee(rt.fromString(e).popFirst(5))}static empty(){return new Ee(rt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&rt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return rt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new rt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IT(n,e,t){if(!t)throw new he(te.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function W1(n,e,t,o){if(e===!0&&o===!0)throw new he(te.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function T_(n){if(!Ee.isDocumentKey(n))throw new he(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function S_(n){if(Ee.isDocumentKey(n))throw new he(te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function RT(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function ff(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(o){return o.constructor?o.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Se(12329,{type:typeof n})}function Gs(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new he(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ff(n);throw new he(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vt(n,e){const t={typeString:n};return e&&(t.value=e),t}function zl(n,e){if(!RT(n))throw new he(te.INVALID_ARGUMENT,"JSON must be an object");let t;for(const o in e)if(e[o]){const r=e[o].typeString,l="value"in e[o]?{value:e[o].value}:void 0;if(!(o in n)){t=`JSON missing required field: '${o}'`;break}const u=n[o];if(r&&typeof u!==r){t=`JSON field '${o}' must be a ${r}.`;break}if(l!==void 0&&u!==l.value){t=`Expected '${o}' field to equal '${l.value}'`;break}}if(t)throw new he(te.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A_=-62135596800,C_=1e6;class ct{static now(){return ct.fromMillis(Date.now())}static fromDate(e){return ct.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),o=Math.floor((e-1e3*t)*C_);return new ct(t,o)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new he(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new he(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<A_)throw new he(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/C_}_compareTo(e){return this.seconds===e.seconds?Oe(this.nanoseconds,e.nanoseconds):Oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ct._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(zl(e,ct._jsonSchema))return new ct(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-A_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ct._jsonSchemaVersion="firestore/timestamp/1.0",ct._jsonSchema={type:Vt("string",ct._jsonSchemaVersion),seconds:Vt("number"),nanoseconds:Vt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{static fromTimestamp(e){return new Ie(e)}static min(){return new Ie(new ct(0,0))}static max(){return new Ie(new ct(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ul=-1;function Z1(n,e){const t=n.toTimestamp().seconds,o=n.toTimestamp().nanoseconds+1,r=Ie.fromTimestamp(o===1e9?new ct(t+1,0):new ct(t,o));return new $o(r,Ee.empty(),e)}function j1(n){return new $o(n.readTime,n.key,Ul)}class $o{constructor(e,t,o){this.readTime=e,this.documentKey=t,this.largestBatchId=o}static min(){return new $o(Ie.min(),Ee.empty(),Ul)}static max(){return new $o(Ie.max(),Ee.empty(),Ul)}}function eb(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ee.comparator(n.documentKey,e.documentKey),t!==0?t:Oe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class nb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sa(n){if(n.code!==te.FAILED_PRECONDITION||n.message!==tb)throw n;pe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Se(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new oe(((o,r)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(o,r)},this.catchCallback=l=>{this.wrapFailure(t,l).next(o,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof oe?t:oe.resolve(t)}catch(t){return oe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):oe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):oe.reject(t)}static resolve(e){return new oe(((t,o)=>{t(e)}))}static reject(e){return new oe(((t,o)=>{o(e)}))}static waitFor(e){return new oe(((t,o)=>{let r=0,l=0,u=!1;e.forEach((d=>{++r,d.next((()=>{++l,u&&l===r&&t()}),(g=>o(g)))})),u=!0,l===r&&t()}))}static or(e){let t=oe.resolve(!1);for(const o of e)t=t.next((r=>r?oe.resolve(r):o()));return t}static forEach(e,t){const o=[];return e.forEach(((r,l)=>{o.push(t.call(this,r,l))})),this.waitFor(o)}static mapArray(e,t){return new oe(((o,r)=>{const l=e.length,u=new Array(l);let d=0;for(let g=0;g<l;g++){const m=g;t(e[m]).next((_=>{u[m]=_,++d,d===l&&o(u)}),(_=>r(_)))}}))}static doWhile(e,t){return new oe(((o,r)=>{const l=()=>{e()===!0?t().next((()=>{l()}),r):o()};l()}))}}function ib(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ra(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=o=>this.ae(o),this.ue=o=>t.writeSequenceNumber(o))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}df.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bp=-1;function hf(n){return n==null}function Kc(n){return n===0&&1/n==-1/0}function ob(n){return typeof n=="number"&&Number.isInteger(n)&&!Kc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wT="";function sb(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=I_(e)),e=rb(n.get(t),e);return I_(e)}function rb(n,e){let t=e;const o=n.length;for(let r=0;r<o;r++){const l=n.charAt(r);switch(l){case"\0":t+="";break;case wT:t+="";break;default:t+=l}}return t}function I_(n){return n+wT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R_(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Fs(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function bT(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e,t){this.comparator=e,this.root=t||Xt.EMPTY}insert(e,t){return new pt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Xt.BLACK,null,null))}remove(e){return new pt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const o=this.comparator(e,t.key);if(o===0)return t.value;o<0?t=t.left:o>0&&(t=t.right)}return null}indexOf(e){let t=0,o=this.root;for(;!o.isEmpty();){const r=this.comparator(e,o.key);if(r===0)return t+o.left.size;r<0?o=o.left:(t+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,o)=>(e(t,o),!1)))}toString(){const e=[];return this.inorderTraversal(((t,o)=>(e.push(`${t}:${o}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ic(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ic(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ic(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ic(this.root,e,this.comparator,!0)}}class Ic{constructor(e,t,o,r){this.isReverse=r,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?o(e.key,t):1,t&&r&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xt{constructor(e,t,o,r,l){this.key=e,this.value=t,this.color=o??Xt.RED,this.left=r??Xt.EMPTY,this.right=l??Xt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,o,r,l){return new Xt(e??this.key,t??this.value,o??this.color,r??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,o){let r=this;const l=o(e,r.key);return r=l<0?r.copy(null,null,null,r.left.insert(e,t,o),null):l===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,o)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Xt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let o,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return Xt.EMPTY;o=r.right.min(),r=r.copy(o.key,o.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Se(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Se(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Se(27949);return e+(this.isRed()?0:1)}}Xt.EMPTY=null,Xt.RED=!0,Xt.BLACK=!1;Xt.EMPTY=new class{constructor(){this.size=0}get key(){throw Se(57766)}get value(){throw Se(16141)}get color(){throw Se(16727)}get left(){throw Se(29726)}get right(){throw Se(36894)}copy(e,t,o,r,l){return this}insert(e,t,o){return new Xt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.comparator=e,this.data=new pt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,o)=>(e(t),!1)))}forEachInRange(e,t){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const r=o.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let o;for(o=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new w_(this.data.getIterator())}getIteratorFrom(e){return new w_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((o=>{t=t.add(o)})),t}isEqual(e){if(!(e instanceof Ot)||this.size!==e.size)return!1;const t=this.data.getIterator(),o=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,l=o.getNext().key;if(this.comparator(r,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ot(this.comparator);return t.data=e,t}}class w_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e){this.fields=e,e.sort(Zt.comparator)}static empty(){return new oi([])}unionWith(e){let t=new Ot(Zt.comparator);for(const o of this.fields)t=t.add(o);for(const o of e)t=t.add(o);return new oi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Zr(this.fields,e.fields,((t,o)=>t.isEqual(o)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(r){try{return atob(r)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new NT("Invalid base64 string: "+l):l}})(e);return new jt(t)}static fromUint8Array(e){const t=(function(r){let l="";for(let u=0;u<r.length;++u)l+=String.fromCharCode(r[u]);return l})(e);return new jt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const o=new Uint8Array(t.length);for(let r=0;r<t.length;r++)o[r]=t.charCodeAt(r);return o})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}jt.EMPTY_BYTE_STRING=new jt("");const ab=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Xo(n){if($e(!!n,39018),typeof n=="string"){let e=0;const t=ab.exec(n);if($e(!!t,46558,{timestamp:n}),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const o=new Date(n);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:Tt(n.seconds),nanos:Tt(n.nanos)}}function Tt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Wo(n){return typeof n=="string"?jt.fromBase64String(n):jt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xT="server_timestamp",MT="__type__",DT="__previous_value__",VT="__local_write_time__";function Fp(n){var t,o;return((o=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[MT])==null?void 0:o.stringValue)===xT}function pf(n){const e=n.mapValue.fields[DT];return Fp(e)?pf(e):e}function Ll(n){const e=Xo(n.mapValue.fields[VT].timestampValue);return new ct(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb{constructor(e,t,o,r,l,u,d,g,m,_,T){this.databaseId=e,this.appId=t,this.persistenceKey=o,this.host=r,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=g,this.useFetchStreams=m,this.isUsingEmulator=_,this.apiKey=T}}const Qc="(default)";class kl{constructor(e,t){this.projectId=e,this.database=t||Qc}static empty(){return new kl("","")}get isDefaultDatabase(){return this.database===Qc}isEqual(e){return e instanceof kl&&e.projectId===this.projectId&&e.database===this.database}}function ub(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new he(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new kl(n.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PT="__type__",cb="__max__",Rc={mapValue:{}},UT="__vector__",$c="value";function Zo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Fp(n)?4:db(n)?9007199254740991:fb(n)?10:11:Se(28295,{value:n})}function Li(n,e){if(n===e)return!0;const t=Zo(n);if(t!==Zo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ll(n).isEqual(Ll(e));case 3:return(function(r,l){if(typeof r.timestampValue=="string"&&typeof l.timestampValue=="string"&&r.timestampValue.length===l.timestampValue.length)return r.timestampValue===l.timestampValue;const u=Xo(r.timestampValue),d=Xo(l.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(r,l){return Wo(r.bytesValue).isEqual(Wo(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(r,l){return Tt(r.geoPointValue.latitude)===Tt(l.geoPointValue.latitude)&&Tt(r.geoPointValue.longitude)===Tt(l.geoPointValue.longitude)})(n,e);case 2:return(function(r,l){if("integerValue"in r&&"integerValue"in l)return Tt(r.integerValue)===Tt(l.integerValue);if("doubleValue"in r&&"doubleValue"in l){const u=Tt(r.doubleValue),d=Tt(l.doubleValue);return u===d?Kc(u)===Kc(d):isNaN(u)&&isNaN(d)}return!1})(n,e);case 9:return Zr(n.arrayValue.values||[],e.arrayValue.values||[],Li);case 10:case 11:return(function(r,l){const u=r.mapValue.fields||{},d=l.mapValue.fields||{};if(R_(u)!==R_(d))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(d[g]===void 0||!Li(u[g],d[g])))return!1;return!0})(n,e);default:return Se(52216,{left:n})}}function Ol(n,e){return(n.values||[]).find((t=>Li(t,e)))!==void 0}function jr(n,e){if(n===e)return 0;const t=Zo(n),o=Zo(e);if(t!==o)return Oe(t,o);switch(t){case 0:case 9007199254740991:return 0;case 1:return Oe(n.booleanValue,e.booleanValue);case 2:return(function(l,u){const d=Tt(l.integerValue||l.doubleValue),g=Tt(u.integerValue||u.doubleValue);return d<g?-1:d>g?1:d===g?0:isNaN(d)?isNaN(g)?0:-1:1})(n,e);case 3:return b_(n.timestampValue,e.timestampValue);case 4:return b_(Ll(n),Ll(e));case 5:return np(n.stringValue,e.stringValue);case 6:return(function(l,u){const d=Wo(l),g=Wo(u);return d.compareTo(g)})(n.bytesValue,e.bytesValue);case 7:return(function(l,u){const d=l.split("/"),g=u.split("/");for(let m=0;m<d.length&&m<g.length;m++){const _=Oe(d[m],g[m]);if(_!==0)return _}return Oe(d.length,g.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,u){const d=Oe(Tt(l.latitude),Tt(u.latitude));return d!==0?d:Oe(Tt(l.longitude),Tt(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return N_(n.arrayValue,e.arrayValue);case 10:return(function(l,u){var E,R,P,B;const d=l.fields||{},g=u.fields||{},m=(E=d[$c])==null?void 0:E.arrayValue,_=(R=g[$c])==null?void 0:R.arrayValue,T=Oe(((P=m==null?void 0:m.values)==null?void 0:P.length)||0,((B=_==null?void 0:_.values)==null?void 0:B.length)||0);return T!==0?T:N_(m,_)})(n.mapValue,e.mapValue);case 11:return(function(l,u){if(l===Rc.mapValue&&u===Rc.mapValue)return 0;if(l===Rc.mapValue)return 1;if(u===Rc.mapValue)return-1;const d=l.fields||{},g=Object.keys(d),m=u.fields||{},_=Object.keys(m);g.sort(),_.sort();for(let T=0;T<g.length&&T<_.length;++T){const E=np(g[T],_[T]);if(E!==0)return E;const R=jr(d[g[T]],m[_[T]]);if(R!==0)return R}return Oe(g.length,_.length)})(n.mapValue,e.mapValue);default:throw Se(23264,{he:t})}}function b_(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Oe(n,e);const t=Xo(n),o=Xo(e),r=Oe(t.seconds,o.seconds);return r!==0?r:Oe(t.nanos,o.nanos)}function N_(n,e){const t=n.values||[],o=e.values||[];for(let r=0;r<t.length&&r<o.length;++r){const l=jr(t[r],o[r]);if(l)return l}return Oe(t.length,o.length)}function ea(n){return ip(n)}function ip(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const o=Xo(t);return`time(${o.seconds},${o.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Wo(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ee.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let o="[",r=!0;for(const l of t.values||[])r?r=!1:o+=",",o+=ip(l);return o+"]"})(n.arrayValue):"mapValue"in n?(function(t){const o=Object.keys(t.fields||{}).sort();let r="{",l=!0;for(const u of o)l?l=!1:r+=",",r+=`${u}:${ip(t.fields[u])}`;return r+"}"})(n.mapValue):Se(61005,{value:n})}function Lc(n){switch(Zo(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=pf(n);return e?16+Lc(e):16;case 5:return 2*n.stringValue.length;case 6:return Wo(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(o){return(o.values||[]).reduce(((r,l)=>r+Lc(l)),0)})(n.arrayValue);case 10:case 11:return(function(o){let r=0;return Fs(o.fields,((l,u)=>{r+=l.length+Lc(u)})),r})(n.mapValue);default:throw Se(13486,{value:n})}}function x_(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function op(n){return!!n&&"integerValue"in n}function Hp(n){return!!n&&"arrayValue"in n}function M_(n){return!!n&&"nullValue"in n}function D_(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function kc(n){return!!n&&"mapValue"in n}function fb(n){var t,o;return((o=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[PT])==null?void 0:o.stringValue)===UT}function Nl(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Fs(n.mapValue.fields,((t,o)=>e.mapValue.fields[t]=Nl(o))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Nl(n.arrayValue.values[t]);return e}return{...n}}function db(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===cb}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this.value=e}static empty(){return new Fn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let o=0;o<e.length-1;++o)if(t=(t.mapValue.fields||{})[e.get(o)],!kc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Nl(t)}setAll(e){let t=Zt.emptyPath(),o={},r=[];e.forEach(((u,d)=>{if(!t.isImmediateParentOf(d)){const g=this.getFieldsMap(t);this.applyChanges(g,o,r),o={},r=[],t=d.popLast()}u?o[d.lastSegment()]=Nl(u):r.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,o,r)}delete(e){const t=this.field(e.popLast());kc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Li(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let o=0;o<e.length;++o){let r=t.mapValue.fields[e.get(o)];kc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(o)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,o){Fs(t,((r,l)=>e[r]=l));for(const r of o)delete e[r]}clone(){return new Fn(Nl(this.value))}}function LT(n){const e=[];return Fs(n.fields,((t,o)=>{const r=new Zt([t]);if(kc(o)){const l=LT(o.mapValue).fields;if(l.length===0)e.push(r);else for(const u of l)e.push(r.child(u))}else e.push(r)})),new oi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e,t,o,r,l,u,d){this.key=e,this.documentType=t,this.version=o,this.readTime=r,this.createTime=l,this.data=u,this.documentState=d}static newInvalidDocument(e){return new on(e,0,Ie.min(),Ie.min(),Ie.min(),Fn.empty(),0)}static newFoundDocument(e,t,o,r){return new on(e,1,t,Ie.min(),o,r,0)}static newNoDocument(e,t){return new on(e,2,t,Ie.min(),Ie.min(),Fn.empty(),0)}static newUnknownDocument(e,t){return new on(e,3,t,Ie.min(),Ie.min(),Fn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Fn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Fn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof on&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new on(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(e,t){this.position=e,this.inclusive=t}}function V_(n,e,t){let o=0;for(let r=0;r<n.position.length;r++){const l=e[r],u=n.position[r];if(l.field.isKeyField()?o=Ee.comparator(Ee.fromName(u.referenceValue),t.key):o=jr(u,t.data.field(l.field)),l.dir==="desc"&&(o*=-1),o!==0)break}return o}function P_(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Li(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(e,t="asc"){this.field=e,this.dir=t}}function hb(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{}class Dt extends kT{constructor(e,t,o){super(),this.field=e,this.op=t,this.value=o}static create(e,t,o){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,o):new mb(e,t,o):t==="array-contains"?new vb(e,o):t==="in"?new _b(e,o):t==="not-in"?new Eb(e,o):t==="array-contains-any"?new Tb(e,o):new Dt(e,t,o)}static createKeyFieldInFilter(e,t,o){return t==="in"?new gb(e,o):new yb(e,o)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(jr(t,this.value)):t!==null&&Zo(this.value)===Zo(t)&&this.matchesComparison(jr(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Se(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class li extends kT{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new li(e,t)}matches(e){return OT(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function OT(n){return n.op==="and"}function qT(n){return pb(n)&&OT(n)}function pb(n){for(const e of n.filters)if(e instanceof li)return!1;return!0}function sp(n){if(n instanceof Dt)return n.field.canonicalString()+n.op.toString()+ea(n.value);if(qT(n))return n.filters.map((e=>sp(e))).join(",");{const e=n.filters.map((t=>sp(t))).join(",");return`${n.op}(${e})`}}function GT(n,e){return n instanceof Dt?(function(o,r){return r instanceof Dt&&o.op===r.op&&o.field.isEqual(r.field)&&Li(o.value,r.value)})(n,e):n instanceof li?(function(o,r){return r instanceof li&&o.op===r.op&&o.filters.length===r.filters.length?o.filters.reduce(((l,u,d)=>l&&GT(u,r.filters[d])),!0):!1})(n,e):void Se(19439)}function BT(n){return n instanceof Dt?(function(t){return`${t.field.canonicalString()} ${t.op} ${ea(t.value)}`})(n):n instanceof li?(function(t){return t.op.toString()+" {"+t.getFilters().map(BT).join(" ,")+"}"})(n):"Filter"}class mb extends Dt{constructor(e,t,o){super(e,t,o),this.key=Ee.fromName(o.referenceValue)}matches(e){const t=Ee.comparator(e.key,this.key);return this.matchesComparison(t)}}class gb extends Dt{constructor(e,t){super(e,"in",t),this.keys=FT("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class yb extends Dt{constructor(e,t){super(e,"not-in",t),this.keys=FT("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function FT(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((o=>Ee.fromName(o.referenceValue)))}class vb extends Dt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Hp(t)&&Ol(t.arrayValue,this.value)}}class _b extends Dt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ol(this.value.arrayValue,t)}}class Eb extends Dt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ol(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Ol(this.value.arrayValue,t)}}class Tb extends Dt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Hp(t)||!t.arrayValue.values)&&t.arrayValue.values.some((o=>Ol(this.value.arrayValue,o)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sb{constructor(e,t=null,o=[],r=[],l=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=o,this.filters=r,this.limit=l,this.startAt=u,this.endAt=d,this.Te=null}}function U_(n,e=null,t=[],o=[],r=null,l=null,u=null){return new Sb(n,e,t,o,r,l,u)}function zp(n){const e=we(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((o=>sp(o))).join(","),t+="|ob:",t+=e.orderBy.map((o=>(function(l){return l.field.canonicalString()+l.dir})(o))).join(","),hf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((o=>ea(o))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((o=>ea(o))).join(",")),e.Te=t}return e.Te}function Jp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!hb(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!GT(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!P_(n.startAt,e.startAt)&&P_(n.endAt,e.endAt)}function rp(n){return Ee.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(e,t=null,o=[],r=[],l=null,u="F",d=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=o,this.filters=r,this.limit=l,this.limitType=u,this.startAt=d,this.endAt=g,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function Ab(n,e,t,o,r,l,u,d){return new aa(n,e,t,o,r,l,u,d)}function Yp(n){return new aa(n)}function L_(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Cb(n){return Ee.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function HT(n){return n.collectionGroup!==null}function xl(n){const e=we(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new Ot(Zt.comparator);return u.filters.forEach((g=>{g.getFlattenedFilters().forEach((m=>{m.isInequality()&&(d=d.add(m.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new ql(l,o))})),t.has(Zt.keyField().canonicalString())||e.Ie.push(new ql(Zt.keyField(),o))}return e.Ie}function Vi(n){const e=we(n);return e.Ee||(e.Ee=Ib(e,xl(n))),e.Ee}function Ib(n,e){if(n.limitType==="F")return U_(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((r=>{const l=r.dir==="desc"?"asc":"desc";return new ql(r.field,l)}));const t=n.endAt?new Xc(n.endAt.position,n.endAt.inclusive):null,o=n.startAt?new Xc(n.startAt.position,n.startAt.inclusive):null;return U_(n.path,n.collectionGroup,e,n.filters,n.limit,t,o)}}function ap(n,e){const t=n.filters.concat([e]);return new aa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Rb(n,e){const t=n.explicitOrderBy.concat([e]);return new aa(n.path,n.collectionGroup,t,n.filters.slice(),n.limit,n.limitType,n.startAt,n.endAt)}function lp(n,e,t){return new aa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function mf(n,e){return Jp(Vi(n),Vi(e))&&n.limitType===e.limitType}function zT(n){return`${zp(Vi(n))}|lt:${n.limitType}`}function qr(n){return`Query(target=${(function(t){let o=t.path.canonicalString();return t.collectionGroup!==null&&(o+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(o+=`, filters: [${t.filters.map((r=>BT(r))).join(", ")}]`),hf(t.limit)||(o+=", limit: "+t.limit),t.orderBy.length>0&&(o+=`, orderBy: [${t.orderBy.map((r=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(r))).join(", ")}]`),t.startAt&&(o+=", startAt: ",o+=t.startAt.inclusive?"b:":"a:",o+=t.startAt.position.map((r=>ea(r))).join(",")),t.endAt&&(o+=", endAt: ",o+=t.endAt.inclusive?"a:":"b:",o+=t.endAt.position.map((r=>ea(r))).join(",")),`Target(${o})`})(Vi(n))}; limitType=${n.limitType})`}function gf(n,e){return e.isFoundDocument()&&(function(o,r){const l=r.key.path;return o.collectionGroup!==null?r.key.hasCollectionId(o.collectionGroup)&&o.path.isPrefixOf(l):Ee.isDocumentKey(o.path)?o.path.isEqual(l):o.path.isImmediateParentOf(l)})(n,e)&&(function(o,r){for(const l of xl(o))if(!l.field.isKeyField()&&r.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(o,r){for(const l of o.filters)if(!l.matches(r))return!1;return!0})(n,e)&&(function(o,r){return!(o.startAt&&!(function(u,d,g){const m=V_(u,d,g);return u.inclusive?m<=0:m<0})(o.startAt,xl(o),r)||o.endAt&&!(function(u,d,g){const m=V_(u,d,g);return u.inclusive?m>=0:m>0})(o.endAt,xl(o),r))})(n,e)}function wb(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function JT(n){return(e,t)=>{let o=!1;for(const r of xl(n)){const l=bb(r,e,t);if(l!==0)return l;o=o||r.field.isKeyField()}return 0}}function bb(n,e,t){const o=n.field.isKeyField()?Ee.comparator(e.key,t.key):(function(l,u,d){const g=u.data.field(l),m=d.data.field(l);return g!==null&&m!==null?jr(g,m):Se(42886)})(n.field,e,t);switch(n.dir){case"asc":return o;case"desc":return-1*o;default:return Se(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),o=this.inner[t];if(o!==void 0){for(const[r,l]of o)if(this.equalsFn(r,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const o=this.mapKeyFn(e),r=this.inner[o];if(r===void 0)return this.inner[o]=[[e,t]],void this.innerSize++;for(let l=0;l<r.length;l++)if(this.equalsFn(r[l][0],e))return void(r[l]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),o=this.inner[t];if(o===void 0)return!1;for(let r=0;r<o.length;r++)if(this.equalsFn(o[r][0],e))return o.length===1?delete this.inner[t]:o.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Fs(this.inner,((t,o)=>{for(const[r,l]of o)e(r,l)}))}isEmpty(){return bT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nb=new pt(Ee.comparator);function ro(){return Nb}const YT=new pt(Ee.comparator);function Al(...n){let e=YT;for(const t of n)e=e.insert(t.key,t);return e}function KT(n){let e=YT;return n.forEach(((t,o)=>e=e.insert(t,o.overlayedDocument))),e}function Ls(){return Ml()}function QT(){return Ml()}function Ml(){return new Hs((n=>n.toString()),((n,e)=>n.isEqual(e)))}const xb=new pt(Ee.comparator),Mb=new Ot(Ee.comparator);function qe(...n){let e=Mb;for(const t of n)e=e.add(t);return e}const Db=new Ot(Oe);function Vb(){return Db}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kp(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Kc(e)?"-0":e}}function $T(n){return{integerValue:""+n}}function Pb(n,e){return ob(e)?$T(e):Kp(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(){this._=void 0}}function Ub(n,e,t){return n instanceof Wc?(function(r,l){const u={fields:{[MT]:{stringValue:xT},[VT]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return l&&Fp(l)&&(l=pf(l)),l&&(u.fields[DT]=l),{mapValue:u}})(t,e):n instanceof Gl?WT(n,e):n instanceof Bl?ZT(n,e):(function(r,l){const u=XT(r,l),d=k_(u)+k_(r.Ae);return op(u)&&op(r.Ae)?$T(d):Kp(r.serializer,d)})(n,e)}function Lb(n,e,t){return n instanceof Gl?WT(n,e):n instanceof Bl?ZT(n,e):t}function XT(n,e){return n instanceof Zc?(function(o){return op(o)||(function(l){return!!l&&"doubleValue"in l})(o)})(e)?e:{integerValue:0}:null}class Wc extends yf{}class Gl extends yf{constructor(e){super(),this.elements=e}}function WT(n,e){const t=jT(e);for(const o of n.elements)t.some((r=>Li(r,o)))||t.push(o);return{arrayValue:{values:t}}}class Bl extends yf{constructor(e){super(),this.elements=e}}function ZT(n,e){let t=jT(e);for(const o of n.elements)t=t.filter((r=>!Li(r,o)));return{arrayValue:{values:t}}}class Zc extends yf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function k_(n){return Tt(n.integerValue||n.doubleValue)}function jT(n){return Hp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function kb(n,e){return n.field.isEqual(e.field)&&(function(o,r){return o instanceof Gl&&r instanceof Gl||o instanceof Bl&&r instanceof Bl?Zr(o.elements,r.elements,Li):o instanceof Zc&&r instanceof Zc?Li(o.Ae,r.Ae):o instanceof Wc&&r instanceof Wc})(n.transform,e.transform)}class Ob{constructor(e,t){this.version=e,this.transformResults=t}}class io{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new io}static exists(e){return new io(void 0,e)}static updateTime(e){return new io(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Oc(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class vf{}function eS(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new nS(n.key,io.none()):new Jl(n.key,n.data,io.none());{const t=n.data,o=Fn.empty();let r=new Ot(Zt.comparator);for(let l of e.fields)if(!r.has(l)){let u=t.field(l);u===null&&l.length>1&&(l=l.popLast(),u=t.field(l)),u===null?o.delete(l):o.set(l,u),r=r.add(l)}return new zs(n.key,o,new oi(r.toArray()),io.none())}}function qb(n,e,t){n instanceof Jl?(function(r,l,u){const d=r.value.clone(),g=q_(r.fieldTransforms,l,u.transformResults);d.setAll(g),l.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(n,e,t):n instanceof zs?(function(r,l,u){if(!Oc(r.precondition,l))return void l.convertToUnknownDocument(u.version);const d=q_(r.fieldTransforms,l,u.transformResults),g=l.data;g.setAll(tS(r)),g.setAll(d),l.convertToFoundDocument(u.version,g).setHasCommittedMutations()})(n,e,t):(function(r,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function Dl(n,e,t,o){return n instanceof Jl?(function(l,u,d,g){if(!Oc(l.precondition,u))return d;const m=l.value.clone(),_=G_(l.fieldTransforms,g,u);return m.setAll(_),u.convertToFoundDocument(u.version,m).setHasLocalMutations(),null})(n,e,t,o):n instanceof zs?(function(l,u,d,g){if(!Oc(l.precondition,u))return d;const m=G_(l.fieldTransforms,g,u),_=u.data;return _.setAll(tS(l)),_.setAll(m),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((T=>T.field)))})(n,e,t,o):(function(l,u,d){return Oc(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d})(n,e,t)}function Gb(n,e){let t=null;for(const o of n.fieldTransforms){const r=e.data.field(o.field),l=XT(o.transform,r||null);l!=null&&(t===null&&(t=Fn.empty()),t.set(o.field,l))}return t||null}function O_(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(o,r){return o===void 0&&r===void 0||!(!o||!r)&&Zr(o,r,((l,u)=>kb(l,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Jl extends vf{constructor(e,t,o,r=[]){super(),this.key=e,this.value=t,this.precondition=o,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class zs extends vf{constructor(e,t,o,r,l=[]){super(),this.key=e,this.data=t,this.fieldMask=o,this.precondition=r,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function tS(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const o=n.data.field(t);e.set(t,o)}})),e}function q_(n,e,t){const o=new Map;$e(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let r=0;r<t.length;r++){const l=n[r],u=l.transform,d=e.data.field(l.field);o.set(l.field,Lb(u,d,t[r]))}return o}function G_(n,e,t){const o=new Map;for(const r of n){const l=r.transform,u=t.data.field(r.field);o.set(r.field,Ub(l,u,e))}return o}class nS extends vf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Bb extends vf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb{constructor(e,t,o,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=o,this.mutations=r}applyToRemoteDocument(e,t){const o=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const l=this.mutations[r];l.key.isEqual(e.key)&&qb(l,e,o[r])}}applyToLocalView(e,t){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(t=Dl(o,e,t,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(t=Dl(o,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const o=QT();return this.mutations.forEach((r=>{const l=e.get(r.key),u=l.overlayedDocument;let d=this.applyToLocalView(u,l.mutatedFields);d=t.has(r.key)?null:d;const g=eS(u,d);g!==null&&o.set(r.key,g),u.isValidDocument()||u.convertToNoDocument(Ie.min())})),o}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),qe())}isEqual(e){return this.batchId===e.batchId&&Zr(this.mutations,e.mutations,((t,o)=>O_(t,o)))&&Zr(this.baseMutations,e.baseMutations,((t,o)=>O_(t,o)))}}class Qp{constructor(e,t,o,r){this.batch=e,this.commitVersion=t,this.mutationResults=o,this.docVersions=r}static from(e,t,o){$e(e.mutations.length===o.length,58842,{me:e.mutations.length,fe:o.length});let r=(function(){return xb})();const l=e.mutations;for(let u=0;u<l.length;u++)r=r.insert(l[u].key,o[u].version);return new Qp(e,t,o,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mt,Fe;function Jb(n){switch(n){case te.OK:return Se(64938);case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0;default:return Se(15467,{code:n})}}function iS(n){if(n===void 0)return so("GRPC error has no .code"),te.UNKNOWN;switch(n){case Mt.OK:return te.OK;case Mt.CANCELLED:return te.CANCELLED;case Mt.UNKNOWN:return te.UNKNOWN;case Mt.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case Mt.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case Mt.INTERNAL:return te.INTERNAL;case Mt.UNAVAILABLE:return te.UNAVAILABLE;case Mt.UNAUTHENTICATED:return te.UNAUTHENTICATED;case Mt.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case Mt.NOT_FOUND:return te.NOT_FOUND;case Mt.ALREADY_EXISTS:return te.ALREADY_EXISTS;case Mt.PERMISSION_DENIED:return te.PERMISSION_DENIED;case Mt.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case Mt.ABORTED:return te.ABORTED;case Mt.OUT_OF_RANGE:return te.OUT_OF_RANGE;case Mt.UNIMPLEMENTED:return te.UNIMPLEMENTED;case Mt.DATA_LOSS:return te.DATA_LOSS;default:return Se(39323,{code:n})}}(Fe=Mt||(Mt={}))[Fe.OK=0]="OK",Fe[Fe.CANCELLED=1]="CANCELLED",Fe[Fe.UNKNOWN=2]="UNKNOWN",Fe[Fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fe[Fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fe[Fe.NOT_FOUND=5]="NOT_FOUND",Fe[Fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fe[Fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fe[Fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fe[Fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fe[Fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fe[Fe.ABORTED=10]="ABORTED",Fe[Fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fe[Fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fe[Fe.INTERNAL=13]="INTERNAL",Fe[Fe.UNAVAILABLE=14]="UNAVAILABLE",Fe[Fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yb(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kb=new Ko([4294967295,4294967295],0);function B_(n){const e=Yb().encode(n),t=new yT;return t.update(e),new Uint8Array(t.digest())}function F_(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),o=e.getUint32(4,!0),r=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Ko([t,o],0),new Ko([r,l],0)]}class $p{constructor(e,t,o){if(this.bitmap=e,this.padding=t,this.hashCount=o,t<0||t>=8)throw new Cl(`Invalid padding: ${t}`);if(o<0)throw new Cl(`Invalid hash count: ${o}`);if(e.length>0&&this.hashCount===0)throw new Cl(`Invalid hash count: ${o}`);if(e.length===0&&t!==0)throw new Cl(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ko.fromNumber(this.ge)}ye(e,t,o){let r=e.add(t.multiply(Ko.fromNumber(o)));return r.compare(Kb)===1&&(r=new Ko([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=B_(e),[o,r]=F_(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(o,r,l);if(!this.we(u))return!1}return!0}static create(e,t,o){const r=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new $p(l,r,t);return o.forEach((d=>u.insert(d))),u}insert(e){if(this.ge===0)return;const t=B_(e),[o,r]=F_(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(o,r,l);this.be(u)}}be(e){const t=Math.floor(e/8),o=e%8;this.bitmap[t]|=1<<o}}class Cl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(e,t,o,r,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=o,this.documentUpdates=r,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,o){const r=new Map;return r.set(e,Yl.createSynthesizedTargetChangeForCurrentChange(e,t,o)),new _f(Ie.min(),r,new pt(Oe),ro(),qe())}}class Yl{constructor(e,t,o,r,l){this.resumeToken=e,this.current=t,this.addedDocuments=o,this.modifiedDocuments=r,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,o){return new Yl(o,t,qe(),qe(),qe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(e,t,o,r){this.Se=e,this.removedTargetIds=t,this.key=o,this.De=r}}class oS{constructor(e,t){this.targetId=e,this.Ce=t}}class sS{constructor(e,t,o=jt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=o,this.cause=r}}class H_{constructor(){this.ve=0,this.Fe=z_(),this.Me=jt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=qe(),t=qe(),o=qe();return this.Fe.forEach(((r,l)=>{switch(l){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:o=o.add(r);break;default:Se(38017,{changeType:l})}})),new Yl(this.Me,this.xe,e,t,o)}Ke(){this.Oe=!1,this.Fe=z_()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,$e(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class Qb{constructor(e){this.Ge=e,this.ze=new Map,this.je=ro(),this.He=wc(),this.Je=wc(),this.Ze=new pt(Oe)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const o=this.nt(t);switch(e.state){case 0:this.rt(t)&&o.Le(e.resumeToken);break;case 1:o.We(),o.Ne||o.Ke(),o.Le(e.resumeToken);break;case 2:o.We(),o.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(o.Qe(),o.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),o.Le(e.resumeToken));break;default:Se(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((o,r)=>{this.rt(r)&&t(r)}))}st(e){const t=e.targetId,o=e.Ce.count,r=this.ot(t);if(r){const l=r.target;if(rp(l))if(o===0){const u=new Ee(l.path);this.et(t,u,on.newNoDocument(u,Ie.min()))}else $e(o===1,20013,{expectedCount:o});else{const u=this._t(t);if(u!==o){const d=this.ut(e),g=d?this.ct(d,e,u):1;if(g!==0){this.it(t);const m=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,m)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:o="",padding:r=0},hashCount:l=0}=t;let u,d;try{u=Wo(o).toUint8Array()}catch(g){if(g instanceof NT)return qs("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{d=new $p(u,r,l)}catch(g){return qs(g instanceof Cl?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return d.ge===0?null:d}ct(e,t,o){return t.Ce.count===o-this.Pt(e,t.targetId)?0:2}Pt(e,t){const o=this.Ge.getRemoteKeysForTarget(t);let r=0;return o.forEach((l=>{const u=this.Ge.ht(),d=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.et(t,l,null),r++)})),r}Tt(e){const t=new Map;this.ze.forEach(((l,u)=>{const d=this.ot(u);if(d){if(l.current&&rp(d.target)){const g=new Ee(d.target.path);this.It(g).has(u)||this.Et(u,g)||this.et(u,g,on.newNoDocument(g,e))}l.Be&&(t.set(u,l.ke()),l.Ke())}}));let o=qe();this.Je.forEach(((l,u)=>{let d=!0;u.forEachWhile((g=>{const m=this.ot(g);return!m||m.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(o=o.add(l))})),this.je.forEach(((l,u)=>u.setReadTime(e)));const r=new _f(e,t,this.Ze,this.je,o);return this.je=ro(),this.He=wc(),this.Je=wc(),this.Ze=new pt(Oe),r}Ye(e,t){if(!this.rt(e))return;const o=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,o),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,o){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.qe(t,1):r.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),o&&(this.je=this.je.insert(t,o))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new H_,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new Ot(Oe),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new Ot(Oe),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||pe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new H_),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function wc(){return new pt(Ee.comparator)}function z_(){return new pt(Ee.comparator)}const $b={asc:"ASCENDING",desc:"DESCENDING"},Xb={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Wb={and:"AND",or:"OR"};class Zb{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function up(n,e){return n.useProto3Json||hf(e)?e:{value:e}}function jc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function rS(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function jb(n,e){return jc(n,e.toTimestamp())}function Pi(n){return $e(!!n,49232),Ie.fromTimestamp((function(t){const o=Xo(t);return new ct(o.seconds,o.nanos)})(n))}function Xp(n,e){return cp(n,e).canonicalString()}function cp(n,e){const t=(function(r){return new rt(["projects",r.projectId,"databases",r.database])})(n).child("documents");return e===void 0?t:t.child(e)}function aS(n){const e=rt.fromString(n);return $e(dS(e),10190,{key:e.toString()}),e}function fp(n,e){return Xp(n.databaseId,e.path)}function Bh(n,e){const t=aS(e);if(t.get(1)!==n.databaseId.projectId)throw new he(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new he(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ee(uS(t))}function lS(n,e){return Xp(n.databaseId,e)}function eN(n){const e=aS(n);return e.length===4?rt.emptyPath():uS(e)}function dp(n){return new rt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function uS(n){return $e(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function J_(n,e,t){return{name:fp(n,e),fields:t.value.mapValue.fields}}function tN(n,e){let t;if("targetChange"in e){e.targetChange;const o=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Se(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],l=(function(m,_){return m.useProto3Json?($e(_===void 0||typeof _=="string",58123),jt.fromBase64String(_||"")):($e(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),jt.fromUint8Array(_||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&(function(m){const _=m.code===void 0?te.UNKNOWN:iS(m.code);return new he(_,m.message||"")})(u);t=new sS(o,r,l,d||null)}else if("documentChange"in e){e.documentChange;const o=e.documentChange;o.document,o.document.name,o.document.updateTime;const r=Bh(n,o.document.name),l=Pi(o.document.updateTime),u=o.document.createTime?Pi(o.document.createTime):Ie.min(),d=new Fn({mapValue:{fields:o.document.fields}}),g=on.newFoundDocument(r,l,u,d),m=o.targetIds||[],_=o.removedTargetIds||[];t=new qc(m,_,g.key,g)}else if("documentDelete"in e){e.documentDelete;const o=e.documentDelete;o.document;const r=Bh(n,o.document),l=o.readTime?Pi(o.readTime):Ie.min(),u=on.newNoDocument(r,l),d=o.removedTargetIds||[];t=new qc([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const o=e.documentRemove;o.document;const r=Bh(n,o.document),l=o.removedTargetIds||[];t=new qc([],l,r,null)}else{if(!("filter"in e))return Se(11601,{Vt:e});{e.filter;const o=e.filter;o.targetId;const{count:r=0,unchangedNames:l}=o,u=new zb(r,l),d=o.targetId;t=new oS(d,u)}}return t}function nN(n,e){let t;if(e instanceof Jl)t={update:J_(n,e.key,e.value)};else if(e instanceof nS)t={delete:fp(n,e.key)};else if(e instanceof zs)t={update:J_(n,e.key,e.data),updateMask:fN(e.fieldMask)};else{if(!(e instanceof Bb))return Se(16599,{dt:e.type});t={verify:fp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((o=>(function(l,u){const d=u.transform;if(d instanceof Wc)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Gl)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Bl)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Zc)return{fieldPath:u.field.canonicalString(),increment:d.Ae};throw Se(20930,{transform:u.transform})})(0,o)))),e.precondition.isNone||(t.currentDocument=(function(r,l){return l.updateTime!==void 0?{updateTime:jb(r,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Se(27497)})(n,e.precondition)),t}function iN(n,e){return n&&n.length>0?($e(e!==void 0,14353),n.map((t=>(function(r,l){let u=r.updateTime?Pi(r.updateTime):Pi(l);return u.isEqual(Ie.min())&&(u=Pi(l)),new Ob(u,r.transformResults||[])})(t,e)))):[]}function oN(n,e){return{documents:[lS(n,e.path)]}}function sN(n,e){const t={structuredQuery:{}},o=e.path;let r;e.collectionGroup!==null?(r=o,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=o.popLast(),t.structuredQuery.from=[{collectionId:o.lastSegment()}]),t.parent=lS(n,r);const l=(function(m){if(m.length!==0)return fS(li.create(m,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const u=(function(m){if(m.length!==0)return m.map((_=>(function(E){return{field:Gr(E.field),direction:lN(E.dir)}})(_)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=up(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{ft:t,parent:r}}function rN(n){let e=eN(n.parent);const t=n.structuredQuery,o=t.from?t.from.length:0;let r=null;if(o>0){$e(o===1,65062);const _=t.from[0];_.allDescendants?r=_.collectionId:e=e.child(_.collectionId)}let l=[];t.where&&(l=(function(T){const E=cS(T);return E instanceof li&&qT(E)?E.getFilters():[E]})(t.where));let u=[];t.orderBy&&(u=(function(T){return T.map((E=>(function(P){return new ql(Br(P.field),(function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(P.direction))})(E)))})(t.orderBy));let d=null;t.limit&&(d=(function(T){let E;return E=typeof T=="object"?T.value:T,hf(E)?null:E})(t.limit));let g=null;t.startAt&&(g=(function(T){const E=!!T.before,R=T.values||[];return new Xc(R,E)})(t.startAt));let m=null;return t.endAt&&(m=(function(T){const E=!T.before,R=T.values||[];return new Xc(R,E)})(t.endAt)),Ab(e,r,u,l,d,"F",g,m)}function aN(n,e){const t=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Se(28987,{purpose:r})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function cS(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const o=Br(t.unaryFilter.field);return Dt.create(o,"==",{doubleValue:NaN});case"IS_NULL":const r=Br(t.unaryFilter.field);return Dt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Br(t.unaryFilter.field);return Dt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Br(t.unaryFilter.field);return Dt.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Se(61313);default:return Se(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Dt.create(Br(t.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Se(58110);default:return Se(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return li.create(t.compositeFilter.filters.map((o=>cS(o))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Se(1026)}})(t.compositeFilter.op))})(n):Se(30097,{filter:n})}function lN(n){return $b[n]}function uN(n){return Xb[n]}function cN(n){return Wb[n]}function Gr(n){return{fieldPath:n.canonicalString()}}function Br(n){return Zt.fromServerFormat(n.fieldPath)}function fS(n){return n instanceof Dt?(function(t){if(t.op==="=="){if(D_(t.value))return{unaryFilter:{field:Gr(t.field),op:"IS_NAN"}};if(M_(t.value))return{unaryFilter:{field:Gr(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(D_(t.value))return{unaryFilter:{field:Gr(t.field),op:"IS_NOT_NAN"}};if(M_(t.value))return{unaryFilter:{field:Gr(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Gr(t.field),op:uN(t.op),value:t.value}}})(n):n instanceof li?(function(t){const o=t.getFilters().map((r=>fS(r)));return o.length===1?o[0]:{compositeFilter:{op:cN(t.op),filters:o}}})(n):Se(54877,{filter:n})}function fN(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function dS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function hS(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(e,t,o,r,l=Ie.min(),u=Ie.min(),d=jt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=o,this.sequenceNumber=r,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=g}withSequenceNumber(e){return new zo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new zo(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new zo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new zo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{constructor(e){this.yt=e}}function hN(n){const e=rN({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?lp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{constructor(){this.Sn=new mN}addToCollectionParentIndex(e,t){return this.Sn.add(t),oe.resolve()}getCollectionParents(e,t){return oe.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return oe.resolve()}deleteFieldIndex(e,t){return oe.resolve()}deleteAllFieldIndexes(e){return oe.resolve()}createTargetIndexes(e,t){return oe.resolve()}getDocumentsMatchingTarget(e,t){return oe.resolve(null)}getIndexType(e,t){return oe.resolve(0)}getFieldIndexes(e,t){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,t){return oe.resolve($o.min())}getMinOffsetFromCollectionGroup(e,t){return oe.resolve($o.min())}updateCollectionGroup(e,t,o){return oe.resolve()}updateIndexEntries(e,t){return oe.resolve()}}class mN{constructor(){this.index={}}add(e){const t=e.lastSegment(),o=e.popLast(),r=this.index[t]||new Ot(rt.comparator),l=!r.has(o);return this.index[t]=r.add(o),l}has(e){const t=e.lastSegment(),o=e.popLast(),r=this.index[t];return r&&r.has(o)}getEntries(e){return(this.index[e]||new Ot(rt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},pS=41943040;class _n{static withCacheSize(e){return new _n(e,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_n.DEFAULT_COLLECTION_PERCENTILE=10,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_n.DEFAULT=new _n(pS,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_n.DISABLED=new _n(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new ta(0)}static ar(){return new ta(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K_="LruGarbageCollector",gN=1048576;function Q_([n,e],[t,o]){const r=Oe(n,t);return r===0?Oe(e,o):r}class yN{constructor(e){this.Pr=e,this.buffer=new Ot(Q_),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const o=this.buffer.last();Q_(t,o)<0&&(this.buffer=this.buffer.delete(o).add(t))}}get maxValue(){return this.buffer.last()[0]}}class vN{constructor(e,t,o){this.garbageCollector=e,this.asyncQueue=t,this.localStore=o,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){pe(K_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ra(t)?pe(K_,"Ignoring IndexedDB error during garbage collection: ",t):await sa(t)}await this.Ar(3e5)}))}}class _N{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((o=>Math.floor(t/100*o)))}nthSequenceNumber(e,t){if(t===0)return oe.resolve(df.ce);const o=new yN(t);return this.Vr.forEachTarget(e,(r=>o.Er(r.sequenceNumber))).next((()=>this.Vr.mr(e,(r=>o.Er(r))))).next((()=>o.maxValue))}removeTargets(e,t,o){return this.Vr.removeTargets(e,t,o)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(pe("LruGarbageCollector","Garbage collection skipped; disabled"),oe.resolve(Y_)):this.getCacheSize(e).next((o=>o<this.params.cacheSizeCollectionThreshold?(pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Y_):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let o,r,l,u,d,g,m;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),r=this.params.maximumSequenceNumbersToCollect):r=T,u=Date.now(),this.nthSequenceNumber(e,r)))).next((T=>(o=T,d=Date.now(),this.removeTargets(e,o,t)))).next((T=>(l=T,g=Date.now(),this.removeOrphanedDocuments(e,o)))).next((T=>(m=Date.now(),Or()<=He.DEBUG&&pe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-_}ms
	Determined least recently used ${r} in `+(d-u)+`ms
	Removed ${l} targets in `+(g-d)+`ms
	Removed ${T} documents in `+(m-g)+`ms
Total Duration: ${m-_}ms`),oe.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:l,documentsRemoved:T}))))}}function EN(n,e){return new _N(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(){this.changes=new Hs((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,on.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const o=this.changes.get(t);return o!==void 0?oe.resolve(o):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(e,t,o,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=o,this.indexManager=r}getDocument(e,t){let o=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(o=r,this.remoteDocumentCache.getEntry(e,t)))).next((r=>(o!==null&&Dl(o.mutation,r,oi.empty(),ct.now()),r)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((o=>this.getLocalViewOfDocuments(e,o,qe()).next((()=>o))))}getLocalViewOfDocuments(e,t,o=qe()){const r=Ls();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,o).next((l=>{let u=Al();return l.forEach(((d,g)=>{u=u.insert(d,g.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const o=Ls();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,qe())))}populateOverlays(e,t,o){const r=[];return o.forEach((l=>{t.has(l)||r.push(l)})),this.documentOverlayCache.getOverlays(e,r).next((l=>{l.forEach(((u,d)=>{t.set(u,d)}))}))}computeViews(e,t,o,r){let l=ro();const u=Ml(),d=(function(){return Ml()})();return t.forEach(((g,m)=>{const _=o.get(m.key);r.has(m.key)&&(_===void 0||_.mutation instanceof zs)?l=l.insert(m.key,m):_!==void 0?(u.set(m.key,_.mutation.getFieldMask()),Dl(_.mutation,m,_.mutation.getFieldMask(),ct.now())):u.set(m.key,oi.empty())})),this.recalculateAndSaveOverlays(e,l).next((g=>(g.forEach(((m,_)=>u.set(m,_))),t.forEach(((m,_)=>d.set(m,new SN(_,u.get(m)??null)))),d)))}recalculateAndSaveOverlays(e,t){const o=Ml();let r=new pt(((u,d)=>u-d)),l=qe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const d of u)d.keys().forEach((g=>{const m=t.get(g);if(m===null)return;let _=o.get(g)||oi.empty();_=d.applyToLocalView(m,_),o.set(g,_);const T=(r.get(d.batchId)||qe()).add(g);r=r.insert(d.batchId,T)}))})).next((()=>{const u=[],d=r.getReverseIterator();for(;d.hasNext();){const g=d.getNext(),m=g.key,_=g.value,T=QT();_.forEach((E=>{if(!l.has(E)){const R=eS(t.get(E),o.get(E));R!==null&&T.set(E,R),l=l.add(E)}})),u.push(this.documentOverlayCache.saveOverlays(e,m,T))}return oe.waitFor(u)})).next((()=>o))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((o=>this.recalculateAndSaveOverlays(e,o)))}getDocumentsMatchingQuery(e,t,o,r){return Cb(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):HT(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,o,r):this.getDocumentsMatchingCollectionQuery(e,t,o,r)}getNextDocuments(e,t,o,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,o,r).next((l=>{const u=r-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,o.largestBatchId,r-l.size):oe.resolve(Ls());let d=Ul,g=l;return u.next((m=>oe.forEach(m,((_,T)=>(d<T.largestBatchId&&(d=T.largestBatchId),l.get(_)?oe.resolve():this.remoteDocumentCache.getEntry(e,_).next((E=>{g=g.insert(_,E)}))))).next((()=>this.populateOverlays(e,m,l))).next((()=>this.computeViews(e,g,m,qe()))).next((_=>({batchId:d,changes:KT(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ee(t)).next((o=>{let r=Al();return o.isFoundDocument()&&(r=r.insert(o.key,o)),r}))}getDocumentsMatchingCollectionGroupQuery(e,t,o,r){const l=t.collectionGroup;let u=Al();return this.indexManager.getCollectionParents(e,l).next((d=>oe.forEach(d,(g=>{const m=(function(T,E){return new aa(E,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,m,o,r).next((_=>{_.forEach(((T,E)=>{u=u.insert(T,E)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,o,r){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,o.largestBatchId).next((u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,o,l,r)))).next((u=>{l.forEach(((g,m)=>{const _=m.getKey();u.get(_)===null&&(u=u.insert(_,on.newInvalidDocument(_)))}));let d=Al();return u.forEach(((g,m)=>{const _=l.get(g);_!==void 0&&Dl(_.mutation,m,oi.empty(),ct.now()),gf(t,m)&&(d=d.insert(g,m))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return oe.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(r){return{id:r.id,version:r.version,createTime:Pi(r.createTime)}})(t)),oe.resolve()}getNamedQuery(e,t){return oe.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(r){return{name:r.name,query:hN(r.bundledQuery),readTime:Pi(r.readTime)}})(t)),oe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(){this.overlays=new pt(Ee.comparator),this.Lr=new Map}getOverlay(e,t){return oe.resolve(this.overlays.get(t))}getOverlays(e,t){const o=Ls();return oe.forEach(t,(r=>this.getOverlay(e,r).next((l=>{l!==null&&o.set(r,l)})))).next((()=>o))}saveOverlays(e,t,o){return o.forEach(((r,l)=>{this.bt(e,t,l)})),oe.resolve()}removeOverlaysForBatchId(e,t,o){const r=this.Lr.get(o);return r!==void 0&&(r.forEach((l=>this.overlays=this.overlays.remove(l))),this.Lr.delete(o)),oe.resolve()}getOverlaysForCollection(e,t,o){const r=Ls(),l=t.length+1,u=new Ee(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const g=d.getNext().value,m=g.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===l&&g.largestBatchId>o&&r.set(g.getKey(),g)}return oe.resolve(r)}getOverlaysForCollectionGroup(e,t,o,r){let l=new pt(((m,_)=>m-_));const u=this.overlays.getIterator();for(;u.hasNext();){const m=u.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>o){let _=l.get(m.largestBatchId);_===null&&(_=Ls(),l=l.insert(m.largestBatchId,_)),_.set(m.getKey(),m)}}const d=Ls(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((m,_)=>d.set(m,_))),!(d.size()>=r)););return oe.resolve(d)}bt(e,t,o){const r=this.overlays.get(o.key);if(r!==null){const u=this.Lr.get(r.largestBatchId).delete(o.key);this.Lr.set(r.largestBatchId,u)}this.overlays=this.overlays.insert(o.key,new Hb(t,o));let l=this.Lr.get(t);l===void 0&&(l=qe(),this.Lr.set(t,l)),this.Lr.set(t,l.add(o.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(){this.sessionToken=jt.EMPTY_BYTE_STRING}getSessionToken(e){return oe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,oe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(){this.kr=new Ot(Ft.Kr),this.qr=new Ot(Ft.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const o=new Ft(e,t);this.kr=this.kr.add(o),this.qr=this.qr.add(o)}$r(e,t){e.forEach((o=>this.addReference(o,t)))}removeReference(e,t){this.Wr(new Ft(e,t))}Qr(e,t){e.forEach((o=>this.removeReference(o,t)))}Gr(e){const t=new Ee(new rt([])),o=new Ft(t,e),r=new Ft(t,e+1),l=[];return this.qr.forEachInRange([o,r],(u=>{this.Wr(u),l.push(u.key)})),l}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new Ee(new rt([])),o=new Ft(t,e),r=new Ft(t,e+1);let l=qe();return this.qr.forEachInRange([o,r],(u=>{l=l.add(u.key)})),l}containsKey(e){const t=new Ft(e,0),o=this.kr.firstAfterOrEqual(t);return o!==null&&e.isEqual(o.key)}}class Ft{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return Ee.comparator(e.key,t.key)||Oe(e.Hr,t.Hr)}static Ur(e,t){return Oe(e.Hr,t.Hr)||Ee.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new Ot(Ft.Kr)}checkEmpty(e){return oe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,o,r){const l=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new Fb(l,t,o,r);this.mutationQueue.push(u);for(const d of r)this.Jr=this.Jr.add(new Ft(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return oe.resolve(u)}lookupMutationBatch(e,t){return oe.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const o=t+1,r=this.Xr(o),l=r<0?0:r;return oe.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(this.mutationQueue.length===0?Bp:this.Yn-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const o=new Ft(t,0),r=new Ft(t,Number.POSITIVE_INFINITY),l=[];return this.Jr.forEachInRange([o,r],(u=>{const d=this.Zr(u.Hr);l.push(d)})),oe.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new Ot(Oe);return t.forEach((r=>{const l=new Ft(r,0),u=new Ft(r,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([l,u],(d=>{o=o.add(d.Hr)}))})),oe.resolve(this.Yr(o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,r=o.length+1;let l=o;Ee.isDocumentKey(l)||(l=l.child(""));const u=new Ft(new Ee(l),0);let d=new Ot(Oe);return this.Jr.forEachWhile((g=>{const m=g.key.path;return!!o.isPrefixOf(m)&&(m.length===r&&(d=d.add(g.Hr)),!0)}),u),oe.resolve(this.Yr(d))}Yr(e){const t=[];return e.forEach((o=>{const r=this.Zr(o);r!==null&&t.push(r)})),t}removeMutationBatch(e,t){$e(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let o=this.Jr;return oe.forEach(t.mutations,(r=>{const l=new Ft(r.key,t.batchId);return o=o.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Jr=o}))}nr(e){}containsKey(e,t){const o=new Ft(t,0),r=this.Jr.firstAfterOrEqual(o);return oe.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,oe.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(e){this.ti=e,this.docs=(function(){return new pt(Ee.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const o=t.key,r=this.docs.get(o),l=r?r.size:0,u=this.ti(t);return this.docs=this.docs.insert(o,{document:t.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const o=this.docs.get(t);return oe.resolve(o?o.document.mutableCopy():on.newInvalidDocument(t))}getEntries(e,t){let o=ro();return t.forEach((r=>{const l=this.docs.get(r);o=o.insert(r,l?l.document.mutableCopy():on.newInvalidDocument(r))})),oe.resolve(o)}getDocumentsMatchingQuery(e,t,o,r){let l=ro();const u=t.path,d=new Ee(u.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(d);for(;g.hasNext();){const{key:m,value:{document:_}}=g.getNext();if(!u.isPrefixOf(m.path))break;m.path.length>u.length+1||eb(j1(_),o)<=0||(r.has(_.key)||gf(t,_))&&(l=l.insert(_.key,_.mutableCopy()))}return oe.resolve(l)}getAllFromCollectionGroup(e,t,o,r){Se(9500)}ni(e,t){return oe.forEach(this.docs,(o=>t(o)))}newChangeBuffer(e){return new NN(this)}getSize(e){return oe.resolve(this.size)}}class NN extends TN{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((o,r)=>{r.isValidDocument()?t.push(this.Mr.addEntry(e,r)):this.Mr.removeEntry(o)})),oe.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(e){this.persistence=e,this.ri=new Hs((t=>zp(t)),Jp),this.lastRemoteSnapshotVersion=Ie.min(),this.highestTargetId=0,this.ii=0,this.si=new Wp,this.targetCount=0,this.oi=ta._r()}forEachTarget(e,t){return this.ri.forEach(((o,r)=>t(r))),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,o){return o&&(this.lastRemoteSnapshotVersion=o),t>this.ii&&(this.ii=t),oe.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new ta(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,oe.resolve()}updateTargetData(e,t){return this.lr(t),oe.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,t,o){let r=0;const l=[];return this.ri.forEach(((u,d)=>{d.sequenceNumber<=t&&o.get(d.targetId)===null&&(this.ri.delete(u),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),r++)})),oe.waitFor(l).next((()=>r))}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,t){const o=this.ri.get(t)||null;return oe.resolve(o)}addMatchingKeys(e,t,o){return this.si.$r(t,o),oe.resolve()}removeMatchingKeys(e,t,o){this.si.Qr(t,o);const r=this.persistence.referenceDelegate,l=[];return r&&t.forEach((u=>{l.push(r.markPotentiallyOrphaned(e,u))})),oe.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),oe.resolve()}getMatchingKeysForTargetId(e,t){const o=this.si.jr(t);return oe.resolve(o)}containsKey(e,t){return oe.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(e,t){this._i={},this.overlays={},this.ai=new df(0),this.ui=!1,this.ui=!0,this.ci=new RN,this.referenceDelegate=e(this),this.li=new xN(this),this.indexManager=new pN,this.remoteDocumentCache=(function(r){return new bN(r)})((o=>this.referenceDelegate.hi(o))),this.serializer=new dN(t),this.Pi=new CN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new IN,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let o=this._i[e.toKey()];return o||(o=new wN(t,this.referenceDelegate),this._i[e.toKey()]=o),o}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,o){pe("MemoryPersistence","Starting transaction:",e);const r=new MN(this.ai.next());return this.referenceDelegate.Ti(),o(r).next((l=>this.referenceDelegate.Ii(r).next((()=>l)))).toPromise().then((l=>(r.raiseOnCommittedEvent(),l)))}Ei(e,t){return oe.or(Object.values(this._i).map((o=>()=>o.containsKey(e,t))))}}class MN extends nb{constructor(e){super(),this.currentSequenceNumber=e}}class Zp{constructor(e){this.persistence=e,this.Ri=new Wp,this.Ai=null}static Vi(e){return new Zp(e)}get di(){if(this.Ai)return this.Ai;throw Se(60996)}addReference(e,t,o){return this.Ri.addReference(o,t),this.di.delete(o.toString()),oe.resolve()}removeReference(e,t,o){return this.Ri.removeReference(o,t),this.di.add(o.toString()),oe.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),oe.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((r=>this.di.add(r.toString())));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,t.targetId).next((r=>{r.forEach((l=>this.di.add(l.toString())))})).next((()=>o.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.di,(o=>{const r=Ee.fromPath(o);return this.mi(e,r).next((l=>{l||t.removeEntry(r,Ie.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((o=>{o?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return oe.or([()=>oe.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class ef{constructor(e,t){this.persistence=e,this.fi=new Hs((o=>sb(o.path)),((o,r)=>o.isEqual(r))),this.garbageCollector=EN(this,t)}static Vi(e,t){return new ef(e,t)}Ti(){}Ii(e){return oe.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((o=>t.next((r=>o+r))))}pr(e){let t=0;return this.mr(e,(o=>{t++})).next((()=>t))}mr(e,t){return oe.forEach(this.fi,((o,r)=>this.wr(e,o,r).next((l=>l?oe.resolve():t(r)))))}removeTargets(e,t,o){return this.persistence.getTargetCache().removeTargets(e,t,o)}removeOrphanedDocuments(e,t){let o=0;const r=this.persistence.getRemoteDocumentCache(),l=r.newChangeBuffer();return r.ni(e,(u=>this.wr(e,u,t).next((d=>{d||(o++,l.removeEntry(u,Ie.min()))})))).next((()=>l.apply(e))).next((()=>o))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),oe.resolve()}removeTarget(e,t){const o=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,o)}addReference(e,t,o){return this.fi.set(o,e.currentSequenceNumber),oe.resolve()}removeReference(e,t,o){return this.fi.set(o,e.currentSequenceNumber),oe.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),oe.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Lc(e.data.value)),t}wr(e,t,o){return oe.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const r=this.fi.get(t);return oe.resolve(r!==void 0&&r>o)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{constructor(e,t,o,r){this.targetId=e,this.fromCache=t,this.Ts=o,this.Is=r}static Es(e,t){let o=qe(),r=qe();for(const l of t.docChanges)switch(l.type){case 0:o=o.add(l.doc.key);break;case 1:r=r.add(l.doc.key)}return new jp(e,t.fromCache,o,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return Ew()?8:ib(vw())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,o,r){const l={result:null};return this.gs(e,t).next((u=>{l.result=u})).next((()=>{if(!l.result)return this.ps(e,t,r,o).next((u=>{l.result=u}))})).next((()=>{if(l.result)return;const u=new DN;return this.ys(e,t,u).next((d=>{if(l.result=d,this.As)return this.ws(e,t,u,d.size)}))})).next((()=>l.result))}ws(e,t,o,r){return o.documentReadCount<this.Vs?(Or()<=He.DEBUG&&pe("QueryEngine","SDK will not create cache indexes for query:",qr(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),oe.resolve()):(Or()<=He.DEBUG&&pe("QueryEngine","Query:",qr(t),"scans",o.documentReadCount,"local documents and returns",r,"documents as results."),o.documentReadCount>this.ds*r?(Or()<=He.DEBUG&&pe("QueryEngine","The SDK decides to create cache indexes for query:",qr(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Vi(t))):oe.resolve())}gs(e,t){if(L_(t))return oe.resolve(null);let o=Vi(t);return this.indexManager.getIndexType(e,o).next((r=>r===0?null:(t.limit!==null&&r===1&&(t=lp(t,null,"F"),o=Vi(t)),this.indexManager.getDocumentsMatchingTarget(e,o).next((l=>{const u=qe(...l);return this.fs.getDocuments(e,u).next((d=>this.indexManager.getMinOffset(e,o).next((g=>{const m=this.bs(t,d);return this.Ss(t,m,u,g.readTime)?this.gs(e,lp(t,null,"F")):this.Ds(e,m,t,g)}))))})))))}ps(e,t,o,r){return L_(t)||r.isEqual(Ie.min())?oe.resolve(null):this.fs.getDocuments(e,o).next((l=>{const u=this.bs(t,l);return this.Ss(t,u,o,r)?oe.resolve(null):(Or()<=He.DEBUG&&pe("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),qr(t)),this.Ds(e,u,t,Z1(r,Ul)).next((d=>d)))}))}bs(e,t){let o=new Ot(JT(e));return t.forEach(((r,l)=>{gf(e,l)&&(o=o.add(l))})),o}Ss(e,t,o,r){if(e.limit===null)return!1;if(o.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(r)>0)}ys(e,t,o){return Or()<=He.DEBUG&&pe("QueryEngine","Using full collection scan to execute query:",qr(t)),this.fs.getDocumentsMatchingQuery(e,t,$o.min(),o)}Ds(e,t,o,r){return this.fs.getDocumentsMatchingQuery(e,o,r).next((l=>(t.forEach((u=>{l=l.insert(u.key,u)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const em="LocalStore",PN=3e8;class UN{constructor(e,t,o,r){this.persistence=e,this.Cs=t,this.serializer=r,this.vs=new pt(Oe),this.Fs=new Hs((l=>zp(l)),Jp),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(o)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new AN(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function LN(n,e,t,o){return new UN(n,e,t,o)}async function gS(n,e){const t=we(n);return await t.persistence.runTransaction("Handle user change","readonly",(o=>{let r;return t.mutationQueue.getAllMutationBatches(o).next((l=>(r=l,t.Os(e),t.mutationQueue.getAllMutationBatches(o)))).next((l=>{const u=[],d=[];let g=qe();for(const m of r){u.push(m.batchId);for(const _ of m.mutations)g=g.add(_.key)}for(const m of l){d.push(m.batchId);for(const _ of m.mutations)g=g.add(_.key)}return t.localDocuments.getDocuments(o,g).next((m=>({Ns:m,removedBatchIds:u,addedBatchIds:d})))}))}))}function kN(n,e){const t=we(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(o=>{const r=e.batch.keys(),l=t.xs.newChangeBuffer({trackRemovals:!0});return(function(d,g,m,_){const T=m.batch,E=T.keys();let R=oe.resolve();return E.forEach((P=>{R=R.next((()=>_.getEntry(g,P))).next((B=>{const O=m.docVersions.get(P);$e(O!==null,48541),B.version.compareTo(O)<0&&(T.applyToRemoteDocument(B,m),B.isValidDocument()&&(B.setReadTime(m.commitVersion),_.addEntry(B)))}))})),R.next((()=>d.mutationQueue.removeMutationBatch(g,T)))})(t,o,e,l).next((()=>l.apply(o))).next((()=>t.mutationQueue.performConsistencyCheck(o))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(o,r,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,(function(d){let g=qe();for(let m=0;m<d.mutationResults.length;++m)d.mutationResults[m].transformResults.length>0&&(g=g.add(d.batch.mutations[m].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(o,r)))}))}function yS(n){const e=we(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function ON(n,e){const t=we(n),o=e.snapshotVersion;let r=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const u=t.xs.newChangeBuffer({trackRemovals:!0});r=t.vs;const d=[];e.targetChanges.forEach(((_,T)=>{const E=r.get(T);if(!E)return;d.push(t.li.removeMatchingKeys(l,_.removedDocuments,T).next((()=>t.li.addMatchingKeys(l,_.addedDocuments,T))));let R=E.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(T)!==null?R=R.withResumeToken(jt.EMPTY_BYTE_STRING,Ie.min()).withLastLimboFreeSnapshotVersion(Ie.min()):_.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(_.resumeToken,o)),r=r.insert(T,R),(function(B,O,$){return B.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=PN?!0:$.addedDocuments.size+$.modifiedDocuments.size+$.removedDocuments.size>0})(E,R,_)&&d.push(t.li.updateTargetData(l,R))}));let g=ro(),m=qe();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,_))})),d.push(qN(l,u,e.documentUpdates).next((_=>{g=_.Bs,m=_.Ls}))),!o.isEqual(Ie.min())){const _=t.li.getLastRemoteSnapshotVersion(l).next((T=>t.li.setTargetsMetadata(l,l.currentSequenceNumber,o)));d.push(_)}return oe.waitFor(d).next((()=>u.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,g,m))).next((()=>g))})).then((l=>(t.vs=r,l)))}function qN(n,e,t){let o=qe(),r=qe();return t.forEach((l=>o=o.add(l))),e.getEntries(n,o).next((l=>{let u=ro();return t.forEach(((d,g)=>{const m=l.get(d);g.isFoundDocument()!==m.isFoundDocument()&&(r=r.add(d)),g.isNoDocument()&&g.version.isEqual(Ie.min())?(e.removeEntry(d,g.readTime),u=u.insert(d,g)):!m.isValidDocument()||g.version.compareTo(m.version)>0||g.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(g),u=u.insert(d,g)):pe(em,"Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",g.version)})),{Bs:u,Ls:r}}))}function GN(n,e){const t=we(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(o=>(e===void 0&&(e=Bp),t.mutationQueue.getNextMutationBatchAfterBatchId(o,e))))}function BN(n,e){const t=we(n);return t.persistence.runTransaction("Allocate target","readwrite",(o=>{let r;return t.li.getTargetData(o,e).next((l=>l?(r=l,oe.resolve(r)):t.li.allocateTargetId(o).next((u=>(r=new zo(e,u,"TargetPurposeListen",o.currentSequenceNumber),t.li.addTargetData(o,r).next((()=>r)))))))})).then((o=>{const r=t.vs.get(o.targetId);return(r===null||o.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.vs=t.vs.insert(o.targetId,o),t.Fs.set(e,o.targetId)),o}))}async function hp(n,e,t){const o=we(n),r=o.vs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await o.persistence.runTransaction("Release target",l,(u=>o.persistence.referenceDelegate.removeTarget(u,r)))}catch(u){if(!ra(u))throw u;pe(em,`Failed to update sequence numbers for target ${e}: ${u}`)}o.vs=o.vs.remove(e),o.Fs.delete(r.target)}function $_(n,e,t){const o=we(n);let r=Ie.min(),l=qe();return o.persistence.runTransaction("Execute query","readwrite",(u=>(function(g,m,_){const T=we(g),E=T.Fs.get(_);return E!==void 0?oe.resolve(T.vs.get(E)):T.li.getTargetData(m,_)})(o,u,Vi(e)).next((d=>{if(d)return r=d.lastLimboFreeSnapshotVersion,o.li.getMatchingKeysForTargetId(u,d.targetId).next((g=>{l=g}))})).next((()=>o.Cs.getDocumentsMatchingQuery(u,e,t?r:Ie.min(),t?l:qe()))).next((d=>(FN(o,wb(e),d),{documents:d,ks:l})))))}function FN(n,e,t){let o=n.Ms.get(e)||Ie.min();t.forEach(((r,l)=>{l.readTime.compareTo(o)>0&&(o=l.readTime)})),n.Ms.set(e,o)}class X_{constructor(){this.activeTargetIds=Vb()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class HN{constructor(){this.vo=new X_,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,o){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,o){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new X_,Promise.resolve()}handleUserChange(e,t,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W_="ConnectivityMonitor";class Z_{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){pe(W_,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){pe(W_,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bc=null;function pp(){return bc===null?bc=(function(){return 268435456+Math.round(2147483648*Math.random())})():bc++,"0x"+bc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fh="RestConnection",JN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class YN{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${o}/databases/${r}`,this.$o=this.databaseId.database===Qc?`project_id=${o}`:`project_id=${o}&database_id=${r}`}Wo(e,t,o,r,l){const u=pp(),d=this.Qo(e,t.toUriEncodedString());pe(Fh,`Sending RPC '${e}' ${u}:`,d,o);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(g,r,l);const{host:m}=new URL(d),_=kp(m);return this.zo(e,d,g,o,_).then((T=>(pe(Fh,`Received RPC '${e}' ${u}: `,T),T)),(T=>{throw qs(Fh,`RPC '${e}' ${u} failed with error: `,T,"url: ",d,"request:",o),T}))}jo(e,t,o,r,l,u){return this.Wo(e,t,o,r,l)}Go(e,t,o){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+oa})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((r,l)=>e[l]=r)),o&&o.headers.forEach(((r,l)=>e[l]=r))}Qo(e,t){const o=JN[e];let r=`${this.qo}/v1/${t}:${o}`;return this.databaseInfo.apiKey&&(r=`${r}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),r}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tn="WebChannelConnection",vl=(n,e,t)=>{n.listen(e,(o=>{try{t(o)}catch(r){setTimeout((()=>{throw r}),0)}}))};class Yr extends YN{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Yr.c_){const e=TT();vl(e,ET.STAT_EVENT,(t=>{t.stat===tp.PROXY?pe(tn,"STAT_EVENT: detected buffering proxy"):t.stat===tp.NOPROXY&&pe(tn,"STAT_EVENT: detected no buffering proxy")})),Yr.c_=!0}}zo(e,t,o,r,l){const u=pp();return new Promise(((d,g)=>{const m=new vT;m.setWithCredentials(!0),m.listenOnce(_T.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case Uc.NO_ERROR:const T=m.getResponseJson();pe(tn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(T)),d(T);break;case Uc.TIMEOUT:pe(tn,`RPC '${e}' ${u} timed out`),g(new he(te.DEADLINE_EXCEEDED,"Request time out"));break;case Uc.HTTP_ERROR:const E=m.getStatus();if(pe(tn,`RPC '${e}' ${u} failed with status:`,E,"response text:",m.getResponseText()),E>0){let R=m.getResponseJson();Array.isArray(R)&&(R=R[0]);const P=R==null?void 0:R.error;if(P&&P.status&&P.message){const B=(function($){const se=$.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf(se)>=0?se:te.UNKNOWN})(P.status);g(new he(B,P.message))}else g(new he(te.UNKNOWN,"Server responded with status "+m.getStatus()))}else g(new he(te.UNAVAILABLE,"Connection failed."));break;default:Se(9055,{l_:e,streamId:u,h_:m.getLastErrorCode(),P_:m.getLastError()})}}finally{pe(tn,`RPC '${e}' ${u} completed.`)}}));const _=JSON.stringify(r);pe(tn,`RPC '${e}' ${u} sending request:`,r),m.send(t,"POST",_,o,15)}))}T_(e,t,o){const r=pp(),l=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=this.createWebChannelTransport(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(d.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Go(d.initMessageHeaders,t,o),d.encodeInitMessageHeaders=!0;const m=l.join("");pe(tn,`Creating RPC '${e}' stream ${r}: ${m}`,d);const _=u.createWebChannel(m,d);this.I_(_);let T=!1,E=!1;const R=new KN({Ho:P=>{E?pe(tn,`Not sending because RPC '${e}' stream ${r} is closed:`,P):(T||(pe(tn,`Opening RPC '${e}' stream ${r} transport.`),_.open(),T=!0),pe(tn,`RPC '${e}' stream ${r} sending:`,P),_.send(P))},Jo:()=>_.close()});return vl(_,Sl.EventType.OPEN,(()=>{E||(pe(tn,`RPC '${e}' stream ${r} transport opened.`),R.i_())})),vl(_,Sl.EventType.CLOSE,(()=>{E||(E=!0,pe(tn,`RPC '${e}' stream ${r} transport closed`),R.o_(),this.E_(_))})),vl(_,Sl.EventType.ERROR,(P=>{E||(E=!0,qs(tn,`RPC '${e}' stream ${r} transport errored. Name:`,P.name,"Message:",P.message),R.o_(new he(te.UNAVAILABLE,"The operation could not be completed")))})),vl(_,Sl.EventType.MESSAGE,(P=>{var B;if(!E){const O=P.data[0];$e(!!O,16349);const $=O,se=($==null?void 0:$.error)||((B=$[0])==null?void 0:B.error);if(se){pe(tn,`RPC '${e}' stream ${r} received error:`,se);const j=se.status;let re=(function(M){const x=Mt[M];if(x!==void 0)return iS(x)})(j),W=se.message;j==="NOT_FOUND"&&W.includes("database")&&W.includes("does not exist")&&W.includes(this.databaseId.database)&&qs(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),re===void 0&&(re=te.INTERNAL,W="Unknown error status: "+j+" with message "+se.message),E=!0,R.o_(new he(re,W)),_.close()}else pe(tn,`RPC '${e}' stream ${r} received:`,O),R.__(O)}})),Yr.u_(),setTimeout((()=>{R.s_()}),0),R}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,o){super.Go(e,t,o),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return ST()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QN(n){return new Yr(n)}function Hh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ef(n){return new Zb(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Yr.c_=!1;class vS{constructor(e,t,o=1e3,r=1.5,l=6e4){this.Ci=e,this.timerId=t,this.R_=o,this.A_=r,this.V_=l,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),o=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-o);r>0&&pe("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${o} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j_="PersistentStream";class _S{constructor(e,t,o,r,l,u,d,g){this.Ci=e,this.b_=o,this.S_=r,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new vS(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===te.RESOURCE_EXHAUSTED?(so(t.toString()),so("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([o,r])=>{this.D_===t&&this.G_(o,r)}),(o=>{e((()=>{const r=new he(te.UNKNOWN,"Fetching auth token failed: "+o.message);return this.z_(r)}))}))}G_(e,t){const o=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{o((()=>this.listener.Zo()))})),this.stream.Yo((()=>{o((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((r=>{o((()=>this.z_(r)))})),this.stream.onMessage((r=>{o((()=>++this.F_==1?this.H_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return pe(j_,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(pe(j_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class $N extends _S{constructor(e,t,o,r,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,o,r,u),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=tN(this.serializer,e),o=(function(l){if(!("targetChange"in l))return Ie.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?Ie.min():u.readTime?Pi(u.readTime):Ie.min()})(e);return this.listener.J_(t,o)}Z_(e){const t={};t.database=dp(this.serializer),t.addTarget=(function(l,u){let d;const g=u.target;if(d=rp(g)?{documents:oN(l,g)}:{query:sN(l,g).ft},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=rS(l,u.resumeToken);const m=up(l,u.expectedCount);m!==null&&(d.expectedCount=m)}else if(u.snapshotVersion.compareTo(Ie.min())>0){d.readTime=jc(l,u.snapshotVersion.toTimestamp());const m=up(l,u.expectedCount);m!==null&&(d.expectedCount=m)}return d})(this.serializer,e);const o=aN(this.serializer,e);o&&(t.labels=o),this.K_(t)}X_(e){const t={};t.database=dp(this.serializer),t.removeTarget=e,this.K_(t)}}class XN extends _S{constructor(e,t,o,r,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,o,r,u),this.serializer=l}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return $e(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,$e(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){$e(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=iN(e.writeResults,e.commitTime),o=Pi(e.commitTime);return this.listener.na(o,t)}ra(){const e={};e.database=dp(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((o=>nN(this.serializer,o)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{}class ZN extends WN{constructor(e,t,o,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=o,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new he(te.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,o,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Wo(e,cp(t,o),r,l,u))).catch((l=>{throw l.name==="FirebaseError"?(l.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new he(te.UNKNOWN,l.toString())}))}jo(e,t,o,r,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.jo(e,cp(t,o),r,u,d,l))).catch((u=>{throw u.name==="FirebaseError"?(u.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new he(te.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function jN(n,e,t,o){return new ZN(n,e,t,o)}class ex{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(so(t),this.aa=!1):pe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bs="RemoteStore";class tx{constructor(e,t,o,r,l){this.localStore=e,this.datastore=t,this.asyncQueue=o,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=l,this.Aa.Mo((u=>{o.enqueueAndForget((async()=>{Js(this)&&(pe(Bs,"Restarting streams for network reachability change."),await(async function(g){const m=we(g);m.Ea.add(4),await Kl(m),m.Va.set("Unknown"),m.Ea.delete(4),await Tf(m)})(this))}))})),this.Va=new ex(o,r)}}async function Tf(n){if(Js(n))for(const e of n.Ra)await e(!0)}async function Kl(n){for(const e of n.Ra)await e(!1)}function ES(n,e){const t=we(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),om(t)?im(t):la(t).O_()&&nm(t,e))}function tm(n,e){const t=we(n),o=la(t);t.Ia.delete(e),o.O_()&&TS(t,e),t.Ia.size===0&&(o.O_()?o.L_():Js(t)&&t.Va.set("Unknown"))}function nm(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ie.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}la(n).Z_(e)}function TS(n,e){n.da.$e(e),la(n).X_(e)}function im(n){n.da=new Qb({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),la(n).start(),n.Va.ua()}function om(n){return Js(n)&&!la(n).x_()&&n.Ia.size>0}function Js(n){return we(n).Ea.size===0}function SS(n){n.da=void 0}async function nx(n){n.Va.set("Online")}async function ix(n){n.Ia.forEach(((e,t)=>{nm(n,e)}))}async function ox(n,e){SS(n),om(n)?(n.Va.ha(e),im(n)):n.Va.set("Unknown")}async function sx(n,e,t){if(n.Va.set("Online"),e instanceof sS&&e.state===2&&e.cause)try{await(async function(r,l){const u=l.cause;for(const d of l.targetIds)r.Ia.has(d)&&(await r.remoteSyncer.rejectListen(d,u),r.Ia.delete(d),r.da.removeTarget(d))})(n,e)}catch(o){pe(Bs,"Failed to remove targets %s: %s ",e.targetIds.join(","),o),await tf(n,o)}else if(e instanceof qc?n.da.Xe(e):e instanceof oS?n.da.st(e):n.da.tt(e),!t.isEqual(Ie.min()))try{const o=await yS(n.localStore);t.compareTo(o)>=0&&await(function(l,u){const d=l.da.Tt(u);return d.targetChanges.forEach(((g,m)=>{if(g.resumeToken.approximateByteSize()>0){const _=l.Ia.get(m);_&&l.Ia.set(m,_.withResumeToken(g.resumeToken,u))}})),d.targetMismatches.forEach(((g,m)=>{const _=l.Ia.get(g);if(!_)return;l.Ia.set(g,_.withResumeToken(jt.EMPTY_BYTE_STRING,_.snapshotVersion)),TS(l,g);const T=new zo(_.target,g,m,_.sequenceNumber);nm(l,T)})),l.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(o){pe(Bs,"Failed to raise snapshot:",o),await tf(n,o)}}async function tf(n,e,t){if(!ra(e))throw e;n.Ea.add(1),await Kl(n),n.Va.set("Offline"),t||(t=()=>yS(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{pe(Bs,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Tf(n)}))}function AS(n,e){return e().catch((t=>tf(n,t,e)))}async function Sf(n){const e=we(n),t=jo(e);let o=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Bp;for(;rx(e);)try{const r=await GN(e.localStore,o);if(r===null){e.Ta.length===0&&t.L_();break}o=r.batchId,ax(e,r)}catch(r){await tf(e,r)}CS(e)&&IS(e)}function rx(n){return Js(n)&&n.Ta.length<10}function ax(n,e){n.Ta.push(e);const t=jo(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function CS(n){return Js(n)&&!jo(n).x_()&&n.Ta.length>0}function IS(n){jo(n).start()}async function lx(n){jo(n).ra()}async function ux(n){const e=jo(n);for(const t of n.Ta)e.ea(t.mutations)}async function cx(n,e,t){const o=n.Ta.shift(),r=Qp.from(o,e,t);await AS(n,(()=>n.remoteSyncer.applySuccessfulWrite(r))),await Sf(n)}async function fx(n,e){e&&jo(n).Y_&&await(async function(o,r){if((function(u){return Jb(u)&&u!==te.ABORTED})(r.code)){const l=o.Ta.shift();jo(o).B_(),await AS(o,(()=>o.remoteSyncer.rejectFailedWrite(l.batchId,r))),await Sf(o)}})(n,e),CS(n)&&IS(n)}async function e0(n,e){const t=we(n);t.asyncQueue.verifyOperationInProgress(),pe(Bs,"RemoteStore received new credentials");const o=Js(t);t.Ea.add(3),await Kl(t),o&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Tf(t)}async function dx(n,e){const t=we(n);e?(t.Ea.delete(2),await Tf(t)):e||(t.Ea.add(2),await Kl(t),t.Va.set("Unknown"))}function la(n){return n.ma||(n.ma=(function(t,o,r){const l=we(t);return l.sa(),new $N(o,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,r)})(n.datastore,n.asyncQueue,{Zo:nx.bind(null,n),Yo:ix.bind(null,n),t_:ox.bind(null,n),J_:sx.bind(null,n)}),n.Ra.push((async e=>{e?(n.ma.B_(),om(n)?im(n):n.Va.set("Unknown")):(await n.ma.stop(),SS(n))}))),n.ma}function jo(n){return n.fa||(n.fa=(function(t,o,r){const l=we(t);return l.sa(),new XN(o,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,r)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:lx.bind(null,n),t_:fx.bind(null,n),ta:ux.bind(null,n),na:cx.bind(null,n)}),n.Ra.push((async e=>{e?(n.fa.B_(),await Sf(n)):(await n.fa.stop(),n.Ta.length>0&&(pe(Bs,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{constructor(e,t,o,r,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=o,this.op=r,this.removalCallback=l,this.deferred=new no,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,o,r,l){const u=Date.now()+o,d=new sm(e,t,u,r,l);return d.start(o),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function rm(n,e){if(so("AsyncQueue",`${e}: ${n}`),ra(n))return new he(te.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{static emptySet(e){return new Kr(e.comparator)}constructor(e){this.comparator=e?(t,o)=>e(t,o)||Ee.comparator(t.key,o.key):(t,o)=>Ee.comparator(t.key,o.key),this.keyedMap=Al(),this.sortedSet=new pt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,o)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Kr)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,l=o.getNext().key;if(!r.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const o=new Kr;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=t,o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0{constructor(){this.ga=new pt(Ee.comparator)}track(e){const t=e.doc.key,o=this.ga.get(t);o?e.type!==0&&o.type===3?this.ga=this.ga.insert(t,e):e.type===3&&o.type!==1?this.ga=this.ga.insert(t,{type:o.type,doc:e.doc}):e.type===2&&o.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&o.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&o.type===0?this.ga=this.ga.remove(t):e.type===1&&o.type===2?this.ga=this.ga.insert(t,{type:1,doc:o.doc}):e.type===0&&o.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Se(63341,{Vt:e,pa:o}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,o)=>{e.push(o)})),e}}class na{constructor(e,t,o,r,l,u,d,g,m){this.query=e,this.docs=t,this.oldDocs=o,this.docChanges=r,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=g,this.hasCachedResults=m}static fromInitialDocuments(e,t,o,r,l){const u=[];return t.forEach((d=>{u.push({type:0,doc:d})})),new na(e,t,Kr.emptySet(t),u,o,r,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&mf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,o=e.docChanges;if(t.length!==o.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==o[r].type||!t[r].doc.isEqual(o[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class px{constructor(){this.queries=n0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,o){const r=we(t),l=r.queries;r.queries=n0(),l.forEach(((u,d)=>{for(const g of d.ba)g.onError(o)}))})(this,new he(te.ABORTED,"Firestore shutting down"))}}function n0(){return new Hs((n=>zT(n)),mf)}async function RS(n,e){const t=we(n);let o=3;const r=e.query;let l=t.queries.get(r);l?!l.Sa()&&e.Da()&&(o=2):(l=new hx,o=e.Da()?0:1);try{switch(o){case 0:l.wa=await t.onListen(r,!0);break;case 1:l.wa=await t.onListen(r,!1);break;case 2:await t.onFirstRemoteStoreListen(r)}}catch(u){const d=rm(u,`Initialization of query '${qr(e.query)}' failed`);return void e.onError(d)}t.queries.set(r,l),l.ba.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&am(t)}async function wS(n,e){const t=we(n),o=e.query;let r=3;const l=t.queries.get(o);if(l){const u=l.ba.indexOf(e);u>=0&&(l.ba.splice(u,1),l.ba.length===0?r=e.Da()?0:1:!l.Sa()&&e.Da()&&(r=2))}switch(r){case 0:return t.queries.delete(o),t.onUnlisten(o,!0);case 1:return t.queries.delete(o),t.onUnlisten(o,!1);case 2:return t.onLastRemoteStoreUnlisten(o);default:return}}function mx(n,e){const t=we(n);let o=!1;for(const r of e){const l=r.query,u=t.queries.get(l);if(u){for(const d of u.ba)d.Fa(r)&&(o=!0);u.wa=r}}o&&am(t)}function gx(n,e,t){const o=we(n),r=o.queries.get(e);if(r)for(const l of r.ba)l.onError(t);o.queries.delete(e)}function am(n){n.Ca.forEach((e=>{e.next()}))}var mp,i0;(i0=mp||(mp={})).Ma="default",i0.Cache="cache";class bS{constructor(e,t,o){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=o||{}}Fa(e){if(!this.options.includeMetadataChanges){const o=[];for(const r of e.docChanges)r.type!==3&&o.push(r);e=new na(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const o=t!=="Offline";return(!this.options.Ka||!o)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=na.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==mp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{constructor(e){this.key=e}}class xS{constructor(e){this.key=e}}class yx{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=qe(),this.mutatedKeys=qe(),this.eu=JT(e),this.tu=new Kr(this.eu)}get nu(){return this.Za}ru(e,t){const o=t?t.iu:new t0,r=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,u=r,d=!1;const g=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,m=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((_,T)=>{const E=r.get(_),R=gf(this.query,T)?T:null,P=!!E&&this.mutatedKeys.has(E.key),B=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let O=!1;E&&R?E.data.isEqual(R.data)?P!==B&&(o.track({type:3,doc:R}),O=!0):this.su(E,R)||(o.track({type:2,doc:R}),O=!0,(g&&this.eu(R,g)>0||m&&this.eu(R,m)<0)&&(d=!0)):!E&&R?(o.track({type:0,doc:R}),O=!0):E&&!R&&(o.track({type:1,doc:E}),O=!0,(g||m)&&(d=!0)),O&&(R?(u=u.add(R),l=B?l.add(_):l.delete(_)):(u=u.delete(_),l=l.delete(_)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const _=this.query.limitType==="F"?u.last():u.first();u=u.delete(_.key),l=l.delete(_.key),o.track({type:1,doc:_})}return{tu:u,iu:o,Ss:d,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,o,r){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((_,T)=>(function(R,P){const B=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Se(20277,{Vt:O})}};return B(R)-B(P)})(_.type,T.type)||this.eu(_.doc,T.doc))),this.ou(o),r=r??!1;const d=t&&!r?this._u():[],g=this.Ya.size===0&&this.current&&!r?1:0,m=g!==this.Xa;return this.Xa=g,u.length!==0||m?{snapshot:new na(this.query,e.tu,l,u,e.mutatedKeys,g===0,m,!1,!!o&&o.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new t0,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=qe(),this.tu.forEach((o=>{this.uu(o.key)&&(this.Ya=this.Ya.add(o.key))}));const t=[];return e.forEach((o=>{this.Ya.has(o)||t.push(new xS(o))})),this.Ya.forEach((o=>{e.has(o)||t.push(new NS(o))})),t}cu(e){this.Za=e.ks,this.Ya=qe();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return na.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const lm="SyncEngine";class vx{constructor(e,t,o){this.query=e,this.targetId=t,this.view=o}}class _x{constructor(e){this.key=e,this.hu=!1}}class Ex{constructor(e,t,o,r,l,u){this.localStore=e,this.remoteStore=t,this.eventManager=o,this.sharedClientState=r,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new Hs((d=>zT(d)),mf),this.Iu=new Map,this.Eu=new Set,this.Ru=new pt(Ee.comparator),this.Au=new Map,this.Vu=new Wp,this.du={},this.mu=new Map,this.fu=ta.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Tx(n,e,t=!0){const o=LS(n);let r;const l=o.Tu.get(e);return l?(o.sharedClientState.addLocalQueryTarget(l.targetId),r=l.view.lu()):r=await MS(o,e,t,!0),r}async function Sx(n,e){const t=LS(n);await MS(t,e,!0,!1)}async function MS(n,e,t,o){const r=await BN(n.localStore,Vi(e)),l=r.targetId,u=n.sharedClientState.addLocalQueryTarget(l,t);let d;return o&&(d=await Ax(n,e,l,u==="current",r.resumeToken)),n.isPrimaryClient&&t&&ES(n.remoteStore,r),d}async function Ax(n,e,t,o,r){n.pu=(T,E,R)=>(async function(B,O,$,se){let j=O.view.ru($);j.Ss&&(j=await $_(B.localStore,O.query,!1).then((({documents:M})=>O.view.ru(M,j))));const re=se&&se.targetChanges.get(O.targetId),W=se&&se.targetMismatches.get(O.targetId)!=null,de=O.view.applyChanges(j,B.isPrimaryClient,re,W);return s0(B,O.targetId,de.au),de.snapshot})(n,T,E,R);const l=await $_(n.localStore,e,!0),u=new yx(e,l.ks),d=u.ru(l.documents),g=Yl.createSynthesizedTargetChangeForCurrentChange(t,o&&n.onlineState!=="Offline",r),m=u.applyChanges(d,n.isPrimaryClient,g);s0(n,t,m.au);const _=new vx(e,t,u);return n.Tu.set(e,_),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),m.snapshot}async function Cx(n,e,t){const o=we(n),r=o.Tu.get(e),l=o.Iu.get(r.targetId);if(l.length>1)return o.Iu.set(r.targetId,l.filter((u=>!mf(u,e)))),void o.Tu.delete(e);o.isPrimaryClient?(o.sharedClientState.removeLocalQueryTarget(r.targetId),o.sharedClientState.isActiveQueryTarget(r.targetId)||await hp(o.localStore,r.targetId,!1).then((()=>{o.sharedClientState.clearQueryState(r.targetId),t&&tm(o.remoteStore,r.targetId),gp(o,r.targetId)})).catch(sa)):(gp(o,r.targetId),await hp(o.localStore,r.targetId,!0))}async function Ix(n,e){const t=we(n),o=t.Tu.get(e),r=t.Iu.get(o.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(o.targetId),tm(t.remoteStore,o.targetId))}async function Rx(n,e,t){const o=Vx(n);try{const r=await(function(u,d){const g=we(u),m=ct.now(),_=d.reduce(((R,P)=>R.add(P.key)),qe());let T,E;return g.persistence.runTransaction("Locally write mutations","readwrite",(R=>{let P=ro(),B=qe();return g.xs.getEntries(R,_).next((O=>{P=O,P.forEach((($,se)=>{se.isValidDocument()||(B=B.add($))}))})).next((()=>g.localDocuments.getOverlayedDocuments(R,P))).next((O=>{T=O;const $=[];for(const se of d){const j=Gb(se,T.get(se.key).overlayedDocument);j!=null&&$.push(new zs(se.key,j,LT(j.value.mapValue),io.exists(!0)))}return g.mutationQueue.addMutationBatch(R,m,$,d)})).next((O=>{E=O;const $=O.applyToLocalDocumentSet(T,B);return g.documentOverlayCache.saveOverlays(R,O.batchId,$)}))})).then((()=>({batchId:E.batchId,changes:KT(T)})))})(o.localStore,e);o.sharedClientState.addPendingMutation(r.batchId),(function(u,d,g){let m=u.du[u.currentUser.toKey()];m||(m=new pt(Oe)),m=m.insert(d,g),u.du[u.currentUser.toKey()]=m})(o,r.batchId,t),await Ql(o,r.changes),await Sf(o.remoteStore)}catch(r){const l=rm(r,"Failed to persist write");t.reject(l)}}async function DS(n,e){const t=we(n);try{const o=await ON(t.localStore,e);e.targetChanges.forEach(((r,l)=>{const u=t.Au.get(l);u&&($e(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?u.hu=!0:r.modifiedDocuments.size>0?$e(u.hu,14607):r.removedDocuments.size>0&&($e(u.hu,42227),u.hu=!1))})),await Ql(t,o,e)}catch(o){await sa(o)}}function o0(n,e,t){const o=we(n);if(o.isPrimaryClient&&t===0||!o.isPrimaryClient&&t===1){const r=[];o.Tu.forEach(((l,u)=>{const d=u.view.va(e);d.snapshot&&r.push(d.snapshot)})),(function(u,d){const g=we(u);g.onlineState=d;let m=!1;g.queries.forEach(((_,T)=>{for(const E of T.ba)E.va(d)&&(m=!0)})),m&&am(g)})(o.eventManager,e),r.length&&o.Pu.J_(r),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}async function wx(n,e,t){const o=we(n);o.sharedClientState.updateQueryState(e,"rejected",t);const r=o.Au.get(e),l=r&&r.key;if(l){let u=new pt(Ee.comparator);u=u.insert(l,on.newNoDocument(l,Ie.min()));const d=qe().add(l),g=new _f(Ie.min(),new Map,new pt(Oe),u,d);await DS(o,g),o.Ru=o.Ru.remove(l),o.Au.delete(e),um(o)}else await hp(o.localStore,e,!1).then((()=>gp(o,e,t))).catch(sa)}async function bx(n,e){const t=we(n),o=e.batch.batchId;try{const r=await kN(t.localStore,e);PS(t,o,null),VS(t,o),t.sharedClientState.updateMutationState(o,"acknowledged"),await Ql(t,r)}catch(r){await sa(r)}}async function Nx(n,e,t){const o=we(n);try{const r=await(function(u,d){const g=we(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let _;return g.mutationQueue.lookupMutationBatch(m,d).next((T=>($e(T!==null,37113),_=T.keys(),g.mutationQueue.removeMutationBatch(m,T)))).next((()=>g.mutationQueue.performConsistencyCheck(m))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(m,_,d))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,_))).next((()=>g.localDocuments.getDocuments(m,_)))}))})(o.localStore,e);PS(o,e,t),VS(o,e),o.sharedClientState.updateMutationState(e,"rejected",t),await Ql(o,r)}catch(r){await sa(r)}}function VS(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function PS(n,e,t){const o=we(n);let r=o.du[o.currentUser.toKey()];if(r){const l=r.get(e);l&&(t?l.reject(t):l.resolve(),r=r.remove(e)),o.du[o.currentUser.toKey()]=r}}function gp(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const o of n.Iu.get(e))n.Tu.delete(o),t&&n.Pu.yu(o,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach((o=>{n.Vu.containsKey(o)||US(n,o)}))}function US(n,e){n.Eu.delete(e.path.canonicalString());const t=n.Ru.get(e);t!==null&&(tm(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),um(n))}function s0(n,e,t){for(const o of t)o instanceof NS?(n.Vu.addReference(o.key,e),xx(n,o)):o instanceof xS?(pe(lm,"Document no longer in limbo: "+o.key),n.Vu.removeReference(o.key,e),n.Vu.containsKey(o.key)||US(n,o.key)):Se(19791,{wu:o})}function xx(n,e){const t=e.key,o=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(o)||(pe(lm,"New document in limbo: "+t),n.Eu.add(o),um(n))}function um(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Ee(rt.fromString(e)),o=n.fu.next();n.Au.set(o,new _x(t)),n.Ru=n.Ru.insert(t,o),ES(n.remoteStore,new zo(Vi(Yp(t.path)),o,"TargetPurposeLimboResolution",df.ce))}}async function Ql(n,e,t){const o=we(n),r=[],l=[],u=[];o.Tu.isEmpty()||(o.Tu.forEach(((d,g)=>{u.push(o.pu(g,e,t).then((m=>{var _;if((m||t)&&o.isPrimaryClient){const T=m?!m.fromCache:(_=t==null?void 0:t.targetChanges.get(g.targetId))==null?void 0:_.current;o.sharedClientState.updateQueryState(g.targetId,T?"current":"not-current")}if(m){r.push(m);const T=jp.Es(g.targetId,m);l.push(T)}})))})),await Promise.all(u),o.Pu.J_(r),await(async function(g,m){const _=we(g);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>oe.forEach(m,(E=>oe.forEach(E.Ts,(R=>_.persistence.referenceDelegate.addReference(T,E.targetId,R))).next((()=>oe.forEach(E.Is,(R=>_.persistence.referenceDelegate.removeReference(T,E.targetId,R)))))))))}catch(T){if(!ra(T))throw T;pe(em,"Failed to update sequence numbers: "+T)}for(const T of m){const E=T.targetId;if(!T.fromCache){const R=_.vs.get(E),P=R.snapshotVersion,B=R.withLastLimboFreeSnapshotVersion(P);_.vs=_.vs.insert(E,B)}}})(o.localStore,l))}async function Mx(n,e){const t=we(n);if(!t.currentUser.isEqual(e)){pe(lm,"User change. New user:",e.toKey());const o=await gS(t.localStore,e);t.currentUser=e,(function(l,u){l.mu.forEach((d=>{d.forEach((g=>{g.reject(new he(te.CANCELLED,u))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),await Ql(t,o.Ns)}}function Dx(n,e){const t=we(n),o=t.Au.get(e);if(o&&o.hu)return qe().add(o.key);{let r=qe();const l=t.Iu.get(e);if(!l)return r;for(const u of l){const d=t.Tu.get(u);r=r.unionWith(d.view.nu)}return r}}function LS(n){const e=we(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=DS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Dx.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=wx.bind(null,e),e.Pu.J_=mx.bind(null,e.eventManager),e.Pu.yu=gx.bind(null,e.eventManager),e}function Vx(n){const e=we(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=bx.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Nx.bind(null,e),e}class nf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ef(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return LN(this.persistence,new VN,e.initialUser,this.serializer)}Cu(e){return new mS(Zp.Vi,this.serializer)}Du(e){return new HN}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}nf.provider={build:()=>new nf};class Px extends nf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){$e(this.persistence.referenceDelegate instanceof ef,46915);const o=this.persistence.referenceDelegate.garbageCollector;return new vN(o,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?_n.withCacheSize(this.cacheSizeBytes):_n.DEFAULT;return new mS((o=>ef.Vi(o,t)),this.serializer)}}class yp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=o=>o0(this.syncEngine,o,1),this.remoteStore.remoteSyncer.handleCredentialChange=Mx.bind(null,this.syncEngine),await dx(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new px})()}createDatastore(e){const t=Ef(e.databaseInfo.databaseId),o=QN(e.databaseInfo);return jN(e.authCredentials,e.appCheckCredentials,o,t)}createRemoteStore(e){return(function(o,r,l,u,d){return new tx(o,r,l,u,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>o0(this.syncEngine,t,0)),(function(){return Z_.v()?new Z_:new zN})())}createSyncEngine(e,t){return(function(r,l,u,d,g,m,_){const T=new Ex(r,l,u,d,g,m);return _&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(r){const l=we(r);pe(Bs,"RemoteStore shutting down."),l.Ea.add(5),await Kl(l),l.Aa.shutdown(),l.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}yp.provider={build:()=>new yp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):so("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const es="FirestoreClient";class Ux{constructor(e,t,o,r,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=o,this._databaseInfo=r,this.user=nn.UNAUTHENTICATED,this.clientId=Gp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(o,(async u=>{pe(es,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(o,(u=>(pe(es,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new no;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const o=rm(t,"Failed to shutdown persistence");e.reject(o)}})),e.promise}}async function zh(n,e){n.asyncQueue.verifyOperationInProgress(),pe(es,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let o=t.initialUser;n.setCredentialChangeListener((async r=>{o.isEqual(r)||(await gS(e.localStore,r),o=r)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function r0(n,e){n.asyncQueue.verifyOperationInProgress();const t=await Lx(n);pe(es,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((o=>e0(e.remoteStore,o))),n.setAppCheckTokenChangeListener(((o,r)=>e0(e.remoteStore,r))),n._onlineComponents=e}async function Lx(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){pe(es,"Using user provided OfflineComponentProvider");try{await zh(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(r){return r.name==="FirebaseError"?r.code===te.FAILED_PRECONDITION||r.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(t))throw t;qs("Error using user provided cache. Falling back to memory cache: "+t),await zh(n,new nf)}}else pe(es,"Using default OfflineComponentProvider"),await zh(n,new Px(void 0));return n._offlineComponents}async function OS(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(pe(es,"Using user provided OnlineComponentProvider"),await r0(n,n._uninitializedComponentsProvider._online)):(pe(es,"Using default OnlineComponentProvider"),await r0(n,new yp))),n._onlineComponents}function kx(n){return OS(n).then((e=>e.syncEngine))}async function qS(n){const e=await OS(n),t=e.eventManager;return t.onListen=Tx.bind(null,e.syncEngine),t.onUnlisten=Cx.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Sx.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Ix.bind(null,e.syncEngine),t}function Ox(n,e,t={}){const o=new no;return n.asyncQueue.enqueueAndForget((async()=>(function(l,u,d,g,m){const _=new kS({next:E=>{_.Nu(),u.enqueueAndForget((()=>wS(l,T)));const R=E.docs.has(d);!R&&E.fromCache?m.reject(new he(te.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&E.fromCache&&g&&g.source==="server"?m.reject(new he(te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(E)},error:E=>m.reject(E)}),T=new bS(Yp(d.path),_,{includeMetadataChanges:!0,Ka:!0});return RS(l,T)})(await qS(n),n.asyncQueue,e,t,o))),o.promise}function qx(n,e,t={}){const o=new no;return n.asyncQueue.enqueueAndForget((async()=>(function(l,u,d,g,m){const _=new kS({next:E=>{_.Nu(),u.enqueueAndForget((()=>wS(l,T))),E.fromCache&&g.source==="server"?m.reject(new he(te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(E)},error:E=>m.reject(E)}),T=new bS(d,_,{includeMetadataChanges:!0,Ka:!0});return RS(l,T)})(await qS(n),n.asyncQueue,e,t,o))),o.promise}function Gx(n,e){const t=new no;return n.asyncQueue.enqueueAndForget((async()=>Rx(await kx(n),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GS(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bx="ComponentProvider",a0=new Map;function Fx(n,e,t,o,r){return new lb(n,e,t,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,GS(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator,o)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BS="firestore.googleapis.com",l0=!0;class u0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new he(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=BS,this.ssl=l0}else this.host=e.host,this.ssl=e.ssl??l0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=pS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<gN)throw new he(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}W1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=GS(e.experimentalLongPollingOptions??{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new he(te.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new he(te.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new he(te.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(o,r){return o.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Af{constructor(e,t,o,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=o,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new u0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new u0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(o){if(!o)return new B1;switch(o.type){case"firstParty":return new J1(o.sessionIndex||"0",o.iamToken||null,o.authTokenFactory||null);case"provider":return o.client;default:throw new he(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const o=a0.get(t);o&&(pe(Bx,"Removing Datastore"),a0.delete(t),o.terminate())})(this),Promise.resolve()}}function Hx(n,e,t,o={}){var m;n=Gs(n,Af);const r=kp(e),l=n._getSettings(),u={...l,emulatorOptions:n._getEmulatorOptions()},d=`${e}:${t}`;r&&(hw(`https://${d}`),yw("Firestore",!0)),l.host!==BS&&l.host!==d&&qs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...l,host:d,ssl:r,emulatorOptions:o};if(!zc(g,u)&&(n._setSettings(g),o.mockUserToken)){let _,T;if(typeof o.mockUserToken=="string")_=o.mockUserToken,T=nn.MOCK_USER;else{_=pw(o.mockUserToken,(m=n._app)==null?void 0:m.options.projectId);const E=o.mockUserToken.sub||o.mockUserToken.user_id;if(!E)throw new he(te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new nn(E)}n._authCredentials=new F1(new CT(_,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(e,t,o){this.converter=t,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new Ys(this.firestore,e,this._query)}}class Pt{constructor(e,t,o){this.converter=t,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Pt(this.firestore,e,this._key)}toJSON(){return{type:Pt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,o){if(zl(t,Pt._jsonSchema))return new Pt(e,o||null,new Ee(rt.fromString(t.referencePath)))}}Pt._jsonSchemaVersion="firestore/documentReference/1.0",Pt._jsonSchema={type:Vt("string",Pt._jsonSchemaVersion),referencePath:Vt("string")};class Qo extends Ys{constructor(e,t,o){super(e,t,Yp(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Pt(this.firestore,null,new Ee(e))}withConverter(e){return new Qo(this.firestore,e,this._path)}}function zx(n,e,...t){if(n=Wr(n),IT("collection","path",e),n instanceof Af){const o=rt.fromString(e,...t);return S_(o),new Qo(n,null,o)}{if(!(n instanceof Pt||n instanceof Qo))throw new he(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=n._path.child(rt.fromString(e,...t));return S_(o),new Qo(n.firestore,null,o)}}function Nc(n,e,...t){if(n=Wr(n),arguments.length===1&&(e=Gp.newId()),IT("doc","path",e),n instanceof Af){const o=rt.fromString(e,...t);return T_(o),new Pt(n,null,new Ee(o))}{if(!(n instanceof Pt||n instanceof Qo))throw new he(te.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=n._path.child(rt.fromString(e,...t));return T_(o),new Pt(n.firestore,n instanceof Qo?n.converter:null,new Ee(o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c0="AsyncQueue";class f0{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new vS(this,"async_queue_retry"),this._c=()=>{const o=Hh();o&&pe(c0,"Visibility state changed to "+o.visibilityState),this.M_.w_()},this.ac=e;const t=Hh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Hh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new no;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!ra(e))throw e;pe(c0,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((o=>{throw this.nc=o,this.rc=!1,so("INTERNAL UNHANDLED ERROR: ",d0(o)),o})).then((o=>(this.rc=!1,o))))));return this.ac=t,t}enqueueAfterDelay(e,t,o){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=sm.createAndSchedule(this,e,t,o,(l=>this.hc(l)));return this.tc.push(r),r}uc(){this.nc&&Se(47125,{Pc:d0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,o)=>t.targetTimeMs-o.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function d0(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Cf extends Af{constructor(e,t,o,r){super(e,t,o,r),this.type="firestore",this._queue=new f0,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new f0(e),this._firestoreClient=void 0,await e}}}function Jx(n,e){const t=typeof n=="object"?n:w1(),o=typeof n=="string"?n:Qc,r=S1(t,"firestore").getImmediate({identifier:o});if(!r._initialized){const l=fw("firestore");l&&Hx(r,...l)}return r}function cm(n){if(n._terminated)throw new he(te.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Yx(n),n._firestoreClient}function Yx(n){var o,r,l,u;const e=n._freezeSettings(),t=Fx(n._databaseId,((o=n._app)==null?void 0:o.options.appId)||"",n._persistenceKey,(r=n._app)==null?void 0:r.options.apiKey,e);n._componentsProvider||(l=e.localCache)!=null&&l._offlineComponentProvider&&((u=e.localCache)!=null&&u._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new Ux(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(g){const m=g==null?void 0:g._online.build();return{_offline:g==null?void 0:g._offline.build(m),_online:m}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Hn(jt.fromBase64String(e))}catch(t){throw new he(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Hn(jt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Hn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(zl(e,Hn._jsonSchema))return Hn.fromBase64String(e.bytes)}}Hn._jsonSchemaVersion="firestore/bytes/1.0",Hn._jsonSchema={type:Vt("string",Hn._jsonSchemaVersion),bytes:Vt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new he(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new he(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new he(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Oe(this._lat,e._lat)||Oe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ui._jsonSchemaVersion}}static fromJSON(e){if(zl(e,Ui._jsonSchema))return new Ui(e.latitude,e.longitude)}}Ui._jsonSchemaVersion="firestore/geoPoint/1.0",Ui._jsonSchema={type:Vt("string",Ui._jsonSchemaVersion),latitude:Vt("number"),longitude:Vt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(o,r){if(o.length!==r.length)return!1;for(let l=0;l<o.length;++l)if(o[l]!==r[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:si._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(zl(e,si._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new si(e.vectorValues);throw new he(te.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}si._jsonSchemaVersion="firestore/vectorValue/1.0",si._jsonSchema={type:Vt("string",si._jsonSchemaVersion),vectorValues:Vt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kx=/^__.*__$/;class Qx{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return this.fieldMask!==null?new zs(e,this.data,this.fieldMask,t,this.fieldTransforms):new Jl(e,this.data,t,this.fieldTransforms)}}function zS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Se(40011,{dataSource:n})}}class fm{constructor(e,t,o,r,l,u){this.settings=e,this.databaseId=t,this.serializer=o,this.ignoreUndefinedProperties=r,l===void 0&&this.validatePath(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new fm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var r;const t=(r=this.path)==null?void 0:r.child(e),o=this.contextWith({path:t,arrayElement:!1});return o.validatePathSegment(e),o}childContextForFieldPath(e){var r;const t=(r=this.path)==null?void 0:r.child(e),o=this.contextWith({path:t,arrayElement:!1});return o.validatePath(),o}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return of(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(zS(this.dataSource)&&Kx.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class $x{constructor(e,t,o){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=o||Ef(e)}createContext(e,t,o,r=!1){return new fm({dataSource:e,methodName:t,targetDoc:o,path:Zt.emptyPath(),arrayElement:!1,hasConverter:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function JS(n){const e=n._freezeSettings(),t=Ef(n._databaseId);return new $x(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Xx(n,e,t,o,r,l={}){const u=n.createContext(l.merge||l.mergeFields?2:0,e,t,r);QS("Data must be an object, but it was:",u,o);const d=YS(o,u);let g,m;if(l.merge)g=new oi(u.fieldMask),m=u.fieldTransforms;else if(l.mergeFields){const _=[];for(const T of l.mergeFields){const E=If(e,T,t);if(!u.contains(E))throw new he(te.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);eM(_,E)||_.push(E)}g=new oi(_),m=u.fieldTransforms.filter((T=>g.covers(T.field)))}else g=null,m=u.fieldTransforms;return new Qx(new Fn(d),g,m)}function Wx(n,e,t,o=!1){return dm(t,n.createContext(o?4:3,e))}function dm(n,e){if(KS(n=Wr(n)))return QS("Unsupported field value:",e,n),YS(n,e);if(n instanceof HS)return(function(o,r){if(!zS(r.dataSource))throw r.createError(`${o._methodName}() can only be used with update() and set()`);if(!r.path)throw r.createError(`${o._methodName}() is not currently supported inside arrays`);const l=o._toFieldTransform(r);l&&r.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(o,r){const l=[];let u=0;for(const d of o){let g=dm(d,r.childContextForArray(u));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),u++}return{arrayValue:{values:l}}})(n,e)}return(function(o,r){if((o=Wr(o))===null)return{nullValue:"NULL_VALUE"};if(typeof o=="number")return Pb(r.serializer,o);if(typeof o=="boolean")return{booleanValue:o};if(typeof o=="string")return{stringValue:o};if(o instanceof Date){const l=ct.fromDate(o);return{timestampValue:jc(r.serializer,l)}}if(o instanceof ct){const l=new ct(o.seconds,1e3*Math.floor(o.nanoseconds/1e3));return{timestampValue:jc(r.serializer,l)}}if(o instanceof Ui)return{geoPointValue:{latitude:o.latitude,longitude:o.longitude}};if(o instanceof Hn)return{bytesValue:rS(r.serializer,o._byteString)};if(o instanceof Pt){const l=r.databaseId,u=o.firestore._databaseId;if(!u.isEqual(l))throw r.createError(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Xp(o.firestore._databaseId||r.databaseId,o._key.path)}}if(o instanceof si)return(function(u,d){const g=u instanceof si?u.toArray():u;return{mapValue:{fields:{[PT]:{stringValue:UT},[$c]:{arrayValue:{values:g.map((_=>{if(typeof _!="number")throw d.createError("VectorValues must only contain numeric values.");return Kp(d.serializer,_)}))}}}}}})(o,r);if(hS(o))return o._toProto(r.serializer);throw r.createError(`Unsupported field value: ${ff(o)}`)})(n,e)}function YS(n,e){const t={};return bT(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Fs(n,((o,r)=>{const l=dm(r,e.childContextForField(o));l!=null&&(t[o]=l)})),{mapValue:{fields:t}}}function KS(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ct||n instanceof Ui||n instanceof Hn||n instanceof Pt||n instanceof HS||n instanceof si||hS(n))}function QS(n,e,t){if(!KS(t)||!RT(t)){const o=ff(t);throw o==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+o)}}function If(n,e,t){if((e=Wr(e))instanceof FS)return e._internalPath;if(typeof e=="string")return jx(n,e);throw of("Field path arguments must be of type string or ",n,!1,void 0,t)}const Zx=new RegExp("[~\\*/\\[\\]]");function jx(n,e,t){if(e.search(Zx)>=0)throw of(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new FS(...e.split("."))._internalPath}catch{throw of(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function of(n,e,t,o,r){const l=o&&!o.isEmpty(),u=r!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let g="";return(l||u)&&(g+=" (found",l&&(g+=` in field ${o}`),u&&(g+=` in document ${r}`),g+=")"),new he(te.INVALID_ARGUMENT,d+n+g)}function eM(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tM{convertValue(e,t="none"){switch(Zo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Wo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Se(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const o={};return Fs(e,((r,l)=>{o[r]=this.convertValue(l,t)})),o}convertVectorValue(e){var o,r,l;const t=(l=(r=(o=e.fields)==null?void 0:o[$c].arrayValue)==null?void 0:r.values)==null?void 0:l.map((u=>Tt(u.doubleValue)));return new si(t)}convertGeoPoint(e){return new Ui(Tt(e.latitude),Tt(e.longitude))}convertArray(e,t){return(e.values||[]).map((o=>this.convertValue(o,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const o=pf(e);return o==null?null:this.convertValue(o,t);case"estimate":return this.convertTimestamp(Ll(e));default:return null}}convertTimestamp(e){const t=Xo(e);return new ct(t.seconds,t.nanos)}convertDocumentKey(e,t){const o=rt.fromString(e);$e(dS(o),9688,{name:e});const r=new kl(o.get(1),o.get(3)),l=new Ee(o.popFirst(5));return r.isEqual(t)||so(`Document ${l} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S extends tM{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Pt(this.firestore,null,t)}}const h0="@firebase/firestore",p0="4.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(e,t,o,r,l){this._firestore=e,this._userDataWriter=t,this._key=o,this._document=r,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Pt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new nM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(If("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class nM extends XS{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iM(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new he(te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class hm{}class WS extends hm{}function oM(n,e,...t){let o=[];e instanceof hm&&o.push(e),o=o.concat(t),(function(l){const u=l.filter((g=>g instanceof mm)).length,d=l.filter((g=>g instanceof pm)).length;if(u>1||u>0&&d>0)throw new he(te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(o);for(const r of o)n=r._apply(n);return n}class pm extends WS{constructor(e,t,o){super(),this._field=e,this._op=t,this._value=o,this.type="where"}static _create(e,t,o){return new pm(e,t,o)}_apply(e){const t=this._parse(e);return ZS(e._query,t),new Ys(e.firestore,e.converter,ap(e._query,t))}_parse(e){const t=JS(e.firestore);return(function(l,u,d,g,m,_,T){let E;if(m.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new he(te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){g0(T,_);const P=[];for(const B of T)P.push(m0(g,l,B));E={arrayValue:{values:P}}}else E=m0(g,l,T)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||g0(T,_),E=Wx(d,u,T,_==="in"||_==="not-in");return Dt.create(m,_,E)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class mm extends hm{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new mm(e,t)}_parse(e){const t=this._queryConstraints.map((o=>o._parse(e))).filter((o=>o.getFilters().length>0));return t.length===1?t[0]:li.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(r,l){let u=r;const d=l.getFlattenedFilters();for(const g of d)ZS(u,g),u=ap(u,g)})(e._query,t),new Ys(e.firestore,e.converter,ap(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class gm extends WS{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new gm(e,t)}_apply(e){const t=(function(r,l,u){if(r.startAt!==null)throw new he(te.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new he(te.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ql(l,u)})(e._query,this._field,this._direction);return new Ys(e.firestore,e.converter,Rb(e._query,t))}}function sM(n,e="asc"){const t=e,o=If("orderBy",n);return gm._create(o,t)}function m0(n,e,t){if(typeof(t=Wr(t))=="string"){if(t==="")throw new he(te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!HT(e)&&t.indexOf("/")!==-1)throw new he(te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const o=e.path.child(rt.fromString(t));if(!Ee.isDocumentKey(o))throw new he(te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return x_(n,new Ee(o))}if(t instanceof Pt)return x_(n,t._key);throw new he(te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ff(t)}.`)}function g0(n,e){if(!Array.isArray(n)||n.length===0)throw new he(te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ZS(n,e){const t=(function(r,l){for(const u of r)for(const d of u.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new he(te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new he(te.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function rM(n,e,t){let o;return o=n?n.toFirestore(e):e,o}class Il{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ks extends XS{constructor(e,t,o,r,l,u){super(e,t,o,r,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Gc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const o=this._document.data.field(If("DocumentSnapshot.get",e));if(o!==null)return this._userDataWriter.convertValue(o,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new he(te.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ks._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}ks._jsonSchemaVersion="firestore/documentSnapshot/1.0",ks._jsonSchema={type:Vt("string",ks._jsonSchemaVersion),bundleSource:Vt("string","DocumentSnapshot"),bundleName:Vt("string"),bundle:Vt("string")};class Gc extends ks{data(e={}){return super.data(e)}}class Qr{constructor(e,t,o,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Il(r.hasPendingWrites,r.fromCache),this.query=o}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((o=>{e.call(t,new Gc(this._firestore,this._userDataWriter,o.key,o,new Il(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new he(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(r,l){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map((d=>{const g=new Gc(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Il(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);return d.doc,{type:"added",doc:g,oldIndex:-1,newIndex:u++}}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const g=new Gc(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Il(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let m=-1,_=-1;return d.type!==0&&(m=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),_=u.indexOf(d.doc.key)),{type:aM(d.type),doc:g,oldIndex:m,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new he(te.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Qr._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Gp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],o=[],r=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),o.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),r.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function aM(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Se(61501,{type:n})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qr._jsonSchemaVersion="firestore/querySnapshot/1.0",Qr._jsonSchema={type:Vt("string",Qr._jsonSchemaVersion),bundleSource:Vt("string","QuerySnapshot"),bundleName:Vt("string"),bundle:Vt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lM(n){n=Gs(n,Pt);const e=Gs(n.firestore,Cf),t=cm(e);return Ox(t,n._key).then((o=>fM(e,n,o)))}function uM(n){n=Gs(n,Ys);const e=Gs(n.firestore,Cf),t=cm(e),o=new $S(e);return iM(n._query),qx(t,n._query).then((r=>new Qr(e,o,n,r)))}function Jh(n,e,t){n=Gs(n,Pt);const o=Gs(n.firestore,Cf),r=rM(n.converter,e),l=JS(o);return cM(o,[Xx(l,"setDoc",n._key,r,n.converter!==null,t).toMutation(n._key,io.none())])}function cM(n,e){const t=cm(n);return Gx(t,e)}function fM(n,e,t){const o=t.docs.get(e._key),r=new $S(n);return new ks(n,r,e._key,o,new Il(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){G1(R1),Yc(new Vl("firestore",((o,{instanceIdentifier:r,options:l})=>{const u=o.getProvider("app").getImmediate(),d=new Cf(new H1(o.getProvider("auth-internal")),new Y1(u,o.getProvider("app-check-internal")),ub(u,r),u);return l={useFetchStreams:t,...l},d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),Jr(h0,p0,e),Jr(h0,p0,"esm2020")})();const dM={apiKey:"AIzaSyAg0iz_PoX0l18KGd3mi7asZ2KdiDoYmxg",authDomain:"canal-denuncies.firebaseapp.com",projectId:"canal-denuncies",storageBucket:"canal-denuncies.firebasestorage.app",messagingSenderId:"710552504524",appId:"1:710552504524:web:b412741c4cedd143239a69",measurementId:"G-RK7HD0GX3W"},hM=pT(dM),_l=Jx(hM),y0={adminPin:"handbolmolins1944",lastUpdated:new Date().toISOString()},Vs={async fetchAll(){try{const n=zx(_l,"reports"),e=oM(n,sM("createdAt","desc")),o=(await uM(e)).docs.map(r=>r.data());return o.length>0&&localStorage.setItem("ch_molins_reports_v1",JSON.stringify(o)),o}catch(n){console.error("Firestore fetch error, using local fallback",n);const e=localStorage.getItem("ch_molins_reports_v1");return e?JSON.parse(e):[]}},async saveAll(n){try{for(const e of n)await Jh(Nc(_l,"reports",e.id),e);return localStorage.setItem("ch_molins_reports_v1",JSON.stringify(n)),!0}catch(e){return console.error("Firestore save error",e),!1}},async appendReport(n){try{await Jh(Nc(_l,"reports",n.id),n);const e=await this.fetchAll();localStorage.setItem("ch_molins_reports_v1",JSON.stringify([n,...e]))}catch(e){console.error("Firestore append error",e);const t=localStorage.getItem("ch_molins_reports_v1"),o=t?JSON.parse(t):[];localStorage.setItem("ch_molins_reports_v1",JSON.stringify([n,...o]))}},async fetchSettings(){try{const n=Nc(_l,"settings","global"),e=await lM(n);return e.exists()?e.data():y0}catch(n){console.error("Firestore fetch settings error",n);const e=localStorage.getItem("ch_molins_settings_v1");return e?JSON.parse(e):y0}},async saveSettings(n){try{return await Jh(Nc(_l,"settings","global"),n),localStorage.setItem("ch_molins_settings_v1",JSON.stringify(n)),!0}catch(e){return console.error("Firestore save settings error",e),!1}}};var pM={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let mM,gM;function yM(){return{geminiUrl:mM,vertexUrl:gM}}function vM(n,e,t,o){var r,l;if(!(n!=null&&n.baseUrl)){const u=yM();return e?(r=u.vertexUrl)!==null&&r!==void 0?r:t:(l=u.geminiUrl)!==null&&l!==void 0?l:o}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class lo{}function fe(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(o,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const l=e[r];return l!=null?String(l):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function h(n,e,t){for(let l=0;l<e.length-1;l++){const u=e[l];if(u.endsWith("[]")){const d=u.slice(0,-2);if(!(d in n))if(Array.isArray(t))n[d]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(n[d])){const g=n[d];if(Array.isArray(t))for(let m=0;m<g.length;m++){const _=g[m];h(_,e.slice(l+1),t[m])}else for(const m of g)h(m,e.slice(l+1),t)}return}else if(u.endsWith("[0]")){const d=u.slice(0,-3);d in n||(n[d]=[{}]);const g=n[d];h(g[0],e.slice(l+1),t);return}(!n[u]||typeof n[u]!="object")&&(n[u]={}),n=n[u]}const o=e[e.length-1],r=n[o];if(r!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===r)return;if(typeof r=="object"&&typeof t=="object"&&r!==null&&t!==null)Object.assign(r,t);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else o==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[o]=t}function f(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let o=0;o<e.length;o++){if(typeof n!="object"||n===null)return t;const r=e[o];if(r.endsWith("[]")){const l=r.slice(0,-2);if(l in n){const u=n[l];return Array.isArray(u)?u.map(d=>f(d,e.slice(o+1),t)):t}else return t}else n=n[r]}return n}catch(o){if(o instanceof TypeError)return t;throw o}}function _M(n,e){for(const[t,o]of Object.entries(e)){const r=t.split("."),l=o.split("."),u=new Set;let d=-1;for(let g=0;g<r.length;g++)if(r[g]==="*"){d=g;break}if(d!==-1&&l.length>d)for(let g=d;g<l.length;g++){const m=l[g];m!=="*"&&!m.endsWith("[]")&&!m.endsWith("[0]")&&u.add(m)}vp(n,r,l,0,u)}}function vp(n,e,t,o,r){if(o>=e.length||typeof n!="object"||n===null)return;const l=e[o];if(l.endsWith("[]")){const u=l.slice(0,-2),d=n;if(u in d&&Array.isArray(d[u]))for(const g of d[u])vp(g,e,t,o+1,r)}else if(l==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const u=n,d=Object.keys(u).filter(m=>!m.startsWith("_")&&!r.has(m)),g={};for(const m of d)g[m]=u[m];for(const[m,_]of Object.entries(g)){const T=[];for(const E of t.slice(o))E==="*"?T.push(m):T.push(E);h(u,T,_)}for(const m of d)delete u[m]}}else{const u=n;l in u&&vp(u[l],e,t,o+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ym(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function EM(n){const e={},t=f(n,["operationName"]);t!=null&&h(e,["operationName"],t);const o=f(n,["resourceName"]);return o!=null&&h(e,["_url","resourceName"],o),e}function TM(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const o=f(n,["metadata"]);o!=null&&h(e,["metadata"],o);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const u=f(n,["response","generateVideoResponse"]);return u!=null&&h(e,["response"],AM(u)),e}function SM(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const o=f(n,["metadata"]);o!=null&&h(e,["metadata"],o);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const u=f(n,["response"]);return u!=null&&h(e,["response"],CM(u)),e}function AM(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>IM(u))),h(e,["generatedVideos"],l)}const o=f(n,["raiMediaFilteredCount"]);o!=null&&h(e,["raiMediaFilteredCount"],o);const r=f(n,["raiMediaFilteredReasons"]);return r!=null&&h(e,["raiMediaFilteredReasons"],r),e}function CM(n){const e={},t=f(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>RM(u))),h(e,["generatedVideos"],l)}const o=f(n,["raiMediaFilteredCount"]);o!=null&&h(e,["raiMediaFilteredCount"],o);const r=f(n,["raiMediaFilteredReasons"]);return r!=null&&h(e,["raiMediaFilteredReasons"],r),e}function IM(n){const e={},t=f(n,["video"]);return t!=null&&h(e,["video"],DM(t)),e}function RM(n){const e={},t=f(n,["_self"]);return t!=null&&h(e,["video"],VM(t)),e}function wM(n){const e={},t=f(n,["operationName"]);return t!=null&&h(e,["_url","operationName"],t),e}function bM(n){const e={},t=f(n,["operationName"]);return t!=null&&h(e,["_url","operationName"],t),e}function NM(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const o=f(n,["metadata"]);o!=null&&h(e,["metadata"],o);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const u=f(n,["response"]);return u!=null&&h(e,["response"],xM(u)),e}function xM(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["parent"]);o!=null&&h(e,["parent"],o);const r=f(n,["documentName"]);return r!=null&&h(e,["documentName"],r),e}function jS(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const o=f(n,["metadata"]);o!=null&&h(e,["metadata"],o);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const u=f(n,["response"]);return u!=null&&h(e,["response"],MM(u)),e}function MM(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["parent"]);o!=null&&h(e,["parent"],o);const r=f(n,["documentName"]);return r!=null&&h(e,["documentName"],r),e}function DM(n){const e={},t=f(n,["uri"]);t!=null&&h(e,["uri"],t);const o=f(n,["encodedVideo"]);o!=null&&h(e,["videoBytes"],ym(o));const r=f(n,["encoding"]);return r!=null&&h(e,["mimeType"],r),e}function VM(n){const e={},t=f(n,["gcsUri"]);t!=null&&h(e,["uri"],t);const o=f(n,["bytesBase64Encoded"]);o!=null&&h(e,["videoBytes"],ym(o));const r=f(n,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var v0;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(v0||(v0={}));var _0;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(_0||(_0={}));var E0;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(E0||(E0={}));var cn;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(cn||(cn={}));var T0;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(T0||(T0={}));var S0;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(S0||(S0={}));var A0;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(A0||(A0={}));var C0;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(C0||(C0={}));var I0;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(I0||(I0={}));var R0;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(R0||(R0={}));var w0;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(w0||(w0={}));var b0;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH",n.MINIMAL="MINIMAL"})(b0||(b0={}));var N0;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(N0||(N0={}));var x0;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(x0||(x0={}));var M0;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(M0||(M0={}));var D0;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE",n.IMAGE_RECITATION="IMAGE_RECITATION",n.IMAGE_OTHER="IMAGE_OTHER"})(D0||(D0={}));var V0;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(V0||(V0={}));var P0;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(P0||(P0={}));var U0;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(U0||(U0={}));var L0;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(L0||(L0={}));var k0;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(k0||(k0={}));var sf;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(sf||(sf={}));var O0;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(O0||(O0={}));var q0;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(q0||(q0={}));var G0;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(G0||(G0={}));var _p;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(_p||(_p={}));var B0;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(B0||(B0={}));var F0;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",n.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(F0||(F0={}));var Ep;(function(n){n.COLLECTION="COLLECTION"})(Ep||(Ep={}));var H0;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(H0||(H0={}));var z0;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(z0||(z0={}));var J0;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(J0||(J0={}));var Y0;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(Y0||(Y0={}));var K0;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(K0||(K0={}));var Q0;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Q0||(Q0={}));var $0;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})($0||($0={}));var X0;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(X0||(X0={}));var W0;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(W0||(W0={}));var Z0;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(Z0||(Z0={}));var j0;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(j0||(j0={}));var eE;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(eE||(eE={}));var tE;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(tE||(tE={}));var nE;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING",n.DISTILLATION="DISTILLATION"})(nE||(nE={}));var iE;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(iE||(iE={}));var oE;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(oE||(oE={}));var sE;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED",n.REGISTERED="REGISTERED"})(sE||(sE={}));var rE;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(rE||(rE={}));var aE;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(aE||(aE={}));var lE;(function(n){n.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",n.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",n.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(lE||(lE={}));var uE;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.ACTIVITY_START="ACTIVITY_START",n.ACTIVITY_END="ACTIVITY_END"})(uE||(uE={}));var cE;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(cE||(cE={}));var fE;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(fE||(fE={}));var dE;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(dE||(dE={}));var hE;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(hE||(hE={}));var pE;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(pE||(pE={}));var mE;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(mE||(mE={}));var Hr;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(Hr||(Hr={}));class Tp{constructor(e){const t={};for(const o of e.headers.entries())t[o[0]]=o[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class El{get text(){var e,t,o,r,l,u,d,g;if(((r=(o=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let m="",_=!1;const T=[];for(const E of(g=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&g!==void 0?g:[]){for(const[R,P]of Object.entries(E))R!=="text"&&R!=="thought"&&R!=="thoughtSignature"&&(P!==null||P!==void 0)&&T.push(R);if(typeof E.text=="string"){if(typeof E.thought=="boolean"&&E.thought)continue;_=!0,m+=E.text}}return T.length>0&&console.warn(`there are non-text parts ${T} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),_?m:void 0}get data(){var e,t,o,r,l,u,d,g;if(((r=(o=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let m="";const _=[];for(const T of(g=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&g!==void 0?g:[]){for(const[E,R]of Object.entries(T))E!=="inlineData"&&(R!==null||R!==void 0)&&_.push(E);T.inlineData&&typeof T.inlineData.data=="string"&&(m+=atob(T.inlineData.data))}return _.length>0&&console.warn(`there are non-data parts ${_} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),m.length>0?btoa(m):void 0}get functionCalls(){var e,t,o,r,l,u,d,g;if(((r=(o=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const m=(g=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||g===void 0?void 0:g.filter(_=>_.functionCall).map(_=>_.functionCall).filter(_=>_!==void 0);if((m==null?void 0:m.length)!==0)return m}get executableCode(){var e,t,o,r,l,u,d,g,m;if(((r=(o=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const _=(g=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||g===void 0?void 0:g.filter(T=>T.executableCode).map(T=>T.executableCode).filter(T=>T!==void 0);if((_==null?void 0:_.length)!==0)return(m=_==null?void 0:_[0])===null||m===void 0?void 0:m.code}get codeExecutionResult(){var e,t,o,r,l,u,d,g,m;if(((r=(o=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const _=(g=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||g===void 0?void 0:g.filter(T=>T.codeExecutionResult).map(T=>T.codeExecutionResult).filter(T=>T!==void 0);if((_==null?void 0:_.length)!==0)return(m=_==null?void 0:_[0])===null||m===void 0?void 0:m.output}}class gE{}class yE{}class PM{}class UM{}class LM{}class kM{}class vE{}class _E{}class EE{}class OM{}class rf{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const o=new rf;let r;const l=e;return t?r=SM(l):r=TM(l),Object.assign(o,r),o}}class TE{}class SE{}class AE{}class CE{}class qM{}class GM{}class BM{}class vm{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const o=new vm,l=NM(e);return Object.assign(o,l),o}}class FM{}class HM{}class zM{}class JM{}class IE{}class YM{get text(){var e,t,o;let r="",l=!1;const u=[];for(const d of(o=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&o!==void 0?o:[]){for(const[g,m]of Object.entries(d))g!=="text"&&g!=="thought"&&m!==null&&u.push(g);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;l=!0,r+=d.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?r:void 0}get data(){var e,t,o;let r="";const l=[];for(const u of(o=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&o!==void 0?o:[]){for(const[d,g]of Object.entries(u))d!=="inlineData"&&g!==null&&l.push(d);u.inlineData&&typeof u.inlineData.data=="string"&&(r+=atob(u.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class KM{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class _m{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const o=new _m,l=jS(e);return Object.assign(o,l),o}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ye(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function eA(n,e){const t=Ye(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function tA(n){return Array.isArray(n)?n.map(e=>af(e)):[af(n)]}function af(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function nA(n){const e=af(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function iA(n){const e=af(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function RE(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function oA(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>RE(e)):[RE(n)]}function Sp(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function wE(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function bE(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function sn(n){if(n==null)throw new Error("ContentUnion is required");return Sp(n)?n:{role:"user",parts:oA(n)}}function Em(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const o=sn(t);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(n.isVertexAI()){const t=sn(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>sn(t)):[sn(e)]}function zn(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(wE(n)||bE(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[sn(n)]}const e=[],t=[],o=Sp(n[0]);for(const r of n){const l=Sp(r);if(l!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(r);else{if(wE(r)||bE(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(r)}}return o||e.push({role:"user",parts:oA(t)}),e}function QM(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(o=>o!=="null");if(t.length===1)e.type=Object.values(cn).includes(t[0].toUpperCase())?t[0].toUpperCase():cn.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const o of t)e.anyOf.push({type:Object.values(cn).includes(o.toUpperCase())?o.toUpperCase():cn.TYPE_UNSPECIFIED})}}function $r(n){const e={},t=["items"],o=["anyOf"],r=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=n.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,n=l[1]):l[1].type==="null"&&(e.nullable=!0,n=l[0])),n.type instanceof Array&&QM(n.type,e);for(const[u,d]of Object.entries(n))if(d!=null)if(u=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;e.type=Object.values(cn).includes(d.toUpperCase())?d.toUpperCase():cn.TYPE_UNSPECIFIED}else if(t.includes(u))e[u]=$r(d);else if(o.includes(u)){const g=[];for(const m of d){if(m.type=="null"){e.nullable=!0;continue}g.push($r(m))}e[u]=g}else if(r.includes(u)){const g={};for(const[m,_]of Object.entries(d))g[m]=$r(_);e[u]=g}else{if(u==="additionalProperties")continue;e[u]=d}return e}function Tm(n){return $r(n)}function Sm(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function Am(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function ua(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=$r(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=$r(e.response));return n}function ca(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function $M(n,e,t,o=1){const r=!e.startsWith(`${t}/`)&&e.split("/").length===o;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:r?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:r?`${t}/${e}`:e}function uo(n,e){if(typeof e!="string")throw new Error("name must be a string");return $M(n,e,"cachedContents")}function sA(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function ts(n){return ym(n)}function XM(n){return n!=null&&typeof n=="object"&&"name"in n}function WM(n){return n!=null&&typeof n=="object"&&"video"in n}function ZM(n){return n!=null&&typeof n=="object"&&"uri"in n}function rA(n){var e;let t;if(XM(n)&&(t=n.name),!(ZM(n)&&(t=n.uri,t===void 0))&&!(WM(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const r=t.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${t}`);t=r[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function aA(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function lA(n){for(const e of["models","tunedModels","publisherModels"])if(jM(n,e))return n[e];return[]}function jM(n,e){return n!==null&&typeof n=="object"&&e in n}function eD(n,e={}){const t=n,o={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(o.responseJsonSchema=t.outputSchema),e.behavior&&(o.behavior=e.behavior),{functionDeclarations:[o]}}function tD(n,e={}){const t=[],o=new Set;for(const r of n){const l=r.name;if(o.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);o.add(l);const u=eD(r,e);u.functionDeclarations&&t.push(...u.functionDeclarations)}return{functionDeclarations:t}}function uA(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const o=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,r=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(r>0||o!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(o>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function nD(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function cA(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const r=t.inlinedResponses;if(!Array.isArray(r)||r.length===0)return n;let l=!1;for(const u of r){if(typeof u!="object"||u===null)continue;const g=u.response;if(typeof g!="object"||g===null)continue;if(g.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function fa(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function fA(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function iD(n){const e={},t=f(n,["responsesFile"]);t!=null&&h(e,["fileName"],t);const o=f(n,["inlinedResponses","inlinedResponses"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>kD(u))),h(e,["inlinedResponses"],l)}const r=f(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["inlinedEmbedContentResponses"],l)}return e}function oD(n){const e={},t=f(n,["predictionsFormat"]);t!=null&&h(e,["format"],t);const o=f(n,["gcsDestination","outputUriPrefix"]);o!=null&&h(e,["gcsUri"],o);const r=f(n,["bigqueryDestination","outputUri"]);return r!=null&&h(e,["bigqueryUri"],r),e}function sD(n){const e={},t=f(n,["format"]);t!=null&&h(e,["predictionsFormat"],t);const o=f(n,["gcsUri"]);o!=null&&h(e,["gcsDestination","outputUriPrefix"],o);const r=f(n,["bigqueryUri"]);if(r!=null&&h(e,["bigqueryDestination","outputUri"],r),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Bc(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const o=f(n,["metadata","displayName"]);o!=null&&h(e,["displayName"],o);const r=f(n,["metadata","state"]);r!=null&&h(e,["state"],fA(r));const l=f(n,["metadata","createTime"]);l!=null&&h(e,["createTime"],l);const u=f(n,["metadata","endTime"]);u!=null&&h(e,["endTime"],u);const d=f(n,["metadata","updateTime"]);d!=null&&h(e,["updateTime"],d);const g=f(n,["metadata","model"]);g!=null&&h(e,["model"],g);const m=f(n,["metadata","output"]);return m!=null&&h(e,["dest"],iD(cA(m))),e}function Ap(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const o=f(n,["displayName"]);o!=null&&h(e,["displayName"],o);const r=f(n,["state"]);r!=null&&h(e,["state"],fA(r));const l=f(n,["error"]);l!=null&&h(e,["error"],l);const u=f(n,["createTime"]);u!=null&&h(e,["createTime"],u);const d=f(n,["startTime"]);d!=null&&h(e,["startTime"],d);const g=f(n,["endTime"]);g!=null&&h(e,["endTime"],g);const m=f(n,["updateTime"]);m!=null&&h(e,["updateTime"],m);const _=f(n,["model"]);_!=null&&h(e,["model"],_);const T=f(n,["inputConfig"]);T!=null&&h(e,["src"],rD(T));const E=f(n,["outputConfig"]);E!=null&&h(e,["dest"],oD(cA(E)));const R=f(n,["completionStats"]);return R!=null&&h(e,["completionStats"],R),e}function rD(n){const e={},t=f(n,["instancesFormat"]);t!=null&&h(e,["format"],t);const o=f(n,["gcsSource","uris"]);o!=null&&h(e,["gcsUri"],o);const r=f(n,["bigquerySource","inputUri"]);return r!=null&&h(e,["bigqueryUri"],r),e}function aD(n,e){const t={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=f(e,["fileName"]);o!=null&&h(t,["fileName"],o);const r=f(e,["inlinedRequests"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>LD(n,u))),h(t,["requests","requests"],l)}return t}function lD(n){const e={},t=f(n,["format"]);t!=null&&h(e,["instancesFormat"],t);const o=f(n,["gcsUri"]);o!=null&&h(e,["gcsSource","uris"],o);const r=f(n,["bigqueryUri"]);if(r!=null&&h(e,["bigquerySource","inputUri"],r),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function uD(n){const e={},t=f(n,["data"]);if(t!=null&&h(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(n,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function cD(n,e){const t={},o=f(e,["name"]);return o!=null&&h(t,["_url","name"],fa(n,o)),t}function fD(n,e){const t={},o=f(e,["name"]);return o!=null&&h(t,["_url","name"],fa(n,o)),t}function dD(n){const e={},t=f(n,["content"]);t!=null&&h(e,["content"],t);const o=f(n,["citationMetadata"]);o!=null&&h(e,["citationMetadata"],hD(o));const r=f(n,["tokenCount"]);r!=null&&h(e,["tokenCount"],r);const l=f(n,["finishReason"]);l!=null&&h(e,["finishReason"],l);const u=f(n,["avgLogprobs"]);u!=null&&h(e,["avgLogprobs"],u);const d=f(n,["groundingMetadata"]);d!=null&&h(e,["groundingMetadata"],d);const g=f(n,["index"]);g!=null&&h(e,["index"],g);const m=f(n,["logprobsResult"]);m!=null&&h(e,["logprobsResult"],m);const _=f(n,["safetyRatings"]);if(_!=null){let E=_;Array.isArray(E)&&(E=E.map(R=>R)),h(e,["safetyRatings"],E)}const T=f(n,["urlContextMetadata"]);return T!=null&&h(e,["urlContextMetadata"],T),e}function hD(n){const e={},t=f(n,["citationSources"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>r)),h(e,["citations"],o)}return e}function dA(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>zD(l))),h(e,["parts"],r)}const o=f(n,["role"]);return o!=null&&h(e,["role"],o),e}function pD(n,e){const t={},o=f(n,["displayName"]);if(e!==void 0&&o!=null&&h(e,["batch","displayName"],o),f(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function mD(n,e){const t={},o=f(n,["displayName"]);e!==void 0&&o!=null&&h(e,["displayName"],o);const r=f(n,["dest"]);return e!==void 0&&r!=null&&h(e,["outputConfig"],sD(nD(r))),t}function NE(n,e){const t={},o=f(e,["model"]);o!=null&&h(t,["_url","model"],Ye(n,o));const r=f(e,["src"]);r!=null&&h(t,["batch","inputConfig"],aD(n,uA(n,r)));const l=f(e,["config"]);return l!=null&&pD(l,t),t}function gD(n,e){const t={},o=f(e,["model"]);o!=null&&h(t,["model"],Ye(n,o));const r=f(e,["src"]);r!=null&&h(t,["inputConfig"],lD(uA(n,r)));const l=f(e,["config"]);return l!=null&&mD(l,t),t}function yD(n,e){const t={},o=f(n,["displayName"]);return e!==void 0&&o!=null&&h(e,["batch","displayName"],o),t}function vD(n,e){const t={},o=f(e,["model"]);o!=null&&h(t,["_url","model"],Ye(n,o));const r=f(e,["src"]);r!=null&&h(t,["batch","inputConfig"],ID(n,r));const l=f(e,["config"]);return l!=null&&yD(l,t),t}function _D(n,e){const t={},o=f(e,["name"]);return o!=null&&h(t,["_url","name"],fa(n,o)),t}function ED(n,e){const t={},o=f(e,["name"]);return o!=null&&h(t,["_url","name"],fa(n,o)),t}function TD(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["name"]);o!=null&&h(e,["name"],o);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);return l!=null&&h(e,["error"],l),e}function SD(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["name"]);o!=null&&h(e,["name"],o);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);return l!=null&&h(e,["error"],l),e}function AD(n,e){const t={},o=f(e,["contents"]);if(o!=null){let l=Em(n,o);Array.isArray(l)&&(l=l.map(u=>u)),h(t,["requests[]","request","content"],l)}const r=f(e,["config"]);return r!=null&&(h(t,["_self"],CD(r,t)),_M(t,{"requests[].*":"requests[].request.*"})),t}function CD(n,e){const t={},o=f(n,["taskType"]);e!==void 0&&o!=null&&h(e,["requests[]","taskType"],o);const r=f(n,["title"]);e!==void 0&&r!=null&&h(e,["requests[]","title"],r);const l=f(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&h(e,["requests[]","outputDimensionality"],l),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function ID(n,e){const t={},o=f(e,["fileName"]);o!=null&&h(t,["file_name"],o);const r=f(e,["inlinedRequests"]);return r!=null&&h(t,["requests"],AD(n,r)),t}function RD(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const o=f(n,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function wD(n){const e={},t=f(n,["id"]);t!=null&&h(e,["id"],t);const o=f(n,["args"]);o!=null&&h(e,["args"],o);const r=f(n,["name"]);if(r!=null&&h(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function bD(n){const e={},t=f(n,["allowedFunctionNames"]);t!=null&&h(e,["allowedFunctionNames"],t);const o=f(n,["mode"]);if(o!=null&&h(e,["mode"],o),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function ND(n,e,t){const o={},r=f(e,["systemInstruction"]);t!==void 0&&r!=null&&h(t,["systemInstruction"],dA(sn(r)));const l=f(e,["temperature"]);l!=null&&h(o,["temperature"],l);const u=f(e,["topP"]);u!=null&&h(o,["topP"],u);const d=f(e,["topK"]);d!=null&&h(o,["topK"],d);const g=f(e,["candidateCount"]);g!=null&&h(o,["candidateCount"],g);const m=f(e,["maxOutputTokens"]);m!=null&&h(o,["maxOutputTokens"],m);const _=f(e,["stopSequences"]);_!=null&&h(o,["stopSequences"],_);const T=f(e,["responseLogprobs"]);T!=null&&h(o,["responseLogprobs"],T);const E=f(e,["logprobs"]);E!=null&&h(o,["logprobs"],E);const R=f(e,["presencePenalty"]);R!=null&&h(o,["presencePenalty"],R);const P=f(e,["frequencyPenalty"]);P!=null&&h(o,["frequencyPenalty"],P);const B=f(e,["seed"]);B!=null&&h(o,["seed"],B);const O=f(e,["responseMimeType"]);O!=null&&h(o,["responseMimeType"],O);const $=f(e,["responseSchema"]);$!=null&&h(o,["responseSchema"],Tm($));const se=f(e,["responseJsonSchema"]);if(se!=null&&h(o,["responseJsonSchema"],se),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const j=f(e,["safetySettings"]);if(t!==void 0&&j!=null){let D=j;Array.isArray(D)&&(D=D.map(ae=>JD(ae))),h(t,["safetySettings"],D)}const re=f(e,["tools"]);if(t!==void 0&&re!=null){let D=ca(re);Array.isArray(D)&&(D=D.map(ae=>KD(ua(ae)))),h(t,["tools"],D)}const W=f(e,["toolConfig"]);if(t!==void 0&&W!=null&&h(t,["toolConfig"],YD(W)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const de=f(e,["cachedContent"]);t!==void 0&&de!=null&&h(t,["cachedContent"],uo(n,de));const M=f(e,["responseModalities"]);M!=null&&h(o,["responseModalities"],M);const x=f(e,["mediaResolution"]);x!=null&&h(o,["mediaResolution"],x);const N=f(e,["speechConfig"]);if(N!=null&&h(o,["speechConfig"],Sm(N)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const L=f(e,["thinkingConfig"]);L!=null&&h(o,["thinkingConfig"],L);const U=f(e,["imageConfig"]);U!=null&&h(o,["imageConfig"],UD(U));const G=f(e,["enableEnhancedCivicAnswers"]);if(G!=null&&h(o,["enableEnhancedCivicAnswers"],G),f(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return o}function xD(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["candidates"]);if(o!=null){let g=o;Array.isArray(g)&&(g=g.map(m=>dD(m))),h(e,["candidates"],g)}const r=f(n,["modelVersion"]);r!=null&&h(e,["modelVersion"],r);const l=f(n,["promptFeedback"]);l!=null&&h(e,["promptFeedback"],l);const u=f(n,["responseId"]);u!=null&&h(e,["responseId"],u);const d=f(n,["usageMetadata"]);return d!=null&&h(e,["usageMetadata"],d),e}function MD(n,e){const t={},o=f(e,["name"]);return o!=null&&h(t,["_url","name"],fa(n,o)),t}function DD(n,e){const t={},o=f(e,["name"]);return o!=null&&h(t,["_url","name"],fa(n,o)),t}function VD(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function PD(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function UD(n){const e={},t=f(n,["aspectRatio"]);t!=null&&h(e,["aspectRatio"],t);const o=f(n,["imageSize"]);if(o!=null&&h(e,["imageSize"],o),f(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(f(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function LD(n,e){const t={},o=f(e,["model"]);o!=null&&h(t,["request","model"],Ye(n,o));const r=f(e,["contents"]);if(r!=null){let d=zn(r);Array.isArray(d)&&(d=d.map(g=>dA(g))),h(t,["request","contents"],d)}const l=f(e,["metadata"]);l!=null&&h(t,["metadata"],l);const u=f(e,["config"]);return u!=null&&h(t,["request","generationConfig"],ND(n,u,f(t,["request"],{}))),t}function kD(n){const e={},t=f(n,["response"]);t!=null&&h(e,["response"],xD(t));const o=f(n,["metadata"]);o!=null&&h(e,["metadata"],o);const r=f(n,["error"]);return r!=null&&h(e,["error"],r),e}function OD(n,e){const t={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const r=f(n,["pageToken"]);if(e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),f(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function qD(n,e){const t={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const r=f(n,["pageToken"]);e!==void 0&&r!=null&&h(e,["_query","pageToken"],r);const l=f(n,["filter"]);return e!==void 0&&l!=null&&h(e,["_query","filter"],l),t}function GD(n){const e={},t=f(n,["config"]);return t!=null&&OD(t,e),e}function BD(n){const e={},t=f(n,["config"]);return t!=null&&qD(t,e),e}function FD(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const r=f(n,["operations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>Bc(u))),h(e,["batchJobs"],l)}return e}function HD(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const r=f(n,["batchPredictionJobs"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>Ap(u))),h(e,["batchJobs"],l)}return e}function zD(n){const e={},t=f(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const o=f(n,["codeExecutionResult"]);o!=null&&h(e,["codeExecutionResult"],o);const r=f(n,["executableCode"]);r!=null&&h(e,["executableCode"],r);const l=f(n,["fileData"]);l!=null&&h(e,["fileData"],RD(l));const u=f(n,["functionCall"]);u!=null&&h(e,["functionCall"],wD(u));const d=f(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const g=f(n,["inlineData"]);g!=null&&h(e,["inlineData"],uD(g));const m=f(n,["text"]);m!=null&&h(e,["text"],m);const _=f(n,["thought"]);_!=null&&h(e,["thought"],_);const T=f(n,["thoughtSignature"]);T!=null&&h(e,["thoughtSignature"],T);const E=f(n,["videoMetadata"]);return E!=null&&h(e,["videoMetadata"],E),e}function JD(n){const e={},t=f(n,["category"]);if(t!=null&&h(e,["category"],t),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=f(n,["threshold"]);return o!=null&&h(e,["threshold"],o),e}function YD(n){const e={},t=f(n,["retrievalConfig"]);t!=null&&h(e,["retrievalConfig"],t);const o=f(n,["functionCallingConfig"]);return o!=null&&h(e,["functionCallingConfig"],bD(o)),e}function KD(n){const e={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=f(n,["computerUse"]);t!=null&&h(e,["computerUse"],t);const o=f(n,["fileSearch"]);o!=null&&h(e,["fileSearch"],o);const r=f(n,["codeExecution"]);if(r!=null&&h(e,["codeExecution"],r),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(n,["functionDeclarations"]);if(l!=null){let _=l;Array.isArray(_)&&(_=_.map(T=>T)),h(e,["functionDeclarations"],_)}const u=f(n,["googleMaps"]);u!=null&&h(e,["googleMaps"],VD(u));const d=f(n,["googleSearch"]);d!=null&&h(e,["googleSearch"],PD(d));const g=f(n,["googleSearchRetrieval"]);g!=null&&h(e,["googleSearchRetrieval"],g);const m=f(n,["urlContext"]);return m!=null&&h(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var ao;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(ao||(ao={}));class Ks{constructor(e,t,o,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,o,r)}init(e,t,o){var r,l;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!o||Object.keys(o).length===0?u={config:{}}:typeof o=="object"?u=Object.assign({},o):u=o,u.config&&(u.config.pageToken=t.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(l=(r=u.config)===null||r===void 0?void 0:r.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class QD extends lo{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Ks(ao.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(t),t),this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)}}createInlinedGenerateContentRequest(e){const t=NE(this.apiClient,e),o=t._url,r=fe("{model}:batchGenerateContent",o),d=t.batch.inputConfig.requests,g=d.requests,m=[];for(const _ of g){const T=Object.assign({},_);if(T.systemInstruction){const E=T.systemInstruction;delete T.systemInstruction;const R=T.request;R.systemInstruction=E,T.request=R}m.push(T)}return d.requests=m,delete t.config,delete t._url,delete t._query,{path:r,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const o=t?Object.assign({},t):{},r=Date.now().toString();if(o.displayName||(o.displayName=`genaiBatchJob_${r}`),o.dest===void 0){const l=this.getGcsUri(e),u=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?o.dest=`${l.slice(0,-6)}/dest`:o.dest=`${l}_dest_${r}`;else if(u)o.dest=`${u}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return o}async createInternal(e){var t,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=gD(this.apiClient,e);return d=fe("batchPredictionJobs",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),u.then(_=>Ap(_))}else{const m=NE(this.apiClient,e);return d=fe("{model}:batchGenerateContent",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>Bc(_))}}async createEmbeddingsInternal(e){var t,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=vD(this.apiClient,e);return l=fe("{model}:asyncBatchEmbedContent",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>Bc(g))}}async get(e){var t,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=DD(this.apiClient,e);return d=fe("batchPredictionJobs/{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),u.then(_=>Ap(_))}else{const m=MD(this.apiClient,e);return d=fe("batches/{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>Bc(_))}}async cancel(e){var t,o,r,l;let u="",d={};if(this.apiClient.isVertexAI()){const g=fD(this.apiClient,e);u=fe("batchPredictionJobs/{name}:cancel",g._url),d=g._query,delete g._url,delete g._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const g=cD(this.apiClient,e);u=fe("batches/{name}:cancel",g._url),d=g._query,delete g._url,delete g._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var t,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=BD(e);return d=fe("batchPredictionJobs",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=HD(_),E=new IE;return Object.assign(E,T),E})}else{const m=GD(e);return d=fe("batches",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=FD(_),E=new IE;return Object.assign(E,T),E})}}async delete(e){var t,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=ED(this.apiClient,e);return d=fe("batchPredictionJobs/{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>SD(_))}else{const m=_D(this.apiClient,e);return d=fe("batches/{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>TD(_))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $D(n){const e={},t=f(n,["data"]);if(t!=null&&h(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(n,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function xE(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>v2(l))),h(e,["parts"],r)}const o=f(n,["role"]);return o!=null&&h(e,["role"],o),e}function XD(n,e){const t={},o=f(n,["ttl"]);e!==void 0&&o!=null&&h(e,["ttl"],o);const r=f(n,["expireTime"]);e!==void 0&&r!=null&&h(e,["expireTime"],r);const l=f(n,["displayName"]);e!==void 0&&l!=null&&h(e,["displayName"],l);const u=f(n,["contents"]);if(e!==void 0&&u!=null){let _=zn(u);Array.isArray(_)&&(_=_.map(T=>xE(T))),h(e,["contents"],_)}const d=f(n,["systemInstruction"]);e!==void 0&&d!=null&&h(e,["systemInstruction"],xE(sn(d)));const g=f(n,["tools"]);if(e!==void 0&&g!=null){let _=g;Array.isArray(_)&&(_=_.map(T=>E2(T))),h(e,["tools"],_)}const m=f(n,["toolConfig"]);if(e!==void 0&&m!=null&&h(e,["toolConfig"],_2(m)),f(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function WD(n,e){const t={},o=f(n,["ttl"]);e!==void 0&&o!=null&&h(e,["ttl"],o);const r=f(n,["expireTime"]);e!==void 0&&r!=null&&h(e,["expireTime"],r);const l=f(n,["displayName"]);e!==void 0&&l!=null&&h(e,["displayName"],l);const u=f(n,["contents"]);if(e!==void 0&&u!=null){let T=zn(u);Array.isArray(T)&&(T=T.map(E=>E)),h(e,["contents"],T)}const d=f(n,["systemInstruction"]);e!==void 0&&d!=null&&h(e,["systemInstruction"],sn(d));const g=f(n,["tools"]);if(e!==void 0&&g!=null){let T=g;Array.isArray(T)&&(T=T.map(E=>T2(E))),h(e,["tools"],T)}const m=f(n,["toolConfig"]);e!==void 0&&m!=null&&h(e,["toolConfig"],m);const _=f(n,["kmsKeyName"]);return e!==void 0&&_!=null&&h(e,["encryption_spec","kmsKeyName"],_),t}function ZD(n,e){const t={},o=f(e,["model"]);o!=null&&h(t,["model"],eA(n,o));const r=f(e,["config"]);return r!=null&&XD(r,t),t}function jD(n,e){const t={},o=f(e,["model"]);o!=null&&h(t,["model"],eA(n,o));const r=f(e,["config"]);return r!=null&&WD(r,t),t}function e2(n,e){const t={},o=f(e,["name"]);return o!=null&&h(t,["_url","name"],uo(n,o)),t}function t2(n,e){const t={},o=f(e,["name"]);return o!=null&&h(t,["_url","name"],uo(n,o)),t}function n2(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function i2(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function o2(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const o=f(n,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function s2(n){const e={},t=f(n,["id"]);t!=null&&h(e,["id"],t);const o=f(n,["args"]);o!=null&&h(e,["args"],o);const r=f(n,["name"]);if(r!=null&&h(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function r2(n){const e={},t=f(n,["allowedFunctionNames"]);t!=null&&h(e,["allowedFunctionNames"],t);const o=f(n,["mode"]);if(o!=null&&h(e,["mode"],o),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function a2(n){const e={},t=f(n,["description"]);t!=null&&h(e,["description"],t);const o=f(n,["name"]);o!=null&&h(e,["name"],o);const r=f(n,["parameters"]);r!=null&&h(e,["parameters"],r);const l=f(n,["parametersJsonSchema"]);l!=null&&h(e,["parametersJsonSchema"],l);const u=f(n,["response"]);u!=null&&h(e,["response"],u);const d=f(n,["responseJsonSchema"]);if(d!=null&&h(e,["responseJsonSchema"],d),f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function l2(n,e){const t={},o=f(e,["name"]);return o!=null&&h(t,["_url","name"],uo(n,o)),t}function u2(n,e){const t={},o=f(e,["name"]);return o!=null&&h(t,["_url","name"],uo(n,o)),t}function c2(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function f2(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function d2(n,e){const t={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),t}function h2(n,e){const t={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),t}function p2(n){const e={},t=f(n,["config"]);return t!=null&&d2(t,e),e}function m2(n){const e={},t=f(n,["config"]);return t!=null&&h2(t,e),e}function g2(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const r=f(n,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["cachedContents"],l)}return e}function y2(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const r=f(n,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["cachedContents"],l)}return e}function v2(n){const e={},t=f(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const o=f(n,["codeExecutionResult"]);o!=null&&h(e,["codeExecutionResult"],o);const r=f(n,["executableCode"]);r!=null&&h(e,["executableCode"],r);const l=f(n,["fileData"]);l!=null&&h(e,["fileData"],o2(l));const u=f(n,["functionCall"]);u!=null&&h(e,["functionCall"],s2(u));const d=f(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const g=f(n,["inlineData"]);g!=null&&h(e,["inlineData"],$D(g));const m=f(n,["text"]);m!=null&&h(e,["text"],m);const _=f(n,["thought"]);_!=null&&h(e,["thought"],_);const T=f(n,["thoughtSignature"]);T!=null&&h(e,["thoughtSignature"],T);const E=f(n,["videoMetadata"]);return E!=null&&h(e,["videoMetadata"],E),e}function _2(n){const e={},t=f(n,["retrievalConfig"]);t!=null&&h(e,["retrievalConfig"],t);const o=f(n,["functionCallingConfig"]);return o!=null&&h(e,["functionCallingConfig"],r2(o)),e}function E2(n){const e={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=f(n,["computerUse"]);t!=null&&h(e,["computerUse"],t);const o=f(n,["fileSearch"]);o!=null&&h(e,["fileSearch"],o);const r=f(n,["codeExecution"]);if(r!=null&&h(e,["codeExecution"],r),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(n,["functionDeclarations"]);if(l!=null){let _=l;Array.isArray(_)&&(_=_.map(T=>T)),h(e,["functionDeclarations"],_)}const u=f(n,["googleMaps"]);u!=null&&h(e,["googleMaps"],c2(u));const d=f(n,["googleSearch"]);d!=null&&h(e,["googleSearch"],f2(d));const g=f(n,["googleSearchRetrieval"]);g!=null&&h(e,["googleSearchRetrieval"],g);const m=f(n,["urlContext"]);return m!=null&&h(e,["urlContext"],m),e}function T2(n){const e={},t=f(n,["retrieval"]);t!=null&&h(e,["retrieval"],t);const o=f(n,["computerUse"]);if(o!=null&&h(e,["computerUse"],o),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=f(n,["codeExecution"]);r!=null&&h(e,["codeExecution"],r);const l=f(n,["enterpriseWebSearch"]);l!=null&&h(e,["enterpriseWebSearch"],l);const u=f(n,["functionDeclarations"]);if(u!=null){let T=u;Array.isArray(T)&&(T=T.map(E=>a2(E))),h(e,["functionDeclarations"],T)}const d=f(n,["googleMaps"]);d!=null&&h(e,["googleMaps"],d);const g=f(n,["googleSearch"]);g!=null&&h(e,["googleSearch"],g);const m=f(n,["googleSearchRetrieval"]);m!=null&&h(e,["googleSearchRetrieval"],m);const _=f(n,["urlContext"]);return _!=null&&h(e,["urlContext"],_),e}function S2(n,e){const t={},o=f(n,["ttl"]);e!==void 0&&o!=null&&h(e,["ttl"],o);const r=f(n,["expireTime"]);return e!==void 0&&r!=null&&h(e,["expireTime"],r),t}function A2(n,e){const t={},o=f(n,["ttl"]);e!==void 0&&o!=null&&h(e,["ttl"],o);const r=f(n,["expireTime"]);return e!==void 0&&r!=null&&h(e,["expireTime"],r),t}function C2(n,e){const t={},o=f(e,["name"]);o!=null&&h(t,["_url","name"],uo(n,o));const r=f(e,["config"]);return r!=null&&S2(r,t),t}function I2(n,e){const t={},o=f(e,["name"]);o!=null&&h(t,["_url","name"],uo(n,o));const r=f(e,["config"]);return r!=null&&A2(r,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class R2 extends lo{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Ks(ao.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(t),t)}async create(e){var t,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=jD(this.apiClient,e);return d=fe("cachedContents",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const m=ZD(this.apiClient,e);return d=fe("cachedContents",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async get(e){var t,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=u2(this.apiClient,e);return d=fe("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const m=l2(this.apiClient,e);return d=fe("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async delete(e){var t,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=t2(this.apiClient,e);return d=fe("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=i2(_),E=new AE;return Object.assign(E,T),E})}else{const m=e2(this.apiClient,e);return d=fe("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=n2(_),E=new AE;return Object.assign(E,T),E})}}async update(e){var t,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=I2(this.apiClient,e);return d=fe("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const m=C2(this.apiClient,e);return d=fe("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async listInternal(e){var t,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=m2(e);return d=fe("cachedContents",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=y2(_),E=new CE;return Object.assign(E,T),E})}else{const m=p2(e);return d=fe("cachedContents",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=g2(_),E=new CE;return Object.assign(E,T),E})}}}function lf(n,e){var t={};for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&e.indexOf(o)<0&&(t[o]=n[o]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,o=Object.getOwnPropertySymbols(n);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(n,o[r])&&(t[o[r]]=n[o[r]]);return t}function ME(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],o=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&o>=n.length&&(n=void 0),{value:n&&n[o++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ce(n){return this instanceof Ce?(this.v=n,this):new Ce(n)}function ri(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=t.apply(n,e||[]),r,l=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",u),r[Symbol.asyncIterator]=function(){return this},r;function u(R){return function(P){return Promise.resolve(P).then(R,T)}}function d(R,P){o[R]&&(r[R]=function(B){return new Promise(function(O,$){l.push([R,B,O,$])>1||g(R,B)})},P&&(r[R]=P(r[R])))}function g(R,P){try{m(o[R](P))}catch(B){E(l[0][3],B)}}function m(R){R.value instanceof Ce?Promise.resolve(R.value.v).then(_,T):E(l[0][2],R)}function _(R){g("next",R)}function T(R){g("throw",R)}function E(R,P){R(P),l.shift(),l.length&&g(l[0][0],l[0][1])}}function ai(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof ME=="function"?ME(n):n[Symbol.iterator](),t={},o("next"),o("throw"),o("return"),t[Symbol.asyncIterator]=function(){return this},t);function o(l){t[l]=n[l]&&function(u){return new Promise(function(d,g){u=n[l](u),r(d,g,u.done,u.value)})}}function r(l,u,d,g){Promise.resolve(g).then(function(m){l({value:m,done:d})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function w2(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:hA(t)}function hA(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function b2(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function DE(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let o=0;for(;o<t;)if(n[o].role==="user")e.push(n[o]),o++;else{const r=[];let l=!0;for(;o<t&&n[o].role==="model";)r.push(n[o]),l&&!hA(n[o])&&(l=!1),o++;l?e.push(...r):e.pop()}return e}class N2{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new x2(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class x2{constructor(e,t,o,r={},l=[]){this.apiClient=e,this.modelsModule=t,this.model=o,this.config=r,this.history=l,this.sendPromise=Promise.resolve(),b2(l)}async sendMessage(e){var t;await this.sendPromise;const o=sn(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var l,u,d;const g=await r,m=(u=(l=g.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content,_=g.automaticFunctionCallingHistory,T=this.getHistory(!0).length;let E=[];_!=null&&(E=(d=_.slice(T))!==null&&d!==void 0?d:[]);const R=m?[m]:[];this.recordHistory(o,R,E)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var t;await this.sendPromise;const o=sn(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const l=await r;return this.processStreamResponse(l,o)}getHistory(e=!1){const t=e?DE(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){return ri(this,arguments,function*(){var r,l,u,d,g,m;const _=[];try{for(var T=!0,E=ai(e),R;R=yield Ce(E.next()),r=R.done,!r;T=!0){d=R.value,T=!1;const P=d;if(w2(P)){const B=(m=(g=P.candidates)===null||g===void 0?void 0:g[0])===null||m===void 0?void 0:m.content;B!==void 0&&_.push(B)}yield yield Ce(P)}}catch(P){l={error:P}}finally{try{!T&&!r&&(u=E.return)&&(yield Ce(u.call(E)))}finally{if(l)throw l.error}}this.recordHistory(t,_)})}recordHistory(e,t,o){let r=[];t.length>0&&t.every(l=>l.role!==void 0)?r=t:r.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...DE(o)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Fl extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Fl.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function M2(n){const e={},t=f(n,["file"]);return t!=null&&h(e,["file"],t),e}function D2(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function V2(n){const e={},t=f(n,["name"]);return t!=null&&h(e,["_url","file"],rA(t)),e}function P2(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function U2(n){const e={},t=f(n,["name"]);return t!=null&&h(e,["_url","file"],rA(t)),e}function L2(n){const e={},t=f(n,["uris"]);return t!=null&&h(e,["uris"],t),e}function k2(n,e){const t={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),t}function O2(n){const e={},t=f(n,["config"]);return t!=null&&k2(t,e),e}function q2(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const r=f(n,["files"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["files"],l)}return e}function G2(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["files"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>l)),h(e,["files"],r)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class B2 extends lo{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Ks(ao.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async registerFiles(e){throw new Error("registerFiles is only supported in Node.js environments.")}async _registerFiles(e){return this.registerFilesInternal(e)}async listInternal(e){var t,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=O2(e);return l=fe("files",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(m=>{const _=m;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>{const m=q2(g),_=new FM;return Object.assign(_,m),_})}}async createInternal(e){var t,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=M2(e);return l=fe("upload/v1beta/files",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>{const m=D2(g),_=new HM;return Object.assign(_,m),_})}}async get(e){var t,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=U2(e);return l=fe("files/{file}",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async delete(e){var t,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=V2(e);return l=fe("files/{file}",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(m=>{const _=m;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>{const m=P2(g),_=new zM;return Object.assign(_,m),_})}}async registerFilesInternal(e){var t,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=L2(e);return l=fe("files:register",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>{const m=G2(g),_=new JM;return Object.assign(_,m),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Fc(n){const e={},t=f(n,["data"]);if(t!=null&&h(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(n,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function F2(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>oV(l))),h(e,["parts"],r)}const o=f(n,["role"]);return o!=null&&h(e,["role"],o),e}function H2(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const o=f(n,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function z2(n){const e={},t=f(n,["id"]);t!=null&&h(e,["id"],t);const o=f(n,["args"]);o!=null&&h(e,["args"],o);const r=f(n,["name"]);if(r!=null&&h(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function J2(n){const e={},t=f(n,["description"]);t!=null&&h(e,["description"],t);const o=f(n,["name"]);o!=null&&h(e,["name"],o);const r=f(n,["parameters"]);r!=null&&h(e,["parameters"],r);const l=f(n,["parametersJsonSchema"]);l!=null&&h(e,["parametersJsonSchema"],l);const u=f(n,["response"]);u!=null&&h(e,["response"],u);const d=f(n,["responseJsonSchema"]);if(d!=null&&h(e,["responseJsonSchema"],d),f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function Y2(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&h(e,["modelConfig"],t);const o=f(n,["responseJsonSchema"]);o!=null&&h(e,["responseJsonSchema"],o);const r=f(n,["audioTimestamp"]);r!=null&&h(e,["audioTimestamp"],r);const l=f(n,["candidateCount"]);l!=null&&h(e,["candidateCount"],l);const u=f(n,["enableAffectiveDialog"]);u!=null&&h(e,["enableAffectiveDialog"],u);const d=f(n,["frequencyPenalty"]);d!=null&&h(e,["frequencyPenalty"],d);const g=f(n,["logprobs"]);g!=null&&h(e,["logprobs"],g);const m=f(n,["maxOutputTokens"]);m!=null&&h(e,["maxOutputTokens"],m);const _=f(n,["mediaResolution"]);_!=null&&h(e,["mediaResolution"],_);const T=f(n,["presencePenalty"]);T!=null&&h(e,["presencePenalty"],T);const E=f(n,["responseLogprobs"]);E!=null&&h(e,["responseLogprobs"],E);const R=f(n,["responseMimeType"]);R!=null&&h(e,["responseMimeType"],R);const P=f(n,["responseModalities"]);P!=null&&h(e,["responseModalities"],P);const B=f(n,["responseSchema"]);B!=null&&h(e,["responseSchema"],B);const O=f(n,["routingConfig"]);O!=null&&h(e,["routingConfig"],O);const $=f(n,["seed"]);$!=null&&h(e,["seed"],$);const se=f(n,["speechConfig"]);se!=null&&h(e,["speechConfig"],se);const j=f(n,["stopSequences"]);j!=null&&h(e,["stopSequences"],j);const re=f(n,["temperature"]);re!=null&&h(e,["temperature"],re);const W=f(n,["thinkingConfig"]);W!=null&&h(e,["thinkingConfig"],W);const de=f(n,["topK"]);de!=null&&h(e,["topK"],de);const M=f(n,["topP"]);if(M!=null&&h(e,["topP"],M),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function K2(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function Q2(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function $2(n,e){const t={},o=f(n,["generationConfig"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig"],o);const r=f(n,["responseModalities"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig","responseModalities"],r);const l=f(n,["temperature"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","temperature"],l);const u=f(n,["topP"]);e!==void 0&&u!=null&&h(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&h(e,["setup","generationConfig","topK"],d);const g=f(n,["maxOutputTokens"]);e!==void 0&&g!=null&&h(e,["setup","generationConfig","maxOutputTokens"],g);const m=f(n,["mediaResolution"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","mediaResolution"],m);const _=f(n,["seed"]);e!==void 0&&_!=null&&h(e,["setup","generationConfig","seed"],_);const T=f(n,["speechConfig"]);e!==void 0&&T!=null&&h(e,["setup","generationConfig","speechConfig"],Am(T));const E=f(n,["thinkingConfig"]);e!==void 0&&E!=null&&h(e,["setup","generationConfig","thinkingConfig"],E);const R=f(n,["enableAffectiveDialog"]);e!==void 0&&R!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],R);const P=f(n,["systemInstruction"]);e!==void 0&&P!=null&&h(e,["setup","systemInstruction"],F2(sn(P)));const B=f(n,["tools"]);if(e!==void 0&&B!=null){let de=ca(B);Array.isArray(de)&&(de=de.map(M=>rV(ua(M)))),h(e,["setup","tools"],de)}const O=f(n,["sessionResumption"]);e!==void 0&&O!=null&&h(e,["setup","sessionResumption"],sV(O));const $=f(n,["inputAudioTranscription"]);e!==void 0&&$!=null&&h(e,["setup","inputAudioTranscription"],$);const se=f(n,["outputAudioTranscription"]);e!==void 0&&se!=null&&h(e,["setup","outputAudioTranscription"],se);const j=f(n,["realtimeInputConfig"]);e!==void 0&&j!=null&&h(e,["setup","realtimeInputConfig"],j);const re=f(n,["contextWindowCompression"]);e!==void 0&&re!=null&&h(e,["setup","contextWindowCompression"],re);const W=f(n,["proactivity"]);if(e!==void 0&&W!=null&&h(e,["setup","proactivity"],W),f(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function X2(n,e){const t={},o=f(n,["generationConfig"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig"],Y2(o));const r=f(n,["responseModalities"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig","responseModalities"],r);const l=f(n,["temperature"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","temperature"],l);const u=f(n,["topP"]);e!==void 0&&u!=null&&h(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&h(e,["setup","generationConfig","topK"],d);const g=f(n,["maxOutputTokens"]);e!==void 0&&g!=null&&h(e,["setup","generationConfig","maxOutputTokens"],g);const m=f(n,["mediaResolution"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","mediaResolution"],m);const _=f(n,["seed"]);e!==void 0&&_!=null&&h(e,["setup","generationConfig","seed"],_);const T=f(n,["speechConfig"]);e!==void 0&&T!=null&&h(e,["setup","generationConfig","speechConfig"],Am(T));const E=f(n,["thinkingConfig"]);e!==void 0&&E!=null&&h(e,["setup","generationConfig","thinkingConfig"],E);const R=f(n,["enableAffectiveDialog"]);e!==void 0&&R!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],R);const P=f(n,["systemInstruction"]);e!==void 0&&P!=null&&h(e,["setup","systemInstruction"],sn(P));const B=f(n,["tools"]);if(e!==void 0&&B!=null){let M=ca(B);Array.isArray(M)&&(M=M.map(x=>aV(ua(x)))),h(e,["setup","tools"],M)}const O=f(n,["sessionResumption"]);e!==void 0&&O!=null&&h(e,["setup","sessionResumption"],O);const $=f(n,["inputAudioTranscription"]);e!==void 0&&$!=null&&h(e,["setup","inputAudioTranscription"],$);const se=f(n,["outputAudioTranscription"]);e!==void 0&&se!=null&&h(e,["setup","outputAudioTranscription"],se);const j=f(n,["realtimeInputConfig"]);e!==void 0&&j!=null&&h(e,["setup","realtimeInputConfig"],j);const re=f(n,["contextWindowCompression"]);e!==void 0&&re!=null&&h(e,["setup","contextWindowCompression"],re);const W=f(n,["proactivity"]);e!==void 0&&W!=null&&h(e,["setup","proactivity"],W);const de=f(n,["explicitVadSignal"]);return e!==void 0&&de!=null&&h(e,["setup","explicitVadSignal"],de),t}function W2(n,e){const t={},o=f(e,["model"]);o!=null&&h(t,["setup","model"],Ye(n,o));const r=f(e,["config"]);return r!=null&&h(t,["config"],$2(r,t)),t}function Z2(n,e){const t={},o=f(e,["model"]);o!=null&&h(t,["setup","model"],Ye(n,o));const r=f(e,["config"]);return r!=null&&h(t,["config"],X2(r,t)),t}function j2(n){const e={},t=f(n,["musicGenerationConfig"]);return t!=null&&h(e,["musicGenerationConfig"],t),e}function eV(n){const e={},t=f(n,["weightedPrompts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>r)),h(e,["weightedPrompts"],o)}return e}function tV(n){const e={},t=f(n,["media"]);if(t!=null){let m=tA(t);Array.isArray(m)&&(m=m.map(_=>Fc(_))),h(e,["mediaChunks"],m)}const o=f(n,["audio"]);o!=null&&h(e,["audio"],Fc(iA(o)));const r=f(n,["audioStreamEnd"]);r!=null&&h(e,["audioStreamEnd"],r);const l=f(n,["video"]);l!=null&&h(e,["video"],Fc(nA(l)));const u=f(n,["text"]);u!=null&&h(e,["text"],u);const d=f(n,["activityStart"]);d!=null&&h(e,["activityStart"],d);const g=f(n,["activityEnd"]);return g!=null&&h(e,["activityEnd"],g),e}function nV(n){const e={},t=f(n,["media"]);if(t!=null){let m=tA(t);Array.isArray(m)&&(m=m.map(_=>_)),h(e,["mediaChunks"],m)}const o=f(n,["audio"]);o!=null&&h(e,["audio"],iA(o));const r=f(n,["audioStreamEnd"]);r!=null&&h(e,["audioStreamEnd"],r);const l=f(n,["video"]);l!=null&&h(e,["video"],nA(l));const u=f(n,["text"]);u!=null&&h(e,["text"],u);const d=f(n,["activityStart"]);d!=null&&h(e,["activityStart"],d);const g=f(n,["activityEnd"]);return g!=null&&h(e,["activityEnd"],g),e}function iV(n){const e={},t=f(n,["setupComplete"]);t!=null&&h(e,["setupComplete"],t);const o=f(n,["serverContent"]);o!=null&&h(e,["serverContent"],o);const r=f(n,["toolCall"]);r!=null&&h(e,["toolCall"],r);const l=f(n,["toolCallCancellation"]);l!=null&&h(e,["toolCallCancellation"],l);const u=f(n,["usageMetadata"]);u!=null&&h(e,["usageMetadata"],lV(u));const d=f(n,["goAway"]);d!=null&&h(e,["goAway"],d);const g=f(n,["sessionResumptionUpdate"]);g!=null&&h(e,["sessionResumptionUpdate"],g);const m=f(n,["voiceActivityDetectionSignal"]);m!=null&&h(e,["voiceActivityDetectionSignal"],m);const _=f(n,["voiceActivity"]);return _!=null&&h(e,["voiceActivity"],uV(_)),e}function oV(n){const e={},t=f(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const o=f(n,["codeExecutionResult"]);o!=null&&h(e,["codeExecutionResult"],o);const r=f(n,["executableCode"]);r!=null&&h(e,["executableCode"],r);const l=f(n,["fileData"]);l!=null&&h(e,["fileData"],H2(l));const u=f(n,["functionCall"]);u!=null&&h(e,["functionCall"],z2(u));const d=f(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const g=f(n,["inlineData"]);g!=null&&h(e,["inlineData"],Fc(g));const m=f(n,["text"]);m!=null&&h(e,["text"],m);const _=f(n,["thought"]);_!=null&&h(e,["thought"],_);const T=f(n,["thoughtSignature"]);T!=null&&h(e,["thoughtSignature"],T);const E=f(n,["videoMetadata"]);return E!=null&&h(e,["videoMetadata"],E),e}function sV(n){const e={},t=f(n,["handle"]);if(t!=null&&h(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function rV(n){const e={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=f(n,["computerUse"]);t!=null&&h(e,["computerUse"],t);const o=f(n,["fileSearch"]);o!=null&&h(e,["fileSearch"],o);const r=f(n,["codeExecution"]);if(r!=null&&h(e,["codeExecution"],r),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(n,["functionDeclarations"]);if(l!=null){let _=l;Array.isArray(_)&&(_=_.map(T=>T)),h(e,["functionDeclarations"],_)}const u=f(n,["googleMaps"]);u!=null&&h(e,["googleMaps"],K2(u));const d=f(n,["googleSearch"]);d!=null&&h(e,["googleSearch"],Q2(d));const g=f(n,["googleSearchRetrieval"]);g!=null&&h(e,["googleSearchRetrieval"],g);const m=f(n,["urlContext"]);return m!=null&&h(e,["urlContext"],m),e}function aV(n){const e={},t=f(n,["retrieval"]);t!=null&&h(e,["retrieval"],t);const o=f(n,["computerUse"]);if(o!=null&&h(e,["computerUse"],o),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=f(n,["codeExecution"]);r!=null&&h(e,["codeExecution"],r);const l=f(n,["enterpriseWebSearch"]);l!=null&&h(e,["enterpriseWebSearch"],l);const u=f(n,["functionDeclarations"]);if(u!=null){let T=u;Array.isArray(T)&&(T=T.map(E=>J2(E))),h(e,["functionDeclarations"],T)}const d=f(n,["googleMaps"]);d!=null&&h(e,["googleMaps"],d);const g=f(n,["googleSearch"]);g!=null&&h(e,["googleSearch"],g);const m=f(n,["googleSearchRetrieval"]);m!=null&&h(e,["googleSearchRetrieval"],m);const _=f(n,["urlContext"]);return _!=null&&h(e,["urlContext"],_),e}function lV(n){const e={},t=f(n,["promptTokenCount"]);t!=null&&h(e,["promptTokenCount"],t);const o=f(n,["cachedContentTokenCount"]);o!=null&&h(e,["cachedContentTokenCount"],o);const r=f(n,["candidatesTokenCount"]);r!=null&&h(e,["responseTokenCount"],r);const l=f(n,["toolUsePromptTokenCount"]);l!=null&&h(e,["toolUsePromptTokenCount"],l);const u=f(n,["thoughtsTokenCount"]);u!=null&&h(e,["thoughtsTokenCount"],u);const d=f(n,["totalTokenCount"]);d!=null&&h(e,["totalTokenCount"],d);const g=f(n,["promptTokensDetails"]);if(g!=null){let R=g;Array.isArray(R)&&(R=R.map(P=>P)),h(e,["promptTokensDetails"],R)}const m=f(n,["cacheTokensDetails"]);if(m!=null){let R=m;Array.isArray(R)&&(R=R.map(P=>P)),h(e,["cacheTokensDetails"],R)}const _=f(n,["candidatesTokensDetails"]);if(_!=null){let R=_;Array.isArray(R)&&(R=R.map(P=>P)),h(e,["responseTokensDetails"],R)}const T=f(n,["toolUsePromptTokensDetails"]);if(T!=null){let R=T;Array.isArray(R)&&(R=R.map(P=>P)),h(e,["toolUsePromptTokensDetails"],R)}const E=f(n,["trafficType"]);return E!=null&&h(e,["trafficType"],E),e}function uV(n){const e={},t=f(n,["type"]);return t!=null&&h(e,["voiceActivityType"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cV(n,e){const t={},o=f(n,["data"]);if(o!=null&&h(t,["data"],o),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=f(n,["mimeType"]);return r!=null&&h(t,["mimeType"],r),t}function fV(n,e){const t={},o=f(n,["content"]);o!=null&&h(t,["content"],o);const r=f(n,["citationMetadata"]);r!=null&&h(t,["citationMetadata"],dV(r));const l=f(n,["tokenCount"]);l!=null&&h(t,["tokenCount"],l);const u=f(n,["finishReason"]);u!=null&&h(t,["finishReason"],u);const d=f(n,["avgLogprobs"]);d!=null&&h(t,["avgLogprobs"],d);const g=f(n,["groundingMetadata"]);g!=null&&h(t,["groundingMetadata"],g);const m=f(n,["index"]);m!=null&&h(t,["index"],m);const _=f(n,["logprobsResult"]);_!=null&&h(t,["logprobsResult"],_);const T=f(n,["safetyRatings"]);if(T!=null){let R=T;Array.isArray(R)&&(R=R.map(P=>P)),h(t,["safetyRatings"],R)}const E=f(n,["urlContextMetadata"]);return E!=null&&h(t,["urlContextMetadata"],E),t}function dV(n,e){const t={},o=f(n,["citationSources"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>l)),h(t,["citations"],r)}return t}function hV(n,e,t){const o={},r=f(e,["model"]);r!=null&&h(o,["_url","model"],Ye(n,r));const l=f(e,["contents"]);if(l!=null){let u=zn(l);Array.isArray(u)&&(u=u.map(d=>d)),h(o,["contents"],u)}return o}function pV(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&h(t,["sdkHttpResponse"],o);const r=f(n,["tokensInfo"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),h(t,["tokensInfo"],l)}return t}function mV(n,e){const t={},o=f(n,["values"]);o!=null&&h(t,["values"],o);const r=f(n,["statistics"]);return r!=null&&h(t,["statistics"],gV(r)),t}function gV(n,e){const t={},o=f(n,["truncated"]);o!=null&&h(t,["truncated"],o);const r=f(n,["token_count"]);return r!=null&&h(t,["tokenCount"],r),t}function Rf(n,e){const t={},o=f(n,["parts"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>IP(u))),h(t,["parts"],l)}const r=f(n,["role"]);return r!=null&&h(t,["role"],r),t}function yV(n,e){const t={},o=f(n,["controlType"]);o!=null&&h(t,["controlType"],o);const r=f(n,["enableControlImageComputation"]);return r!=null&&h(t,["computeControl"],r),t}function vV(n,e){const t={};if(f(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function _V(n,e,t){const o={},r=f(n,["systemInstruction"]);e!==void 0&&r!=null&&h(e,["systemInstruction"],sn(r));const l=f(n,["tools"]);if(e!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(g=>yA(g))),h(e,["tools"],d)}const u=f(n,["generationConfig"]);return e!==void 0&&u!=null&&h(e,["generationConfig"],cP(u)),o}function EV(n,e,t){const o={},r=f(e,["model"]);r!=null&&h(o,["_url","model"],Ye(n,r));const l=f(e,["contents"]);if(l!=null){let d=zn(l);Array.isArray(d)&&(d=d.map(g=>Rf(g))),h(o,["contents"],d)}const u=f(e,["config"]);return u!=null&&vV(u),o}function TV(n,e,t){const o={},r=f(e,["model"]);r!=null&&h(o,["_url","model"],Ye(n,r));const l=f(e,["contents"]);if(l!=null){let d=zn(l);Array.isArray(d)&&(d=d.map(g=>g)),h(o,["contents"],d)}const u=f(e,["config"]);return u!=null&&_V(u,o),o}function SV(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&h(t,["sdkHttpResponse"],o);const r=f(n,["totalTokens"]);r!=null&&h(t,["totalTokens"],r);const l=f(n,["cachedContentTokenCount"]);return l!=null&&h(t,["cachedContentTokenCount"],l),t}function AV(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&h(t,["sdkHttpResponse"],o);const r=f(n,["totalTokens"]);return r!=null&&h(t,["totalTokens"],r),t}function CV(n,e,t){const o={},r=f(e,["model"]);return r!=null&&h(o,["_url","name"],Ye(n,r)),o}function IV(n,e,t){const o={},r=f(e,["model"]);return r!=null&&h(o,["_url","name"],Ye(n,r)),o}function RV(n,e){const t={},o=f(n,["sdkHttpResponse"]);return o!=null&&h(t,["sdkHttpResponse"],o),t}function wV(n,e){const t={},o=f(n,["sdkHttpResponse"]);return o!=null&&h(t,["sdkHttpResponse"],o),t}function bV(n,e,t){const o={},r=f(n,["outputGcsUri"]);e!==void 0&&r!=null&&h(e,["parameters","storageUri"],r);const l=f(n,["negativePrompt"]);e!==void 0&&l!=null&&h(e,["parameters","negativePrompt"],l);const u=f(n,["numberOfImages"]);e!==void 0&&u!=null&&h(e,["parameters","sampleCount"],u);const d=f(n,["aspectRatio"]);e!==void 0&&d!=null&&h(e,["parameters","aspectRatio"],d);const g=f(n,["guidanceScale"]);e!==void 0&&g!=null&&h(e,["parameters","guidanceScale"],g);const m=f(n,["seed"]);e!==void 0&&m!=null&&h(e,["parameters","seed"],m);const _=f(n,["safetyFilterLevel"]);e!==void 0&&_!=null&&h(e,["parameters","safetySetting"],_);const T=f(n,["personGeneration"]);e!==void 0&&T!=null&&h(e,["parameters","personGeneration"],T);const E=f(n,["includeSafetyAttributes"]);e!==void 0&&E!=null&&h(e,["parameters","includeSafetyAttributes"],E);const R=f(n,["includeRaiReason"]);e!==void 0&&R!=null&&h(e,["parameters","includeRaiReason"],R);const P=f(n,["language"]);e!==void 0&&P!=null&&h(e,["parameters","language"],P);const B=f(n,["outputMimeType"]);e!==void 0&&B!=null&&h(e,["parameters","outputOptions","mimeType"],B);const O=f(n,["outputCompressionQuality"]);e!==void 0&&O!=null&&h(e,["parameters","outputOptions","compressionQuality"],O);const $=f(n,["addWatermark"]);e!==void 0&&$!=null&&h(e,["parameters","addWatermark"],$);const se=f(n,["labels"]);e!==void 0&&se!=null&&h(e,["labels"],se);const j=f(n,["editMode"]);e!==void 0&&j!=null&&h(e,["parameters","editMode"],j);const re=f(n,["baseSteps"]);return e!==void 0&&re!=null&&h(e,["parameters","editConfig","baseSteps"],re),o}function NV(n,e,t){const o={},r=f(e,["model"]);r!=null&&h(o,["_url","model"],Ye(n,r));const l=f(e,["prompt"]);l!=null&&h(o,["instances[0]","prompt"],l);const u=f(e,["referenceImages"]);if(u!=null){let g=u;Array.isArray(g)&&(g=g.map(m=>MP(m))),h(o,["instances[0]","referenceImages"],g)}const d=f(e,["config"]);return d!=null&&bV(d,o),o}function xV(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&h(t,["sdkHttpResponse"],o);const r=f(n,["predictions"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>wf(u))),h(t,["generatedImages"],l)}return t}function MV(n,e,t){const o={},r=f(n,["taskType"]);e!==void 0&&r!=null&&h(e,["requests[]","taskType"],r);const l=f(n,["title"]);e!==void 0&&l!=null&&h(e,["requests[]","title"],l);const u=f(n,["outputDimensionality"]);if(e!==void 0&&u!=null&&h(e,["requests[]","outputDimensionality"],u),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return o}function DV(n,e,t){const o={},r=f(n,["taskType"]);e!==void 0&&r!=null&&h(e,["instances[]","task_type"],r);const l=f(n,["title"]);e!==void 0&&l!=null&&h(e,["instances[]","title"],l);const u=f(n,["outputDimensionality"]);e!==void 0&&u!=null&&h(e,["parameters","outputDimensionality"],u);const d=f(n,["mimeType"]);e!==void 0&&d!=null&&h(e,["instances[]","mimeType"],d);const g=f(n,["autoTruncate"]);return e!==void 0&&g!=null&&h(e,["parameters","autoTruncate"],g),o}function VV(n,e,t){const o={},r=f(e,["model"]);r!=null&&h(o,["_url","model"],Ye(n,r));const l=f(e,["contents"]);if(l!=null){let g=Em(n,l);Array.isArray(g)&&(g=g.map(m=>m)),h(o,["requests[]","content"],g)}const u=f(e,["config"]);u!=null&&MV(u,o);const d=f(e,["model"]);return d!==void 0&&h(o,["requests[]","model"],Ye(n,d)),o}function PV(n,e,t){const o={},r=f(e,["model"]);r!=null&&h(o,["_url","model"],Ye(n,r));const l=f(e,["contents"]);if(l!=null){let d=Em(n,l);Array.isArray(d)&&(d=d.map(g=>g)),h(o,["instances[]","content"],d)}const u=f(e,["config"]);return u!=null&&DV(u,o),o}function UV(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&h(t,["sdkHttpResponse"],o);const r=f(n,["embeddings"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>d)),h(t,["embeddings"],u)}const l=f(n,["metadata"]);return l!=null&&h(t,["metadata"],l),t}function LV(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&h(t,["sdkHttpResponse"],o);const r=f(n,["predictions[]","embeddings"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>mV(d))),h(t,["embeddings"],u)}const l=f(n,["metadata"]);return l!=null&&h(t,["metadata"],l),t}function kV(n,e){const t={},o=f(n,["endpoint"]);o!=null&&h(t,["name"],o);const r=f(n,["deployedModelId"]);return r!=null&&h(t,["deployedModelId"],r),t}function OV(n,e){const t={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(n,["fileUri"]);o!=null&&h(t,["fileUri"],o);const r=f(n,["mimeType"]);return r!=null&&h(t,["mimeType"],r),t}function qV(n,e){const t={},o=f(n,["id"]);o!=null&&h(t,["id"],o);const r=f(n,["args"]);r!=null&&h(t,["args"],r);const l=f(n,["name"]);if(l!=null&&h(t,["name"],l),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function GV(n,e){const t={},o=f(n,["allowedFunctionNames"]);o!=null&&h(t,["allowedFunctionNames"],o);const r=f(n,["mode"]);if(r!=null&&h(t,["mode"],r),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function BV(n,e){const t={},o=f(n,["description"]);o!=null&&h(t,["description"],o);const r=f(n,["name"]);r!=null&&h(t,["name"],r);const l=f(n,["parameters"]);l!=null&&h(t,["parameters"],l);const u=f(n,["parametersJsonSchema"]);u!=null&&h(t,["parametersJsonSchema"],u);const d=f(n,["response"]);d!=null&&h(t,["response"],d);const g=f(n,["responseJsonSchema"]);if(g!=null&&h(t,["responseJsonSchema"],g),f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return t}function FV(n,e,t,o){const r={},l=f(e,["systemInstruction"]);t!==void 0&&l!=null&&h(t,["systemInstruction"],Rf(sn(l)));const u=f(e,["temperature"]);u!=null&&h(r,["temperature"],u);const d=f(e,["topP"]);d!=null&&h(r,["topP"],d);const g=f(e,["topK"]);g!=null&&h(r,["topK"],g);const m=f(e,["candidateCount"]);m!=null&&h(r,["candidateCount"],m);const _=f(e,["maxOutputTokens"]);_!=null&&h(r,["maxOutputTokens"],_);const T=f(e,["stopSequences"]);T!=null&&h(r,["stopSequences"],T);const E=f(e,["responseLogprobs"]);E!=null&&h(r,["responseLogprobs"],E);const R=f(e,["logprobs"]);R!=null&&h(r,["logprobs"],R);const P=f(e,["presencePenalty"]);P!=null&&h(r,["presencePenalty"],P);const B=f(e,["frequencyPenalty"]);B!=null&&h(r,["frequencyPenalty"],B);const O=f(e,["seed"]);O!=null&&h(r,["seed"],O);const $=f(e,["responseMimeType"]);$!=null&&h(r,["responseMimeType"],$);const se=f(e,["responseSchema"]);se!=null&&h(r,["responseSchema"],Tm(se));const j=f(e,["responseJsonSchema"]);if(j!=null&&h(r,["responseJsonSchema"],j),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const re=f(e,["safetySettings"]);if(t!==void 0&&re!=null){let ae=re;Array.isArray(ae)&&(ae=ae.map(be=>DP(be))),h(t,["safetySettings"],ae)}const W=f(e,["tools"]);if(t!==void 0&&W!=null){let ae=ca(W);Array.isArray(ae)&&(ae=ae.map(be=>qP(ua(be)))),h(t,["tools"],ae)}const de=f(e,["toolConfig"]);if(t!==void 0&&de!=null&&h(t,["toolConfig"],OP(de)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const M=f(e,["cachedContent"]);t!==void 0&&M!=null&&h(t,["cachedContent"],uo(n,M));const x=f(e,["responseModalities"]);x!=null&&h(r,["responseModalities"],x);const N=f(e,["mediaResolution"]);N!=null&&h(r,["mediaResolution"],N);const L=f(e,["speechConfig"]);if(L!=null&&h(r,["speechConfig"],Sm(L)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const U=f(e,["thinkingConfig"]);U!=null&&h(r,["thinkingConfig"],U);const G=f(e,["imageConfig"]);G!=null&&h(r,["imageConfig"],mP(G));const D=f(e,["enableEnhancedCivicAnswers"]);if(D!=null&&h(r,["enableEnhancedCivicAnswers"],D),f(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return r}function HV(n,e,t,o){const r={},l=f(e,["systemInstruction"]);t!==void 0&&l!=null&&h(t,["systemInstruction"],sn(l));const u=f(e,["temperature"]);u!=null&&h(r,["temperature"],u);const d=f(e,["topP"]);d!=null&&h(r,["topP"],d);const g=f(e,["topK"]);g!=null&&h(r,["topK"],g);const m=f(e,["candidateCount"]);m!=null&&h(r,["candidateCount"],m);const _=f(e,["maxOutputTokens"]);_!=null&&h(r,["maxOutputTokens"],_);const T=f(e,["stopSequences"]);T!=null&&h(r,["stopSequences"],T);const E=f(e,["responseLogprobs"]);E!=null&&h(r,["responseLogprobs"],E);const R=f(e,["logprobs"]);R!=null&&h(r,["logprobs"],R);const P=f(e,["presencePenalty"]);P!=null&&h(r,["presencePenalty"],P);const B=f(e,["frequencyPenalty"]);B!=null&&h(r,["frequencyPenalty"],B);const O=f(e,["seed"]);O!=null&&h(r,["seed"],O);const $=f(e,["responseMimeType"]);$!=null&&h(r,["responseMimeType"],$);const se=f(e,["responseSchema"]);se!=null&&h(r,["responseSchema"],Tm(se));const j=f(e,["responseJsonSchema"]);j!=null&&h(r,["responseJsonSchema"],j);const re=f(e,["routingConfig"]);re!=null&&h(r,["routingConfig"],re);const W=f(e,["modelSelectionConfig"]);W!=null&&h(r,["modelConfig"],W);const de=f(e,["safetySettings"]);if(t!==void 0&&de!=null){let ye=de;Array.isArray(ye)&&(ye=ye.map(Ve=>Ve)),h(t,["safetySettings"],ye)}const M=f(e,["tools"]);if(t!==void 0&&M!=null){let ye=ca(M);Array.isArray(ye)&&(ye=ye.map(Ve=>yA(ua(Ve)))),h(t,["tools"],ye)}const x=f(e,["toolConfig"]);t!==void 0&&x!=null&&h(t,["toolConfig"],x);const N=f(e,["labels"]);t!==void 0&&N!=null&&h(t,["labels"],N);const L=f(e,["cachedContent"]);t!==void 0&&L!=null&&h(t,["cachedContent"],uo(n,L));const U=f(e,["responseModalities"]);U!=null&&h(r,["responseModalities"],U);const G=f(e,["mediaResolution"]);G!=null&&h(r,["mediaResolution"],G);const D=f(e,["speechConfig"]);D!=null&&h(r,["speechConfig"],Sm(D));const ae=f(e,["audioTimestamp"]);ae!=null&&h(r,["audioTimestamp"],ae);const be=f(e,["thinkingConfig"]);be!=null&&h(r,["thinkingConfig"],be);const X=f(e,["imageConfig"]);if(X!=null&&h(r,["imageConfig"],gP(X)),f(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const le=f(e,["modelArmorConfig"]);return t!==void 0&&le!=null&&h(t,["modelArmorConfig"],le),r}function VE(n,e,t){const o={},r=f(e,["model"]);r!=null&&h(o,["_url","model"],Ye(n,r));const l=f(e,["contents"]);if(l!=null){let d=zn(l);Array.isArray(d)&&(d=d.map(g=>Rf(g))),h(o,["contents"],d)}const u=f(e,["config"]);return u!=null&&h(o,["generationConfig"],FV(n,u,o)),o}function PE(n,e,t){const o={},r=f(e,["model"]);r!=null&&h(o,["_url","model"],Ye(n,r));const l=f(e,["contents"]);if(l!=null){let d=zn(l);Array.isArray(d)&&(d=d.map(g=>g)),h(o,["contents"],d)}const u=f(e,["config"]);return u!=null&&h(o,["generationConfig"],HV(n,u,o)),o}function UE(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&h(t,["sdkHttpResponse"],o);const r=f(n,["candidates"]);if(r!=null){let m=r;Array.isArray(m)&&(m=m.map(_=>fV(_))),h(t,["candidates"],m)}const l=f(n,["modelVersion"]);l!=null&&h(t,["modelVersion"],l);const u=f(n,["promptFeedback"]);u!=null&&h(t,["promptFeedback"],u);const d=f(n,["responseId"]);d!=null&&h(t,["responseId"],d);const g=f(n,["usageMetadata"]);return g!=null&&h(t,["usageMetadata"],g),t}function LE(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&h(t,["sdkHttpResponse"],o);const r=f(n,["candidates"]);if(r!=null){let _=r;Array.isArray(_)&&(_=_.map(T=>T)),h(t,["candidates"],_)}const l=f(n,["createTime"]);l!=null&&h(t,["createTime"],l);const u=f(n,["modelVersion"]);u!=null&&h(t,["modelVersion"],u);const d=f(n,["promptFeedback"]);d!=null&&h(t,["promptFeedback"],d);const g=f(n,["responseId"]);g!=null&&h(t,["responseId"],g);const m=f(n,["usageMetadata"]);return m!=null&&h(t,["usageMetadata"],m),t}function zV(n,e,t){const o={};if(f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=f(n,["numberOfImages"]);e!==void 0&&r!=null&&h(e,["parameters","sampleCount"],r);const l=f(n,["aspectRatio"]);e!==void 0&&l!=null&&h(e,["parameters","aspectRatio"],l);const u=f(n,["guidanceScale"]);if(e!==void 0&&u!=null&&h(e,["parameters","guidanceScale"],u),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const d=f(n,["safetyFilterLevel"]);e!==void 0&&d!=null&&h(e,["parameters","safetySetting"],d);const g=f(n,["personGeneration"]);e!==void 0&&g!=null&&h(e,["parameters","personGeneration"],g);const m=f(n,["includeSafetyAttributes"]);e!==void 0&&m!=null&&h(e,["parameters","includeSafetyAttributes"],m);const _=f(n,["includeRaiReason"]);e!==void 0&&_!=null&&h(e,["parameters","includeRaiReason"],_);const T=f(n,["language"]);e!==void 0&&T!=null&&h(e,["parameters","language"],T);const E=f(n,["outputMimeType"]);e!==void 0&&E!=null&&h(e,["parameters","outputOptions","mimeType"],E);const R=f(n,["outputCompressionQuality"]);if(e!==void 0&&R!=null&&h(e,["parameters","outputOptions","compressionQuality"],R),f(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const P=f(n,["imageSize"]);if(e!==void 0&&P!=null&&h(e,["parameters","sampleImageSize"],P),f(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return o}function JV(n,e,t){const o={},r=f(n,["outputGcsUri"]);e!==void 0&&r!=null&&h(e,["parameters","storageUri"],r);const l=f(n,["negativePrompt"]);e!==void 0&&l!=null&&h(e,["parameters","negativePrompt"],l);const u=f(n,["numberOfImages"]);e!==void 0&&u!=null&&h(e,["parameters","sampleCount"],u);const d=f(n,["aspectRatio"]);e!==void 0&&d!=null&&h(e,["parameters","aspectRatio"],d);const g=f(n,["guidanceScale"]);e!==void 0&&g!=null&&h(e,["parameters","guidanceScale"],g);const m=f(n,["seed"]);e!==void 0&&m!=null&&h(e,["parameters","seed"],m);const _=f(n,["safetyFilterLevel"]);e!==void 0&&_!=null&&h(e,["parameters","safetySetting"],_);const T=f(n,["personGeneration"]);e!==void 0&&T!=null&&h(e,["parameters","personGeneration"],T);const E=f(n,["includeSafetyAttributes"]);e!==void 0&&E!=null&&h(e,["parameters","includeSafetyAttributes"],E);const R=f(n,["includeRaiReason"]);e!==void 0&&R!=null&&h(e,["parameters","includeRaiReason"],R);const P=f(n,["language"]);e!==void 0&&P!=null&&h(e,["parameters","language"],P);const B=f(n,["outputMimeType"]);e!==void 0&&B!=null&&h(e,["parameters","outputOptions","mimeType"],B);const O=f(n,["outputCompressionQuality"]);e!==void 0&&O!=null&&h(e,["parameters","outputOptions","compressionQuality"],O);const $=f(n,["addWatermark"]);e!==void 0&&$!=null&&h(e,["parameters","addWatermark"],$);const se=f(n,["labels"]);e!==void 0&&se!=null&&h(e,["labels"],se);const j=f(n,["imageSize"]);e!==void 0&&j!=null&&h(e,["parameters","sampleImageSize"],j);const re=f(n,["enhancePrompt"]);return e!==void 0&&re!=null&&h(e,["parameters","enhancePrompt"],re),o}function YV(n,e,t){const o={},r=f(e,["model"]);r!=null&&h(o,["_url","model"],Ye(n,r));const l=f(e,["prompt"]);l!=null&&h(o,["instances[0]","prompt"],l);const u=f(e,["config"]);return u!=null&&zV(u,o),o}function KV(n,e,t){const o={},r=f(e,["model"]);r!=null&&h(o,["_url","model"],Ye(n,r));const l=f(e,["prompt"]);l!=null&&h(o,["instances[0]","prompt"],l);const u=f(e,["config"]);return u!=null&&JV(u,o),o}function QV(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&h(t,["sdkHttpResponse"],o);const r=f(n,["predictions"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>rP(d))),h(t,["generatedImages"],u)}const l=f(n,["positivePromptSafetyAttributes"]);return l!=null&&h(t,["positivePromptSafetyAttributes"],mA(l)),t}function $V(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&h(t,["sdkHttpResponse"],o);const r=f(n,["predictions"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>wf(d))),h(t,["generatedImages"],u)}const l=f(n,["positivePromptSafetyAttributes"]);return l!=null&&h(t,["positivePromptSafetyAttributes"],gA(l)),t}function XV(n,e,t){const o={},r=f(n,["numberOfVideos"]);if(e!==void 0&&r!=null&&h(e,["parameters","sampleCount"],r),f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const l=f(n,["durationSeconds"]);if(e!==void 0&&l!=null&&h(e,["parameters","durationSeconds"],l),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=f(n,["aspectRatio"]);e!==void 0&&u!=null&&h(e,["parameters","aspectRatio"],u);const d=f(n,["resolution"]);e!==void 0&&d!=null&&h(e,["parameters","resolution"],d);const g=f(n,["personGeneration"]);if(e!==void 0&&g!=null&&h(e,["parameters","personGeneration"],g),f(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const m=f(n,["negativePrompt"]);e!==void 0&&m!=null&&h(e,["parameters","negativePrompt"],m);const _=f(n,["enhancePrompt"]);if(e!==void 0&&_!=null&&h(e,["parameters","enhancePrompt"],_),f(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const T=f(n,["lastFrame"]);e!==void 0&&T!=null&&h(e,["instances[0]","lastFrame"],bf(T));const E=f(n,["referenceImages"]);if(e!==void 0&&E!=null){let R=E;Array.isArray(R)&&(R=R.map(P=>ZP(P))),h(e,["instances[0]","referenceImages"],R)}if(f(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return o}function WV(n,e,t){const o={},r=f(n,["numberOfVideos"]);e!==void 0&&r!=null&&h(e,["parameters","sampleCount"],r);const l=f(n,["outputGcsUri"]);e!==void 0&&l!=null&&h(e,["parameters","storageUri"],l);const u=f(n,["fps"]);e!==void 0&&u!=null&&h(e,["parameters","fps"],u);const d=f(n,["durationSeconds"]);e!==void 0&&d!=null&&h(e,["parameters","durationSeconds"],d);const g=f(n,["seed"]);e!==void 0&&g!=null&&h(e,["parameters","seed"],g);const m=f(n,["aspectRatio"]);e!==void 0&&m!=null&&h(e,["parameters","aspectRatio"],m);const _=f(n,["resolution"]);e!==void 0&&_!=null&&h(e,["parameters","resolution"],_);const T=f(n,["personGeneration"]);e!==void 0&&T!=null&&h(e,["parameters","personGeneration"],T);const E=f(n,["pubsubTopic"]);e!==void 0&&E!=null&&h(e,["parameters","pubsubTopic"],E);const R=f(n,["negativePrompt"]);e!==void 0&&R!=null&&h(e,["parameters","negativePrompt"],R);const P=f(n,["enhancePrompt"]);e!==void 0&&P!=null&&h(e,["parameters","enhancePrompt"],P);const B=f(n,["generateAudio"]);e!==void 0&&B!=null&&h(e,["parameters","generateAudio"],B);const O=f(n,["lastFrame"]);e!==void 0&&O!=null&&h(e,["instances[0]","lastFrame"],ui(O));const $=f(n,["referenceImages"]);if(e!==void 0&&$!=null){let re=$;Array.isArray(re)&&(re=re.map(W=>jP(W))),h(e,["instances[0]","referenceImages"],re)}const se=f(n,["mask"]);e!==void 0&&se!=null&&h(e,["instances[0]","mask"],WP(se));const j=f(n,["compressionQuality"]);return e!==void 0&&j!=null&&h(e,["parameters","compressionQuality"],j),o}function ZV(n,e){const t={},o=f(n,["name"]);o!=null&&h(t,["name"],o);const r=f(n,["metadata"]);r!=null&&h(t,["metadata"],r);const l=f(n,["done"]);l!=null&&h(t,["done"],l);const u=f(n,["error"]);u!=null&&h(t,["error"],u);const d=f(n,["response","generateVideoResponse"]);return d!=null&&h(t,["response"],nP(d)),t}function jV(n,e){const t={},o=f(n,["name"]);o!=null&&h(t,["name"],o);const r=f(n,["metadata"]);r!=null&&h(t,["metadata"],r);const l=f(n,["done"]);l!=null&&h(t,["done"],l);const u=f(n,["error"]);u!=null&&h(t,["error"],u);const d=f(n,["response"]);return d!=null&&h(t,["response"],iP(d)),t}function eP(n,e,t){const o={},r=f(e,["model"]);r!=null&&h(o,["_url","model"],Ye(n,r));const l=f(e,["prompt"]);l!=null&&h(o,["instances[0]","prompt"],l);const u=f(e,["image"]);u!=null&&h(o,["instances[0]","image"],bf(u));const d=f(e,["video"]);d!=null&&h(o,["instances[0]","video"],vA(d));const g=f(e,["source"]);g!=null&&oP(g,o);const m=f(e,["config"]);return m!=null&&XV(m,o),o}function tP(n,e,t){const o={},r=f(e,["model"]);r!=null&&h(o,["_url","model"],Ye(n,r));const l=f(e,["prompt"]);l!=null&&h(o,["instances[0]","prompt"],l);const u=f(e,["image"]);u!=null&&h(o,["instances[0]","image"],ui(u));const d=f(e,["video"]);d!=null&&h(o,["instances[0]","video"],_A(d));const g=f(e,["source"]);g!=null&&sP(g,o);const m=f(e,["config"]);return m!=null&&WV(m,o),o}function nP(n,e){const t={},o=f(n,["generatedSamples"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>lP(d))),h(t,["generatedVideos"],u)}const r=f(n,["raiMediaFilteredCount"]);r!=null&&h(t,["raiMediaFilteredCount"],r);const l=f(n,["raiMediaFilteredReasons"]);return l!=null&&h(t,["raiMediaFilteredReasons"],l),t}function iP(n,e){const t={},o=f(n,["videos"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>uP(d))),h(t,["generatedVideos"],u)}const r=f(n,["raiMediaFilteredCount"]);r!=null&&h(t,["raiMediaFilteredCount"],r);const l=f(n,["raiMediaFilteredReasons"]);return l!=null&&h(t,["raiMediaFilteredReasons"],l),t}function oP(n,e,t){const o={},r=f(n,["prompt"]);e!==void 0&&r!=null&&h(e,["instances[0]","prompt"],r);const l=f(n,["image"]);e!==void 0&&l!=null&&h(e,["instances[0]","image"],bf(l));const u=f(n,["video"]);return e!==void 0&&u!=null&&h(e,["instances[0]","video"],vA(u)),o}function sP(n,e,t){const o={},r=f(n,["prompt"]);e!==void 0&&r!=null&&h(e,["instances[0]","prompt"],r);const l=f(n,["image"]);e!==void 0&&l!=null&&h(e,["instances[0]","image"],ui(l));const u=f(n,["video"]);return e!==void 0&&u!=null&&h(e,["instances[0]","video"],_A(u)),o}function rP(n,e){const t={},o=f(n,["_self"]);o!=null&&h(t,["image"],yP(o));const r=f(n,["raiFilteredReason"]);r!=null&&h(t,["raiFilteredReason"],r);const l=f(n,["_self"]);return l!=null&&h(t,["safetyAttributes"],mA(l)),t}function wf(n,e){const t={},o=f(n,["_self"]);o!=null&&h(t,["image"],pA(o));const r=f(n,["raiFilteredReason"]);r!=null&&h(t,["raiFilteredReason"],r);const l=f(n,["_self"]);l!=null&&h(t,["safetyAttributes"],gA(l));const u=f(n,["prompt"]);return u!=null&&h(t,["enhancedPrompt"],u),t}function aP(n,e){const t={},o=f(n,["_self"]);o!=null&&h(t,["mask"],pA(o));const r=f(n,["labels"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),h(t,["labels"],l)}return t}function lP(n,e){const t={},o=f(n,["video"]);return o!=null&&h(t,["video"],$P(o)),t}function uP(n,e){const t={},o=f(n,["_self"]);return o!=null&&h(t,["video"],XP(o)),t}function cP(n,e){const t={},o=f(n,["modelSelectionConfig"]);o!=null&&h(t,["modelConfig"],o);const r=f(n,["responseJsonSchema"]);r!=null&&h(t,["responseJsonSchema"],r);const l=f(n,["audioTimestamp"]);l!=null&&h(t,["audioTimestamp"],l);const u=f(n,["candidateCount"]);u!=null&&h(t,["candidateCount"],u);const d=f(n,["enableAffectiveDialog"]);d!=null&&h(t,["enableAffectiveDialog"],d);const g=f(n,["frequencyPenalty"]);g!=null&&h(t,["frequencyPenalty"],g);const m=f(n,["logprobs"]);m!=null&&h(t,["logprobs"],m);const _=f(n,["maxOutputTokens"]);_!=null&&h(t,["maxOutputTokens"],_);const T=f(n,["mediaResolution"]);T!=null&&h(t,["mediaResolution"],T);const E=f(n,["presencePenalty"]);E!=null&&h(t,["presencePenalty"],E);const R=f(n,["responseLogprobs"]);R!=null&&h(t,["responseLogprobs"],R);const P=f(n,["responseMimeType"]);P!=null&&h(t,["responseMimeType"],P);const B=f(n,["responseModalities"]);B!=null&&h(t,["responseModalities"],B);const O=f(n,["responseSchema"]);O!=null&&h(t,["responseSchema"],O);const $=f(n,["routingConfig"]);$!=null&&h(t,["routingConfig"],$);const se=f(n,["seed"]);se!=null&&h(t,["seed"],se);const j=f(n,["speechConfig"]);j!=null&&h(t,["speechConfig"],j);const re=f(n,["stopSequences"]);re!=null&&h(t,["stopSequences"],re);const W=f(n,["temperature"]);W!=null&&h(t,["temperature"],W);const de=f(n,["thinkingConfig"]);de!=null&&h(t,["thinkingConfig"],de);const M=f(n,["topK"]);M!=null&&h(t,["topK"],M);const x=f(n,["topP"]);if(x!=null&&h(t,["topP"],x),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function fP(n,e,t){const o={},r=f(e,["model"]);return r!=null&&h(o,["_url","name"],Ye(n,r)),o}function dP(n,e,t){const o={},r=f(e,["model"]);return r!=null&&h(o,["_url","name"],Ye(n,r)),o}function hP(n,e){const t={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=f(n,["enableWidget"]);return o!=null&&h(t,["enableWidget"],o),t}function pP(n,e){const t={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=f(n,["timeRangeFilter"]);return o!=null&&h(t,["timeRangeFilter"],o),t}function mP(n,e){const t={},o=f(n,["aspectRatio"]);o!=null&&h(t,["aspectRatio"],o);const r=f(n,["imageSize"]);if(r!=null&&h(t,["imageSize"],r),f(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(f(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function gP(n,e){const t={},o=f(n,["aspectRatio"]);o!=null&&h(t,["aspectRatio"],o);const r=f(n,["imageSize"]);r!=null&&h(t,["imageSize"],r);const l=f(n,["personGeneration"]);l!=null&&h(t,["personGeneration"],l);const u=f(n,["outputMimeType"]);u!=null&&h(t,["imageOutputOptions","mimeType"],u);const d=f(n,["outputCompressionQuality"]);return d!=null&&h(t,["imageOutputOptions","compressionQuality"],d),t}function yP(n,e){const t={},o=f(n,["bytesBase64Encoded"]);o!=null&&h(t,["imageBytes"],ts(o));const r=f(n,["mimeType"]);return r!=null&&h(t,["mimeType"],r),t}function pA(n,e){const t={},o=f(n,["gcsUri"]);o!=null&&h(t,["gcsUri"],o);const r=f(n,["bytesBase64Encoded"]);r!=null&&h(t,["imageBytes"],ts(r));const l=f(n,["mimeType"]);return l!=null&&h(t,["mimeType"],l),t}function bf(n,e){const t={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const o=f(n,["imageBytes"]);o!=null&&h(t,["bytesBase64Encoded"],ts(o));const r=f(n,["mimeType"]);return r!=null&&h(t,["mimeType"],r),t}function ui(n,e){const t={},o=f(n,["gcsUri"]);o!=null&&h(t,["gcsUri"],o);const r=f(n,["imageBytes"]);r!=null&&h(t,["bytesBase64Encoded"],ts(r));const l=f(n,["mimeType"]);return l!=null&&h(t,["mimeType"],l),t}function vP(n,e,t,o){const r={},l=f(e,["pageSize"]);t!==void 0&&l!=null&&h(t,["_query","pageSize"],l);const u=f(e,["pageToken"]);t!==void 0&&u!=null&&h(t,["_query","pageToken"],u);const d=f(e,["filter"]);t!==void 0&&d!=null&&h(t,["_query","filter"],d);const g=f(e,["queryBase"]);return t!==void 0&&g!=null&&h(t,["_url","models_url"],aA(n,g)),r}function _P(n,e,t,o){const r={},l=f(e,["pageSize"]);t!==void 0&&l!=null&&h(t,["_query","pageSize"],l);const u=f(e,["pageToken"]);t!==void 0&&u!=null&&h(t,["_query","pageToken"],u);const d=f(e,["filter"]);t!==void 0&&d!=null&&h(t,["_query","filter"],d);const g=f(e,["queryBase"]);return t!==void 0&&g!=null&&h(t,["_url","models_url"],aA(n,g)),r}function EP(n,e,t){const o={},r=f(e,["config"]);return r!=null&&vP(n,r,o),o}function TP(n,e,t){const o={},r=f(e,["config"]);return r!=null&&_P(n,r,o),o}function SP(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&h(t,["sdkHttpResponse"],o);const r=f(n,["nextPageToken"]);r!=null&&h(t,["nextPageToken"],r);const l=f(n,["_self"]);if(l!=null){let u=lA(l);Array.isArray(u)&&(u=u.map(d=>Cp(d))),h(t,["models"],u)}return t}function AP(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&h(t,["sdkHttpResponse"],o);const r=f(n,["nextPageToken"]);r!=null&&h(t,["nextPageToken"],r);const l=f(n,["_self"]);if(l!=null){let u=lA(l);Array.isArray(u)&&(u=u.map(d=>Ip(d))),h(t,["models"],u)}return t}function CP(n,e){const t={},o=f(n,["maskMode"]);o!=null&&h(t,["maskMode"],o);const r=f(n,["segmentationClasses"]);r!=null&&h(t,["maskClasses"],r);const l=f(n,["maskDilation"]);return l!=null&&h(t,["dilation"],l),t}function Cp(n,e){const t={},o=f(n,["name"]);o!=null&&h(t,["name"],o);const r=f(n,["displayName"]);r!=null&&h(t,["displayName"],r);const l=f(n,["description"]);l!=null&&h(t,["description"],l);const u=f(n,["version"]);u!=null&&h(t,["version"],u);const d=f(n,["_self"]);d!=null&&h(t,["tunedModelInfo"],GP(d));const g=f(n,["inputTokenLimit"]);g!=null&&h(t,["inputTokenLimit"],g);const m=f(n,["outputTokenLimit"]);m!=null&&h(t,["outputTokenLimit"],m);const _=f(n,["supportedGenerationMethods"]);_!=null&&h(t,["supportedActions"],_);const T=f(n,["temperature"]);T!=null&&h(t,["temperature"],T);const E=f(n,["maxTemperature"]);E!=null&&h(t,["maxTemperature"],E);const R=f(n,["topP"]);R!=null&&h(t,["topP"],R);const P=f(n,["topK"]);P!=null&&h(t,["topK"],P);const B=f(n,["thinking"]);return B!=null&&h(t,["thinking"],B),t}function Ip(n,e){const t={},o=f(n,["name"]);o!=null&&h(t,["name"],o);const r=f(n,["displayName"]);r!=null&&h(t,["displayName"],r);const l=f(n,["description"]);l!=null&&h(t,["description"],l);const u=f(n,["versionId"]);u!=null&&h(t,["version"],u);const d=f(n,["deployedModels"]);if(d!=null){let E=d;Array.isArray(E)&&(E=E.map(R=>kV(R))),h(t,["endpoints"],E)}const g=f(n,["labels"]);g!=null&&h(t,["labels"],g);const m=f(n,["_self"]);m!=null&&h(t,["tunedModelInfo"],BP(m));const _=f(n,["defaultCheckpointId"]);_!=null&&h(t,["defaultCheckpointId"],_);const T=f(n,["checkpoints"]);if(T!=null){let E=T;Array.isArray(E)&&(E=E.map(R=>R)),h(t,["checkpoints"],E)}return t}function IP(n,e){const t={},o=f(n,["mediaResolution"]);o!=null&&h(t,["mediaResolution"],o);const r=f(n,["codeExecutionResult"]);r!=null&&h(t,["codeExecutionResult"],r);const l=f(n,["executableCode"]);l!=null&&h(t,["executableCode"],l);const u=f(n,["fileData"]);u!=null&&h(t,["fileData"],OV(u));const d=f(n,["functionCall"]);d!=null&&h(t,["functionCall"],qV(d));const g=f(n,["functionResponse"]);g!=null&&h(t,["functionResponse"],g);const m=f(n,["inlineData"]);m!=null&&h(t,["inlineData"],cV(m));const _=f(n,["text"]);_!=null&&h(t,["text"],_);const T=f(n,["thought"]);T!=null&&h(t,["thought"],T);const E=f(n,["thoughtSignature"]);E!=null&&h(t,["thoughtSignature"],E);const R=f(n,["videoMetadata"]);return R!=null&&h(t,["videoMetadata"],R),t}function RP(n,e){const t={},o=f(n,["productImage"]);return o!=null&&h(t,["image"],ui(o)),t}function wP(n,e,t){const o={},r=f(n,["numberOfImages"]);e!==void 0&&r!=null&&h(e,["parameters","sampleCount"],r);const l=f(n,["baseSteps"]);e!==void 0&&l!=null&&h(e,["parameters","baseSteps"],l);const u=f(n,["outputGcsUri"]);e!==void 0&&u!=null&&h(e,["parameters","storageUri"],u);const d=f(n,["seed"]);e!==void 0&&d!=null&&h(e,["parameters","seed"],d);const g=f(n,["safetyFilterLevel"]);e!==void 0&&g!=null&&h(e,["parameters","safetySetting"],g);const m=f(n,["personGeneration"]);e!==void 0&&m!=null&&h(e,["parameters","personGeneration"],m);const _=f(n,["addWatermark"]);e!==void 0&&_!=null&&h(e,["parameters","addWatermark"],_);const T=f(n,["outputMimeType"]);e!==void 0&&T!=null&&h(e,["parameters","outputOptions","mimeType"],T);const E=f(n,["outputCompressionQuality"]);e!==void 0&&E!=null&&h(e,["parameters","outputOptions","compressionQuality"],E);const R=f(n,["enhancePrompt"]);e!==void 0&&R!=null&&h(e,["parameters","enhancePrompt"],R);const P=f(n,["labels"]);return e!==void 0&&P!=null&&h(e,["labels"],P),o}function bP(n,e,t){const o={},r=f(e,["model"]);r!=null&&h(o,["_url","model"],Ye(n,r));const l=f(e,["source"]);l!=null&&xP(l,o);const u=f(e,["config"]);return u!=null&&wP(u,o),o}function NP(n,e){const t={},o=f(n,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>wf(l))),h(t,["generatedImages"],r)}return t}function xP(n,e,t){const o={},r=f(n,["prompt"]);e!==void 0&&r!=null&&h(e,["instances[0]","prompt"],r);const l=f(n,["personImage"]);e!==void 0&&l!=null&&h(e,["instances[0]","personImage","image"],ui(l));const u=f(n,["productImages"]);if(e!==void 0&&u!=null){let d=u;Array.isArray(d)&&(d=d.map(g=>RP(g))),h(e,["instances[0]","productImages"],d)}return o}function MP(n,e){const t={},o=f(n,["referenceImage"]);o!=null&&h(t,["referenceImage"],ui(o));const r=f(n,["referenceId"]);r!=null&&h(t,["referenceId"],r);const l=f(n,["referenceType"]);l!=null&&h(t,["referenceType"],l);const u=f(n,["maskImageConfig"]);u!=null&&h(t,["maskImageConfig"],CP(u));const d=f(n,["controlImageConfig"]);d!=null&&h(t,["controlImageConfig"],yV(d));const g=f(n,["styleImageConfig"]);g!=null&&h(t,["styleImageConfig"],g);const m=f(n,["subjectImageConfig"]);return m!=null&&h(t,["subjectImageConfig"],m),t}function mA(n,e){const t={},o=f(n,["safetyAttributes","categories"]);o!=null&&h(t,["categories"],o);const r=f(n,["safetyAttributes","scores"]);r!=null&&h(t,["scores"],r);const l=f(n,["contentType"]);return l!=null&&h(t,["contentType"],l),t}function gA(n,e){const t={},o=f(n,["safetyAttributes","categories"]);o!=null&&h(t,["categories"],o);const r=f(n,["safetyAttributes","scores"]);r!=null&&h(t,["scores"],r);const l=f(n,["contentType"]);return l!=null&&h(t,["contentType"],l),t}function DP(n,e){const t={},o=f(n,["category"]);if(o!=null&&h(t,["category"],o),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=f(n,["threshold"]);return r!=null&&h(t,["threshold"],r),t}function VP(n,e){const t={},o=f(n,["image"]);return o!=null&&h(t,["image"],ui(o)),t}function PP(n,e,t){const o={},r=f(n,["mode"]);e!==void 0&&r!=null&&h(e,["parameters","mode"],r);const l=f(n,["maxPredictions"]);e!==void 0&&l!=null&&h(e,["parameters","maxPredictions"],l);const u=f(n,["confidenceThreshold"]);e!==void 0&&u!=null&&h(e,["parameters","confidenceThreshold"],u);const d=f(n,["maskDilation"]);e!==void 0&&d!=null&&h(e,["parameters","maskDilation"],d);const g=f(n,["binaryColorThreshold"]);e!==void 0&&g!=null&&h(e,["parameters","binaryColorThreshold"],g);const m=f(n,["labels"]);return e!==void 0&&m!=null&&h(e,["labels"],m),o}function UP(n,e,t){const o={},r=f(e,["model"]);r!=null&&h(o,["_url","model"],Ye(n,r));const l=f(e,["source"]);l!=null&&kP(l,o);const u=f(e,["config"]);return u!=null&&PP(u,o),o}function LP(n,e){const t={},o=f(n,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>aP(l))),h(t,["generatedMasks"],r)}return t}function kP(n,e,t){const o={},r=f(n,["prompt"]);e!==void 0&&r!=null&&h(e,["instances[0]","prompt"],r);const l=f(n,["image"]);e!==void 0&&l!=null&&h(e,["instances[0]","image"],ui(l));const u=f(n,["scribbleImage"]);return e!==void 0&&u!=null&&h(e,["instances[0]","scribble"],VP(u)),o}function OP(n,e){const t={},o=f(n,["retrievalConfig"]);o!=null&&h(t,["retrievalConfig"],o);const r=f(n,["functionCallingConfig"]);return r!=null&&h(t,["functionCallingConfig"],GV(r)),t}function qP(n,e){const t={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=f(n,["computerUse"]);o!=null&&h(t,["computerUse"],o);const r=f(n,["fileSearch"]);r!=null&&h(t,["fileSearch"],r);const l=f(n,["codeExecution"]);if(l!=null&&h(t,["codeExecution"],l),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=f(n,["functionDeclarations"]);if(u!=null){let T=u;Array.isArray(T)&&(T=T.map(E=>E)),h(t,["functionDeclarations"],T)}const d=f(n,["googleMaps"]);d!=null&&h(t,["googleMaps"],hP(d));const g=f(n,["googleSearch"]);g!=null&&h(t,["googleSearch"],pP(g));const m=f(n,["googleSearchRetrieval"]);m!=null&&h(t,["googleSearchRetrieval"],m);const _=f(n,["urlContext"]);return _!=null&&h(t,["urlContext"],_),t}function yA(n,e){const t={},o=f(n,["retrieval"]);o!=null&&h(t,["retrieval"],o);const r=f(n,["computerUse"]);if(r!=null&&h(t,["computerUse"],r),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=f(n,["codeExecution"]);l!=null&&h(t,["codeExecution"],l);const u=f(n,["enterpriseWebSearch"]);u!=null&&h(t,["enterpriseWebSearch"],u);const d=f(n,["functionDeclarations"]);if(d!=null){let E=d;Array.isArray(E)&&(E=E.map(R=>BV(R))),h(t,["functionDeclarations"],E)}const g=f(n,["googleMaps"]);g!=null&&h(t,["googleMaps"],g);const m=f(n,["googleSearch"]);m!=null&&h(t,["googleSearch"],m);const _=f(n,["googleSearchRetrieval"]);_!=null&&h(t,["googleSearchRetrieval"],_);const T=f(n,["urlContext"]);return T!=null&&h(t,["urlContext"],T),t}function GP(n,e){const t={},o=f(n,["baseModel"]);o!=null&&h(t,["baseModel"],o);const r=f(n,["createTime"]);r!=null&&h(t,["createTime"],r);const l=f(n,["updateTime"]);return l!=null&&h(t,["updateTime"],l),t}function BP(n,e){const t={},o=f(n,["labels","google-vertex-llm-tuning-base-model-id"]);o!=null&&h(t,["baseModel"],o);const r=f(n,["createTime"]);r!=null&&h(t,["createTime"],r);const l=f(n,["updateTime"]);return l!=null&&h(t,["updateTime"],l),t}function FP(n,e,t){const o={},r=f(n,["displayName"]);e!==void 0&&r!=null&&h(e,["displayName"],r);const l=f(n,["description"]);e!==void 0&&l!=null&&h(e,["description"],l);const u=f(n,["defaultCheckpointId"]);return e!==void 0&&u!=null&&h(e,["defaultCheckpointId"],u),o}function HP(n,e,t){const o={},r=f(n,["displayName"]);e!==void 0&&r!=null&&h(e,["displayName"],r);const l=f(n,["description"]);e!==void 0&&l!=null&&h(e,["description"],l);const u=f(n,["defaultCheckpointId"]);return e!==void 0&&u!=null&&h(e,["defaultCheckpointId"],u),o}function zP(n,e,t){const o={},r=f(e,["model"]);r!=null&&h(o,["_url","name"],Ye(n,r));const l=f(e,["config"]);return l!=null&&FP(l,o),o}function JP(n,e,t){const o={},r=f(e,["model"]);r!=null&&h(o,["_url","model"],Ye(n,r));const l=f(e,["config"]);return l!=null&&HP(l,o),o}function YP(n,e,t){const o={},r=f(n,["outputGcsUri"]);e!==void 0&&r!=null&&h(e,["parameters","storageUri"],r);const l=f(n,["safetyFilterLevel"]);e!==void 0&&l!=null&&h(e,["parameters","safetySetting"],l);const u=f(n,["personGeneration"]);e!==void 0&&u!=null&&h(e,["parameters","personGeneration"],u);const d=f(n,["includeRaiReason"]);e!==void 0&&d!=null&&h(e,["parameters","includeRaiReason"],d);const g=f(n,["outputMimeType"]);e!==void 0&&g!=null&&h(e,["parameters","outputOptions","mimeType"],g);const m=f(n,["outputCompressionQuality"]);e!==void 0&&m!=null&&h(e,["parameters","outputOptions","compressionQuality"],m);const _=f(n,["enhanceInputImage"]);e!==void 0&&_!=null&&h(e,["parameters","upscaleConfig","enhanceInputImage"],_);const T=f(n,["imagePreservationFactor"]);e!==void 0&&T!=null&&h(e,["parameters","upscaleConfig","imagePreservationFactor"],T);const E=f(n,["labels"]);e!==void 0&&E!=null&&h(e,["labels"],E);const R=f(n,["numberOfImages"]);e!==void 0&&R!=null&&h(e,["parameters","sampleCount"],R);const P=f(n,["mode"]);return e!==void 0&&P!=null&&h(e,["parameters","mode"],P),o}function KP(n,e,t){const o={},r=f(e,["model"]);r!=null&&h(o,["_url","model"],Ye(n,r));const l=f(e,["image"]);l!=null&&h(o,["instances[0]","image"],ui(l));const u=f(e,["upscaleFactor"]);u!=null&&h(o,["parameters","upscaleConfig","upscaleFactor"],u);const d=f(e,["config"]);return d!=null&&YP(d,o),o}function QP(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&h(t,["sdkHttpResponse"],o);const r=f(n,["predictions"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>wf(u))),h(t,["generatedImages"],l)}return t}function $P(n,e){const t={},o=f(n,["uri"]);o!=null&&h(t,["uri"],o);const r=f(n,["encodedVideo"]);r!=null&&h(t,["videoBytes"],ts(r));const l=f(n,["encoding"]);return l!=null&&h(t,["mimeType"],l),t}function XP(n,e){const t={},o=f(n,["gcsUri"]);o!=null&&h(t,["uri"],o);const r=f(n,["bytesBase64Encoded"]);r!=null&&h(t,["videoBytes"],ts(r));const l=f(n,["mimeType"]);return l!=null&&h(t,["mimeType"],l),t}function WP(n,e){const t={},o=f(n,["image"]);o!=null&&h(t,["_self"],ui(o));const r=f(n,["maskMode"]);return r!=null&&h(t,["maskMode"],r),t}function ZP(n,e){const t={},o=f(n,["image"]);o!=null&&h(t,["image"],bf(o));const r=f(n,["referenceType"]);return r!=null&&h(t,["referenceType"],r),t}function jP(n,e){const t={},o=f(n,["image"]);o!=null&&h(t,["image"],ui(o));const r=f(n,["referenceType"]);return r!=null&&h(t,["referenceType"],r),t}function vA(n,e){const t={},o=f(n,["uri"]);o!=null&&h(t,["uri"],o);const r=f(n,["videoBytes"]);r!=null&&h(t,["encodedVideo"],ts(r));const l=f(n,["mimeType"]);return l!=null&&h(t,["encoding"],l),t}function _A(n,e){const t={},o=f(n,["uri"]);o!=null&&h(t,["gcsUri"],o);const r=f(n,["videoBytes"]);r!=null&&h(t,["bytesBase64Encoded"],ts(r));const l=f(n,["mimeType"]);return l!=null&&h(t,["mimeType"],l),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function e4(n,e){const t={},o=f(n,["displayName"]);return e!==void 0&&o!=null&&h(e,["displayName"],o),t}function t4(n){const e={},t=f(n,["config"]);return t!=null&&e4(t,e),e}function n4(n,e){const t={},o=f(n,["force"]);return e!==void 0&&o!=null&&h(e,["_query","force"],o),t}function i4(n){const e={},t=f(n,["name"]);t!=null&&h(e,["_url","name"],t);const o=f(n,["config"]);return o!=null&&n4(o,e),e}function o4(n){const e={},t=f(n,["name"]);return t!=null&&h(e,["_url","name"],t),e}function s4(n,e){const t={},o=f(n,["customMetadata"]);if(e!==void 0&&o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["customMetadata"],l)}const r=f(n,["chunkingConfig"]);return e!==void 0&&r!=null&&h(e,["chunkingConfig"],r),t}function r4(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const o=f(n,["metadata"]);o!=null&&h(e,["metadata"],o);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const u=f(n,["response"]);return u!=null&&h(e,["response"],l4(u)),e}function a4(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&h(e,["_url","file_search_store_name"],t);const o=f(n,["fileName"]);o!=null&&h(e,["fileName"],o);const r=f(n,["config"]);return r!=null&&s4(r,e),e}function l4(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["parent"]);o!=null&&h(e,["parent"],o);const r=f(n,["documentName"]);return r!=null&&h(e,["documentName"],r),e}function u4(n,e){const t={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),t}function c4(n){const e={},t=f(n,["config"]);return t!=null&&u4(t,e),e}function f4(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const r=f(n,["fileSearchStores"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["fileSearchStores"],l)}return e}function EA(n,e){const t={},o=f(n,["mimeType"]);e!==void 0&&o!=null&&h(e,["mimeType"],o);const r=f(n,["displayName"]);e!==void 0&&r!=null&&h(e,["displayName"],r);const l=f(n,["customMetadata"]);if(e!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(g=>g)),h(e,["customMetadata"],d)}const u=f(n,["chunkingConfig"]);return e!==void 0&&u!=null&&h(e,["chunkingConfig"],u),t}function d4(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&h(e,["_url","file_search_store_name"],t);const o=f(n,["config"]);return o!=null&&EA(o,e),e}function h4(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const p4="Content-Type",m4="X-Server-Timeout",g4="User-Agent",Rp="x-goog-api-client",y4="1.40.0",v4=`google-genai-sdk/${y4}`,_4="v1beta1",E4="v1beta";class T4{constructor(e){var t,o,r;this.clientOptions=Object.assign({},e),this.customBaseUrl=(t=e.httpOptions)===null||t===void 0?void 0:t.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const l={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const d=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!d?(l.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?l.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(l.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),l.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:_4}else{if(!this.clientOptions.apiKey)throw new Fl({message:"API key must be set when using the Gemini API.",status:403});l.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:E4,l.baseUrl="https://generativelanguage.googleapis.com/"}l.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=l,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(l,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const o=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&o.push(e.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,o){const r=[this.getRequestUrlInternal(t)];return o&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e,t){return!(t.baseUrl&&t.baseUrlResourceScope===Ep.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e,t),r=this.constructUrl(e.path,t,o);if(e.queryParams)for(const[u,d]of Object.entries(e.queryParams))r.searchParams.append(u,String(d));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,t,r.toString(),e.abortSignal),this.unaryApiCall(r,l,e.httpMethod)}patchHttpOptions(e,t){const o=JSON.parse(JSON.stringify(e));for(const[r,l]of Object.entries(t))typeof l=="object"?o[r]=Object.assign(Object.assign({},o[r]),l):l!==void 0&&(o[r]=l);return o}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e,t),r=this.constructUrl(e.path,t,o);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,t,r.toString(),e.abortSignal),this.streamApiCall(r,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,o,r){if(t&&t.timeout||r){const l=new AbortController,u=l.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const d=setTimeout(()=>l.abort(),t.timeout);d&&typeof d.unref=="function"&&d.unref()}r&&r.addEventListener("abort",()=>{l.abort()}),e.signal=u}return t&&t.extraBody!==null&&S4(e,t.extraBody),e.headers=await this.getHeadersInternal(t,o),e}async unaryApiCall(e,t,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:o})).then(async r=>(await kE(r),new Tp(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,t,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:o})).then(async r=>(await kE(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){return ri(this,arguments,function*(){var o;const r=(o=e==null?void 0:e.body)===null||o===void 0?void 0:o.getReader(),l=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let u="";const d="data:",g=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:m,value:_}=yield Ce(r.read());if(m){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const T=l.decode(_,{stream:!0});try{const P=JSON.parse(T);if("error"in P){const B=JSON.parse(JSON.stringify(P.error)),O=B.status,$=B.code,se=`got status: ${O}. ${JSON.stringify(P)}`;if($>=400&&$<600)throw new Fl({message:se,status:$})}}catch(P){if(P.name==="ApiError")throw P}u+=T;let E=-1,R=0;for(;;){E=-1,R=0;for(const O of g){const $=u.indexOf(O);$!==-1&&(E===-1||$<E)&&(E=$,R=O.length)}if(E===-1)break;const P=u.substring(0,E);u=u.substring(E+R);const B=P.trim();if(B.startsWith(d)){const O=B.substring(d.length).trim();try{const $=new Response(O,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Ce(new Tp($))}catch($){throw new Error(`exception parsing stream chunk ${O}. ${$}`)}}}}}finally{r.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(o=>{throw new Error(`exception ${o} sending request`)})}getDefaultHeaders(){const e={},t=v4+" "+this.clientOptions.userAgentExtra;return e[g4]=t,e[Rp]=t,e[p4]="application/json",e}async getHeadersInternal(e,t){const o=new Headers;if(e&&e.headers){for(const[r,l]of Object.entries(e.headers))o.append(r,l);e.timeout&&e.timeout>0&&o.append(m4,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(o,t),o}getFileName(e){var t;let o="";return typeof e=="string"&&(o=e.replace(/[/\\]+$/,""),o=(t=o.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),o}async uploadFile(e,t){var o;const r={};t!=null&&(r.mimeType=t.mimeType,r.name=t.name,r.displayName=t.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const l=this.clientOptions.uploader,u=await l.stat(e);r.sizeBytes=String(u.size);const d=(o=t==null?void 0:t.mimeType)!==null&&o!==void 0?o:u.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=d;const g={file:r},m=this.getFileName(e),_=fe("upload/v1beta/files",g._url),T=await this.fetchUploadUrl(_,r.sizeBytes,r.mimeType,m,g,t==null?void 0:t.httpOptions);return l.upload(e,T,this)}async uploadFileToFileSearchStore(e,t,o){var r;const l=this.clientOptions.uploader,u=await l.stat(t),d=String(u.size),g=(r=o==null?void 0:o.mimeType)!==null&&r!==void 0?r:u.type;if(g===void 0||g==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const m=`upload/v1beta/${e}:uploadToFileSearchStore`,_=this.getFileName(t),T={};o!=null&&EA(o,T);const E=await this.fetchUploadUrl(m,d,g,_,T,o==null?void 0:o.httpOptions);return l.uploadToFileSearchStore(t,E,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,o,r,l,u){var d;let g={};u?g=u:g={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${o}`},r?{"X-Goog-Upload-File-Name":r}:{})};const m=await this.request({path:e,body:JSON.stringify(l),httpMethod:"POST",httpOptions:g});if(!m||!(m!=null&&m.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const _=(d=m==null?void 0:m.headers)===null||d===void 0?void 0:d["x-goog-upload-url"];if(_===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return _}}async function kE(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let o;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?o=await n.json():o={error:{message:await n.text(),code:n.status,status:n.statusText}};const r=JSON.stringify(o);throw t>=400&&t<600?new Fl({message:r,status:t}):new Error(r)}}function S4(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const l=JSON.parse(n.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))t=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(l,u){const d=Object.assign({},l);for(const g in u)if(Object.prototype.hasOwnProperty.call(u,g)){const m=u[g],_=d[g];m&&typeof m=="object"&&!Array.isArray(m)&&_&&typeof _=="object"&&!Array.isArray(_)?d[g]=o(_,m):(_&&m&&typeof _!=typeof m&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${g}". Original type: ${typeof _}, New type: ${typeof m}. Overwriting.`),d[g]=m)}return d}const r=o(t,e);n.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const A4="mcp_used/unknown";let C4=!1;function TA(n){for(const e of n)if(I4(e)||typeof e=="object"&&"inputSchema"in e)return!0;return C4}function SA(n){var e;const t=(e=n[Rp])!==null&&e!==void 0?e:"";n[Rp]=(t+` ${A4}`).trimStart()}function I4(n){return n!==null&&typeof n=="object"&&n instanceof Cm}function R4(n){return ri(this,arguments,function*(t,o=100){let r,l=0;for(;l<o;){const u=yield Ce(t.listTools({cursor:r}));for(const d of u.tools)yield yield Ce(d),l++;if(!u.nextCursor)break;r=u.nextCursor}})}class Cm{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new Cm(e,t)}async initialize(){var e,t,o,r;if(this.mcpTools.length>0)return;const l={},u=[];for(const _ of this.mcpClients)try{for(var d=!0,g=(t=void 0,ai(R4(_))),m;m=await g.next(),e=m.done,!e;d=!0){r=m.value,d=!1;const T=r;u.push(T);const E=T.name;if(l[E])throw new Error(`Duplicate function name ${E} found in MCP tools. Please ensure function names are unique.`);l[E]=_}}catch(T){t={error:T}}finally{try{!d&&!e&&(o=g.return)&&await o.call(g)}finally{if(t)throw t.error}}this.mcpTools=u,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),tD(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const o of e)if(o.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[o.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const u=await r.callTool({name:o.name,arguments:o.args},void 0,l);t.push({functionResponse:{name:o.name,response:u.isError?{error:u}:u}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function w4(n,e,t){const o=new KM;let r;t.data instanceof Blob?r=JSON.parse(await t.data.text()):r=JSON.parse(t.data),Object.assign(o,r),e(o)}class b4{constructor(e,t,o){this.apiClient=e,this.auth=t,this.webSocketFactory=o}async connect(e){var t,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),u=M4(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),g=`${r}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${d}`;let m=()=>{};const _=new Promise(j=>{m=j}),T=e.callbacks,E=function(){m({})},R=this.apiClient,P={onopen:E,onmessage:j=>{w4(R,T.onmessage,j)},onerror:(t=T==null?void 0:T.onerror)!==null&&t!==void 0?t:function(j){},onclose:(o=T==null?void 0:T.onclose)!==null&&o!==void 0?o:function(j){}},B=this.webSocketFactory.create(g,x4(u),P);B.connect(),await _;const se={setup:{model:Ye(this.apiClient,e.model)}};return B.send(JSON.stringify(se)),new N4(B,this.apiClient)}}class N4{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=eV(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=j2(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(Hr.PLAY)}pause(){this.sendPlaybackControl(Hr.PAUSE)}stop(){this.sendPlaybackControl(Hr.STOP)}resetContext(){this.sendPlaybackControl(Hr.RESET_CONTEXT)}close(){this.conn.close()}}function x4(n){const e={};return n.forEach((t,o)=>{e[o]=t}),e}function M4(n){const e=new Headers;for(const[t,o]of Object.entries(n))e.append(t,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const D4="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function V4(n,e,t){const o=new YM;let r;t.data instanceof Blob?r=await t.data.text():t.data instanceof ArrayBuffer?r=new TextDecoder().decode(t.data):r=t.data;const l=JSON.parse(r);if(n.isVertexAI()){const u=iV(l);Object.assign(o,u)}else Object.assign(o,l);e(o)}class P4{constructor(e,t,o){this.apiClient=e,this.auth=t,this.webSocketFactory=o,this.music=new b4(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,o,r,l,u,d;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const g=this.apiClient.getWebsocketBaseUrl(),m=this.apiClient.getApiVersion();let _;const T=this.apiClient.getHeaders();e.config&&e.config.tools&&TA(e.config.tools)&&SA(T);const E=O4(T);if(this.apiClient.isVertexAI()){const N=this.apiClient.getProject(),L=this.apiClient.getLocation(),U=this.apiClient.getApiKey(),G=!!N&&!!L||!!U;this.apiClient.getCustomBaseUrl()&&!G?_=g:(_=`${g}/ws/google.cloud.aiplatform.${m}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(E,_))}else{const N=this.apiClient.getApiKey();let L="BidiGenerateContent",U="key";N!=null&&N.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),m!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),L="BidiGenerateContentConstrained",U="access_token"),_=`${g}/ws/google.ai.generativelanguage.${m}.GenerativeService.${L}?${U}=${N}`}let R=()=>{};const P=new Promise(N=>{R=N}),B=e.callbacks,O=function(){var N;(N=B==null?void 0:B.onopen)===null||N===void 0||N.call(B),R({})},$=this.apiClient,se={onopen:O,onmessage:N=>{V4($,B.onmessage,N)},onerror:(t=B==null?void 0:B.onerror)!==null&&t!==void 0?t:function(N){},onclose:(o=B==null?void 0:B.onclose)!==null&&o!==void 0?o:function(N){}},j=this.webSocketFactory.create(_,k4(E),se);j.connect(),await P;let re=Ye(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&re.startsWith("publishers/")){const N=this.apiClient.getProject(),L=this.apiClient.getLocation();N&&L&&(re=`projects/${N}/locations/${L}/`+re)}let W={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[sf.AUDIO]}:e.config.responseModalities=[sf.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const de=(d=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[],M=[];for(const N of de)if(this.isCallableTool(N)){const L=N;M.push(await L.tool())}else M.push(N);M.length>0&&(e.config.tools=M);const x={model:re,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?W=Z2(this.apiClient,x):W=W2(this.apiClient,x),delete W.config,j.send(JSON.stringify(W)),new L4(j,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const U4={turnComplete:!0};class L4{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let o=[];try{o=zn(t.turns),e.isVertexAI()||(o=o.map(r=>Rf(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:o,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let o=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?o=t.functionResponses:o=[t.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const l of o){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(D4)}return{toolResponse:{functionResponses:o}}}sendClientContent(e){e=Object.assign(Object.assign({},U4),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:nV(e)}:t={realtimeInput:tV(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function k4(n){const e={};return n.forEach((t,o)=>{e[o]=t}),e}function O4(n){const e=new Headers;for(const[t,o]of Object.entries(n))e.append(t,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const OE=10;function qE(n){var e,t,o;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const u of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(Xr(u)){r=!0;break}if(!r)return!0;const l=(o=n==null?void 0:n.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function Xr(n){return"callTool"in n&&typeof n.callTool=="function"}function q4(n){var e,t,o;return(o=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(r=>Xr(r)))!==null&&o!==void 0?o:!1}function GE(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((o,r)=>{if(Xr(o))return;const l=o;l.functionDeclarations&&l.functionDeclarations.length>0&&t.push(r)}),t}function BE(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class G4 extends lo{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var o,r,l,u,d;const g=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!q4(t)||qE(t.config))return await this.generateContentInternal(g);const m=GE(t);if(m.length>0){const B=m.map(O=>`tools[${O}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${B}.`)}let _,T;const E=zn(g.contents),R=(l=(r=(o=g.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&l!==void 0?l:OE;let P=0;for(;P<R&&(_=await this.generateContentInternal(g),!(!_.functionCalls||_.functionCalls.length===0));){const B=_.candidates[0].content,O=[];for(const $ of(d=(u=t.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[])if(Xr($)){const j=await $.callTool(_.functionCalls);O.push(...j)}P++,T={role:"user",parts:O},g.contents=zn(g.contents),g.contents.push(B),g.contents.push(T),BE(g.config)&&(E.push(B),E.push(T))}return BE(g.config)&&(_.automaticFunctionCallingHistory=E),_},this.generateContentStream=async t=>{var o,r,l,u,d;if(this.maybeMoveToResponseJsonSchem(t),qE(t.config)){const T=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(T)}const g=GE(t);if(g.length>0){const T=g.map(E=>`tools[${E}]`).join(", ");throw new Error(`Incompatible tools found at ${T}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const m=(l=(r=(o=t==null?void 0:t.config)===null||o===void 0?void 0:o.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||l===void 0?void 0:l.streamFunctionCallArguments,_=(d=(u=t==null?void 0:t.config)===null||u===void 0?void 0:u.automaticFunctionCalling)===null||d===void 0?void 0:d.disable;if(m&&!_)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(o=>{var r;let l;const u=[];if(o!=null&&o.generatedImages)for(const g of o.generatedImages)g&&(g!=null&&g.safetyAttributes)&&((r=g==null?void 0:g.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?l=g==null?void 0:g.safetyAttributes:u.push(g);let d;return l?d={generatedImages:u,positivePromptSafetyAttributes:l,sdkHttpResponse:o.sdkHttpResponse}:d={generatedImages:u,sdkHttpResponse:o.sdkHttpResponse},d}),this.list=async t=>{var o;const u={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((o=u.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new Ks(ao.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(u),u)},this.editImage=async t=>{const o={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(o.referenceImages=t.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async t=>{let o={numberOfImages:1,mode:"upscale"};t.config&&(o=Object.assign(Object.assign({},o),t.config));const r={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:o};return await this.upscaleImageInternal(r)},this.generateVideos=async t=>{var o,r,l,u,d,g;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((o=t.video)===null||o===void 0)&&o.uri&&(!((r=t.video)===null||r===void 0)&&r.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((u=(l=t.source)===null||l===void 0?void 0:l.video)===null||u===void 0)&&u.uri&&(!((g=(d=t.source)===null||d===void 0?void 0:d.video)===null||g===void 0)&&g.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,o,r;const l=(t=e.config)===null||t===void 0?void 0:t.tools;if(!l)return e;const u=await Promise.all(l.map(async g=>Xr(g)?await g.tool():g)),d={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(d.config.tools=u,e.config&&e.config.tools&&TA(e.config.tools)){const g=(r=(o=e.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&r!==void 0?r:{};let m=Object.assign({},g);Object.keys(m).length===0&&(m=this.apiClient.getDefaultHeaders()),SA(m),d.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:m})}return d}async initAfcToolsMap(e){var t,o,r;const l=new Map;for(const u of(o=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&o!==void 0?o:[])if(Xr(u)){const d=u,g=await d.tool();for(const m of(r=g.functionDeclarations)!==null&&r!==void 0?r:[]){if(!m.name)throw new Error("Function declaration name is required.");if(l.has(m.name))throw new Error(`Duplicate tool declaration name: ${m.name}`);l.set(m.name,d)}}return l}async processAfcStream(e){var t,o,r;const l=(r=(o=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&r!==void 0?r:OE;let u=!1,d=0;const g=await this.initAfcToolsMap(e);return(function(m,_,T){return ri(this,arguments,function*(){for(var E,R,P,B,O,$;d<l;){u&&(d++,u=!1);const W=yield Ce(m.processParamsMaybeAddMcpUsage(T)),de=yield Ce(m.generateContentStreamInternal(W)),M=[],x=[];try{for(var se=!0,j=(R=void 0,ai(de)),re;re=yield Ce(j.next()),E=re.done,!E;se=!0){B=re.value,se=!1;const N=B;if(yield yield Ce(N),N.candidates&&(!((O=N.candidates[0])===null||O===void 0)&&O.content)){x.push(N.candidates[0].content);for(const L of($=N.candidates[0].content.parts)!==null&&$!==void 0?$:[])if(d<l&&L.functionCall){if(!L.functionCall.name)throw new Error("Function call name was not returned by the model.");if(_.has(L.functionCall.name)){const U=yield Ce(_.get(L.functionCall.name).callTool([L.functionCall]));M.push(...U)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${_.keys()}, mising tool: ${L.functionCall.name}`)}}}}catch(N){R={error:N}}finally{try{!se&&!E&&(P=j.return)&&(yield Ce(P.call(j)))}finally{if(R)throw R.error}}if(M.length>0){u=!0;const N=new El;N.candidates=[{content:{role:"user",parts:M}}],yield yield Ce(N);const L=[];L.push(...x),L.push({role:"user",parts:M});const U=zn(T.contents).concat(L);T.contents=U}else break}})})(this,g,e)}async generateContentInternal(e){var t,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=PE(this.apiClient,e);return d=fe("{model}:generateContent",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=LE(_),E=new El;return Object.assign(E,T),E})}else{const m=VE(this.apiClient,e);return d=fe("{model}:generateContent",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=UE(_),E=new El;return Object.assign(E,T),E})}}async generateContentStreamInternal(e){var t,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=PE(this.apiClient,e);return d=fe("{model}:streamGenerateContent?alt=sse",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.requestStream({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),u.then(function(T){return ri(this,arguments,function*(){var E,R,P,B;try{for(var O=!0,$=ai(T),se;se=yield Ce($.next()),E=se.done,!E;O=!0){B=se.value,O=!1;const j=B,re=LE(yield Ce(j.json()),e);re.sdkHttpResponse={headers:j.headers};const W=new El;Object.assign(W,re),yield yield Ce(W)}}catch(j){R={error:j}}finally{try{!O&&!E&&(P=$.return)&&(yield Ce(P.call($)))}finally{if(R)throw R.error}}})})}else{const m=VE(this.apiClient,e);return d=fe("{model}:streamGenerateContent?alt=sse",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.requestStream({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),u.then(function(T){return ri(this,arguments,function*(){var E,R,P,B;try{for(var O=!0,$=ai(T),se;se=yield Ce($.next()),E=se.done,!E;O=!0){B=se.value,O=!1;const j=B,re=UE(yield Ce(j.json()),e);re.sdkHttpResponse={headers:j.headers};const W=new El;Object.assign(W,re),yield yield Ce(W)}}catch(j){R={error:j}}finally{try{!O&&!E&&(P=$.return)&&(yield Ce(P.call($)))}finally{if(R)throw R.error}}})})}}async embedContent(e){var t,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=PV(this.apiClient,e);return d=fe("{model}:predict",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=LV(_),E=new gE;return Object.assign(E,T),E})}else{const m=VV(this.apiClient,e);return d=fe("{model}:batchEmbedContents",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=UV(_),E=new gE;return Object.assign(E,T),E})}}async generateImagesInternal(e){var t,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=KV(this.apiClient,e);return d=fe("{model}:predict",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=$V(_),E=new yE;return Object.assign(E,T),E})}else{const m=YV(this.apiClient,e);return d=fe("{model}:predict",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=QV(_),E=new yE;return Object.assign(E,T),E})}}async editImageInternal(e){var t,o;let r,l="",u={};if(this.apiClient.isVertexAI()){const d=NV(this.apiClient,e);return l=fe("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(m=>{const _=m;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>{const m=xV(g),_=new PM;return Object.assign(_,m),_})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,o;let r,l="",u={};if(this.apiClient.isVertexAI()){const d=KP(this.apiClient,e);return l=fe("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(m=>{const _=m;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>{const m=QP(g),_=new UM;return Object.assign(_,m),_})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,o;let r,l="",u={};if(this.apiClient.isVertexAI()){const d=bP(this.apiClient,e);return l=fe("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>{const m=NP(g),_=new LM;return Object.assign(_,m),_})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,o;let r,l="",u={};if(this.apiClient.isVertexAI()){const d=UP(this.apiClient,e);return l=fe("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>{const m=LP(g),_=new kM;return Object.assign(_,m),_})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=dP(this.apiClient,e);return d=fe("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),u.then(_=>Ip(_))}else{const m=fP(this.apiClient,e);return d=fe("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>Cp(_))}}async listInternal(e){var t,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=TP(this.apiClient,e);return d=fe("{models_url}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=AP(_),E=new vE;return Object.assign(E,T),E})}else{const m=EP(this.apiClient,e);return d=fe("{models_url}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=SP(_),E=new vE;return Object.assign(E,T),E})}}async update(e){var t,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=JP(this.apiClient,e);return d=fe("{model}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),u.then(_=>Ip(_))}else{const m=zP(this.apiClient,e);return d=fe("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>Cp(_))}}async delete(e){var t,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=IV(this.apiClient,e);return d=fe("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=wV(_),E=new _E;return Object.assign(E,T),E})}else{const m=CV(this.apiClient,e);return d=fe("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=RV(_),E=new _E;return Object.assign(E,T),E})}}async countTokens(e){var t,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=TV(this.apiClient,e);return d=fe("{model}:countTokens",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=AV(_),E=new EE;return Object.assign(E,T),E})}else{const m=EV(this.apiClient,e);return d=fe("{model}:countTokens",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=SV(_),E=new EE;return Object.assign(E,T),E})}}async computeTokens(e){var t,o;let r,l="",u={};if(this.apiClient.isVertexAI()){const d=hV(this.apiClient,e);return l=fe("{model}:computeTokens",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(m=>{const _=m;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>{const m=pV(g),_=new OM;return Object.assign(_,m),_})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=tP(this.apiClient,e);return d=fe("{model}:predictLongRunning",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),u.then(_=>{const T=jV(_),E=new rf;return Object.assign(E,T),E})}else{const m=eP(this.apiClient,e);return d=fe("{model}:predictLongRunning",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>{const T=ZV(_),E=new rf;return Object.assign(E,T),E})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class B4 extends lo{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,o=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let l;o&&"httpOptions"in o&&(l=o.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:o});return t._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const t=e.operation,o=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let l;o&&"httpOptions"in o&&(l=o.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:o});return t._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=bM(e);return d=fe("{operationName}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json()),u}else{const m=wM(e);return d=fe("{operationName}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u}}async fetchPredictVideosOperationInternal(e){var t,o;let r,l="",u={};if(this.apiClient.isVertexAI()){const d=EM(e);return l=fe("{resourceName}:fetchPredictOperation",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function F4(n){const e={},t=f(n,["data"]);if(t!=null&&h(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(n,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function H4(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>Z4(l))),h(e,["parts"],r)}const o=f(n,["role"]);return o!=null&&h(e,["role"],o),e}function z4(n,e,t){const o={},r=f(e,["expireTime"]);t!==void 0&&r!=null&&h(t,["expireTime"],r);const l=f(e,["newSessionExpireTime"]);t!==void 0&&l!=null&&h(t,["newSessionExpireTime"],l);const u=f(e,["uses"]);t!==void 0&&u!=null&&h(t,["uses"],u);const d=f(e,["liveConnectConstraints"]);t!==void 0&&d!=null&&h(t,["bidiGenerateContentSetup"],W4(n,d));const g=f(e,["lockAdditionalFields"]);return t!==void 0&&g!=null&&h(t,["fieldMask"],g),o}function J4(n,e){const t={},o=f(e,["config"]);return o!=null&&h(t,["config"],z4(n,o,t)),t}function Y4(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const o=f(n,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function K4(n){const e={},t=f(n,["id"]);t!=null&&h(e,["id"],t);const o=f(n,["args"]);o!=null&&h(e,["args"],o);const r=f(n,["name"]);if(r!=null&&h(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Q4(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function $4(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function X4(n,e){const t={},o=f(n,["generationConfig"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig"],o);const r=f(n,["responseModalities"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig","responseModalities"],r);const l=f(n,["temperature"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","temperature"],l);const u=f(n,["topP"]);e!==void 0&&u!=null&&h(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&h(e,["setup","generationConfig","topK"],d);const g=f(n,["maxOutputTokens"]);e!==void 0&&g!=null&&h(e,["setup","generationConfig","maxOutputTokens"],g);const m=f(n,["mediaResolution"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","mediaResolution"],m);const _=f(n,["seed"]);e!==void 0&&_!=null&&h(e,["setup","generationConfig","seed"],_);const T=f(n,["speechConfig"]);e!==void 0&&T!=null&&h(e,["setup","generationConfig","speechConfig"],Am(T));const E=f(n,["thinkingConfig"]);e!==void 0&&E!=null&&h(e,["setup","generationConfig","thinkingConfig"],E);const R=f(n,["enableAffectiveDialog"]);e!==void 0&&R!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],R);const P=f(n,["systemInstruction"]);e!==void 0&&P!=null&&h(e,["setup","systemInstruction"],H4(sn(P)));const B=f(n,["tools"]);if(e!==void 0&&B!=null){let de=ca(B);Array.isArray(de)&&(de=de.map(M=>eU(ua(M)))),h(e,["setup","tools"],de)}const O=f(n,["sessionResumption"]);e!==void 0&&O!=null&&h(e,["setup","sessionResumption"],j4(O));const $=f(n,["inputAudioTranscription"]);e!==void 0&&$!=null&&h(e,["setup","inputAudioTranscription"],$);const se=f(n,["outputAudioTranscription"]);e!==void 0&&se!=null&&h(e,["setup","outputAudioTranscription"],se);const j=f(n,["realtimeInputConfig"]);e!==void 0&&j!=null&&h(e,["setup","realtimeInputConfig"],j);const re=f(n,["contextWindowCompression"]);e!==void 0&&re!=null&&h(e,["setup","contextWindowCompression"],re);const W=f(n,["proactivity"]);if(e!==void 0&&W!=null&&h(e,["setup","proactivity"],W),f(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function W4(n,e){const t={},o=f(e,["model"]);o!=null&&h(t,["setup","model"],Ye(n,o));const r=f(e,["config"]);return r!=null&&h(t,["config"],X4(r,t)),t}function Z4(n){const e={},t=f(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const o=f(n,["codeExecutionResult"]);o!=null&&h(e,["codeExecutionResult"],o);const r=f(n,["executableCode"]);r!=null&&h(e,["executableCode"],r);const l=f(n,["fileData"]);l!=null&&h(e,["fileData"],Y4(l));const u=f(n,["functionCall"]);u!=null&&h(e,["functionCall"],K4(u));const d=f(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const g=f(n,["inlineData"]);g!=null&&h(e,["inlineData"],F4(g));const m=f(n,["text"]);m!=null&&h(e,["text"],m);const _=f(n,["thought"]);_!=null&&h(e,["thought"],_);const T=f(n,["thoughtSignature"]);T!=null&&h(e,["thoughtSignature"],T);const E=f(n,["videoMetadata"]);return E!=null&&h(e,["videoMetadata"],E),e}function j4(n){const e={},t=f(n,["handle"]);if(t!=null&&h(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function eU(n){const e={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=f(n,["computerUse"]);t!=null&&h(e,["computerUse"],t);const o=f(n,["fileSearch"]);o!=null&&h(e,["fileSearch"],o);const r=f(n,["codeExecution"]);if(r!=null&&h(e,["codeExecution"],r),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(n,["functionDeclarations"]);if(l!=null){let _=l;Array.isArray(_)&&(_=_.map(T=>T)),h(e,["functionDeclarations"],_)}const u=f(n,["googleMaps"]);u!=null&&h(e,["googleMaps"],Q4(u));const d=f(n,["googleSearch"]);d!=null&&h(e,["googleSearch"],$4(d));const g=f(n,["googleSearchRetrieval"]);g!=null&&h(e,["googleSearchRetrieval"],g);const m=f(n,["urlContext"]);return m!=null&&h(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tU(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const o=n[t];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){const r=Object.keys(o).map(l=>`${t}.${l}`);e.push(...r)}else e.push(t)}return e.join(",")}function nU(n,e){let t=null;const o=n.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){const l=o.setup;typeof l=="object"&&l!==null?(n.bidiGenerateContentSetup=l,t=l):delete n.bidiGenerateContentSetup}else o!==void 0&&delete n.bidiGenerateContentSetup;const r=n.fieldMask;if(t){const l=tU(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?n.fieldMask=l:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];r.length>0&&(d=r.map(m=>u.includes(m)?`generationConfig.${m}`:m));const g=[];l&&g.push(l),d.length>0&&g.push(...d),g.length>0?n.fieldMask=g.join(","):delete n.fieldMask}else delete n.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?n.fieldMask=r.join(","):delete n.fieldMask;return n}class iU extends lo{constructor(e){super(),this.apiClient=e}async create(e){var t,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=J4(this.apiClient,e);l=fe("auth_tokens",d._url),u=d._query,delete d.config,delete d._url,delete d._query;const g=nU(d,e.config);return r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),r.then(m=>m)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function oU(n,e){const t={},o=f(n,["force"]);return e!==void 0&&o!=null&&h(e,["_query","force"],o),t}function sU(n){const e={},t=f(n,["name"]);t!=null&&h(e,["_url","name"],t);const o=f(n,["config"]);return o!=null&&oU(o,e),e}function rU(n){const e={},t=f(n,["name"]);return t!=null&&h(e,["_url","name"],t),e}function aU(n,e){const t={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),t}function lU(n){const e={},t=f(n,["parent"]);t!=null&&h(e,["_url","parent"],t);const o=f(n,["config"]);return o!=null&&aU(o,e),e}function uU(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const o=f(n,["nextPageToken"]);o!=null&&h(e,["nextPageToken"],o);const r=f(n,["documents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["documents"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cU extends lo{constructor(e){super(),this.apiClient=e,this.list=async t=>new Ks(ao.PAGED_ITEM_DOCUMENTS,o=>this.listInternal({parent:t.parent,config:o.config}),await this.listInternal(t),t)}async get(e){var t,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=rU(e);return l=fe("{name}",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async delete(e){var t,o;let r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=sU(e);r=fe("{name}",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var t,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=lU(e);return l=fe("{parent}/documents",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>{const m=uU(g),_=new qM;return Object.assign(_,m),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fU extends lo{constructor(e,t=new cU(e)){super(),this.apiClient=e,this.documents=t,this.list=async(o={})=>new Ks(ao.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(o),o)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=t4(e);return l=fe("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async get(e){var t,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=o4(e);return l=fe("{name}",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async delete(e){var t,o;let r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=i4(e);r=fe("{name}",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var t,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=c4(e);return l=fe("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>{const m=f4(g),_=new GM;return Object.assign(_,m),_})}}async uploadToFileSearchStoreInternal(e){var t,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=d4(e);return l=fe("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>{const m=h4(g),_=new BM;return Object.assign(_,m),_})}}async importFile(e){var t,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=a4(e);return l=fe("{file_search_store_name}:importFile",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),r.then(g=>{const m=r4(g),_=new vm;return Object.assign(_,m),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let AA=function(){const{crypto:n}=globalThis;if(n!=null&&n.randomUUID)return AA=n.randomUUID.bind(n),n.randomUUID();const e=new Uint8Array(1),t=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,o=>(+o^t()&15>>+o/4).toString(16))};const dU=()=>AA();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wp(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const bp=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Jn extends Error{}class fn extends Jn{constructor(e,t,o,r){super(`${fn.makeMessage(e,t,o)}`),this.status=e,this.headers=r,this.error=t}static makeMessage(e,t,o){const r=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):o;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,t,o,r){if(!e||!r)return new Nf({message:o,cause:bp(t)});const l=t;return e===400?new IA(e,l,o,r):e===401?new RA(e,l,o,r):e===403?new wA(e,l,o,r):e===404?new bA(e,l,o,r):e===409?new NA(e,l,o,r):e===422?new xA(e,l,o,r):e===429?new MA(e,l,o,r):e>=500?new DA(e,l,o,r):new fn(e,l,o,r)}}class Np extends fn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Nf extends fn{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class CA extends Nf{constructor({message:e}={}){super({message:e??"Request timed out."})}}class IA extends fn{}class RA extends fn{}class wA extends fn{}class bA extends fn{}class NA extends fn{}class xA extends fn{}class MA extends fn{}class DA extends fn{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const hU=/^[a-z][a-z0-9+.-]*:/i,pU=n=>hU.test(n);let xp=n=>(xp=Array.isArray,xp(n));const mU=xp;let gU=mU;const FE=gU;function yU(n){if(!n)return!0;for(const e in n)return!1;return!0}function vU(n,e){return Object.prototype.hasOwnProperty.call(n,e)}const _U=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Jn(`${n} must be an integer`);if(e<0)throw new Jn(`${n} must be a positive integer`);return e},EU=n=>{try{return JSON.parse(n)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const TU=n=>new Promise(e=>setTimeout(e,n));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Fr="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function SU(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const AU=()=>{var n,e,t,o,r;const l=SU();if(l==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Fr,"X-Stainless-OS":zE(Deno.build.os),"X-Stainless-Arch":HE(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(n=Deno.version)===null||n===void 0?void 0:n.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Fr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(l==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Fr,"X-Stainless-OS":zE((t=globalThis.process.platform)!==null&&t!==void 0?t:"unknown"),"X-Stainless-Arch":HE((o=globalThis.process.arch)!==null&&o!==void 0?o:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const u=CU();return u?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Fr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${u.browser}`,"X-Stainless-Runtime-Version":u.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Fr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function CU(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const o=t.exec(navigator.userAgent);if(o){const r=o[1]||0,l=o[2]||0,u=o[3]||0;return{browser:e,version:`${r}.${l}.${u}`}}}return null}const HE=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",zE=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let xc;const IU=()=>xc??(xc=AU());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function RU(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function VA(...n){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function wU(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return VA({start(){},async pull(t){const{done:o,value:r}=await e.next();o?t.close():t.enqueue(r)},async cancel(){var t;await((t=e.return)===null||t===void 0?void 0:t.call(e))}})}function PA(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function bU(n){var e,t;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((t=(e=n[Symbol.asyncIterator]()).return)===null||t===void 0?void 0:t.call(e));return}const o=n.getReader(),r=o.cancel();o.releaseLock(),await r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const NU=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const UA=()=>{var n;if(typeof File>"u"){const{process:e}=globalThis,t=typeof((n=e==null?void 0:e.versions)===null||n===void 0?void 0:n.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Yh(n,e,t){return UA(),new File(n,e??"unknown_file",t)}function xU(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const MU=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const LA=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",DU=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&LA(n),VU=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function PU(n,e,t){if(UA(),n=await n,DU(n))return n instanceof File?n:Yh([await n.arrayBuffer()],n.name);if(VU(n)){const r=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),Yh(await Mp(r),e,t)}const o=await Mp(n);if(e||(e=xU(n)),!(t!=null&&t.type)){const r=o.find(l=>typeof l=="object"&&"type"in l&&l.type);typeof r=="string"&&(t=Object.assign(Object.assign({},t),{type:r}))}return Yh(o,e,t)}async function Mp(n){var e,t,o,r,l;let u=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)u.push(n);else if(LA(n))u.push(n instanceof Blob?n:await n.arrayBuffer());else if(MU(n))try{for(var d=!0,g=ai(n),m;m=await g.next(),e=m.done,!e;d=!0){r=m.value,d=!1;const _=r;u.push(...await Mp(_))}}catch(_){t={error:_}}finally{try{!d&&!e&&(o=g.return)&&await o.call(g)}finally{if(t)throw t.error}}else{const _=(l=n==null?void 0:n.constructor)===null||l===void 0?void 0:l.name;throw new Error(`Unexpected data type: ${typeof n}${_?`; constructor: ${_}`:""}${UU(n)}`)}return u}function UU(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class kA{constructor(e){this._client=e}}kA._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function OA(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const JE=Object.freeze(Object.create(null)),LU=(n=OA)=>(function(t,...o){if(t.length===1)return t[0];let r=!1;const l=[],u=t.reduce((_,T,E)=>{var R,P,B;/[?#]/.test(T)&&(r=!0);const O=o[E];let $=(r?encodeURIComponent:n)(""+O);return E!==o.length&&(O==null||typeof O=="object"&&O.toString===((B=Object.getPrototypeOf((P=Object.getPrototypeOf((R=O.hasOwnProperty)!==null&&R!==void 0?R:JE))!==null&&P!==void 0?P:JE))===null||B===void 0?void 0:B.toString))&&($=O+"",l.push({start:_.length+T.length,length:$.length,error:`Value of type ${Object.prototype.toString.call(O).slice(8,-1)} is not a valid path parameter`})),_+T+(E===o.length?"":$)},""),d=u.split(/[?#]/,1)[0],g=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let m;for(;(m=g.exec(d))!==null;)l.push({start:m.index,length:m[0].length,error:`Value "${m[0]}" can't be safely passed as a path parameter`});if(l.sort((_,T)=>_.start-T.start),l.length>0){let _=0;const T=l.reduce((E,R)=>{const P=" ".repeat(R.start-_),B="^".repeat(R.length);return _=R.start+R.length,E+P+B},"");throw new Jn(`Path parameters result in path with invalid segments:
${l.map(E=>E.error).join(`
`)}
${u}
${T}`)}return u}),Mc=LU(OA);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qA extends kA{create(e,t){var o;const{api_version:r=this._client.apiVersion}=e,l=lf(e,["api_version"]);if("model"in l&&"agent_config"in l)throw new Jn("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in l&&"generation_config"in l)throw new Jn("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Mc`/${r}/interactions`,Object.assign(Object.assign({body:l},t),{stream:(o=e.stream)!==null&&o!==void 0?o:!1}))}delete(e,t={},o){const{api_version:r=this._client.apiVersion}=t??{};return this._client.delete(Mc`/${r}/interactions/${e}`,o)}cancel(e,t={},o){const{api_version:r=this._client.apiVersion}=t??{};return this._client.post(Mc`/${r}/interactions/${e}/cancel`,o)}get(e,t={},o){var r;const l=t??{},{api_version:u=this._client.apiVersion}=l,d=lf(l,["api_version"]);return this._client.get(Mc`/${u}/interactions/${e}`,Object.assign(Object.assign({query:d},o),{stream:(r=t==null?void 0:t.stream)!==null&&r!==void 0?r:!1}))}}qA._key=Object.freeze(["interactions"]);class GA extends qA{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kU(n){let e=0;for(const r of n)e+=r.length;const t=new Uint8Array(e);let o=0;for(const r of n)t.set(r,o),o+=r.length;return t}let Dc;function Im(n){let e;return(Dc??(e=new globalThis.TextEncoder,Dc=e.encode.bind(e)))(n)}let Vc;function YE(n){let e;return(Vc??(e=new globalThis.TextDecoder,Vc=e.decode.bind(e)))(n)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xf{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Im(e):e;this.buffer=kU([this.buffer,t]);const o=[];let r;for(;(r=OU(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){o.push(YE(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const l=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,u=YE(this.buffer.subarray(0,l));o.push(u),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return o}flush(){return this.buffer.length?this.decode(`
`):[]}}xf.NEWLINE_CHARS=new Set([`
`,"\r"]);xf.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function OU(n,e){for(let r=e??0;r<n.length;r++){if(n[r]===10)return{preceding:r,index:r+1,carriage:!1};if(n[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function qU(n){for(let o=0;o<n.length-1;o++){if(n[o]===10&&n[o+1]===10||n[o]===13&&n[o+1]===13)return o+2;if(n[o]===13&&n[o+1]===10&&o+3<n.length&&n[o+2]===13&&n[o+3]===10)return o+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const uf={off:0,error:200,warn:300,info:400,debug:500},KE=(n,e,t)=>{if(n){if(vU(uf,n))return n;un(t).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(uf))}`)}};function Rl(){}function Pc(n,e,t){return!e||uf[n]>uf[t]?Rl:e[n].bind(e)}const GU={error:Rl,warn:Rl,info:Rl,debug:Rl};let QE=new WeakMap;function un(n){var e;const t=n.logger,o=(e=n.logLevel)!==null&&e!==void 0?e:"off";if(!t)return GU;const r=QE.get(t);if(r&&r[0]===o)return r[1];const l={error:Pc("error",t,o),warn:Pc("warn",t,o),info:Pc("info",t,o),debug:Pc("debug",t,o)};return QE.set(t,[o,l]),l}const Us=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,t])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zr{constructor(e,t,o){this.iterator=e,this.controller=t,this.client=o}static fromSSEResponse(e,t,o){let r=!1;const l=o?un(o):console;function u(){return ri(this,arguments,function*(){var g,m,_,T;if(r)throw new Jn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let E=!1;try{try{for(var R=!0,P=ai(BU(e,t)),B;B=yield Ce(P.next()),g=B.done,!g;R=!0){T=B.value,R=!1;const O=T;if(!E)if(O.data.startsWith("[DONE]")){E=!0;continue}else try{yield yield Ce(JSON.parse(O.data))}catch($){throw l.error("Could not parse message into JSON:",O.data),l.error("From chunk:",O.raw),$}}}catch(O){m={error:O}}finally{try{!R&&!g&&(_=P.return)&&(yield Ce(_.call(P)))}finally{if(m)throw m.error}}E=!0}catch(O){if(wp(O))return yield Ce(void 0);throw O}finally{E||t.abort()}})}return new zr(u,t,o)}static fromReadableStream(e,t,o){let r=!1;function l(){return ri(this,arguments,function*(){var g,m,_,T;const E=new xf,R=PA(e);try{for(var P=!0,B=ai(R),O;O=yield Ce(B.next()),g=O.done,!g;P=!0){T=O.value,P=!1;const $=T;for(const se of E.decode($))yield yield Ce(se)}}catch($){m={error:$}}finally{try{!P&&!g&&(_=B.return)&&(yield Ce(_.call(B)))}finally{if(m)throw m.error}}for(const $ of E.flush())yield yield Ce($)})}function u(){return ri(this,arguments,function*(){var g,m,_,T;if(r)throw new Jn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let E=!1;try{try{for(var R=!0,P=ai(l()),B;B=yield Ce(P.next()),g=B.done,!g;R=!0){T=B.value,R=!1;const O=T;E||O&&(yield yield Ce(JSON.parse(O)))}}catch(O){m={error:O}}finally{try{!R&&!g&&(_=P.return)&&(yield Ce(_.call(P)))}finally{if(m)throw m.error}}E=!0}catch(O){if(wp(O))return yield Ce(void 0);throw O}finally{E||t.abort()}})}return new zr(u,t,o)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],o=this.iterator(),r=l=>({next:()=>{if(l.length===0){const u=o.next();e.push(u),t.push(u)}return l.shift()}});return[new zr(()=>r(e),this.controller,this.client),new zr(()=>r(t),this.controller,this.client)]}toReadableStream(){const e=this;let t;return VA({async start(){t=e[Symbol.asyncIterator]()},async pull(o){try{const{value:r,done:l}=await t.next();if(l)return o.close();const u=Im(JSON.stringify(r)+`
`);o.enqueue(u)}catch(r){o.error(r)}},async cancel(){var o;await((o=t.return)===null||o===void 0?void 0:o.call(t))}})}}function BU(n,e){return ri(this,arguments,function*(){var o,r,l,u;if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Jn("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Jn("Attempted to iterate over a response with no body");const d=new HU,g=new xf,m=PA(n.body);try{for(var _=!0,T=ai(FU(m)),E;E=yield Ce(T.next()),o=E.done,!o;_=!0){u=E.value,_=!1;const R=u;for(const P of g.decode(R)){const B=d.decode(P);B&&(yield yield Ce(B))}}}catch(R){r={error:R}}finally{try{!_&&!o&&(l=T.return)&&(yield Ce(l.call(T)))}finally{if(r)throw r.error}}for(const R of g.flush()){const P=d.decode(R);P&&(yield yield Ce(P))}})}function FU(n){return ri(this,arguments,function*(){var t,o,r,l;let u=new Uint8Array;try{for(var d=!0,g=ai(n),m;m=yield Ce(g.next()),t=m.done,!t;d=!0){l=m.value,d=!1;const _=l;if(_==null)continue;const T=_ instanceof ArrayBuffer?new Uint8Array(_):typeof _=="string"?Im(_):_;let E=new Uint8Array(u.length+T.length);E.set(u),E.set(T,u.length),u=E;let R;for(;(R=qU(u))!==-1;)yield yield Ce(u.slice(0,R)),u=u.slice(R)}}catch(_){o={error:_}}finally{try{!d&&!t&&(r=g.return)&&(yield Ce(r.call(g)))}finally{if(o)throw o.error}}u.length>0&&(yield yield Ce(u))})}class HU{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const l={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],l}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,o,r]=zU(e,":");return r.startsWith(" ")&&(r=r.substring(1)),t==="event"?this.event=r:t==="data"&&this.data.push(r),null}}function zU(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function JU(n,e){const{response:t,requestLogID:o,retryOfRequestLogID:r,startTime:l}=e,u=await(async()=>{var d;if(e.options.stream)return un(n).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller,n):zr.fromSSEResponse(t,e.controller,n);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const g=t.headers.get("content-type"),m=(d=g==null?void 0:g.split(";")[0])===null||d===void 0?void 0:d.trim();return(m==null?void 0:m.includes("application/json"))||(m==null?void 0:m.endsWith("+json"))?t.headers.get("content-length")==="0"?void 0:await t.json():await t.text()})();return un(n).debug(`[${o}] response parsed`,Us({retryOfRequestLogID:r,url:t.url,status:t.status,body:u,durationMs:Date.now()-l})),u}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Rm extends Promise{constructor(e,t,o=JU){super(r=>{r(null)}),this.responsePromise=t,this.parseResponse=o,this.client=e}_thenUnwrap(e){return new Rm(this.client,this.responsePromise,async(t,o)=>e(await this.parseResponse(t,o),o))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const BA=Symbol("brand.privateNullableHeaders");function*YU(n){if(!n)return;if(BA in n){const{values:o,nulls:r}=n;yield*o.entries();for(const l of r)yield[l,null];return}let e=!1,t;n instanceof Headers?t=n.entries():FE(n)?t=n:(e=!0,t=Object.entries(n??{}));for(let o of t){const r=o[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const l=FE(o[1])?o[1]:[o[1]];let u=!1;for(const d of l)d!==void 0&&(e&&!u&&(u=!0,yield[r,null]),yield[r,d])}}const Tl=n=>{const e=new Headers,t=new Set;for(const o of n){const r=new Set;for(const[l,u]of YU(o)){const d=l.toLowerCase();r.has(d)||(e.delete(l),r.add(d)),u===null?(e.delete(l),t.add(d)):(e.append(l,u),t.delete(d))}}return{[BA]:!0,values:e,nulls:t}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Kh=n=>{var e,t,o,r,l,u;if(typeof globalThis.process<"u")return(o=(t=(e=pM)===null||e===void 0?void 0:e[n])===null||t===void 0?void 0:t.trim())!==null&&o!==void 0?o:void 0;if(typeof globalThis.Deno<"u")return(u=(l=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||l===void 0?void 0:l.call(r,n))===null||u===void 0?void 0:u.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var FA;class Mf{constructor(e){var t,o,r,l,u,d,g,{baseURL:m=Kh("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:_=(t=Kh("GEMINI_API_KEY"))!==null&&t!==void 0?t:null,apiVersion:T="v1beta"}=e,E=lf(e,["baseURL","apiKey","apiVersion"]);const R=Object.assign(Object.assign({apiKey:_,apiVersion:T},E),{baseURL:m||"https://generativelanguage.googleapis.com"});this.baseURL=R.baseURL,this.timeout=(o=R.timeout)!==null&&o!==void 0?o:Mf.DEFAULT_TIMEOUT,this.logger=(r=R.logger)!==null&&r!==void 0?r:console;const P="warn";this.logLevel=P,this.logLevel=(u=(l=KE(R.logLevel,"ClientOptions.logLevel",this))!==null&&l!==void 0?l:KE(Kh("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&u!==void 0?u:P,this.fetchOptions=R.fetchOptions,this.maxRetries=(d=R.maxRetries)!==null&&d!==void 0?d:2,this.fetch=(g=R.fetch)!==null&&g!==void 0?g:RU(),this.encoder=NU,this._options=R,this.apiKey=_,this.apiVersion=T,this.clientAdapter=R.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!t.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const t=Tl([e.headers]);if(!(t.values.has("authorization")||t.values.has("x-goog-api-key"))){if(this.apiKey)return Tl([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Tl([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([t,o])=>typeof o<"u").map(([t,o])=>{if(typeof o=="string"||typeof o=="number"||typeof o=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(o)}`;if(o===null)return`${encodeURIComponent(t)}=`;throw new Jn(`Cannot stringify type ${typeof o}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Fr}`}defaultIdempotencyKey(){return`stainless-node-retry-${dU()}`}makeStatusError(e,t,o,r){return fn.generate(e,t,o,r)}buildURL(e,t,o){const r=!this.baseURLOverridden()&&o||this.baseURL,l=pU(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),u=this.defaultQuery();return yU(u)||(t=Object.assign(Object.assign({},u),t)),typeof t=="object"&&t&&!Array.isArray(t)&&(l.search=this.stringifyQuery(t)),l.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const t=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${t}`}}async prepareRequest(e,{url:t,options:o}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,o){return this.request(Promise.resolve(o).then(r=>Object.assign({method:e,path:t},r)))}request(e,t=null){return new Rm(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,o){var r,l,u;const d=await e,g=(r=d.maxRetries)!==null&&r!==void 0?r:this.maxRetries;t==null&&(t=g),await this.prepareOptions(d);const{req:m,url:_,timeout:T}=await this.buildRequest(d,{retryCount:g-t});await this.prepareRequest(m,{url:_,options:d});const E="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),R=o===void 0?"":`, retryOf: ${o}`,P=Date.now();if(un(this).debug(`[${E}] sending request`,Us({retryOfRequestLogID:o,method:d.method,url:_,options:d,headers:m.headers})),!((l=d.signal)===null||l===void 0)&&l.aborted)throw new Np;const B=new AbortController,O=await this.fetchWithTimeout(_,m,T,B).catch(bp),$=Date.now();if(O instanceof globalThis.Error){const j=`retrying, ${t} attempts remaining`;if(!((u=d.signal)===null||u===void 0)&&u.aborted)throw new Np;const re=wp(O)||/timed? ?out/i.test(String(O)+("cause"in O?String(O.cause):""));if(t)return un(this).info(`[${E}] connection ${re?"timed out":"failed"} - ${j}`),un(this).debug(`[${E}] connection ${re?"timed out":"failed"} (${j})`,Us({retryOfRequestLogID:o,url:_,durationMs:$-P,message:O.message})),this.retryRequest(d,t,o??E);throw un(this).info(`[${E}] connection ${re?"timed out":"failed"} - error; no more retries left`),un(this).debug(`[${E}] connection ${re?"timed out":"failed"} (error; no more retries left)`,Us({retryOfRequestLogID:o,url:_,durationMs:$-P,message:O.message})),re?new CA:new Nf({cause:O})}const se=`[${E}${R}] ${m.method} ${_} ${O.ok?"succeeded":"failed"} with status ${O.status} in ${$-P}ms`;if(!O.ok){const j=await this.shouldRetry(O);if(t&&j){const N=`retrying, ${t} attempts remaining`;return await bU(O.body),un(this).info(`${se} - ${N}`),un(this).debug(`[${E}] response error (${N})`,Us({retryOfRequestLogID:o,url:O.url,status:O.status,headers:O.headers,durationMs:$-P})),this.retryRequest(d,t,o??E,O.headers)}const re=j?"error; no more retries left":"error; not retryable";un(this).info(`${se} - ${re}`);const W=await O.text().catch(N=>bp(N).message),de=EU(W),M=de?void 0:W;throw un(this).debug(`[${E}] response error (${re})`,Us({retryOfRequestLogID:o,url:O.url,status:O.status,headers:O.headers,message:M,durationMs:Date.now()-P})),this.makeStatusError(O.status,de,M,O.headers)}return un(this).info(se),un(this).debug(`[${E}] response start`,Us({retryOfRequestLogID:o,url:O.url,status:O.status,headers:O.headers,durationMs:$-P})),{response:O,options:d,controller:B,requestLogID:E,retryOfRequestLogID:o,startTime:P}}async fetchWithTimeout(e,t,o,r){const l=t||{},{signal:u,method:d}=l,g=lf(l,["signal","method"]),m=r.abort.bind(r);u&&u.addEventListener("abort",m,{once:!0});const _=setTimeout(m,o),T=globalThis.ReadableStream&&g.body instanceof globalThis.ReadableStream||typeof g.body=="object"&&g.body!==null&&Symbol.asyncIterator in g.body,E=Object.assign(Object.assign(Object.assign({signal:r.signal},T?{duplex:"half"}:{}),{method:"GET"}),g);d&&(E.method=d.toUpperCase());try{return await this.fetch.call(void 0,e,E)}finally{clearTimeout(_)}}async shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,o,r){var l;let u;const d=r==null?void 0:r.get("retry-after-ms");if(d){const m=parseFloat(d);Number.isNaN(m)||(u=m)}const g=r==null?void 0:r.get("retry-after");if(g&&!u){const m=parseFloat(g);Number.isNaN(m)?u=Date.parse(g)-Date.now():u=m*1e3}if(!(u&&0<=u&&u<60*1e3)){const m=(l=e.maxRetries)!==null&&l!==void 0?l:this.maxRetries;u=this.calculateDefaultRetryTimeoutMillis(t,m)}return await TU(u),this.makeRequest(e,t-1,o)}calculateDefaultRetryTimeoutMillis(e,t){const l=t-e,u=Math.min(.5*Math.pow(2,l),8),d=1-Math.random()*.25;return u*d*1e3}async buildRequest(e,{retryCount:t=0}={}){var o,r,l;const u=Object.assign({},e),{method:d,path:g,query:m,defaultBaseURL:_}=u,T=this.buildURL(g,m,_);"timeout"in u&&_U("timeout",u.timeout),u.timeout=(o=u.timeout)!==null&&o!==void 0?o:this.timeout;const{bodyHeaders:E,body:R}=this.buildBody({options:u}),P=await this.buildHeaders({options:e,method:d,bodyHeaders:E,retryCount:t});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:d,headers:P},u.signal&&{signal:u.signal}),globalThis.ReadableStream&&R instanceof globalThis.ReadableStream&&{duplex:"half"}),R&&{body:R}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(l=u.fetchOptions)!==null&&l!==void 0?l:{}),url:T,timeout:u.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:o,retryCount:r}){let l={};this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),l[this.idempotencyHeader]=e.idempotencyKey);const u=await this.authHeaders(e);let d=Tl([l,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),IU()),this._options.defaultHeaders,o,e.headers,u]);return this.validateHeaders(d),d.values}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const o=Tl([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&o.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:wU(e)}:this.encoder({body:e,headers:o})}}Mf.DEFAULT_TIMEOUT=6e4;class Ht extends Mf{constructor(){super(...arguments),this.interactions=new GA(this)}}FA=Ht;Ht.GeminiNextGenAPIClient=FA;Ht.GeminiNextGenAPIClientError=Jn;Ht.APIError=fn;Ht.APIConnectionError=Nf;Ht.APIConnectionTimeoutError=CA;Ht.APIUserAbortError=Np;Ht.NotFoundError=bA;Ht.ConflictError=NA;Ht.RateLimitError=MA;Ht.BadRequestError=IA;Ht.AuthenticationError=RA;Ht.InternalServerError=DA;Ht.PermissionDeniedError=wA;Ht.UnprocessableEntityError=xA;Ht.toFile=PU;Ht.Interactions=GA;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function KU(n,e){const t={},o=f(n,["name"]);return o!=null&&h(t,["_url","name"],o),t}function QU(n,e){const t={},o=f(n,["name"]);return o!=null&&h(t,["_url","name"],o),t}function $U(n,e){const t={},o=f(n,["sdkHttpResponse"]);return o!=null&&h(t,["sdkHttpResponse"],o),t}function XU(n,e){const t={},o=f(n,["sdkHttpResponse"]);return o!=null&&h(t,["sdkHttpResponse"],o),t}function WU(n,e,t){const o={};if(f(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=f(n,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&h(e,["displayName"],r),f(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=f(n,["epochCount"]);e!==void 0&&l!=null&&h(e,["tuningTask","hyperparameters","epochCount"],l);const u=f(n,["learningRateMultiplier"]);if(u!=null&&h(o,["tuningTask","hyperparameters","learningRateMultiplier"],u),f(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");if(f(n,["tuningMode"])!==void 0)throw new Error("tuningMode parameter is not supported in Gemini API.");if(f(n,["customBaseModel"])!==void 0)throw new Error("customBaseModel parameter is not supported in Gemini API.");const d=f(n,["batchSize"]);e!==void 0&&d!=null&&h(e,["tuningTask","hyperparameters","batchSize"],d);const g=f(n,["learningRate"]);if(e!==void 0&&g!=null&&h(e,["tuningTask","hyperparameters","learningRate"],g),f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(f(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");if(f(n,["baseTeacherModel"])!==void 0)throw new Error("baseTeacherModel parameter is not supported in Gemini API.");if(f(n,["tunedTeacherModelSource"])!==void 0)throw new Error("tunedTeacherModelSource parameter is not supported in Gemini API.");if(f(n,["sftLossWeightMultiplier"])!==void 0)throw new Error("sftLossWeightMultiplier parameter is not supported in Gemini API.");if(f(n,["outputUri"])!==void 0)throw new Error("outputUri parameter is not supported in Gemini API.");return o}function ZU(n,e,t){const o={};let r=f(t,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const W=f(n,["validationDataset"]);e!==void 0&&W!=null&&h(e,["supervisedTuningSpec"],Qh(W))}else if(r==="PREFERENCE_TUNING"){const W=f(n,["validationDataset"]);e!==void 0&&W!=null&&h(e,["preferenceOptimizationSpec"],Qh(W))}else if(r==="DISTILLATION"){const W=f(n,["validationDataset"]);e!==void 0&&W!=null&&h(e,["distillationSpec"],Qh(W))}const l=f(n,["tunedModelDisplayName"]);e!==void 0&&l!=null&&h(e,["tunedModelDisplayName"],l);const u=f(n,["description"]);e!==void 0&&u!=null&&h(e,["description"],u);let d=f(t,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const W=f(n,["epochCount"]);e!==void 0&&W!=null&&h(e,["supervisedTuningSpec","hyperParameters","epochCount"],W)}else if(d==="PREFERENCE_TUNING"){const W=f(n,["epochCount"]);e!==void 0&&W!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],W)}else if(d==="DISTILLATION"){const W=f(n,["epochCount"]);e!==void 0&&W!=null&&h(e,["distillationSpec","hyperParameters","epochCount"],W)}let g=f(t,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const W=f(n,["learningRateMultiplier"]);e!==void 0&&W!=null&&h(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],W)}else if(g==="PREFERENCE_TUNING"){const W=f(n,["learningRateMultiplier"]);e!==void 0&&W!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],W)}else if(g==="DISTILLATION"){const W=f(n,["learningRateMultiplier"]);e!==void 0&&W!=null&&h(e,["distillationSpec","hyperParameters","learningRateMultiplier"],W)}let m=f(t,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const W=f(n,["exportLastCheckpointOnly"]);e!==void 0&&W!=null&&h(e,["supervisedTuningSpec","exportLastCheckpointOnly"],W)}else if(m==="PREFERENCE_TUNING"){const W=f(n,["exportLastCheckpointOnly"]);e!==void 0&&W!=null&&h(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],W)}else if(m==="DISTILLATION"){const W=f(n,["exportLastCheckpointOnly"]);e!==void 0&&W!=null&&h(e,["distillationSpec","exportLastCheckpointOnly"],W)}let _=f(t,["config","method"]);if(_===void 0&&(_="SUPERVISED_FINE_TUNING"),_==="SUPERVISED_FINE_TUNING"){const W=f(n,["adapterSize"]);e!==void 0&&W!=null&&h(e,["supervisedTuningSpec","hyperParameters","adapterSize"],W)}else if(_==="PREFERENCE_TUNING"){const W=f(n,["adapterSize"]);e!==void 0&&W!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],W)}else if(_==="DISTILLATION"){const W=f(n,["adapterSize"]);e!==void 0&&W!=null&&h(e,["distillationSpec","hyperParameters","adapterSize"],W)}let T=f(t,["config","method"]);if(T===void 0&&(T="SUPERVISED_FINE_TUNING"),T==="SUPERVISED_FINE_TUNING"){const W=f(n,["tuningMode"]);e!==void 0&&W!=null&&h(e,["supervisedTuningSpec","tuningMode"],W)}const E=f(n,["customBaseModel"]);e!==void 0&&E!=null&&h(e,["customBaseModel"],E);let R=f(t,["config","method"]);if(R===void 0&&(R="SUPERVISED_FINE_TUNING"),R==="SUPERVISED_FINE_TUNING"){const W=f(n,["batchSize"]);e!==void 0&&W!=null&&h(e,["supervisedTuningSpec","hyperParameters","batchSize"],W)}let P=f(t,["config","method"]);if(P===void 0&&(P="SUPERVISED_FINE_TUNING"),P==="SUPERVISED_FINE_TUNING"){const W=f(n,["learningRate"]);e!==void 0&&W!=null&&h(e,["supervisedTuningSpec","hyperParameters","learningRate"],W)}const B=f(n,["labels"]);e!==void 0&&B!=null&&h(e,["labels"],B);const O=f(n,["beta"]);e!==void 0&&O!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","beta"],O);const $=f(n,["baseTeacherModel"]);e!==void 0&&$!=null&&h(e,["distillationSpec","baseTeacherModel"],$);const se=f(n,["tunedTeacherModelSource"]);e!==void 0&&se!=null&&h(e,["distillationSpec","tunedTeacherModelSource"],se);const j=f(n,["sftLossWeightMultiplier"]);e!==void 0&&j!=null&&h(e,["distillationSpec","hyperParameters","sftLossWeightMultiplier"],j);const re=f(n,["outputUri"]);return e!==void 0&&re!=null&&h(e,["outputUri"],re),o}function jU(n,e){const t={},o=f(n,["baseModel"]);o!=null&&h(t,["baseModel"],o);const r=f(n,["preTunedModel"]);r!=null&&h(t,["preTunedModel"],r);const l=f(n,["trainingDataset"]);l!=null&&cL(l);const u=f(n,["config"]);return u!=null&&WU(u,t),t}function eL(n,e){const t={},o=f(n,["baseModel"]);o!=null&&h(t,["baseModel"],o);const r=f(n,["preTunedModel"]);r!=null&&h(t,["preTunedModel"],r);const l=f(n,["trainingDataset"]);l!=null&&fL(l,t,e);const u=f(n,["config"]);return u!=null&&ZU(u,t,e),t}function tL(n,e){const t={},o=f(n,["name"]);return o!=null&&h(t,["_url","name"],o),t}function nL(n,e){const t={},o=f(n,["name"]);return o!=null&&h(t,["_url","name"],o),t}function iL(n,e,t){const o={},r=f(n,["pageSize"]);e!==void 0&&r!=null&&h(e,["_query","pageSize"],r);const l=f(n,["pageToken"]);e!==void 0&&l!=null&&h(e,["_query","pageToken"],l);const u=f(n,["filter"]);return e!==void 0&&u!=null&&h(e,["_query","filter"],u),o}function oL(n,e,t){const o={},r=f(n,["pageSize"]);e!==void 0&&r!=null&&h(e,["_query","pageSize"],r);const l=f(n,["pageToken"]);e!==void 0&&l!=null&&h(e,["_query","pageToken"],l);const u=f(n,["filter"]);return e!==void 0&&u!=null&&h(e,["_query","filter"],u),o}function sL(n,e){const t={},o=f(n,["config"]);return o!=null&&iL(o,t),t}function rL(n,e){const t={},o=f(n,["config"]);return o!=null&&oL(o,t),t}function aL(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&h(t,["sdkHttpResponse"],o);const r=f(n,["nextPageToken"]);r!=null&&h(t,["nextPageToken"],r);const l=f(n,["tunedModels"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(d=>HA(d))),h(t,["tuningJobs"],u)}return t}function lL(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&h(t,["sdkHttpResponse"],o);const r=f(n,["nextPageToken"]);r!=null&&h(t,["nextPageToken"],r);const l=f(n,["tuningJobs"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(d=>Dp(d))),h(t,["tuningJobs"],u)}return t}function uL(n,e){const t={},o=f(n,["name"]);o!=null&&h(t,["model"],o);const r=f(n,["name"]);return r!=null&&h(t,["endpoint"],r),t}function cL(n,e){const t={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const o=f(n,["examples"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>l)),h(t,["examples","examples"],r)}return t}function fL(n,e,t){const o={};let r=f(t,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const u=f(n,["gcsUri"]);e!==void 0&&u!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(r==="PREFERENCE_TUNING"){const u=f(n,["gcsUri"]);e!==void 0&&u!=null&&h(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}else if(r==="DISTILLATION"){const u=f(n,["gcsUri"]);e!==void 0&&u!=null&&h(e,["distillationSpec","promptDatasetUri"],u)}let l=f(t,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const u=f(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(l==="PREFERENCE_TUNING"){const u=f(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&h(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}else if(l==="DISTILLATION"){const u=f(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&h(e,["distillationSpec","promptDatasetUri"],u)}if(f(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return o}function HA(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&h(t,["sdkHttpResponse"],o);const r=f(n,["name"]);r!=null&&h(t,["name"],r);const l=f(n,["state"]);l!=null&&h(t,["state"],sA(l));const u=f(n,["createTime"]);u!=null&&h(t,["createTime"],u);const d=f(n,["tuningTask","startTime"]);d!=null&&h(t,["startTime"],d);const g=f(n,["tuningTask","completeTime"]);g!=null&&h(t,["endTime"],g);const m=f(n,["updateTime"]);m!=null&&h(t,["updateTime"],m);const _=f(n,["description"]);_!=null&&h(t,["description"],_);const T=f(n,["baseModel"]);T!=null&&h(t,["baseModel"],T);const E=f(n,["_self"]);return E!=null&&h(t,["tunedModel"],uL(E)),t}function Dp(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&h(t,["sdkHttpResponse"],o);const r=f(n,["name"]);r!=null&&h(t,["name"],r);const l=f(n,["state"]);l!=null&&h(t,["state"],sA(l));const u=f(n,["createTime"]);u!=null&&h(t,["createTime"],u);const d=f(n,["startTime"]);d!=null&&h(t,["startTime"],d);const g=f(n,["endTime"]);g!=null&&h(t,["endTime"],g);const m=f(n,["updateTime"]);m!=null&&h(t,["updateTime"],m);const _=f(n,["error"]);_!=null&&h(t,["error"],_);const T=f(n,["description"]);T!=null&&h(t,["description"],T);const E=f(n,["baseModel"]);E!=null&&h(t,["baseModel"],E);const R=f(n,["tunedModel"]);R!=null&&h(t,["tunedModel"],R);const P=f(n,["preTunedModel"]);P!=null&&h(t,["preTunedModel"],P);const B=f(n,["supervisedTuningSpec"]);B!=null&&h(t,["supervisedTuningSpec"],B);const O=f(n,["preferenceOptimizationSpec"]);O!=null&&h(t,["preferenceOptimizationSpec"],O);const $=f(n,["distillationSpec"]);$!=null&&h(t,["distillationSpec"],$);const se=f(n,["tuningDataStats"]);se!=null&&h(t,["tuningDataStats"],se);const j=f(n,["encryptionSpec"]);j!=null&&h(t,["encryptionSpec"],j);const re=f(n,["partnerModelTuningSpec"]);re!=null&&h(t,["partnerModelTuningSpec"],re);const W=f(n,["customBaseModel"]);W!=null&&h(t,["customBaseModel"],W);const de=f(n,["experiment"]);de!=null&&h(t,["experiment"],de);const M=f(n,["labels"]);M!=null&&h(t,["labels"],M);const x=f(n,["outputUri"]);x!=null&&h(t,["outputUri"],x);const N=f(n,["pipelineJob"]);N!=null&&h(t,["pipelineJob"],N);const L=f(n,["serviceAccount"]);L!=null&&h(t,["serviceAccount"],L);const U=f(n,["tunedModelDisplayName"]);U!=null&&h(t,["tunedModelDisplayName"],U);const G=f(n,["veoTuningSpec"]);return G!=null&&h(t,["veoTuningSpec"],G),t}function dL(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&h(t,["sdkHttpResponse"],o);const r=f(n,["name"]);r!=null&&h(t,["name"],r);const l=f(n,["metadata"]);l!=null&&h(t,["metadata"],l);const u=f(n,["done"]);u!=null&&h(t,["done"],u);const d=f(n,["error"]);return d!=null&&h(t,["error"],d),t}function Qh(n,e){const t={},o=f(n,["gcsUri"]);o!=null&&h(t,["validationDatasetUri"],o);const r=f(n,["vertexDatasetResource"]);return r!=null&&h(t,["validationDatasetUri"],r),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hL extends lo{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Ks(ao.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(t),t),this.get=async t=>await this.getInternal(t),this.tune=async t=>{var o;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const r={tunedModelName:t.baseModel};!((o=t.config)===null||o===void 0)&&o.preTunedModelCheckpointId&&(r.checkpointId=t.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},t),{preTunedModel:r});return l.baseModel=void 0,await this.tuneInternal(l)}else{const r=Object.assign({},t);return await this.tuneInternal(r)}else{const r=Object.assign({},t),l=await this.tuneMldevInternal(r);let u="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?u=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(u=l.name.split("/operations/")[0]),{name:u,state:_p.JOB_STATE_QUEUED}}}}async getInternal(e){var t,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=nL(e);return d=fe("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>Dp(_))}else{const m=tL(e);return d=fe("{name}",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>HA(_))}}async listInternal(e){var t,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=rL(e);return d=fe("tuningJobs",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=lL(_),E=new TE;return Object.assign(E,T),E})}else{const m=sL(e);return d=fe("tunedModels",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=aL(_),E=new TE;return Object.assign(E,T),E})}}async cancel(e){var t,o,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const m=QU(e);return d=fe("{name}:cancel",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=XU(_),E=new SE;return Object.assign(E,T),E})}else{const m=KU(e);return d=fe("{name}:cancel",m._url),g=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=$U(_),E=new SE;return Object.assign(E,T),E})}}async tuneInternal(e){var t,o;let r,l="",u={};if(this.apiClient.isVertexAI()){const d=eL(e,e);return l=fe("tuningJobs",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(m=>{const _=m;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>Dp(g))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,o;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=jU(e);return l=fe("tunedModels",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(m=>{const _=m;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>dL(g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pL{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const mL=1024*1024*8,gL=3,yL=1e3,vL=2,cf="x-goog-upload-status";async function _L(n,e,t){var o;const r=await zA(n,e,t),l=await(r==null?void 0:r.json());if(((o=r==null?void 0:r.headers)===null||o===void 0?void 0:o[cf])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function EL(n,e,t){var o;const r=await zA(n,e,t),l=await(r==null?void 0:r.json());if(((o=r==null?void 0:r.headers)===null||o===void 0?void 0:o[cf])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=jS(l),d=new _m;return Object.assign(d,u),d}async function zA(n,e,t){var o,r;let l=0,u=0,d=new Tp(new Response),g="upload";for(l=n.size;u<l;){const m=Math.min(mL,l-u),_=n.slice(u,u+m);u+m>=l&&(g+=", finalize");let T=0,E=yL;for(;T<gL&&(d=await t.request({path:"",body:_,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":String(u),"Content-Length":String(m)}}}),!(!((o=d==null?void 0:d.headers)===null||o===void 0)&&o[cf]));)T++,await SL(E),E=E*vL;if(u+=m,((r=d==null?void 0:d.headers)===null||r===void 0?void 0:r[cf])!=="active")break;if(l<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return d}async function TL(n){return{size:n.size,type:n.type}}function SL(n){return new Promise(e=>setTimeout(e,n))}class AL{async upload(e,t,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await _L(e,t,o)}async uploadToFileSearchStore(e,t,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await EL(e,t,o)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await TL(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class CL{create(e,t,o){return new IL(e,t,o)}}class IL{constructor(e,t,o){this.url=e,this.headers=t,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $E="x-goog-api-key";class RL{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get($E)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append($E,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const wL="gl-node/";class bL{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const t=new Ht({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=t.interactions,this._interactions}constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const o=vM(e.httpOptions,e.vertexai,void 0,void 0);o&&(e.httpOptions?e.httpOptions.baseUrl=o:e.httpOptions={baseUrl:o}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const r=new RL(this.apiKey);this.apiClient=new T4({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:wL+"web",uploader:new AL,downloader:new pL}),this.models=new G4(this.apiClient),this.live=new P4(this.apiClient,r,new CL),this.batches=new QD(this.apiClient),this.chats=new N2(this.models,this.apiClient),this.caches=new R2(this.apiClient),this.files=new B2(this.apiClient),this.operations=new B4(this.apiClient),this.authTokens=new iU(this.apiClient),this.tunings=new hL(this.apiClient),this.fileSearchStores=new fU(this.apiClient)}}async function NL(n){var t;const e=new bL({apiKey:"PLACEHOLDER_API_KEY"});try{const r=(t=(await e.models.generateContent({model:"gemini-3-flash-preview",contents:`Analitza la segent descripci d'un incident i classifica'l segons el protocol LOPIVI. 
      Descripci: "${n}"`,config:{systemInstruction:"Ets un expert en protecci de menors (Delegat de Protecci). Analitza la descripci i suggereix quins tipus de violncia s'identifiquen i quina seria la gravetat inicial segons el protocol (Lleu/Greu). Respon en format JSON.",responseMimeType:"application/json",responseSchema:{type:cn.OBJECT,properties:{suggestedTypes:{type:cn.ARRAY,items:{type:cn.STRING},description:"Tipus de violncia detectats (Fsica, Psicolgica, Sexual, etc.)"},severity:{type:cn.STRING,description:"Gravetat suggerida: Lleu o Greu"},reasoning:{type:cn.STRING,description:"Breu explicaci de l'anlisi"},immediateActions:{type:cn.ARRAY,items:{type:cn.STRING},description:"Accions immediates recomanades"}},required:["suggestedTypes","severity","reasoning"]}}})).text)==null?void 0:t.trim();return r?JSON.parse(r):(console.warn("Gemini returned an empty response."),null)}catch(o){return console.error("Error analyzing incident with Gemini:",o),null}}const xL="service_q9av1w9",ML="template_we1723c",DL="nnpheQb2O-_FCqSRa",VL="https://github.com/handbolmolins/URLimagenes/blob/main/MOLINS%20COLOR.png?raw=true",PL=()=>{const[n,e]=ut.useState("home"),[t,o]=ut.useState(!1),[r,l]=ut.useState(!1),[u,d]=ut.useState(""),[g,m]=ut.useState(!1),[_,T]=ut.useState(!1),[E,R]=ut.useState([]),[P,B]=ut.useState(null),[O,$]=ut.useState(!1),[se,j]=ut.useState("connected"),[re,W]=ut.useState(""),[de,M]=ut.useState(!1);ut.useEffect(()=>{x();const ae=setInterval(()=>{t&&n==="dashboard"&&N()},12e4);return()=>clearInterval(ae)},[t,n]);const x=async()=>{j("syncing");const[ae,be]=await Promise.all([Vs.fetchAll(),Vs.fetchSettings()]);R(ae),B(be),j("connected")},N=async()=>{$(!0),j("syncing");try{const ae=await Vs.fetchAll();R(ae),j("connected")}catch{j("error")}finally{$(!1)}},L=()=>{t?e("dashboard"):l(!0)},U=async ae=>{T(!0);try{const be=await NL(ae.facts.description);be&&(ae.aiAnalysis=be);const X={from_name:"CANAL DE DENNCIES - CH MOLINS",expedient_id:ae.id,data_hora:new Date(ae.createdAt).toLocaleString(),informant_nom:ae.informant.isAnonymous?"ANNIM":ae.informant.name,informant_dni:ae.informant.dni||"N/A",informant_contacte:`${ae.informant.email||"N/A"} / ${ae.informant.phone||"N/A"}`,victima_nom:ae.victim.name,victima_edat:ae.victim.age,victima_genere:ae.victim.gender,victima_categoria:ae.victim.category,denunciat_nom:ae.involved.accusedName||"No identificat",denunciat_rol:ae.involved.accusedRelation||"No especificat",lloc:ae.facts.location,tipus_violencia:ae.facts.violenceType.join(", "),recurrent:ae.facts.isRecurring?"S":"NO",descripcio:ae.facts.description,testimonis:ae.facts.witnesses||"Cap indicat"};await YR.send(xL,ML,X,DL),await Vs.appendReport(ae),R([ae,...E]),T(!1),e("home"),alert(`Expedient #${ae.id} enviat i registrat correctament.`)}catch{T(!1),alert("Error en l'enviament. La denncia s'ha guardat per l'email podria haver fallat.")}},G=async ae=>{if(ae.preventDefault(),re.length<4){alert("El PIN ha de tenir almenys 4 carcters.");return}M(!0);const be={adminPin:re,lastUpdated:new Date().toISOString()};await Vs.saveSettings(be)?(B(be),alert("PIN actualitzat correctament al nvol per a tots els administradors."),W(""),e("dashboard")):alert("Error en desar el nou PIN."),M(!1)},D=ae=>{ae.preventDefault();const be=(P==null?void 0:P.adminPin)||"handbolmolins1944";u===be?(o(!0),l(!1),e("dashboard"),m(!1),d("")):(m(!0),d(""))};return w.jsxs("div",{className:"min-h-screen bg-slate-50 flex flex-col",children:[w.jsx("header",{className:"bg-white border-b border-slate-200 sticky top-0 z-50 shadow-sm no-print",children:w.jsxs("div",{className:"max-w-7xl mx-auto px-4 h-20 flex items-center justify-between",children:[w.jsxs("div",{className:"flex items-center gap-3 cursor-pointer group",onClick:()=>e("home"),children:[w.jsx("div",{className:"h-14 w-14 flex items-center justify-center overflow-hidden transition-transform group-hover:scale-105",children:w.jsx("img",{src:VL,alt:"Logo Handbol Molins",className:"h-full w-full object-contain"})}),w.jsxs("div",{className:"hidden sm:block",children:[w.jsx("h1",{className:"font-black text-slate-900 leading-tight text-xl tracking-tight uppercase",children:"Canal de Denncies"}),w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("p",{className:"text-[10px] text-slate-500 uppercase tracking-widest font-bold",children:"Protocol LOPIVI  CH Molins"}),se==="connected"&&w.jsx(ZI,{className:"w-3 h-3 text-green-500"}),se==="syncing"&&w.jsx(r_,{className:"w-3 h-3 text-blue-500 animate-spin"})]})]})]}),w.jsxs("nav",{className:"flex items-center gap-4 md:gap-6",children:[w.jsxs("button",{onClick:()=>e("info"),className:`hidden md:flex items-center gap-2 text-sm font-semibold transition-colors ${n==="info"?"text-amber-600":"text-slate-600 hover:text-slate-900"}`,children:[w.jsx(rR,{className:"w-4 h-4"})," Protocol"]}),w.jsxs("button",{onClick:L,className:`flex items-center gap-2 text-sm font-semibold transition-colors ${n==="dashboard"||n==="settings"?"text-blue-600":"text-slate-600 hover:text-slate-900"}`,children:[t?w.jsx(cR,{className:"w-4 h-4"}):w.jsx(pR,{className:"w-4 h-4"})," Gesti"]}),t&&w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("button",{onClick:()=>e("settings"),className:`p-2 rounded-lg transition-colors ${n==="settings"?"bg-slate-100 text-blue-600":"text-slate-400 hover:text-slate-900"}`,children:w.jsx(AR,{className:"w-5 h-5"})}),w.jsx("button",{onClick:()=>{o(!1),e("home")},className:"text-red-500 p-2",children:w.jsx(gR,{className:"w-5 h-5"})})]}),w.jsxs("button",{onClick:()=>e("report"),className:"bg-amber-500 hover:bg-amber-600 text-white px-5 py-2.5 rounded-full text-sm font-bold shadow-md transition-all flex items-center gap-2",children:[w.jsx(YI,{className:"w-4 h-4"})," Nova Denncia"]})]})]})}),r&&w.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/80 backdrop-blur-md",children:w.jsxs("div",{className:"bg-white w-full max-w-md rounded-[2.5rem] p-8 shadow-2xl",children:[w.jsxs("div",{className:"text-center mb-8",children:[w.jsx(IR,{className:"w-12 h-12 text-blue-500 mx-auto mb-4"}),w.jsx("h3",{className:"text-2xl font-black",children:"Accs Administrador"}),w.jsx("p",{className:"text-slate-500 text-sm",children:"Introdueix la clau compartida del club."})]}),w.jsxs("form",{onSubmit:D,className:"space-y-6",children:[w.jsx("input",{type:"password",value:u,onChange:ae=>d(ae.target.value),placeholder:"Clau d'accs",className:`w-full text-center text-2xl p-4 bg-slate-50 border-2 rounded-2xl outline-none ${g?"border-red-500 animate-shake":"border-slate-200 focus:border-blue-500"}`}),w.jsx("button",{type:"submit",className:"w-full bg-slate-900 text-white py-4 rounded-2xl font-black text-lg shadow-xl",children:"Accedir al Sistema"}),w.jsx("button",{type:"button",onClick:()=>l(!1),className:"w-full text-slate-400 font-bold text-xs uppercase tracking-widest mt-2",children:"Tornar"})]})]})}),w.jsxs("main",{className:"flex-1 max-w-7xl mx-auto w-full p-4 md:p-8",children:[n==="home"&&w.jsxs("div",{className:"text-center space-y-8 py-12",children:[w.jsxs("div",{className:"relative inline-block",children:[w.jsx("div",{className:"absolute inset-0 bg-amber-500 blur-3xl opacity-10 rounded-full"}),w.jsx("h2",{className:"text-4xl md:text-6xl font-black text-slate-900 relative",children:"Protegir s responsabilitat de tots."})]}),w.jsx("p",{className:"text-xl text-slate-600 max-w-2xl mx-auto leading-relaxed",children:"Canal de denncia segur i confidencial per a la protecci integral a la infncia i adolescncia."}),w.jsx("div",{className:"flex justify-center gap-4",children:w.jsxs("button",{onClick:()=>e("report"),className:"bg-blue-600 hover:bg-blue-700 text-white px-10 py-5 rounded-2xl text-lg font-black shadow-xl transition-all hover:-translate-y-1",children:[w.jsx(Pp,{className:"w-6 h-6"})," Informar d'un incident"]})})]}),n==="report"&&w.jsx(WR,{onCancel:()=>e("home"),onSubmit:U}),n==="dashboard"&&t&&w.jsxs("div",{className:"space-y-4",children:[w.jsx("div",{className:"flex justify-end no-print",children:w.jsxs("button",{onClick:N,className:"flex items-center gap-2 text-xs font-bold text-slate-500 hover:text-slate-900",children:[w.jsx(r_,{className:`w-3 h-3 ${O?"animate-spin":""}`})," Sincronitzar Ara"]})}),w.jsx(ZR,{reports:E,onDeleteReport:async ae=>{const be=E.filter(X=>X.id!==ae);R(be),await Vs.saveAll(be)},onUpdateStatus:async(ae,be)=>{const X=E.map(le=>le.id===ae?{...le,status:be}:le);R(X),await Vs.saveAll(X)}})]}),n==="settings"&&t&&w.jsx("div",{className:"max-w-2xl mx-auto animate-in fade-in slide-in-from-bottom-4",children:w.jsxs("div",{className:"bg-white rounded-[2.5rem] p-12 border shadow-sm",children:[w.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[w.jsx("div",{className:"p-3 bg-blue-50 text-blue-600 rounded-2xl",children:w.jsx(lR,{className:"w-8 h-8"})}),w.jsxs("div",{children:[w.jsx("h3",{className:"text-2xl font-black text-slate-900",children:"Configuraci del Sistema"}),w.jsx("p",{className:"text-slate-500 text-sm",children:"Canvia la clau d'accs compartida del club."})]})]}),w.jsxs("form",{onSubmit:G,className:"space-y-6",children:[w.jsxs("div",{className:"space-y-2",children:[w.jsx("label",{className:"text-[10px] font-black uppercase text-slate-400 ml-2",children:"Nova Clau d'Accs"}),w.jsx("input",{type:"text",value:re,onChange:ae=>W(ae.target.value),placeholder:"Escriu la nova clau...",className:"w-full p-4 bg-slate-50 border rounded-2xl outline-none focus:ring-2 focus:ring-blue-500 font-bold"}),w.jsx("p",{className:"text-[10px] text-slate-400 italic px-2",children:"Aquest canvi afectar a tots els administradors en temps real."})]}),w.jsxs("div",{className:"flex gap-4 pt-4",children:[w.jsx("button",{type:"button",onClick:()=>e("dashboard"),className:"flex-1 py-4 border rounded-2xl font-bold text-slate-500",children:"Cancellar"}),w.jsx("button",{type:"submit",disabled:de,className:"flex-2 bg-blue-600 text-white px-8 py-4 rounded-2xl font-black shadow-lg shadow-blue-100 flex items-center justify-center gap-2",children:de?w.jsx(dR,{className:"w-5 h-5 animate-spin"}):"Actualitzar Clau"})]})]})]})}),n==="info"&&w.jsx(ew,{})]}),w.jsxs("footer",{className:"bg-slate-950 text-slate-400 py-8 px-4 mt-auto no-print text-center text-[10px] font-bold uppercase tracking-[0.2em]",children:[" ",new Date().getFullYear()," Club Handbol Molins de Rei  Sistema de Gesti Compartit"]})]})},JA=document.getElementById("root");if(!JA)throw new Error("Could not find root element to mount to");const UL=VI.createRoot(JA);UL.render(w.jsx(II.StrictMode,{children:w.jsx(PL,{})}));
